tiooyativikedmoefopmlgecpafebqnetsisiiwi length 5 32918 page 32918 <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Installation :: GBIF IPT User Manual</title>
    <link rel="prev" href="requirements">
    <link rel="next" href="tomcat-installation-linux">
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/manual/en">
        <svg class="logo" viewBox="90 239.1 539.7 523.9" xmlns="http://www.w3.org/2000/svg">
            <path class="gbif-logo-svg" d="M325.5,495.4c0-89.7,43.8-167.4,174.2-167.4C499.6,417.9,440.5,495.4,325.5,495.4"></path>
            <path class="gbif-logo-svg" d="M534.3,731c24.4,0,43.2-3.5,62.4-10.5c0-71-42.4-121.8-117.2-158.4c-57.2-28.7-127.7-43.6-192.1-43.6c28.2-84.6,7.6-189.7-19.7-247.4c-30.3,60.4-49.2,164-20.1,248.3c-57.1,4.2-102.4,29.1-121.6,61.9c-1.4,2.5-4.4,7.8-2.6,8.8c1.4,0.7,3.6-1.5,4.9-2.7c20.6-19.1,47.9-28.4,74.2-28.4c60.7,0,103.4,50.3,133.7,80.5C401.3,704.3,464.8,731.2,534.3,731"></path>
        </svg>
        <div  class="nav-brand__name-area">
          <span>GBIF IPT User Manual</span>
        </div>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>


    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
          <!--div class="navbar-end">
  <div class="navbar-item has-dropdown is-hoverable">
    <a class="navbar-link" href="">Documentation</a>
    <div class="navbar-dropdown">
      <a class="navbar-item" href="/manual/en/">Menu</a>
    </div>
  </div>
</div-->
      </div>

      <div class="navbar-end">
        
        <div class="navbar-item search hide-for-print">
          <div id="search-field" class="field">
            <input id="search-input" type="text" placeholder="Search docs">
          </div>
        </div>
        

        <div class="navbar-item has-dropdown is-hoverable">
  <!-- Current: en -->
  <a class="navbar-link" href="en">
    <svg class="navbar-languages" fill="#fcfcfc" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="none"/>
      <path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/>
    </svg>
  </a>
  <div class="navbar-dropdown">
    <a class="navbar-item" href="../../../en/ipt/latest/installation">English</a>
    <a class="navbar-item" href="../../../es/ipt/latest/installation">español</a>
    <a class="navbar-item" href="../../../ja/ipt/latest/installation">日本語</a>
    <a class="navbar-item" href="../../../zh/ipt/latest/installation">繁體中文</a>
  </div>
</div>
        <div class="navbar-item has-dropdown is-hoverable">
  <a class="navbar-link">
    <svg class="navbar-feedback" fill="#fcfcfc" height="24" viewBox="0 0 100 100" width="24" xmlns="http://www.w3.org/2000/svg" >
      <path d="M15.5,15.498h69v51.754H67.253v17.25L50,67.252H15.5V15.498z"/>
    </svg>
  </a>
  <div class="navbar-dropdown">
    <a class="navbar-item" href="https://github.com/gbif/ipt/issues/new?labels=Feedback&body=Feedback+on+[Installation](https://ipt.gbif.org/manual/en/ipt/latest/installation) ([Github source for this page](../blob/master/docs/en/modules/ROOT/pages/installation.adoc))%0A%0AWrite+your+feedback+here.">Leave feedback on GitHub</a>
    <a class="navbar-item" href="mailto:helpdesk@gbif.org?subject=Feedback on IPT documentation 'Installation'&body=Feedback on https://ipt.gbif.org/manual/en/ipt/latest/installation">Send feedback by email</a>
    <a class="navbar-item" href="https://github.com/gbif/ipt/edit/master/docs/en/modules/ROOT/pages/installation.adoc">Edit this page on GitHub</a>
      </div>
</div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ipt" data-version="3.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="./">Integrated Publishing Toolkit</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="introduction">How to Use this Manual</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="getting-started">Getting Started – Installation and Initial Setup</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="requirements">Requirements</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="installation">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="tomcat-installation-linux">Install Tomcat on Linux</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="tomcat-installation-windows">Install Tomcat 8 on Windows</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="initial-setup">Initial Setup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="overview">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="home">Home Menu</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="manage-resources">Manage Resources Menu</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="administration">Administration Menu</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="about">About Menu</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="releases">Releases</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="release-notes">Release Notes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="how-to-publish">How to publish biodiversity data through GBIF.org</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="resource-metadata">Resource Metadata</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="checklist-data">Checklist Data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="occurrence-data">Occurrence Data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sampling-event-data">Sampling Event Data</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Best Practice Guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="gbif-metadata-profile">Resource metadata</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="best-practices-checklists">Checklist Data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Occurrence Data (pending)</span>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="best-practices-sampling-event-data">Sampling Event Data</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="faq">FAQ</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Contributing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="translations">Translations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="developer-guide">Development</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Customization</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="customization">How to Style Your IPT</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="database-connection">Supported Databases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="core">Adding a new core</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="license">Adding a new License</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="user-id">Adding a New User ID Directory</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="versioning">Dataset Versioning Policy</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="citation">Dataset Citation Format</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="datacite-mappings">DataCite to EML mappings</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="doi-workflow">DOI Workflows</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="applying-license">Applying a License to a Dataset</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="darwin-core">Darwin Core</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="dwca-guide">Darwin Core Archives – How-to Guide</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="data-preparation">Data Preparation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="data-quality-checklist">Data Quality Checklist</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="colophon">Colophon</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="resources">Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="glossary">Glossary</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="./" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="./">Integrated Publishing Toolkit</a></li>
    <li><a href="getting-started">Getting Started – Installation and Initial Setup</a></li>
    <li><a href="installation">Installation</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Installation</h1>
<div class="sect1">
<h2 id="data-directory"><a class="anchor" href="#data-directory"></a>Data directory</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The IPT stores configuration, resources, users and logs in its data directory.  This can be set during installation, or the first time the IPT is run.</p>
</div>
<div class="paragraph">
<p>A typical location on Linux is <code>/var/lib/ipt</code> (installed from packages) or <code>/srv/ipt</code> (running in Tomcat).  On Windows, <code>C:\ipt-data</code> is appropriate.  The IPT must have write permission to the chosen location, see the <a href="faq#file-permissions" class="xref page">FAQ entry</a> if you have problems.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Do not select a data directory that is vulnerable to inadvertent changes or removal. Do not use <code>/tmp</code>, for example, on systems where this folder may be emptied on a system restart.</p>
</div>
<div class="paragraph">
<p><strong>The data directory should be backed up regularly in keeping with an appropriate disaster recovery plan.</strong></p>
</div>
<div class="paragraph">
<p>Loss of the contents of the data directory will result in the loss of resource, user, and other configuration information and customizations to the IPT installation.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you have a data directory from a previously running IPT of the same version and want to use that previous configuration (including users and resources), you can enter the absolute path of that data directory below, or during the first step of the IPT setup.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installation-method"><a class="anchor" href="#installation-method"></a>Installation method</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are several ways to install the IPT.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Users of <strong>Red Hat</strong>, <strong>CentOS</strong>, <strong>Debian</strong>, <strong>Ubuntu</strong> or similar may install directly from <a href="#installation-from-linux-packages">Linux packages</a>.  This is the simplest method for the typical installation of a single IPT on a single server, and is also the easiest method to keep updated.</p>
</li>
<li>
<p>Other <strong>Linux</strong> users, all <strong>MS Windows</strong> users, and those who wish to run multiple IPTs on the same server should instead look at the section on <a href="#installation-within-a-servlet-container">Installation within a servlet container</a>.</p>
</li>
<li>
<p><strong>Docker</strong> images are also available, see <a href="#installation-using-docker">Installation using Docker</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installation-from-linux-packages"><a class="anchor" href="#installation-from-linux-packages"></a>Installation from Linux packages</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="rpm-red-hat-centos-etc"><a class="anchor" href="#rpm-red-hat-centos-etc"></a>RPM (Red Hat, CentOS etc)</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Packages for Red Hat 8/9, CentOS 8/9 Stream, Rocky Linux 8/9 or similar are being developed.  Please see <a href="https://github.com/gbif/ipt/issues/1646">this issue</a> if you can help with testing.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To install the IPT onto Red Hat 8–9, CentOS 8–9 or similar, first add the GBIF package repository and install the IPT package:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">yum install yum-utils
yum-config-manager --add-repo https://packages.gbif.org/gbif.repo
yum install ipt</code></pre>
</div>
</div>
<div class="paragraph">
<p>Optionally, edit <code>/etc/sysconfig/ipt</code> to change the default data directory and port.  Finally:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">systemctl enable ipt
systemctl start ipt</code></pre>
</div>
</div>
<div class="paragraph">
<p>The IPT starts up on port 8080 (unless this was changed above).  Initial logs are visible with <code>journalctl -u ipt</code>, but are then logged in the data directory.  Make sure to <strong>back up the IPT data directory</strong>, which is <code>/var/lib/ipt</code> by default.</p>
</div>
<div class="paragraph">
<p>Successful installation of the IPT packages will make the IPT accessible through a web browser at a URL determined by the server&#8217;s name and port (e.g., <a href="http://server.example.org:8080" class="bare">http://server.example.org:8080</a>). If the installation was successful, the initial IPT setup page will appear in a web browser using the IPT&#8217;s URL.</p>
</div>
<div class="paragraph">
<p>Then continue to <a href="#opening-the-ipt-to-the-internet">Opening the IPT to the Internet</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="apt-debian-ubuntu-etc"><a class="anchor" href="#apt-debian-ubuntu-etc"></a>APT (Debian, Ubuntu etc)</h3>
<div class="paragraph">
<p>Please refer to <a href="https://github.com/gbif/ipt/pull/1470">"Debian packaging"</a> on GitHub.  This is a contribution from GBIF Spain, and not yet supported by the IPT developers.</p>
</div>
<div class="paragraph">
<p>Then continue to <a href="#opening-the-ipt-to-the-internet">Opening the IPT to the Internet</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installation-within-a-servlet-container"><a class="anchor" href="#installation-within-a-servlet-container"></a>Installation within a servlet container</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Installing the IPT within a servlet container consists of deploying the IPT <code>.war</code> file in a servlet container such as Tomcat.</p>
</div>
<div class="paragraph">
<p>This section explains how to install different types of servlet containers on your server, and how to deploy the IPT within them.</p>
</div>
<div class="paragraph">
<p>It isn&#8217;t necessary to use an reverse proxy, but in case you do, the following section explains how to configure an Apache HTTPD virtual host declaration for the IPT.</p>
</div>
<div class="paragraph">
<p>The most common servlet containers used to deploy the IPT are Tomcat, Jetty and Wildfly.  The servlet container must support Servlet Specification 4.0 or later.</p>
</div>
<div class="sect2">
<h3 id="tomcat"><a class="anchor" href="#tomcat"></a>Tomcat</h3>
<div class="paragraph">
<p>The IPT has been tested and works well with recent releases of Tomcat 8 and 9.  Tomcat 10 and later versions are currently not supported. Minimum supported version is 8. The Apache Tomcat documentation can be found on <a href="https://tomcat.apache.org/" class="bare">https://tomcat.apache.org/</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install Tomcat — see our guide for <a href="tomcat-installation-linux" class="xref page">installing Tomcat on Linux</a> or <a href="tomcat-installation-windows" class="xref page">Windows</a>, or refer to the Tomcat documentation.</p>
</li>
<li>
<p>Configure the IPT data directory within Tomcat</p>
<div class="openblock">
<div class="content">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This step is optional, but is recommended to improve security and simplify the upgrade procedure.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Locate the Tomcat configuration directory (usually <code>/etc/tomcat</code> or <code>/etc/tomcat9</code> on Linux, <code>C:\Program Files\Apache Software Foundation\Tomcat X.Y\conf</code> on Windows), and create a file <code>Catalina/localhost/ipt.xml</code> (described in the <a href="https://tomcat.apache.org/tomcat-9.0-doc/config/context.html#Defining_a_context">Tomcat documentation "Defining a context"</a>).   For example, on a typical CentOS Linux installation, the file would be <code>/etc/tomcat/Catalina/localhost/ipt.xml</code>. The file should be readable by the Tomcat process.</p>
</div>
<div class="paragraph">
<p>Define the <code>IPT_DATA_DIR</code> parameter within the file — copy and paste the text here, since the case of the letters is important:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Context&gt;
  &lt;Parameter name="IPT_DATA_DIR" value="/srv/ipt"/&gt;
&lt;/Context&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensure the Tomcat server either has permission to create this directory, or create it and then grant read and write permission. See <a href="faq#i-get-the-following-error-the-data-directory-directory-is-not-writable-what-should-i-do" class="xref page">this FAQ entry</a> if you have errors about write permissions on the data directory.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If this step is not done, the IPT will prompt for a data directory when it is first run.  The location will be stored in a file called <code>datadir.location</code> the IPT&#8217;s base installation directory, e.g. <code>/var/lib/tomcat/webapps/ipt/WEB-INF/datadir.location</code>.</p>
</div>
<div class="paragraph">
<p>If the data directory location needs to be changed, remove/edit this file and restart Tomcat.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p>Deploy the IPT</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Download the latest WAR release of the IPT from the <a href="releases" class="xref page">releases page</a> and rename it to <code>ipt.war</code> (or similar, matching <code>ipt.xml</code> from step 2 if used). Copy the <code>ipt.war</code> file to the Tomcat webapps folder, and then start Tomcat if it is not already running.</p>
</div>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Successful deployment of the IPT within a servlet container will make the IPT accessible through a web browser at a URL determined by the servlet&#8217;s name and port, followed by /ipt (e.g., <a href="http://server.example.org:8080/ipt" class="bare">http://server.example.org:8080/ipt</a>). If the installation was successful, the initial IPT setup page will appear in a web browser using the IPT&#8217;s URL.</p>
</div>
<div class="paragraph">
<p>Then continue to <a href="#opening-the-ipt-to-the-internet">Opening the IPT to the Internet</a>.</p>
</div>
<div class="paragraph">
<p>If the installation doesn&#8217;t start please check the <code>catalina.out</code> logfile, and refer to the <a href="faq" class="xref page">FAQ</a> for help.</p>
</div>
<div class="paragraph">
<p>The following screencast also explains how to install the IPT using Tomcat, assuming Tomcat has already been installed.</p>
</div>
<div class="videoblock responsive-video">
<div class="content">
<iframe width="100%" src="https://player.vimeo.com/video/116142276" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Multiple IPTs can be installed on the same server with a small variation to this process.  Rather than (or in addition to) using <code>ipt.xml</code> and <code>ipt.war</code>, use different names and change the files accordingly: on <a href="https://cloud.gbif.org/">cloud.gbif.org</a> we have <code>africa.xml</code> and <code>africa.war</code>, <code>bid.xml</code> and <code>bid.war</code> etc.</p>
</div>
<div class="paragraph">
<p>Different IPT versions may be installed side-by-side, though we always recommend always using the latest version.</p>
</div>
<div class="paragraph">
<p><em>Ensure each IPT is configured to use its own data directory!</em></p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="jetty"><a class="anchor" href="#jetty"></a>Jetty</h3>
<div class="paragraph">
<p><em>As a very rough guide, on CentOS 7, to run a single instance of the IPT:</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">yum install jetty-runner
java -jar /usr/share/java/jetty/jetty-runner.jar --port 8080 ipt.war</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then continue to <a href="#opening-the-ipt-to-the-internet">Opening the IPT to the Internet</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installation-using-docker"><a class="anchor" href="#installation-using-docker"></a>Installation using Docker</h2>
<div class="sectionbody">
<div class="paragraph">
<p>GBIF maintain a Docker image, published to the <a href="https://hub.docker.com/r/gbif/ipt/">Docker Hub</a>.  The image builds upon the Docker community Tomcat 9 / OpenJDK 17 image.  Tomcat is exposed on port 8080 and the IPT runs as the ROOT application.</p>
</div>
<div class="paragraph">
<p>To run a new Docker container, startup Tomcat and expose the Tomcat port run like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">docker run --detach --volume /full/path/to/data-directory:/srv/ipt --publish 8080:8080 gbif/ipt</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can then access the setup screen of the IPT on port 8080.</p>
</div>
<div class="paragraph">
<p>If you need to override the data directory, this can be done with <code>-e IPT_DATA_DIR=/path/within/container</code>.</p>
</div>
<div class="paragraph">
<p>If you need to find the IP address of your "default" Docker machine use <code>docker-machine ip default</code>.</p>
</div>
<div class="paragraph">
<p>Run a specific version from <a href="https://hub.docker.com/r/gbif/ipt/tags">those available</a> by using <code>gbif/ipt:version</code> rather than <code>gbif/ipt</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="opening-the-ipt-to-the-internet"><a class="anchor" href="#opening-the-ipt-to-the-internet"></a>Opening the IPT to the Internet</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You will probably need to work with your system or network administrator for the IPT to be available on the Internet.</p>
</div>
<div class="paragraph">
<p>You will need a DNS name for the server (&#8220;ipt.example.org&#8221;) and the firewall to allow access.</p>
</div>
<div class="paragraph">
<p>Many people use Apache HTTPD as a reverse proxy, often to provide HTTPS access or to allow sharing other websites on the same server.</p>
</div>
<div class="paragraph">
<p>The configuration used by <code>ipt.gbif.org</code> is shown here as an example.  It uses Apache HTTPD, with the <code>mod_proxy</code> module installed. The paths <a href="https://ipt.gbif.org/media/"><code>/media</code></a> and <a href="https://ipt.gbif.org/icons/"><code>/icons</code></a> are excluded from being passed to the IPT, to allow hosting static image files (such as occurrence images) on the same server.  Requests to <a href="http://ipt.gbif.org/" class="bare">http://ipt.gbif.org/</a> are redirected to the secure <a href="https://ipt.gbif.org/" class="bare">https://ipt.gbif.org/</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-apache hljs" data-lang="apache">&lt;VirtualHost *:80&gt;
    ServerName                 ipt.gbif.org
    CustomLog                  logs/ipt-80_log combined

    Redirect                   / https://ipt.gbif.org/
&lt;/VirtualHost&gt;

&lt;VirtualHost *:443&gt;
    ServerName                 ipt.gbif.org
    ErrorLog                   logs/ipt-443_error
    CustomLog                  logs/ipt-443_log combined

    DocumentRoot               /var/www/html/ipt

    Options                    +Indexes
    AddDefaultCharset          UTF-8

    ProxyPreserveHost          On
    ProxyPass                  /favicon.ico !
    ProxyPass                  /icons !
    ProxyPass                  /media !
    # Linux packages or Docker example, or ROOT.war in Tomcat
    ProxyPass                  / http://localhost:8080/

    # Alternative: example for an IPT deployed in a servlet container like Tomcat
    #ProxyPass                  /ipt http://localhost:8080/ipt

    # Recommended for HTTPS configurations
    RequestHeader              set X-Forwarded-Proto "https"
    # Typical LetsEncrypt configuration
    SSLCertificateKeyFile      /etc/letsencrypt/live/ipt.gbif.org/privkey.pem
    SSLCertificateFile         /etc/letsencrypt/live/ipt.gbif.org/fullchain.pem
    Include                    /etc/letsencrypt/options-ssl-apache.conf
&lt;/VirtualHost&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nginx can also be used as a reverse proxy. An example configuration is below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-nginx hljs" data-lang="nginx">server {
    if ($host = ipt.example.org) {
        return 302 https://$host$request_uri;
    }
    listen 80 default_server;
    listen [::]:80 default_server;
    server_name ipt.example.org;
    return 404;
}

server {
    server_name ipt.example.org;

    # Linux packages or Docker example, or ROOT.war in Tomcat
    location / {
        proxy_set_header X-Real-IP  $remote_addr;
        proxy_set_header X-Forwarded-For $remote_addr;
        proxy_set_header X-Forwarded-Proto https;
        proxy_set_header Host $host;
        proxy_pass http://localhost:8080/;
    }

    # Alternative: example for an IPT deployed in a servlet container like Tomcat
    #location /ipt/ {
    #    proxy_set_header X-Real-IP  $remote_addr;
    #    proxy_set_header X-Forwarded-For $remote_addr;
    #    proxy_set_header X-Forwarded-Proto https;
    #    proxy_set_header Host $host;
    #    proxy_pass http://localhost:8080/ipt/;
    #}

    # Typical LetsEncrypt configuration
    listen [::]:443 ssl ipv6only=on;
    listen 443 ssl;
    ssl_certificate /etc/letsencrypt/live/ipt.example.org/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/ipt.example.org/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;
}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="tls-certificate-configuration"><a class="anchor" href="#tls-certificate-configuration"></a>TLS certificate configuration</h3>
<div class="paragraph">
<p>For production deployments of the IPT we recommend using a TLS certificate, so information such as logins are secured when accessing the IPT.  The procedure to set this up sometimes depends on your institution&#8217;s policies, but the free <a href="https://letsencrypt.org/">LetsEncrypt</a> service is a good choice.  They <a href="https://certbot.eff.org/instructions">provide instructions</a> for adding a certificate to Apache, Nginx and many other webservers running on Linux or Windows.</p>
</div>
<div class="paragraph">
<p>For a new deployment, it is best to set up the webserver with TLS first, then install and set up the IPT.  Adding a certificate to a configured IPT requires changing the public URL.  See the note on <a href="administration#public-url" class="xref page">updating the public URL</a> in the administration section.</p>
</div>
<div class="paragraph">
<p>Verify your setup is correct using <a href="https://whatsmychaincert.com/">What&#8217;s My Chain Cert?</a>.  The requirements for GBIF&#8217;s servers to retrieve published data are stricter than those for normal web browsers, so ensure you receive a "has the correct chain" message from this test. (See also <a href="faq#why-is-gbif-unable-to-access-my-ipt-over-https" class="xref page">this FAQ entry</a>.)</p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="requirements">Requirements</a></span>
  <span class="next"><a href="tomcat-installation-linux">Install Tomcat on Linux</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="horizontal-stripe light-background">
    <div class="footer-container">
      <nav class="site-footer__menu">
        <div>
<a href="https://www.gbif.org/">GBIF.org</a>
<a href="https://www.gbif.org/terms">Terms and agreements</a>
<a href="https://www.gbif.org/contact-us">Contact</a>
        </div>
        <div>
          <strong>GBIF Secretariat</strong> • Universitetsparken 15 • DK-2100 Copenhagen Ø • Denmark
        </div>
      </nav>
    </div>
  </div>
  <div class="horizontal-stripe">
    <div class="footer-container">
      <a href="https://www.gbif.org/"><img src="https://www.gbif.org/img/full_logo_white.svg" alt="GBIF"></a>
    </div>
  </div>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
<script defer data-domain="ipt.gbif.org" src="https://plausible.io/js/script.file-downloads.js"></script>
  </body>
</html>
 contentType 9 text/html url 58 https://ipt.gbif.org:443/manual/en/ipt/latest/installation responseCode 3 200 