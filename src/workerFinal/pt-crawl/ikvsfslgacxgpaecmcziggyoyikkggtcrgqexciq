ikvsfslgacxgpaecmcziggyoyikkggtcrgqexciq length 5 22081 page 22081 <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Developer Guidelines :: GBIF IPT User Manual</title>
    <link rel="prev" href="translations">
    <link rel="next" href="customization">
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/manual/en">
        <svg class="logo" viewBox="90 239.1 539.7 523.9" xmlns="http://www.w3.org/2000/svg">
            <path class="gbif-logo-svg" d="M325.5,495.4c0-89.7,43.8-167.4,174.2-167.4C499.6,417.9,440.5,495.4,325.5,495.4"></path>
            <path class="gbif-logo-svg" d="M534.3,731c24.4,0,43.2-3.5,62.4-10.5c0-71-42.4-121.8-117.2-158.4c-57.2-28.7-127.7-43.6-192.1-43.6c28.2-84.6,7.6-189.7-19.7-247.4c-30.3,60.4-49.2,164-20.1,248.3c-57.1,4.2-102.4,29.1-121.6,61.9c-1.4,2.5-4.4,7.8-2.6,8.8c1.4,0.7,3.6-1.5,4.9-2.7c20.6-19.1,47.9-28.4,74.2-28.4c60.7,0,103.4,50.3,133.7,80.5C401.3,704.3,464.8,731.2,534.3,731"></path>
        </svg>
        <div  class="nav-brand__name-area">
          <span>GBIF IPT User Manual</span>
        </div>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>


    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
          <!--div class="navbar-end">
  <div class="navbar-item has-dropdown is-hoverable">
    <a class="navbar-link" href="">Documentation</a>
    <div class="navbar-dropdown">
      <a class="navbar-item" href="/manual/en/">Menu</a>
    </div>
  </div>
</div-->
      </div>

      <div class="navbar-end">
        
        <div class="navbar-item search hide-for-print">
          <div id="search-field" class="field">
            <input id="search-input" type="text" placeholder="Search docs">
          </div>
        </div>
        

        <div class="navbar-item has-dropdown is-hoverable">
  <!-- Current: en -->
  <a class="navbar-link" href="en">
    <svg class="navbar-languages" fill="#fcfcfc" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="none"/>
      <path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/>
    </svg>
  </a>
  <div class="navbar-dropdown">
    <a class="navbar-item" href="../../../en/ipt/latest/developer-guide">English</a>
    <a class="navbar-item" href="../../../es/ipt/latest/developer-guide">español</a>
    <a class="navbar-item" href="../../../ja/ipt/latest/developer-guide">日本語</a>
    <a class="navbar-item" href="../../../zh/ipt/latest/developer-guide">繁體中文</a>
  </div>
</div>
        <div class="navbar-item has-dropdown is-hoverable">
  <a class="navbar-link">
    <svg class="navbar-feedback" fill="#fcfcfc" height="24" viewBox="0 0 100 100" width="24" xmlns="http://www.w3.org/2000/svg" >
      <path d="M15.5,15.498h69v51.754H67.253v17.25L50,67.252H15.5V15.498z"/>
    </svg>
  </a>
  <div class="navbar-dropdown">
    <a class="navbar-item" href="https://github.com/gbif/ipt/issues/new?labels=Feedback&body=Feedback+on+[Developer Guidelines](https://ipt.gbif.org/manual/en/ipt/latest/developer-guide) ([Github source for this page](../blob/master/docs/en/modules/ROOT/pages/developer-guide.adoc))%0A%0AWrite+your+feedback+here.">Leave feedback on GitHub</a>
    <a class="navbar-item" href="mailto:helpdesk@gbif.org?subject=Feedback on IPT documentation 'Developer Guidelines'&body=Feedback on https://ipt.gbif.org/manual/en/ipt/latest/developer-guide">Send feedback by email</a>
    <a class="navbar-item" href="https://github.com/gbif/ipt/edit/master/docs/en/modules/ROOT/pages/developer-guide.adoc">Edit this page on GitHub</a>
      </div>
</div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ipt" data-version="3.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="./">Integrated Publishing Toolkit</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="introduction">How to Use this Manual</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="getting-started">Getting Started – Installation and Initial Setup</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="requirements">Requirements</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="installation">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="tomcat-installation-linux">Install Tomcat on Linux</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="tomcat-installation-windows">Install Tomcat 8 on Windows</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="initial-setup">Initial Setup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="overview">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="home">Home Menu</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="manage-resources">Manage Resources Menu</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="administration">Administration Menu</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="about">About Menu</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="releases">Releases</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="release-notes">Release Notes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="how-to-publish">How to publish biodiversity data through GBIF.org</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="resource-metadata">Resource Metadata</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="checklist-data">Checklist Data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="occurrence-data">Occurrence Data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sampling-event-data">Sampling Event Data</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Best Practice Guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="gbif-metadata-profile">Resource metadata</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="best-practices-checklists">Checklist Data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Occurrence Data (pending)</span>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="best-practices-sampling-event-data">Sampling Event Data</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="faq">FAQ</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Contributing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="translations">Translations</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="developer-guide">Development</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Customization</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="customization">How to Style Your IPT</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="database-connection">Supported Databases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="core">Adding a new core</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="license">Adding a new License</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="user-id">Adding a New User ID Directory</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="versioning">Dataset Versioning Policy</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="citation">Dataset Citation Format</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="datacite-mappings">DataCite to EML mappings</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="doi-workflow">DOI Workflows</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="applying-license">Applying a License to a Dataset</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="darwin-core">Darwin Core</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="dwca-guide">Darwin Core Archives – How-to Guide</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="data-preparation">Data Preparation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="data-quality-checklist">Data Quality Checklist</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="colophon">Colophon</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="resources">Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="glossary">Glossary</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="./" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="./">Integrated Publishing Toolkit</a></li>
    <li>Contributing</li>
    <li><a href="developer-guide">Development</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Developer Guidelines</h1>
<div class="sect1">
<h2 id="contributions"><a class="anchor" href="#contributions"></a>Contributions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The core development of the IPT is directed by GBIF, but the coding is a community effort and everyone is welcome to join. Java or HTML/jQuery developers are very welcome to contribute code patches. Patches can be submitted by creating a <a href="https://help.github.com/articles/creating-a-pull-request/">pull request</a> using a branch or fork of the <a href="https://github.com/gbif/ipt">IPT Git repository</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="source-code-frameworks"><a class="anchor" href="#source-code-frameworks"></a>Source Code Frameworks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The IPT uses the following core frameworks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://struts.apache.org/">Struts2</a></p>
</li>
<li>
<p><a href="https://github.com/google/guice">Google Guice</a></p>
</li>
<li>
<p><a href="https://freemarker.sourceforge.net/docs/">Freemarker</a> templating</p>
</li>
<li>
<p><a href="https://jquery.com/">jQuery</a> for JavaScript and AJAX</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The IPT uses Maven to manage dependencies and the build process. Refer to <a href="http://maven.apache.org/install.html">Maven&#8217;s own installation instructions</a> for help.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-the-application-in-jetty"><a class="anchor" href="#running-the-application-in-jetty"></a>Running the application in Jetty</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ cd ipt
$ mvn -DskipTests</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command starts up the IPT via the Jetty plugin on port 8080. You should be able to see the IPT running by opening <a href="http://localhost:8080" class="bare">http://localhost:8080</a> in your web browser.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="git"><a class="anchor" href="#git"></a>Git</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please don&#8217;t check in unused files.</p>
</div>
<div class="paragraph">
<p>Code in the master branch should always compile and allow the startup of Jetty using Maven!</p>
</div>
<div class="sect2">
<h3 id="guice"><a class="anchor" href="#guice"></a>Guice</h3>
<div class="paragraph">
<p><code>IptModule</code> contains wiring, but interfaces are annotated directly with <code>@ImplementedBy(ConfigManagerImpl.class)</code></p>
</div>
</div>
<div class="sect2">
<h3 id="configuration"><a class="anchor" href="#configuration"></a>Configuration</h3>
<div class="paragraph">
<p>Inside WEB-INF of a running IPT is a single file <code>datadir.location</code>.  It points to the currently used data directory where all configuration and data is stored. If this file is deleted the setup interceptor will ask the user to assign a new (potentially existing) data directory.</p>
</div>
<div class="paragraph">
<p>The hidden file <code>.gbifreg</code> indicates whether the data directory is linked to the production or test registry. Once set, this cannot be changed from the UI!</p>
</div>
<div class="paragraph">
<p><code>AppConfig.java</code> contains all IPT wide configuration, in particular the <code>baseURL</code> (referred to in the UI and documentation as the "Public URL") for the application.</p>
</div>
</div>
<div class="sect2">
<h3 id="struts2"><a class="anchor" href="#struts2"></a>Struts2</h3>
<div class="paragraph">
<p><code>BaseAction.java</code> supplies the <code>AppConfig</code>, implements session aware and gives access to current user, implements a simpler <code>TextProvider</code> which is faster than the native Struts 2 one.</p>
</div>
<div class="paragraph">
<p><code>SetupAndCancelInterceptor.java</code> checks if the data directory is configured and an admin user exists - otherwise redirects to the respective setup page.</p>
</div>
<div class="paragraph">
<p>For each package (<code>root</code>, <code>portal</code>, <code>manage</code>, <code>admin</code>) its own interceptor stack exists.</p>
</div>
<div class="paragraph">
<p>The "input" result name is used to show the form. We can therefore use the standard validation interceptor which uses the input result when data doesn&#8217;t validate.</p>
</div>
<div class="paragraph">
<p>The "success" result name is called when the form submit succeeded. In many cases this should simply be a redirect to another, often the corresponding list, action.</p>
</div>
<div class="paragraph">
<p>The action implements preparable, request aware and the execute method.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>execute: <code>FormAction</code> determines if a <code>POST</code> or <code>GET</code> is used and calls save (<code>POST</code>), delete (<code>POST + delete=true</code>) or nothing (<code>GET</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If any other action values need to be set you can override <code>prepare()</code> - but remember to call <code>super.execute()</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>prepare: the <code>id</code> parameter of the request object is stored in the action.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>POSTAction.java</code> simplifies working with forms. For modifying instance data always use <code>POST</code>, never <code>GET</code>.
Most full actions for modifying entities should override the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>prepare()</code>: load existing values based on "id" parameter and request object.</p>
</li>
<li>
<p><code>save()</code>: persist data AFTER the parameters interceptor did its job.</p>
</li>
<li>
<p><code>delete()</code>: this method is called when a <code>POST</code> with a <code>delete=anything_but_null</code> parameter is received.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code>id</code> given does not exist you can set the <code>notFound</code> property to true in any of the above methods. The action will then return a 404 result name.</p>
</div>
<div class="paragraph">
<p>To do validation, implement the <code>validate()</code> method of an action (instead of using XML validation definitions). See <code>SetupAction.java</code> as an example. Validation requires an <code>input</code> result name that shows the form when the form was not valid. Using the simple theme we also need to declare where to render the validation feedback: <a href="http://struts.apache.org/docs/fielderror.html" class="bare">http://struts.apache.org/docs/fielderror.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="html-design"><a class="anchor" href="#html-design"></a>HTML Design</h3>
<div class="paragraph">
<p>Links always use <code>${baseURL}/my/ipt/link.do</code>, so please refrain from using Struts or JSP URL tags!</p>
</div>
<div class="paragraph">
<p>Forms use the <code>forms.ftl</code> macros instead of Struts 2 tags, such as the internationalization <code>@select</code> drop downs.</p>
</div>
<div class="paragraph">
<p>Buttons use proper buttons or <code>input@type=submit</code> (forms) for add, delete, edit, create actions.</p>
</div>
<div class="paragraph">
<p>General best practice guides:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://htmldog.com/articles/formlayout/" class="bare">http://htmldog.com/articles/formlayout/</a></p>
</li>
<li>
<p><a href="https://www.sherpaglobal.com/top-10-html-form-layout-best-practices/" class="bare">https://www.sherpaglobal.com/top-10-html-form-layout-best-practices/</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="javascript"><a class="anchor" href="#javascript"></a>JavaScript</h3>
<div class="paragraph">
<p>Only use jQuery (<a href="https://jquery.com/" class="bare">https://jquery.com/</a>) for custom code.</p>
</div>
<div class="paragraph">
<p>Use jConfirmation plugin (<a href="https://github.com/hdytsgt/jConfirmAction" class="bare">https://github.com/hdytsgt/jConfirmAction</a>) when asking for confirmation, e.g. deletes.</p>
</div>
<div class="paragraph">
<p>Use jQuery dataTables (<a href="https://www.datatables.net/" class="bare">https://www.datatables.net/</a>) plugin to enhance HTML tables with pagination, searching, etc.</p>
</div>
</div>
<div class="sect2">
<h3 id="css"><a class="anchor" href="#css"></a>CSS</h3>
<div class="paragraph">
<p><a href="https://960.gs/">960 grid system</a> is used for page layouts.</p>
</div>
<div class="paragraph">
<p>Keep number of CSS classes to a minimum and consider using page specific CSS in <code>&lt;head&gt;&lt;style&gt;</code> on that page.</p>
</div>
</div>
<div class="sect2">
<h3 id="managers"><a class="anchor" href="#managers"></a>Managers</h3>
<div class="paragraph">
<p>2 tier architecture only with interfaces + implementation.</p>
</div>
</div>
<div class="sect2">
<h3 id="internationalization"><a class="anchor" href="#internationalization"></a>Internationalization</h3>
<div class="paragraph">
<p>Templates, actions and also important service messages should be localized using a single <code>ResourceBundle</code>.</p>
</div>
<div class="paragraph">
<p>Translated vocabularies can be used to populate select drop downs easily by calling <code>getI18nVocab(…)</code>.</p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="translations">Translations</a></span>
  <span class="next"><a href="customization">How to Style Your IPT</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="horizontal-stripe light-background">
    <div class="footer-container">
      <nav class="site-footer__menu">
        <div>
<a href="https://www.gbif.org/">GBIF.org</a>
<a href="https://www.gbif.org/terms">Terms and agreements</a>
<a href="https://www.gbif.org/contact-us">Contact</a>
        </div>
        <div>
          <strong>GBIF Secretariat</strong> • Universitetsparken 15 • DK-2100 Copenhagen Ø • Denmark
        </div>
      </nav>
    </div>
  </div>
  <div class="horizontal-stripe">
    <div class="footer-container">
      <a href="https://www.gbif.org/"><img src="https://www.gbif.org/img/full_logo_white.svg" alt="GBIF"></a>
    </div>
  </div>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
<script defer data-domain="ipt.gbif.org" src="https://plausible.io/js/script.file-downloads.js"></script>
  </body>
</html>
 contentType 9 text/html url 61 https://ipt.gbif.org:443/manual/en/ipt/latest/developer-guide responseCode 3 200 