vcmgmgxqiqugeipmhidkkmhebqesrqfksguazkoq length 6 127814 page 127814 <!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <!-- Support for favourites icon. Generated at https://realfavicongenerator.net/ -->
    <link rel="apple-touch-icon" sizes="180x180" href="/RGS/Web/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/RGS/Web/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/RGS/Web/favicons/favicon-16x16.png">
    <link rel="manifest" href="/RGS/Web/favicons/manifest.json">
    <link rel="mask-icon" href="/RGS/Web/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <title>RGS Grants Search - Grants Data Portal</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet">

    <!--Reference: https://matthewjamestaylor.com/bottom-footer -->
    <style media="screen" type="text/css">
        html,
        body {
            height: 100%;
        }

        main {
            min-height: 100%;
            position: relative;
        }

        #site-body {
            padding-bottom: 62px; /* Height of the footer */
        }

        #site-footer {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 62px; /* Height of the footer */
        }
    </style>

    
    
        <!-- CSS Global Compulsory -->
        <link rel="stylesheet" href="/RGS/Web/lib/bootstrap/dist/css/bootstrap.min.css" />
        <!-- CSS Typeahead-->
        <link rel="stylesheet" href="/RGS/Web/lib/typeahead/css/typeaheadjs.css" />
        <!-- CSS Global Icons -->
        <link rel="stylesheet" href="/RGS/Web/lib/unify/vendor/icon-awesome/css/font-awesome.min.css" />
        <link rel="stylesheet" href="/RGS/Web/lib/unify/vendor/icon-line/css/simple-line-icons.css" />
        <link rel="stylesheet" href="/RGS/Web/lib/unify/vendor/icon-etlinefont/style.css" />
        <link rel="stylesheet" href="/RGS/Web/lib/unify/vendor/icon-line-pro/style.css" />
        <link rel="stylesheet" href="/RGS/Web/lib/unify/vendor/icon-hs/style.css" />
        <link rel="stylesheet" href="/RGS/Web/lib/unify/vendor/animate.css" />
        <link rel="stylesheet" href="/RGS/Web/lib/unify/vendor/dzsparallaxer/dzsparallaxer.css" />
        <link rel="stylesheet" href="/RGS/Web/lib/unify/vendor/dzsparallaxer/dzsscroller/scroller.css" />
        <link rel="stylesheet" href="/RGS/Web/lib/unify/vendor/dzsparallaxer/advancedscroller/plugin.css" />
        <link rel="stylesheet" href="/RGS/Web/lib/unify/vendor/slick-carousel/slick/slick.css" />
        <link rel="stylesheet" href="/RGS/Web/lib/unify/vendor/hs-megamenu/src/hs.megamenu.css" />
        <link rel="stylesheet" href="/RGS/Web/lib/unify/vendor/hamburgers/hamburgers.min.css" />
        <!-- CSS Unify -->
        <link rel="stylesheet" href="/RGS/Web/lib/unify/css/unify-core.css">
        <link rel="stylesheet" href="/RGS/Web/lib/unify/css/unify-components.css">
        <link rel="stylesheet" href="/RGS/Web/lib/unify/css/unify-globals.css">
        <!-- CSS Custom Styles-->
        <link rel="stylesheet" href="/RGS/Web/lib/unify/css/custom.css">
        <link rel="stylesheet" href="/RGS/Web/css/site.min.css?v=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU" />
    

    
    <style type="text/css">

        .description-div {
            padding: 10px;
            background: aliceblue;
            width: 100%;
            font-weight: bold;
            foreground: black;
        }

        .desc-joined {
            border-bottom: 1px;
            border-bottom-style: solid;
            border-bottom-color: blue;
        }

        .desc-primary {
            border-bottom: 1px;
            margin-bottom: 2px;
            border-bottom-style: solid;
            border-bottom-color: green;
        }

        .desc-binary {
            border-bottom: 2px;
            border-bottom-style: solid;
            display: inline-block;
            padding-bottom: 2px;
            border-radius: 6px;
        }
    </style>

<script async src='https://www.googletagmanager.com/gtag/js?id=UA-56475013-3'></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date);gtag('config','UA-56475013-3',{displayFeaturesTask:'null'});</script></head>
<body>

    <main>
        <!-- Header -->
        <header id="js-header" class="u-header u-header--static">
            <div class="u-header__section u-header__section--light g-bg-white g-transition-0_3 g-py-10">
                <nav class="js-mega-menu navbar navbar-expand-lg hs-menu-initialized hs-menu-horizontal">
                    <div class="container">
                        <!-- Responsive Toggle Button -->
                        <button class="navbar-toggler navbar-toggler-right btn g-line-height-1 g-brd-none g-pa-0 g-pos-abs g-top-minus-3 g-right-0" type="button" aria-label="Toggle navigation" aria-expanded="false" aria-controls="navBar" data-toggle="collapse" data-target="#navBar">
                            <span class="hamburger hamburger--slider">
                                <span class="hamburger-box">
                                    <span class="hamburger-inner"></span>
                                </span>
                            </span>
                        </button>
                        <!-- End Responsive Toggle Button -->
                        <!-- Logo -->
                        <a href="/Landing" class="navbar-brand d-flex">
                            <img width="250" height="32" class="img-fluid" src="/RGS/Web/images/arc-logo.svg" alt="Home, Australian Research Council, Australian Government - logo">
                        </a>
                        <!-- End Logo -->
                        <!-- Navigation -->
                        <div class="collapse navbar-collapse align-items-center flex-sm-row g-pt-10 g-pt-5--lg g-mr-40--lg" id="navBar">
                            <ul class="navbar-nav text-uppercase g-pos-rel g-font-weight-600 ml-auto">
                                <!-- Home -->
                                <li class="nav-item  g-mx-10--lg g-mx-15--xl" data-animation-in="fadeIn" data-animation-out="fadeOut">
                                    <a id="nav-link-pages" class="nav-link g-py-7 g-px-0" href="/Landing" aria-haspopup="true" aria-expanded="false" aria-controls="nav-submenu-pages">Home</a>
                                </li>
                                <!-- ERA -->
                                <li class="hs-has-sub-menu nav-item  g-mx-10--lg g-mx-15--xl" data-animation-in="fadeIn" data-animation-out="fadeOut">
                                    <a id="nav-link-pages" class="nav-link g-py-7 g-px-0" href="/ERA/Web" aria-haspopup="true" aria-expanded="false" aria-controls="nav-submenu-pages">ERA</a>
                                    <ul class="hs-sub-menu list-unstyled u-shadow-v11 g-brd-top g-brd-primary g-brd-top-2 g-min-width-220 g-mt-18 g-mt-8--lg--scrolling" id="nav-submenu-pages" aria-labelledby="nav-link-pages">
                                        <li class="dropdown-item hs-has-sub-menu">
                                            <a class="nav-link" href="/ERA/Web">Research Outputs</a>
                                            <ul class="hs-sub-menu list-unstyled u-shadow-v11 g-brd-top g-brd-primary g-brd-top-2 g-min-width-220 g-mt-minus-2" aria-labelledby="nav-link--pages--researchoutputs--links">
                                                <li class="dropdown-item ">
                                                    <a class="nav-link" href="/ERA/Web">Search</a>
                                                </li>
                                                <li class="dropdown-item ">
                                                    <a class="nav-link" href="/ERA/API/research-outputs">API</a>
                                                </li>
                                                <li class="dropdown-item">
                                                    <a class="nav-link" href="/ERA/Web/Home/Help">Help</a>
                                                </li>
                                            </ul>
                                        </li>
                                            <li class="dropdown-item hs-has-sub-menu">
                                                <a class="nav-link" href="/ERA/Web/Outcomes">Outcomes</a>
                                                <ul class="hs-sub-menu list-unstyled u-shadow-v11 g-brd-top g-brd-primary g-brd-top-2 g-min-width-220 g-mt-minus-2" aria-labelledby="nav-link--pages--outcome--links">
                                                    <li class="dropdown-item ">
                                                        <a class="nav-link" href="/ERA/Web/Outcomes">Search</a>
                                                    </li>
                                                    <li class="dropdown-item ">
                                                        <a class="nav-link" href="/ERA/API/ratings">API</a>
                                                    </li>
                                                    <li class="dropdown-item ">
                                                        <a class="nav-link" href="/ERA/Web/Outcomes/Help">Help</a>
                                                    </li>
                                                </ul>
                                            </li>

                                        <li class="dropdown-item hs-has-sub-menu">
                                            <a class="nav-link" href="/ERA/NationalReport/">National Report</a>
                                            <ul class="hs-sub-menu list-unstyled u-shadow-v11 g-brd-top g-brd-primary g-brd-top-2 g-min-width-220 g-mt-minus-2" aria-labelledby="nav-link--pages--outcome--links">
                                                <li class="dropdown-item ">
                                                    <a class="nav-link" href="/ERA/NationalReport/2018">2018</a>
                                                </li>
                                            </ul>
                                        </li>

                                            <li class="dropdown-item hs-has-sub-menu">
                                                <a class="nav-link" href="/ERA/GenderWorkforceReport/">Gender Workforce Report</a>
                                                <ul class="hs-sub-menu list-unstyled u-shadow-v11 g-brd-top g-brd-primary g-brd-top-2 g-min-width-220 g-mt-minus-2" aria-labelledby="nav-link--pages--outcome--links">
                                                    <li class="dropdown-item ">
                                                        <a class="nav-link" href="/ERA/GenderWorkforceReport/2018">2018</a>
                                                    </li>
                                                </ul>
                                            </li>


                                    </ul>
                                </li>
                                <!-- Engagement and Impact -->
                                    <li class="hs-has-sub-menu nav-item  g-mx-10--lg g-mx-15--xl" data-animation-in="fadeIn" data-animation-out="fadeOut">
                                        <a id="nav-link-pages" class="nav-link g-py-7 g-px-0" href="/EI/Web/Impact" aria-haspopup="true" aria-expanded="false" aria-controls="nav-submenu-pages">Engagement and Impact</a>
                                        <ul class="hs-sub-menu list-unstyled u-shadow-v11 g-brd-top g-brd-primary g-brd-top-2 g-min-width-220 g-mt-18 g-mt-8--lg--scrolling" id="nav-submenu-pages" aria-labelledby="nav-link-pages">
                                                <li class="dropdown-item hs-has-sub-menu">
                                                    <a class="nav-link" href="/EI/Web/Impact/ImpactStudies">Impact Studies</a>
                                                    <ul class="hs-sub-menu list-unstyled u-shadow-v11 g-brd-top g-brd-primary g-brd-top-2 g-min-width-220 g-mt-minus-2" aria-labelledby="nav-link--pages--researchoutputs--links">
                                                        <li class="dropdown-item ">
                                                            <a class="nav-link" href="/EI/Web/Impact/ImpactStudies">Search</a>
                                                        </li>
                                                        <li class="dropdown-item ">
                                                            <a class="nav-link" href="/EI/API/impact-studies">API</a>
                                                        </li>
                                                        <li class="dropdown-item ">
                                                            <a class="nav-link" href="/EI/Web/Impact/Help">Help</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                                                            <li class="dropdown-item hs-has-sub-menu">
                                                    <a class="nav-link" href="/EI/Web/Engagement/Engagement">Engagement</a>
                                                    <ul class="hs-sub-menu list-unstyled u-shadow-v11 g-brd-top g-brd-primary g-brd-top-2 g-min-width-220 g-mt-minus-2" aria-labelledby="nav-link--pages--engagement--links">
                                                        <li class="dropdown-item ">
                                                            <a class="nav-link" href="/EI/Web/Engagement/Engagement">Search</a>
                                                        </li>
                                                        <li class="dropdown-item ">
                                                            <a class="nav-link" href="/EI/API/engagement-metadata">API</a>
                                                        </li>
                                                        <li class="dropdown-item ">
                                                            <a class="nav-link" href="/EI/Web/Engagement/Help">Help</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                                                            <li class="dropdown-item hs-has-sub-menu">
                                                    <a class="nav-link" href="/EI/Web/Outcomes">Outcomes</a>
                                                    <ul class="hs-sub-menu list-unstyled u-shadow-v11 g-brd-top g-brd-primary g-brd-top-2 g-min-width-220 g-mt-minus-2" aria-labelledby="nav-link--pages--outcome--links">
                                                        <li class="dropdown-item ">
                                                            <a class="nav-link" href="/EI/Web/Outcomes">Search</a>
                                                        </li>
                                                        <li class="dropdown-item ">
                                                            <a class="nav-link" href="/EI/API/ratings">API</a>
                                                        </li>
                                                        <li class="dropdown-item ">
                                                            <a class="nav-link" href="/EI/Web/Outcomes/Help">Help</a>
                                                        </li>
                                                    </ul>
                                                </li>

                                                <li class="dropdown-item hs-has-sub-menu">
                                                    <a class="nav-link" href="/EI/NationalReport/">National Report</a>
                                                    <ul class="hs-sub-menu list-unstyled u-shadow-v11 g-brd-top g-brd-primary g-brd-top-2 g-min-width-220 g-mt-minus-2" aria-labelledby="nav-link--pages--outcome--links">
                                                        <li class="dropdown-item ">
                                                            <a class="nav-link" href="/EI/NationalReport/2018">2018</a>
                                                        </li>
                                                    </ul>
                                                </li>

                                        </ul>
                                    </li>

                                <!-- NCGP -->
                                    <li class="hs-has-sub-menu nav-item  g-mx-10--lg g-mx-15--xl" data-animation-in="fadeIn" data-animation-out="fadeOut">
                                        <a class="nav-link g-py-7 g-px-0" href="/NCGP/Web/Grant/Grants" aria-haspopup="true" aria-expanded="false">NCGP</a>
                                        <ul class="hs-sub-menu list-unstyled u-shadow-v11 g-brd-top g-brd-primary g-brd-top-2 g-min-width-220 g-mt-18 g-mt-8--lg--scrolling">
                                            <li class="dropdown-item hs-has-sub-menu">
                                                <a class="nav-link" href="/NCGP/Web/Grant/Grants">Grants</a>
                                                <ul class="hs-sub-menu list-unstyled u-shadow-v11 g-brd-top g-brd-primary g-brd-top-2 g-min-width-220 g-mt-minus-2" aria-labelledby="nav-link--pages--grants--links">

                                                    <li class="dropdown-item ">
                                                        <a class="nav-link" href="/NCGP/Web/Grant/Grants">Search</a>
                                                    </li>
                                                    <li class="dropdown-item ">
                                                        <a class="nav-link" href="/NCGP/API/grants">API</a>
                                                    </li>
                                                    <li class="dropdown-item ">
                                                        <a class="nav-link" href="/NCGP/Web/Grant/Help">Help</a>
                                                    </li>
                                                    <li class="dropdown-item">
                                                        <a class="nav-link" href='/NCGP/Web/Grant/Grants#/20/1//(lief-register%3D"true")'>LIEF Register</a>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>

                                <!-- RGS -->
                                    <li class="hs-has-sub-menu nav-item  g-mx-10--lg g-mx-15--xl" data-animation-in="fadeIn" data-animation-out="fadeOut">
                                        <a class="nav-link g-py-7 g-px-0" href="/RGS/Web/Grants" aria-haspopup="true" aria-expanded="false">RGS</a>
                                        <ul class="hs-sub-menu list-unstyled u-shadow-v11 g-brd-top g-brd-primary g-brd-top-2 g-min-width-220 g-mt-18 g-mt-8--lg--scrolling">
                                            <li class="dropdown-item hs-has-sub-menu">
                                                <a class="nav-link" href="/RGS/Web/Grants">Grants</a>
                                                <ul class="hs-sub-menu list-unstyled u-shadow-v11 g-brd-top g-brd-primary g-brd-top-2 g-min-width-220 g-mt-minus-2" aria-labelledby="nav-link--pages--grants--links">

                                                    <li class="dropdown-item ">
                                                        <a class="nav-link" href="/RGS/Web/Grants">Search</a>
                                                    </li>
                                                    <li class="dropdown-item ">
                                                        <a class="nav-link" href="/RGS/API/grants">API</a>
                                                    </li>
                                                    <li class="dropdown-item ">
                                                        <a class="nav-link" href="/RGS/Web/Grants/Help">Help</a>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                            </ul>
                        </div>
                        <!-- End Navigation -->
                    </div>
                </nav>
            </div>
        </header>
        <!-- End Header -->
        <!--Breadcrumbs-->
            <section class="g-bg-gray-light-v4 g-py-50">
                <div class="container">
                    <div class="d-sm-flex text-center">
                        <div class="align-self-center">
                            <h2 class="h3 g-font-weight-600 w-100 g-mb-10 g-mb-0--md">RGS Grants Search</h2>
                        </div>
                        <div id="dataportal-breadcrumb" class="align-self-center ml-auto">
                            <ul class="u-list-inline"></ul>
                        </div>
                    </div>
                </div>
            </section>
        <!--End Breadcrumbs-->
        <!--Body-->
        <div id="site-body">
            

<!-- Page Title -->
<section id="search-header-section" class="dzsparallaxer auto-init height-is-based-on-content use-loading mode-scroll dzsprx-readyall" data-options='{direction: "reverse", settings_mode_oneelement_max_offset: "150"}'>
    <!-- Parallax Image -->
    <div class="divimage dzsparallaxer--target w-100 g-bg-cover g-bg-white-gradient-opacity-v1--after" style="height: 130%; background-image: url('/RGS/Web/images/data-portal-banner.jpg');"></div>
    <!-- End Parallax Image -->
    
    <div class="container text-center g-py-100--md g-py-80">
        <small class="form-text g-color-white g-font-size-default">Search any words with filters here.</small>
        <!-- Search Form -->
        <form class="g-width-60x--md mx-auto">
            <div class="form-group g-mb-20">
                <div class="input-group u-shadow-v21 rounded g-mb-15">
                    <input id="grant-search-txt" class="form-control form-control-md g-brd-white g-font-size-18 border-right-0 pr-0 g-py-15" type="text" placeholder="Search Grants...">
                    <div class="input-group-addon d-flex align-items-center g-bg-white g-brd-white g-color-gray-light-v1 g-pa-2">
                        <button id="grant-search-btn" class="btn u-btn-primary g-font-size-16 g-py-15 g-px-20" type="submit">
                            <i class="icon-magnifier g-pos-rel g-top-1"></i>
                        </button>
                    </div>
                </div>
            </div>
        </form>
        <!-- End Search Form -->
        <a href="/RGS/Web/Grants/Help" class="form-text g-color-white g-font-size-default">Click here for RGS Grants Search Help.</a>
    </div>

</section>
<!-- End Page Title -->


<section class="g-pt-50 g-pb-90">
    <div class="container" id="search-result-container">
        <div class="row">

            <div id="sidebar-filters" class="col-lg-4 g-pr-40--lg g-mb-50 g-mb-0--lg" style="display:none;">

                <!--Reset Filters-->
                <div style="padding-bottom:30px;">
                    <a id="reset-search-filters" class="btn btn-block u-btn-primary g-color-white g-bg-primary-dark-v1--hover g-font-weight-600 rounded g-px-8 g-py-8">Reset Filters</a>
                </div>
                <h1 class="h4 text-uppercase g-color-gray-dark-v1 g-mb-30">
                    Search Filters
                </h1>

                <!--Grant Funder-->
                <h2 class="h5 g-color-gray-dark-v1">
                    Grant Funder
                    <button type="button" class="btn btn-light" data-container="body" data-toggle="popover" data-title="Grant Funder Filter"
                            data-content="Select one or more grant funders to filter the results." style="background:none; border:none;">
                        <i class="icon-question g-font-size-13"></i>
                    </button>
                </h2>
                <hr class="g-brd-gray-light-v4 g-my-10">
                <ul id="grant-funder-list" class="list-unstyled g-mb-10"></ul>
                <div class="form-group g-mb-30">
                    <div class="input-group" style="display:flow-root;">
                        <div id="grant-funder-select" class="input-group-append">
                            <select id="add-grant-funder-select" class="form-control">
                                <option readonly selected value="">Select Grant Funder...</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!--Program-->
                <h2 class="h5 g-color-gray-dark-v1">
                    Program
                    <button type="button" class="btn btn-light" data-container="body" data-toggle="popover" data-title="Program Filter"
                            data-content="Select one or more programs to filter the results." style="background:none; border:none;">
                        <i class="icon-question g-font-size-13"></i>
                    </button>
                </h2>
                <hr class="g-brd-gray-light-v4 g-my-10">
                <ul id="program-list" class="list-unstyled g-mb-10"></ul>
                <div class="form-group g-mb-30">
                    <div class="input-group" style="display:flow-root;">
                        <div id="program-select" class="input-group-append">
                            <select id="add-program-select" class="form-control">
                                <option readonly selected value="">Select Program...</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!--Scheme-->
                <h2 class="h5 g-color-gray-dark-v1">
                    Scheme
                    <button type="button" class="btn btn-light" data-container="body" data-toggle="popover" data-title="Scheme filter"
                            data-content="Select one or more schemes to filter the results." style="background:none; border:none;">
                        <i class="icon-question g-font-size-13"></i>
                    </button>
                </h2>
                <hr class="g-brd-gray-light-v4 g-my-10">
                <ul id="scheme-list" class="list-unstyled g-mb-10"></ul>
                <div class="form-group g-mb-30">
                    <div class="input-group" style="display:flow-root;">
                        <div id="scheme-select" class="input-group-append">
                            <select id="add-scheme-select" class="form-control">
                                <option readonly selected value="">Select Scheme...</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!--Funding Commencement Year-->
                <h2 class="h5 g-color-gray-dark-v1">
                    Funding Commencement Year
                    <button type="button" class="btn btn-light" data-container="body" data-toggle="popover" data-title="Funding Commencement Year filter"
                            data-content="Select a 'funding commencement year from' and/or a 'funding commencement year to'" style="background:none; border:none;">
                        <i class="icon-question g-font-size-13"></i>
                    </button>
                </h2>
                <hr class="g-brd-gray-light-v4 g-my-10">
                <div id="year-from-warning" class="alert alert-danger" style="display: none;">
                    Enter a year prior to or equal to the year to entered.
                </div>
                <div id="year-to-warning" class="alert alert-danger" style="display: none;">
                    Enter a year later than or equal to the year from entered.
                </div>
                <ul id="year-from-list" class="list-unstyled g-mb-10"></ul>
                <ul id="year-to-list" class="list-unstyled g-mb-10"></ul>
                <div class="form-group g-mb-30">
                    <div id="funding-year-select">
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" style="width: 60px;">From:</span>
                            </div>
                            <select id="year-from" class="form-control year-data add-filter-select">
                                <option readonly selected value="">Select Year From...</option>
                            </select>
                        </div>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" style="width: 60px;">To:</span>
                            </div>
                            <select id="year-to" class="form-control year-data add-filter-select">
                                <option readonly selected value="">Select Year To...</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!--Grant Value-->
                <h2 class="h5 g-color-gray-dark-v1">
                    Grant Value
                    <button type="button" class="btn btn-light" data-container="body" data-toggle="popover" data-title="Grant Value Filter"
                            data-content="Enter a minimum and/or maximum grant value" style="background:none; border:none;">
                        <i class="icon-question g-font-size-13"></i>
                    </button>
                </h2>
                <hr class="g-brd-gray-light-v4 g-my-10">
                <div id="min-funding-warning" class="alert alert-danger" style="display: none;">
                    Enter an amount that is less than the maximum grant value entered.
                </div>
                <div id="max-funding-warning" class="alert alert-danger" style="display: none;">
                    Enter an amount that is more than the minimum grant value entered.
                </div>
                <ul id="min-funding-list" class="list-unstyled g-mb-10"></ul>
                <ul id="max-funding-list" class="list-unstyled g-mb-10"></ul>
                <div class="form-group g-mb-30">
                    <div id="funding-amount-select">

                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" style="width: 60px;">Min:</span>
                            </div>
                            <input id="amount-min" type="number" class="form-control" placeholder="Enter a min grant value..." value="" />
                            <div class="input-group-lg input-group-prepend">
                                <button type="button" id="add-min-amount-btn" class="btn btn-light g-bg-white g-color-gray-dark-v2"><i class="hs-icon hs-icon-plus"></i></button>
                            </div>
                        </div>

                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" style="width: 60px;">Max:</span>
                            </div>
                            <input id="amount-max" type="number" class="form-control" placeholder="Enter a max grant value..." value="" />
                            <div class="input-group-lg input-group-prepend">
                                <button type="button" id="add-max-amount-btn" class="btn btn-light g-bg-white g-color-gray-dark-v2"><i class="hs-icon hs-icon-plus"></i></button>
                            </div>
                        </div>
                    </div>
                </div>

                <!--Grantee-->
                <h2 class="h5 g-color-gray-dark-v1">
                    Grantee
                    <button type="button" class="btn btn-light" data-container="body" data-toggle="popover" data-title="Grantee filter"
                            data-content="Search and select one or more grantees by name or short name to filter the results." style="background:none; border:none;">
                        <i class="icon-question g-font-size-13"></i>
                    </button>
                </h2>
                <hr class="g-brd-gray-light-v4 g-my-15">
                <ul id="admin-org-list" class="list-unstyled g-mb-10"></ul>
                <div class="form-group g-mb-30">
                    <div class="input-group" style="display:flow-root;">
                        <div id="admin-org-typeahead" class="input-group-append">
                            <input id="admin-org" class="form-control typeahead" type="text" placeholder="Search Grantee..." />
                        </div>
                    </div>
                </div>

                <!--States-->
                <h2 class="h5 g-color-gray-dark-v1">
                    State/Territory
                    <button type="button" class="btn btn-light" data-container="body" data-toggle="popover" data-title="State/Territory filter"
                            data-content="Search and select one or more states or territories by short name to filter the results." style="background:none; border:none;">
                        <i class="icon-question g-font-size-13"></i>
                    </button>
                </h2>
                <hr class="g-brd-gray-light-v4 g-my-10">
                <ul id="state-list" class="list-unstyled g-mb-10"></ul>
                <div class="form-group g-mb-30">
                    <div class="input-group" style="display:flow-root;">
                        <div id="state-select" class="input-group-append">
                            <select id="state-territory-select" class="form-control add-filter-select">
                                <option readonly value="">Select State/Territory...</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!--Field of Research-->
                <h2 class="h5 g-color-gray-dark-v1">
                    Primary Field of Research
                    <button type="button" class="btn btn-light" data-container="body" data-toggle="popover" data-title="Field of Research filter"
                            data-content="Search and select one or more fields of research by name or code to filter the results. For further information on the fields of research codes, refer to the Help page" style="background:none; border:none;">
                        <i class="icon-question g-font-size-13"></i>
                    </button>
                </h2>
                <hr class="g-brd-gray-light-v4 g-my-15">
                <ul id="field-of-research-list" class="list-unstyled g-mb-10"></ul>
                <div class="form-group g-mb-30">
                    <div class="input-group" style="display:flow-root;">
                        <div id="field-of-research-typeahead" class="input-group-append">
                            <input id="field-of-research" class="form-control typeahead" type="text" placeholder="Search Fields of Research..." />
                        </div>
                    </div>
                </div>

                <!--SEO-->
                <h2 class="h5 g-color-gray-dark-v1">
                    Socio Economic Objective
                    <button type="button" class="btn btn-light" data-container="body" data-toggle="popover" data-title="Socio Economic Objective filter"
                            data-content="Search and select one or more socio economic objectives by name or code to filter the results." style="background:none; border:none;">
                        <i class="icon-question g-font-size-13"></i>
                    </button>
                </h2>
                <hr class="g-brd-gray-light-v4 g-my-15">
                <ul id="seo-list" class="list-unstyled g-mb-10"></ul>
                <div class="form-group g-mb-30">
                    <div class="input-group" style="display:flow-root;">
                        <div id="seo-typeahead" class="input-group-append">
                            <input id="seo" class="form-control typeahead" type="text" placeholder="Search Socio Economic Objective..." />
                        </div>
                    </div>
                </div>

                <!--Statuses-->
                <h2 class="h5 g-color-gray-dark-v1">
                    Status
                    <button type="button" class="btn btn-light" data-container="body" data-toggle="popover" data-title="Status filter"
                            data-content="Select one or more statuses to filter the results." style="background:none; border:none;">
                        <i class="icon-question g-font-size-13"></i>
                    </button>
                </h2>
                <hr class="g-brd-gray-light-v4 g-my-10">
                <ul id="status-list" class="list-unstyled g-mb-10"></ul>
                <div class="form-group g-mb-30">
                    <div class="input-group" style="display:flow-root;">
                        <div id="status-select" class="input-group-append">
                            <select class="form-control">
                                <option readonly value="">Select Status...</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!--Reset Filters-->
                <div style="padding-top:30px;">
                    <a id="reset-search-filters" class="btn btn-block u-btn-primary g-color-white g-bg-primary-dark-v1--hover g-font-weight-600 rounded g-px-8 g-py-8">Reset Filters</a>
                </div>

            </div>


            <div id="search-results-div" class="col-lg-8">

                <div id="show-loading" class="g-mr-10 g-mb-15">
                    <i class="fa fa-spinner fa-spin"></i>
                    Loading...
                </div>

                <!-- Search Description -->
                <div id="search_description"></div>

                <!-- Search Info -->
                <div id="search-info"></div>

                <!-- Results-->
                <div id="search-results"></div>

                <!-- Pagination -->
                <div id="search-pagination"></div>

            </div>

        </div>
    </div>
</section>


        </div>
        <!--End Body-->
        <!-- Copyright Footer -->
        <div id="site-footer">
            <footer class="g-bg-gray-dark-v1 g-color-white-opacity-0_8 g-py-20">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12 text-center text-md-left g-mb-15 g-mb-0--md">
                            <div class="d-lg-flex">
                                <small class="d-block g-font-size-default g-mr-10 g-mb-10 g-mb-0--md">
                                    <a class="g-color-white" href="https://www.arc.gov.au/policies-strategies/policy/copyright" target="_blank">&copy; 2019&nbsp;</a>
                                    <a class="g-color-white" href="https://www.arc.gov.au/" target="_blank">Australian Research Council</a>, All Rights Reserved, ABN 35 201 451 156
                                </small>
                                <ul class="u-list-inline">
                                    <li class="list-inline-item">
                                        <a class="g-color-white" href="https://www.arc.gov.au/accessibility" target="_blank">Accessibility</a>
                                    </li>
                                    <li class="list-inline-item">
                                        <span>|</span>
                                    </li>
                                    <li class="list-inline-item">
                                        <a class="g-color-white" href="https://www.arc.gov.au/disclaimer" target="_blank">Disclaimer</a>
                                    </li>
                                    <li class="list-inline-item">
                                        <span>|</span>
                                    </li>
                                    <li class="list-inline-item">
                                        <a class="g-color-white" href="https://www.arc.gov.au/about-arc/privacy-and-information/privacy-policy" target="_blank">Privacy Policy</a>
                                    </li>
                                    <li class="list-inline-item">
                                        <span>|</span>
                                    </li>
                                    <li class="list-inline-item">
                                        <a class="g-color-white" href="mailto:ARC-Systems@arc.gov.au" data-toggle="tooltip" data-placement="top" title="Email: ARC-Systems@arc.gov.au">Feedback</a>
                                    </li>
                                    <li class="list-inline-item">
                                        <span>|</span>
                                    </li>
                                    <li class="list-inline-item">
                                        <a class="g-color-white" href="https://www.arc.gov.au/engage-us/contacts" target="_blank">Contact Us</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </footer>
        </div>

        <!-- End Copyright Footer -->
        <a class="js-go-to u-go-to-v1" href="#!" data-type="fixed" data-position='{"bottom": 15, "right": 15}' data-offset-top="400" data-compensation="#js-header" data-show-effect="zoomIn">
            <i class="hs-icon hs-icon-arrow-top"></i>
        </a>

    </main>
    <div class="u-outer-spaces-helper"></div>

    
    

        <!-- JS Global Compulsory -->
        <script src="/RGS/Web/lib/jquery/dist/jquery.min.js"></script>
        <script src="/RGS/Web/lib/unify/vendor/jquery-migrate/jquery-migrate.min.js"></script>
        <script src="/RGS/Web/lib/unify/vendor/popper.min.js"></script>
        <script src="/RGS/Web/lib/bootstrap/dist/js/bootstrap.min.js"></script>
        <!-- JS Other libraries-->
        <script src="/RGS/Web/lib/underscore/underscore-min.js"></script>
        <script src="/RGS/Web/lib/backbone/backbone-min.js"></script>
        <script src="/RGS/Web/lib/handlebars/handlebars.js"></script>
        <script src="/RGS/Web/lib/typeahead/js/typeahead.bundle.min.js"></script>
        <script src="/RGS/Web/lib/bootbox/bootbox.min.js"></script>
        <!-- JS Implementing Plugins -->
        <script src="/RGS/Web/lib/unify/vendor/hs-megamenu/src/hs.megamenu.js"></script>
        <script src="/RGS/Web/lib/unify/vendor/dzsparallaxer/dzsparallaxer.js"></script>
        <script src="/RGS/Web/lib/unify/vendor/dzsparallaxer/dzsscroller/scroller.js"></script>
        <script src="/RGS/Web/lib/unify/vendor/dzsparallaxer/advancedscroller/plugin.js"></script>
        <script src="/RGS/Web/lib/unify/vendor/appear.js"></script>
        <script src="/RGS/Web/lib/unify/vendor/slick-carousel/slick/slick.js"></script>
        <script src="/RGS/Web/lib/unify/vendor/masonry/dist/masonry.pkgd.min.js"></script>
        <!-- JS Unify -->
        <script src="/RGS/Web/lib/unify/js/hs.core.js"></script>
        <script src="/RGS/Web/lib/unify/js/components/hs.header.js"></script>
        <script src="/RGS/Web/lib/unify/js/helpers/hs.hamburgers.js"></script>
        <script src="/RGS/Web/lib/unify/js/components/hs.tabs.js"></script>
        <script src="/RGS/Web/lib/unify/js/components/hs.go-to.js"></script>
        <!-- JS Site Custom -->
        <script src="/RGS/Web/js/arc.polyfill-functions.js"></script>
        <script src="/RGS/Web/js/site.min.js?v=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU"></script>
        <script src="/RGS/Web/js/rgs.breadcrumbs.js"></script>
    

    <!-- JS Plugins Init. -->
    <script>
        $(document).on('ready', function () {
            setBreadCrumb(true);

            // initialization of go to
            $.HSCore.components.HSGoTo.init('.js-go-to');

            // initialization of tabs
            $.HSCore.components.HSTabs.init('[role="tablist"]');

            // initialization of rating
            //$.HSCore.components.HSRating.init($('.js-rating'), {
            //    spacing: 2
            //});

            // initialization of masonry
            $('.masonry-grid').masonry({
                columnWidth: '.masonry-grid-sizer',
                itemSelector: '.masonry-grid-item',
                percentPosition: true
            });

            //$('.masonry-grid').imagesLoaded().then(function () {
            //    $('.masonry-grid').masonry({
            //        columnWidth: '.masonry-grid-sizer',
            //        itemSelector: '.masonry-grid-item',
            //        percentPosition: true
            //    });
            //});

        });

        $(document).on("click", "[target=_blank]", function () {
            setBreadCrumb(false);
        });

        $(window).on('beforeunload', function (e) {
            setBreadCrumb(false);
        });

        $(window).on('load', function () {
            // initialization of header
            $.HSCore.components.HSHeader.init($('#js-header'));
            $.HSCore.helpers.HSHamburgers.init('.hamburger');

            // initialization of HSMegaMenu component
            $('.js-mega-menu').HSMegaMenu({
                event: 'hover',
                pageContainer: $('.container'),
                breakpoint: 991
            });
        });

        $(window).on('resize', function () {
            setTimeout(function () {
                $.HSCore.components.HSTabs.init('[role="tablist"]');
            }, 200);
        });

        function setBreadCrumb(refresh) {


            var url = window.location.href;
            var title = "".length ? "" : "RGS Grants Search".length ? "RGS Grants Search" : "--Title Not Set--";
            var name = "RGSPortal".length ? "RGSPortal" : title;

            var dataPortalName = "DataPortalHome";

            rgs.breadcrumbs.set(name, title, url);

            //check whether DataPortalHome exists. DataPortalHome could be missing if the browser cache is cleared
            var breadcrumbs = rgs.breadcrumbs.get();
            if (breadcrumbs[0].name !== dataPortalName) {
                //dataPortalName does not exists. Push dataPortalName to the begining
                rgs.breadcrumbs.clear();
                rgs.breadcrumbs.set(dataPortalName, "ARC Data Portal", "/Landing");
                breadcrumbs.forEach(function (b) {
                    rgs.breadcrumbs.set(b.name, b.title, b.url);
                });
            }

            //Refresh Breadcrumb UI
            if (refresh) {
                if ($("#dataportal-breadcrumb").length) {
                    $("#dataportal-breadcrumb ul").empty();
                    breadcrumbs = rgs.breadcrumbs.get();
                    for (var j = 0; j < breadcrumbs.length; j++) {
                        if (j === breadcrumbs.length - 1) {
                            $("#dataportal-breadcrumb ul").append('<li class="list-inline-item g-color-primary"><span>' + breadcrumbs[j].title + '</span></li>');
                        } else {
                            $("#dataportal-breadcrumb ul").append('<li class="list-inline-item g-mr-5"><a class="u-link-v5 g-color-black g-color-primary--hover" href="' + breadcrumbs[j].url + '">' + breadcrumbs[j].title + '</a><i class="g-color-black g-ml-5">/</i></li>');
                        }
                    }
                }
            }
        }

    </script>

    <!-- Handlebars - Error template -->
    <script id="app-error-template" type="text/x-handlebars-template">

        <blockquote class="blockquote text-center g-bg-red-opacity-0_1 g-color-lightred g-pa-40 g-mb-30">
            <p>An error has occurred while processing your request.</p>

            {{#if errorCode}}
            <span style="font-size:95%; word-wrap:break-word;">
                <br />
                {{errorCode}} {{#if errorText}} - {{errorText}} {{/if}}
            </span>
            {{else}}
            {{#if errorText}}
            <span style="font-size:95%; word-wrap:break-word;">
                <br />
                {{errorText}}
            </span>
            {{/if}}
            {{/if}}

            {{#if errorDetail}}
            <span style="font-size:85%; word-wrap:break-word;">
                <br />
                {{errorDetail}}
            </span>
            {{/if}}

            <br /><br />

            <span style="font-size:80%;">
                If this problem persists, please contact ARC Systems Support on 6287 6789 or email <a class="g-color-lightred g-color-primary--hover" href="mailto:ARC-Systems@arc.gov.au">ARC-Systems@arc.gov.au</a>. ARC Systems Support operates between 9am and 5pm on weekdays.
            </span>

        </blockquote>
    </script>

    
    <script src="/RGS/Web/js/arc.json-to-csv-converter.js"></script>
    <script>

        Handlebars.registerHelper('formatCurrency', function (value)
        {
            if (value != null) {
                return '$' + value.toFixed(2).toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");
            }
        });

        Handlebars.registerHelper('encodeParameter', function (code) {
            return encodeURIComponent(code);
        });

        Handlebars.registerHelper('commaSeperator', function (value) {
            return value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        })

        Handlebars.registerHelper('equal', function (lvalue, rvalue, options) {
        if (arguments.length < 3)
            throw new Error('Handlebars Helper equal needs 2 parameters');

        if (lvalue != rvalue) {
            return options.inverse(this);
        } else {
            return options.fn(this);
        }
    });

        Handlebars.registerHelper('ifCond', function (v1, operator, v2, options) {

            switch (operator) {
                case '==':
                    return (v1 == v2) ? options.fn(this) : options.inverse(this);
                case '===':
                    return (v1 === v2) ? options.fn(this) : options.inverse(this);
                case '!=':
                    return (v1 != v2) ? options.fn(this) : options.inverse(this);
                case '!==':
                    return (v1 !== v2) ? options.fn(this) : options.inverse(this);
                case '<':
                    return (v1 < v2) ? options.fn(this) : options.inverse(this);
                case '<=':
                    return (v1 <= v2) ? options.fn(this) : options.inverse(this);
                case '>':
                    return (v1 > v2) ? options.fn(this) : options.inverse(this);
                case '>=':
                    return (v1 >= v2) ? options.fn(this) : options.inverse(this);
                case '&&':
                    return (v1 && v2) ? options.fn(this) : options.inverse(this);
                case '||':
                    return (v1 || v2) ? options.fn(this) : options.inverse(this);
                default:
                    return options.inverse(this);
            }
        });

        $(document).on('ready', function () {

            // initialization of popovers
            $('[data-toggle="popover"]').popover({ trigger: 'focus' });

            var defaultPageSize = 20;
            var defaultPageNumber = 1;
            var defaultSort = "";
            var querySeperator = "=>";
            var andOperator = "AND";
            var orOperator = "OR";
            var grantFunderQueryParm = "grant-funder";
            var programQueryParm = "program";
            var seoQueryParm = "seo-code";
            var schemeQueryParm = "scheme";
            var yearFromQueryParm = "year-from";
            var yearToQueryParm = "year-to";
            var minFundingQueryParm = "grant-value-from";
            var maxFundingQueryParm = "grant-value-to";
            var adminOrgQueryParm = "grantee";
            var stateQueryParm = "state-short-name";
            var fourDigitForQueryParm = "four-digit-for";
            var twoDigitForQueryParm = "two-digit-for";
            var statusQueryParm = "status";

            var grantSearchResultTemplate = Handlebars.compile($("#search-result-template").html());
            var grantSearchInfoTemplate = Handlebars.compile($("#search-info-template").html());
            var grantSearchPaginationTemplate = Handlebars.compile($("#search-pagination-template").html());

            var grantFunderLookup;
            var programLookup;
            var seoLookup;
            var schemeLookup;
            var adminOrgLookup;
            var stateLookup;
            var yearLookup;
            var fieldOfResearchLookup;
            var statusLookup;

            var router;

            //Load lookupdata then setup and initialize routing
            $.when(loadLookupData()).then(function () {
                router = setupBackboneRouter();
            });

            $(document).on("click", "#grant-search-btn", function (event) {
                event.preventDefault();
                filteredSearch();
            });

            $(document).on("click", "#reset-search-filters", function (event) {
                event.preventDefault();
                resetUIFilters();
                filteredSearch();
            });

            $(document).on("click", ".grant-search-page-link", function (event) {
                event.preventDefault();
                var pageNumber = $(this).data("page-number");
                var pageSize = $(this).data("page-size");
                var sort = $(this).data("sort");

                filteredSearch(pageNumber, pageSize, sort);
            });

            $(document).on("click", ".show-page-size", function (event) {
                event.preventDefault();
                var pageSize = $(this).text();
                var sort = $(this).data("sort");
                filteredSearch(null, pageSize, sort);
            });

            $(document).on("change", "#sort-by", function (event) {
                event.preventDefault();
                var sort = $(this).val();
                var pageSize = $(this).find(":selected").data("page-size");
                filteredSearch(null, pageSize, sort);
            });

            $(document).on("change", "#add-scheme-select", function (event) {
                event.preventDefault();

                var selectedData = $("#scheme-select select").val();
                if (selectedData) {

                    var itemadded = addSchemeFilterItem(selectedData);
                    if (itemadded) {
                        filteredSearch();
                    }

                    //Clear selected value
                    $("#scheme-select select").val('');

                }
            });

            $(document).on("change", "#add-program-select", function (event) {
                event.preventDefault();
                
                var selectedData = $("#program-select select").val();
                if (selectedData) {

                    var itemadded = addProgramFilterItem(selectedData);
                    if (itemadded) {
                        filteredSearch();
                    }

                    //Clear selected value
                    $("#program-select select").val('');

                }
            });

            $(document).on("change", "#add-grant-funder-select", function (event) {
                event.preventDefault();
                
                var value = $("#grant-funder-select select").val();
                var text = $("#grant-funder-select select option:selected").text();
                if (value) {

                    var itemadded = addGrantFunderFilterItem(value, text);
                    if (itemadded) {
                        filteredSearch();
                    }

                    //Clear selected value
                    $("#grant-funder-select select").val('');

                }
            });

            $(document).on("change", "#year-from", function (event) {
                event.preventDefault();

                $("#year-from-list").empty();
                $("#year-from-warning").hide();

                var selectedData = $("#year-from").val();
                if (selectedData > $("#year-to-list li").data('value')) {
                    $("#year-from-warning").show();
                    filteredSearch();
                } else if (selectedData) {
                    var itemAdded = addYearFromFilterItem(selectedData);
                    if (itemAdded) {
                        filteredSearch();
                    }

                    //Clear selected value
                    $("#year-from").val('');

                }
            });

            $(document).on("change", "#year-to", function (event) {
                event.preventDefault();

                $("#year-to-list").empty();
                $("#year-to-warning").hide();

                var selectedData = $("#year-to").val();
                if (selectedData < $("#year-from-list li").data('value')) {
                    $("#year-to-warning").show();
                    filteredSearch();
                } else if (selectedData) {
                    var itemAdded = addYearToFilterItem(selectedData);
                    if (itemAdded) {
                        filteredSearch();
                    }

                    //Clear selected value
                    $("#year-to").val('');

                }
            });

            $(document).on("click", "#add-min-amount-btn", function (event) {
                event.preventDefault();

                var selectedData = $("#amount-min").val();
                if (selectedData >= $("#max-funding-list li").data('value')) {
                    $("#min-funding-list").empty();
                    $("#min-funding-warning").hide();
                    $("#min-funding-warning").show();
                    filteredSearch();
                } else if (selectedData) {
                    $("#min-funding-list").empty();
                    $("#min-funding-warning").hide();
                    var itemAdded = addMinFundingFilterItem(selectedData);
                    if (itemAdded) {
                        filteredSearch();
                    }

                    //Clear selected value
                    $("#amount-min").val('');
                }
            });

            $(document).on("blur", "#amount-min", function (event) {
                event.preventDefault();

                var selectedData = $("#amount-min").val();
                if (selectedData != "" && selectedData >= $("#max-funding-list li").data('value')) {
                    $("#min-funding-list").empty();
                    $("#min-funding-warning").hide();
                    $("#min-funding-warning").show();
                    filteredSearch();
                } else if (selectedData) {
                    $("#min-funding-list").empty();
                    $("#min-funding-warning").hide();
                    var itemAdded = addMinFundingFilterItem(selectedData);
                    if (itemAdded) {
                        filteredSearch();
                    }

                    //Clear selected value
                    $("#amount-min").val('');
                }
            });

            $(document).on("keyup", "#amount-min", function (event) {

                var keycode = (event.keyCode ? event.keyCode : event.which);
                if (keycode == 13) {
                    $("#add-min-amount-btn").trigger("click");
                }
            });

            $(document).on("click", "#add-max-amount-btn", function (event) {
                event.preventDefault();

                var selectedData = $("#amount-max").val();
                if (selectedData != "" && selectedData <= $("#min-funding-list li").data('value')) {
                    $("#max-funding-list").empty();
                    $("#max-funding-warning").hide();
                    $("#max-funding-warning").show();
                    filteredSearch();
                } else if (selectedData) {
                    $("#max-funding-list").empty();
                    $("#max-funding-warning").hide();
                    var itemAdded = addMaxFundingFilterItem(selectedData);
                    if (itemAdded) {
                        filteredSearch();
                    }

                    //Clear selected value
                    $("#amount-max").val('');

                }
            });

            $(document).on("blur", "#amount-max", function (event) {
                event.preventDefault();

                var selectedData = $("#amount-max").val();
                if (selectedData != "" && selectedData <= $("#min-funding-list li").data('value')) {
                    $("#max-funding-list").empty();
                    $("#max-funding-warning").hide();
                    $("#max-funding-warning").show();
                    filteredSearch();
                } else if (selectedData) {
                    $("#max-funding-list").empty();
                    $("#max-funding-warning").hide();
                    var itemAdded = addMaxFundingFilterItem(selectedData);
                    if (itemAdded) {
                        filteredSearch();
                    }

                    //Clear selected value
                    $("#amount-max").val('');
                }
            });

            $(document).on("keyup", "#amount-max", function (event) {

                var keycode = (event.keyCode ? event.keyCode : event.which);
                if (keycode == 13) {
                    $("#add-max-amount-btn").trigger("click");
                }
            });

            $('#admin-org').on('typeahead:selected', function(event, item) {
                event.preventDefault();
                console.log(item);

                //var data = $(this).data("selected-data");
                if (item) {

                    var itemAdded = addAdminOrgFilterItem(item);
                    if (itemAdded) {
                        filteredSearch();
                    }

                    //Clear typeahead data
                    $("#admin-org-typeahead .typeahead").typeahead('val', '');
                }
            })

            $(document).on("click", "#add-state-btn", function (event) {
                event.preventDefault();

                var stateSelect = $("#state-select select");

                if (stateSelect.val() !== "") {

                    var selectedData = { name: stateSelect.find("option:selected").data("name"), shortName: stateSelect.val() };

                    var itemadded = addStateFilterItem(selectedData);
                    if (itemadded) {
                        filteredSearch();
                    }

                    //Clear selected value
                    $("#state-select select").val('');
                }
            });

            $(document).on("change", "#state-territory-select", function (event) {
                event.preventDefault();

                var stateSelect = $("#state-select select");

                if (stateSelect.val() !== "") {

                    var selectedData = { name: stateSelect.find("option:selected").data("name"), shortName: stateSelect.val() };

                    var itemadded = addStateFilterItem(selectedData);
                    if (itemadded) {
                        filteredSearch();
                    }

                    //Clear selected value
                    $("#state-select select").val('');
                }
            });

            $('#field-of-research').on('typeahead:selected', function (event, item) {
                event.preventDefault();
                console.log(item);

                if (item) {

                    if (item.code.length == 2) {
                        var itemAdded = addTwoDigitFieldOfResearchFilterItem(item);
                        if (itemAdded) {
                            filteredSearch();
                        }
                    } else {
                        var itemAdded = addFourDigitFieldOfResearchFilterItem(item);
                        if (itemAdded) {
                            filteredSearch();
                        }
                    }

                    //Clear typeahead data
                    $("#field-of-research-typeahead .typeahead").typeahead('val', '');
                }
            });

            $('#seo').on('typeahead:selected', function (event, item) {
                event.preventDefault();
                console.log(item);
                
                if (item) {

                    var itemAdded = addSeoFilterItem(item);
                    if (itemAdded) {
                        filteredSearch();
                    }

                    //Clear typeahead data
                    $("#seo-typeahead .typeahead").typeahead('val', '');
                }
            });

            $(document).on("change", "#status-select", function (event) {
                event.preventDefault();

                var selectedData = $("#status-select select").val();
                if (selectedData) {

                    var itemadded = addStatusFilterItem(selectedData);
                    if (itemadded) {
                        filteredSearch();
                    }

                    //Clear selected value
                    $("#status-select select").val('');
                }
            });

            $(document).on("click", ".list-item-remove", function (event) {
                event.preventDefault();
                $(this).closest("li").remove();
                filteredSearch();
            });

            $(document).on("shown.bs.collapse", ".le-register-collapsable", function (event) {
                var grantId = $(this).data("grant-id");
                var moreLessIcon = $("#more-less-icon-" + grantId);
                moreLessIcon.removeClass("icon-arrow-down-circle");
                moreLessIcon.addClass("icon-arrow-up-circle");
                $("#more-less-txt-" + grantId).text("Hide LIEF items")
            });

            $(document).on("click", ".le-register-collapsable", function (event) {

            });

            $(document).on("hidden.bs.collapse", ".le-register-collapsable", function (event) {
                var grantId = $(this).data("grant-id");
                var moreLessIcon = $("#more-less-icon-" + grantId);
                moreLessIcon.removeClass("icon-arrow-up-circle");
                moreLessIcon.addClass("icon-arrow-down-circle");
                $("#more-less-txt-" + grantId).text("Show LIEF items")
            });

            $(document).on("click", "#extract-to-file", function (event) {
                event.preventDefault();

                var grants = $(this).data("raw");
                arc.JsonToCSVConverter.downloadCSVFile(grants, "RGSGrants.csv");

            });

            function addGrantFunderFilterItem(value, text) {

                if (value) {
                    return addFilterListItem("#grant-funder-list", text, value, grantFunderQueryParm);
                }
                return false;
            }

            function addProgramFilterItem(data) {

                if (data) {
                    return addFilterListItem("#program-list", data, data, programQueryParm);
                }
                return false;
            }

            function addSeoFilterItem(data) {
                if (data) {
                    return addFilterListItem("#seo-list", data.code + " - " + data.name, data.code, seoQueryParm);
                }
                return false;
            }

            function addSchemeFilterItem(data) {

                if (data) {
                    return addFilterListItem("#scheme-list", data, data, schemeQueryParm);
                }
                return false;
            }

            function addYearFromFilterItem(data) {

                if (data) {
                    return addFilterListItem("#year-from-list", "From: " + data, data, yearFromQueryParm);
                }
                return false;
            }

            function addYearToFilterItem(data) {

                if (data) {
                    return addFilterListItem("#year-to-list", "To: " + data, data, yearToQueryParm);
                }
                return false;
            }

            function addMinFundingFilterItem(data) {

                var minFunding = "Min: $" + data.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");

                if (data) {
                    return addFilterListItem("#min-funding-list", minFunding, data, minFundingQueryParm);
                }
                return false;
            }

            function addMaxFundingFilterItem(data) {

                var maxFunding = "Max: $" + data.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");

                if (data) {
                    return addFilterListItem("#max-funding-list", maxFunding, data, maxFundingQueryParm);
                }
                return false;
            }

            function addAdminOrgFilterItem(data) {
                if (data) {
                    return addFilterListItem("#admin-org-list", data.name, data.name, adminOrgQueryParm);
                }
                return false;
            }

            function addStateFilterItem(data) {

                if (data) {
                    return addFilterListItem("#state-list", data.name, data.shortName, stateQueryParm);
                }
                return false;
            }

            function addFourDigitFieldOfResearchFilterItem(data) {
                if (data) {
                    return addFilterListItem("#field-of-research-list", data.code + " - " + data.name, data.code, fourDigitForQueryParm);
                }
                return false;
            }

            function addTwoDigitFieldOfResearchFilterItem(data) {
                if (data) {
                    return addFilterListItem("#field-of-research-list", data.code + " - " + data.name, data.code, twoDigitForQueryParm);
                }
                return false;
            }

            function addStatusFilterItem(data) {

                if (data) {
                    return addFilterListItem("#status-list", data, data, statusQueryParm);
                }
                return false;
            }

            function addFilterListItem(ul, displayName, value, queryParm) {

                var list = getListDisplayNames(ul);

                if (!_.contains(list, displayName)) {
                    var itemTemplate = Handlebars.compile($("#list-item-template").html());
                    $(ul).append(itemTemplate({ displayName: displayName, value: value, queryParm: queryParm }));
                    return true;
                }
                return false;
            }

            function getListDisplayNames(ul) {

                return _.map($(ul).children("li"), function (li) {
                    return $(li).data("display-name");
                });
            }

            function getQuery(operator, subQueryList) {

                var filter = "";
                _.each(subQueryList, function (q) {

                    if (q) {

                        if (filter) {
                            filter = filter + " " + operator;
                        }

                        filter = filter + "(" + q + ")";
                    }

                });

                return filter;
            }

            function getSubQueryFromListElement(ul, operator) {

                var subQuery = "";

                _.each($(ul).children("li"), function (li) {

                    var str = $(li).data("value");
                    var parameter = $(li).data("query-parm");

                    if (subQuery) {
                        subQuery = subQuery + " " + operator + " ";
                    }

                    subQuery = subQuery + parameter + '="' + str + '"';
                });

                return subQuery;
            }

            function getSubQueryFromCheckboxElement(el) {
                return document.querySelector(el).checked ? $(el).data("query-parm") + '="true"' : null;
            }

            function filteredSearch(pageNumber, pageSize, sort) {

                //Scroll to top of search-results-div
                var scrollPosition = $('#search-results-div').offset().top;
                if (scrollPosition < $(window).scrollTop() || scrollPosition > ($(window).scrollTop() + $(window).height())) {
                    $('html,body').scrollTop(scrollPosition - 50);
                }

                pageNumber = pageNumber ? pageNumber : defaultPageNumber;
                pageSize = pageSize ? pageSize : defaultPageSize;
                sort = sort ? sort : defaultSort;

                var search = $("#grant-search-txt").val();
                var grantFunderSubQuery = getSubQueryFromListElement("#grant-funder-list", orOperator);
                var programSubQuery = getSubQueryFromListElement("#program-list", orOperator);
                var schemeSubQuery = getSubQueryFromListElement("#scheme-list", orOperator);
                var yearFromSubQuery = getSubQueryFromListElement("#year-from-list", orOperator);
                var yearToSubQuery = getSubQueryFromListElement("#year-to-list", orOperator);
                var minFundingSubQuery = getSubQueryFromListElement("#min-funding-list", orOperator);
                var maxFundingSubQuery = getSubQueryFromListElement("#max-funding-list", orOperator);
                var adminOrgSubQuery = getSubQueryFromListElement("#admin-org-list", orOperator);
                var stateSubQuery = getSubQueryFromListElement("#state-list", orOperator);
                var fieldOfResearchSubQuery = getSubQueryFromListElement("#field-of-research-list", orOperator);
                var statusSubQuery = getSubQueryFromListElement("#status-list", orOperator);
                var seoSubQuery = getSubQueryFromListElement("#seo-list", orOperator);


                var filter = getQuery(andOperator, [grantFunderSubQuery, programSubQuery,
                    schemeSubQuery, yearFromSubQuery, yearToSubQuery, minFundingSubQuery,
                    maxFundingSubQuery, adminOrgSubQuery, stateSubQuery, fieldOfResearchSubQuery,
                    statusSubQuery, seoSubQuery]);

                if (search || filter) {
                    filter = encodeURIComponent(filter);
                    search = encodeURIComponent(search);
                    router.navigate("#/" + pageSize + "/" + pageNumber + "/" + sort + "/" + search + "/" + filter);
                }
                else {
                    router.navigate("#/" + pageSize + "/" + pageNumber + "/" + sort);
                }
            }

            var Parameters = [];
            var BinaryCount = 0;

            function Quote(str) {
                return '"' + str + '"';
            }

            function InsertSpan(count) {
                return "<span data-count='" + count + "' class='desc-binary desc-binary-offset-" + count + "'>";
            }

            function SearchDescription2Html(node, type, types) {
                var result = "";
                switch (node.Name) {
                    case "StopWord":
                    case "StopWordList":
                        break;

                    case "BinaryExpression":
                        {
                            if (node.ChildNodes[0].Name == "StopWord" && node.ChildNodes[2].Name == "StopWord") {
                                break;
                            }
                            else if (node.ChildNodes[0].Name == "StopWord") {
                                result = SearchDescription2Html(node.ChildNodes[2], type, types);
                            }
                            else if (node.ChildNodes[2].Name == "StopWord") {
                                result = SearchDescription2Html(node.ChildNodes[0], type, types);
                            }
                            else {

                                var opSym = "";
                                var op = node.ChildNodes[1].TokenText;
                                var sqlOp = "";
                                switch (op) {
                                    case "":
                                    case "&":
                                    case "and":
                                        sqlOp = " AND ";
                                        type = types.Inflectional;
                                        break;
                                    case "-":
                                        sqlOp = " AND NOT ";
                                        break;
                                    case "|":
                                    case "or":
                                        sqlOp = " OR ";
                                        break;
                                }

                                var lhs = SearchDescription2Html(node.ChildNodes[0], type, types);
                                var rhs = SearchDescription2Html(node.ChildNodes[2], type, types);
                                if (lhs != "" && rhs != "") {
                                    result += InsertSpan(BinaryCount++);
                                    result += lhs + sqlOp + rhs + "</span>";
                                }
                                else if (lhs != "") {
                                    return lhs;
                                }
                                else if (rhs != "") {
                                    return rhs;
                                }
                            }
                            break;
                        }

                    case "FilterBinaryExpression":
                        {
                            result += InsertSpan(BinaryCount++);
                            var opSym = "";
                            var op = node.ChildNodes[1].TokenText;
                            var sqlOp = "";
                            switch (op) {
                                case "":
                                case "&":
                                case "and":
                                    sqlOp = " AND ";
                                    type = types.Inflectional;
                                    break;
                                case "-":
                                    sqlOp = " AND NOT ";
                                    break;
                                case "|":
                                case "or":
                                    sqlOp = " OR ";
                                    break;
                            }

                            var lhs = SearchDescription2Html(node.ChildNodes[0], type, types);
                            var rhs = SearchDescription2Html(node.ChildNodes[2], type, types);
                            if (lhs != "" && rhs != "") {
                                result += lhs + sqlOp + rhs + "</span>";
                            }
                            else if (lhs != "") {
                                return lhs + "</span>";
                            }
                            else {
                                return rhs + "</span>";
                            }

                            //result = "<span class='desc-binary'>" + SearchDescription2Html(node.ChildNodes[0], type, types) + "</span>" + sqlOp + "<span class='desc-binary'>" + SearchDescription2Html(node.ChildNodes[2], type) + "</span>";
                            //result = "(" + SearchDescription2Html(node.ChildNodes[0], type, types) + sqlOp + SearchDescription2Html(node.ChildNodes[2], type, types) + ")";
                            break;
                        }

                    case "PrimaryExpression":
                        var temp = SearchDescription2Html(node.ChildNodes[0], type, types);
                        if (temp.length > 0) {
                            result = temp;
                        }
                        //                result = "(" + SearchDescription2Html(node.ChildNodes[0], type, types) + ")";
                        break;

                    case "FilterPrimaryExpression":
                        result = SearchDescription2Html(node.ChildNodes[0], type, types);
                        break;

                    case "ProximityList":
                        var tmp = new Array(node.ChildNodes.length);
                        type = types.Exact;
                        for (var i = 0; i < node.ChildNodes.length; i++) {
                            tmp[i] = SearchDescription2Html(node.ChildNodes[i], type, types);
                        }
                        result = "(" + tmp.join(" Start / Ends with ") + ")";
                        type = types.Inflectional;
                        break;

                    case "ProximityListElement":
                        return SearchDescription2Html(node.ChildNodes[node.ChildNodes.length - 1], type, types);
                        break;

                    case "Phrase":
                        result = Quote(node.TokenString.replace(/</g, "&lt").replace(/>/g, "&gt"));
                        break;

                    case "FilterPhrase":
                        result = node.TokenString;
                        break;

//                    case "ThesaurusExpression":
//                        result = " Like Synonym of " + Quote(node.ChildNodes[1].TokenString) + " ";
//                        break;

                    case "ExactExpression":
                        result = " \"" + node.ChildNodes[1].TokenString + "\" ";
                        break;

                    case "KeywordInSearch":
                        switch (type) {
                            case types.Inflectional:
                                result = node.ChildNodes[0].TokenString;
                                if (result.endsWith("*"))
                                    result = Quote(node.ChildNodes[0].TokenString);
                                else
                                    result = " Like " + Quote(node.ChildNodes[0].TokenString) + " ";
                                break;
                            case types.Exact:
                                result = node.ChildNodes[0].TokenString;
                                break;
                        }
                        break;

                    case "Term":
                        switch (type) {
                            case types.Inflectional:
                                result = node.TokenString;
                                var alpha = result.match("[a-zA-Z]");
                                var symbols = result.match("[:/.]");
                                if (alpha == null || alpha.length == 0 || (symbols != null && symbols.length != 0)) {
                                    result = node.TokenString;
                                }
                                else if (result.endsWith("*")) {
                                    result = Quote(node.TokenString);
                                }
                                else {
                                    result = " Like " + Quote(node.TokenString) + " ";
                                }
                                break;
                            case types.Exact:
                                result = node.TokenString;
                                break;
                        }
                        break;

                    case "FilterTerm":
                        result = node.TokenString;
                        break;
                    case "GrantFunderExpression":
                        result = "Grant Funder = " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "NotGrantFunderExpression":
                        result = "Grant Funder != " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "ProgramExpression":
                        result = "Program = " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "NotProgramExpression":
                        result = "Program != " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "SchemeExpression":
                        result = "Scheme = " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "NotSchemeExpression":
                        result = "Scheme != " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "FundingYearFromExpression":
                        result = "Year From = " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "FundingYearToExpression":
                        result = "Year To = " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "GrantValueFromExpression":
                        result = "Grant Value From = " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "GrantValueToExpression":
                        result = "Grant Value To = " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "GranteeExpression":
                        result = "Grantee = " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "NotGranteeExpression":
                        result = "Grantee != " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "FourDigitFieldOfResearchExpression":
                        result = "Four Digit FoR = " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "NotFourDigitFieldOfResearchExpression":
                        result = "Four Digit FoR != " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "TwoDigitFieldOfResearchExpression":
                        result = "Two Digit FoR = " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "NotTwoDigitFieldOfResearchExpression":
                        result = "Two Digit FoR != " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "StateTerritoryExpression":
                        result = "State/Territory = " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "NotStateTerritoryExpression":
                        result = "State/Territory != " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "StatusExpression":
                        result = "Status = " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "NotStatusExpression":
                        result = "Status != " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "SeoCodeExpression":
                        result = "SEO Code = " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    case "NotSeoCodeExpression":
                        result = "SEO Code != " + Quote(node.ChildNodes[2].TokenString);
                        break;
                    
                    case "FilterAndExpression":
                    case "ExpressionOnly":
                    case "FilterExpressionOnly":
                        {
                            var freeText = false;
                            var fullTextQuery = "";

                            for (var i = 0; i < node.ChildNodes.length; i++) {
                                switch (node.ChildNodes[i].Name) {
                                    case "PrimaryExpression":
                                    case "BinaryExpression":
                                    case "StopWord":
                                        fullTextQuery = SearchDescription2Html(node.ChildNodes[i], type, types);
                                        if (fullTextQuery != "") {
                                            freeText = true;
                                        }
                                        break;
                                }
                            }
                            result = freeText ? "Calculate Rank " : " ";
                            for (var i = 0; i < node.ChildNodes.length; i++) {
                                switch (node.ChildNodes[i].Name) {
                                    case "PrimaryExpression":
                                    case "BinaryExpression":
                                    case "StopWord":
                                        {

                                            if (fullTextQuery != "") {
                                                result += fullTextQuery;
                                            }
                                            break;
                                        }
                                    case "FilterBinaryExpression":
                                    case "FilterPrimaryExpression":
                                        {
                                            //                                            result += "<br/><br/><br/><br/>Filtering on ";
                                            result += " Filtering on ";
                                            result += SearchDescription2Html(node.ChildNodes[i], type, types);
                                            break;
                                        }
                                }
                            }

                            if (freeText) {
                                //result += "SELECT CTEDistincyResearchOutput.Id, Score, Total FROM CTEDistincyResearchOutput\n";
                            }
                            else {
                                //result += "SELECT CTEDistincyResearchOutput.Id, 0 as Score, Total FROM CTEDistincyResearchOutput\n";
                            }

                            //result += "\nORDER BY Score DESC\n";
                        }
                        break;
                    // This should never happen, even if input string is garbage
                    default:
                        console.log("Converter failed: unexpected term: " + node.Name + ". Please investigate.");
                        break;
                }
                return result;
            }

            function DisplaySearchDescription(json) {

                if (!json || !json.ast) return;

                Parameters = [];
                BinaryCount = 0;

                var $search_description = $('#search_description');
                $search_description.html('<div class="description-div"><code class="g-color-gray-dark-v1">' + SearchDescription2Html(json.ast, json.types.Inflectional, json.types) + '</code></div><br/>');

                const webcolors = ["Blue", "Green", "Red", "Navy", "Teal", "Gray", "Purple", "Black", "Olive", "Fuchsia"];
                $('.desc-binary').each(function () {
                    var $this = $(this);
                    var count = $this.data('count');
                    $this.css('border-bottom-color', webcolors[count % webcolors.length]);
                });
            }

            function setupBackboneRouter() {

                var appRouter = Backbone.Router.extend({

                    filter: null,
                    sort: null,
                    routes: {
                        "(:pageSize)(/)(:pageNum)(/)(:sort)(/)(:search)(/)(:filter)(/)": "loadGrants"
                    },
                    loadGrants: function (pageSize, pageNum, sort, search, filter) {

                        this.filter = filter;
                        this.sort = sort;
                        var searchLink = "https://dataportal.arc.gov.au/RGS/API/grants";
                        var searchDescriptionDiv = $('#search_description');
                        var grantSearchResultsDiv = $("#search-results");
                        var grantSearchPaginationDiv = $("#search-pagination");
                        var grantSearchInfoDiv = $("#search-info");

                        if (!$.isNumeric(pageSize)) {
                            pageSize = defaultPageSize;
                        }

                        if (!$.isNumeric(pageNum)) {
                            pageNum = defaultPageNumber;
                        }

                        var navpayload = {
                            pageSize: pageSize,
                            pageNum: pageNum,
                            search: search,
                            filter: filter,
                            sort: sort
                        }

                        window.localStorage.setItem("ncgpNavPayload", JSON.stringify(navpayload));

                        searchLink = searchLink + "?page%5Bsize%5D=" + pageSize + "&page%5Bnumber%5D=" + pageNum;
                        if (sort !== null) {
                            searchLink = searchLink + "&sort=" + sort;
                        }
                        $("#grant-search-txt").val(search);
                        searchDescriptionDiv.empty();
                        grantSearchResultsDiv.empty();
                        grantSearchPaginationDiv.empty();
                        grantSearchInfoDiv.empty();

                        if (search || filter) {

                            var query = "";
                            var expression = "";
                            var filters = [];

                            if (search) {
                                //remove querySeperator if it exists in the begining of search string
                                var splits = search.trim().split(querySeperator);
                                expression = splits[0].trim();
                                _.each(splits.slice(1), function (s) {
                                    filters.push("(" + s.trim() + ")");
                                });
                            }

                            if (filter) {
                                filters.push(filter);
                                updateUIFilters(filter);
                            }

                            query = expression;
                            if (filters.length !== 0) {
                                if (query) {
                                    query = query + " " + querySeperator + " " + filters.join(" " + andOperator + " ");
                                }
                                else {
                                    query = filters.join(" " + andOperator + " ");
                                }
                            }

                            if (query) {
                                var encodedQuery = encodeURIComponent(query);

                                if (encodedQuery.length > 2000) {
                                    var errorTemplate = getErrorTemplateHtml({ status: "The search query is too long." });
                                    grantSearchInfoDiv.html(errorTemplate);

                                    return;

                                }

                                searchLink = searchLink + "&filter=" + encodedQuery;
                            }

                        }
                        

                        $("#show-loading").show();

                        $.get(searchLink, function (apiData) {

                            var pageNumber = apiData.meta["requested-page-number"];
                            var pageSize = apiData.meta["requested-page-size"];
                            var totalPages = apiData.meta["total-pages"];
                            var totalCount = apiData.meta["total-size"];
                            var searchDescription = apiData.meta["search-description"];
                            var sort = apiData.meta["sort-by"];
                            var prevPageNumber = pageNumber > 1 ? pageNumber - 1 : defaultPageNumber;
                            var nextPageNumber = pageNumber < totalPages ? pageNumber + 1 : totalPages;
                            var grantData = [];
                            var selfLink = apiData.links["self"];

                            DisplaySearchDescription(searchDescription);

                            apiData.data.forEach(function (obj) {
                                grantData.push(obj.attributes);
                                grantSearchResultsDiv.append(grantSearchResultTemplate({ id: obj.id, data: obj.attributes }));
                            });

                            var pageData = { pageNumber: pageNumber, pageSize: pageSize, totalPages: totalPages, prevPageNumber: prevPageNumber, nextPageNumber: nextPageNumber, totalCount: totalCount, filter: filter, grantData: JSON.stringify(grantData), selfLink: selfLink, sort: sort };

                            grantSearchInfoDiv.append(grantSearchInfoTemplate(pageData))

                            grantSearchPaginationDiv.append(grantSearchPaginationTemplate(pageData))

                        })
                        .fail(function (xhr) {
                            var errorTemplate = getErrorTemplateHtml(xhr);
                            grantSearchInfoDiv.html(errorTemplate);
                        })
                        .always(function (xhr) {
                            $("#show-loading").hide();
                        });

                        
                    }
                });



                var router = new appRouter();
                Backbone.history.start();

                return router;
            }


            function getErrorTemplateHtml(xhr) {
                var data = { errorCode: xhr.status };
                if (xhr.responseJSON && xhr.responseJSON.errors) {
                    var error = xhr.responseJSON.errors[0];
                    data.errorText = error.title;
                    data.errorDetail = error.detail;
                }
                var errorTemplate = Handlebars.compile($("#app-error-template").html());
                return errorTemplate(data);
            }

            function loadLookupData() {
                
                $("#show-loading").show();

                var $get = $.get("https://dataportal.arc.gov.au/RGS/API/lookup-data");

                return $get.done(function (apiData) {

                    grantFunderLookup = apiData.data.attributes["grant-funders"];

                    _.each(grantFunderLookup, function (funder) {
                        $("#grant-funder-select select").append('<option value="' + funder["short-name"] + '">' + funder.name + '</option>');
                    });

                    programLookup = apiData.data.attributes["programs"];
                    var programGroups = _.groupBy(programLookup, function (obj) { return obj["grant-funder"] });
                    
                    _.each(programGroups, function (programs, grantFunder) {                        
                        var options = '<optgroup label="' + grantFunder + '">';
                        
                        _.each(programs, function (program) {                            
                            options += '<option value="' + program.name + '">' + program.name + '</option>';
                        });

                        options += '</optgroup>';

                        $("#program-select select").append(options);
                    });

                    schemeLookup = apiData.data.attributes["schemes"];
                    var schemeGroups = _.groupBy(schemeLookup, function (obj) { return obj["grant-funder"] });

                    _.each(schemeGroups, function (schemes, grantFunder) {
                        var options = '<optgroup label="' + grantFunder + '">';

                        _.each(schemes, function (scheme) {
                            options += '<option value="' + scheme.name + '">' + scheme.name + '</option>';
                        });

                        options += '</optgroup>';

                        $("#scheme-select select").append(options);
                    });

                    yearLookup = apiData.data.attributes["years"];
                    _.each(yearLookup, function (year) {
                        $(".year-data").append('<option value="' + year + '">' + year + '</option>');
                    });

                    adminOrgLookup = apiData.data.attributes["administering-organisatons"];
                    var adminOrgs = new Bloodhound({
                        datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name', 'short-name'),
                        queryTokenizer: Bloodhound.tokenizers.whitespace,
                        local: adminOrgLookup
                    });

                    $("#admin-org-typeahead .typeahead").typeahead(
                        {
                            hint: true,
                            highlight: true,
                            minLength: 1
                        },
                        {
                            name: 'adminOrgs',
                            display: 'name',
                            source: adminOrgs,
                            templates: {
                                empty: [
                                    '<div class="empty-message">',
                                    'Unable to find any organisations that match the current query',
                                    '</div>'
                                ].join('\n'),
                                suggestion: Handlebars.compile('<div>{{name}}{{#if short-name}} ({{short-name}}){{/if}}</div>')
                            }
                        }).on('typeahead:selected', function (obj, datum) {
                            $("#add-admin-org-btn").data("selected-data", datum);
                        }).on('typeahead:autocompleted ', function (obj, datum) {
                            $("#add-admin-org-btn").data("selected-data", datum);
                        });

                    stateLookup = apiData.data.attributes["states"];
                    _.each(stateLookup, function (state) {
                        $("#state-select select").append("<option value='" + state["short-name"] + "' data-name='" +  state.name + "'>" + state.name + "</option>");
                    });

                    fieldOfResearchLookup = apiData.data.attributes["fields-of-research"];
                    var fieldsOfResearch = new Bloodhound({
                        datumTokenizer: Bloodhound.tokenizers.obj.whitespace('code', 'name'),
                        queryTokenizer: Bloodhound.tokenizers.whitespace,
                        local: fieldOfResearchLookup
                    });

                    seoLookup = apiData.data.attributes["socio-economic-objectives"];
                    var seo = new Bloodhound({
                        datumTokenizer: Bloodhound.tokenizers.obj.whitespace('code', 'name'),
                        queryTokenizer: Bloodhound.tokenizers.whitespace,
                        local: seoLookup
                    });

                    statusLookup = apiData.data.attributes["statuses"];
                    _.each(statusLookup, function (status) {
                        $("#status-select select").append('<option value="' + status + '">' + status + '</option>');
                    });

                    $("#field-of-research-typeahead .typeahead").typeahead(
                    {
                        hint: true,
                        highlight: true,
                        minLength: 1
                    },
                    {
                        name: 'fieldOfResearch',
                        display: Handlebars.compile('{{code}} - {{name}}'),
                        source: fieldsOfResearch,
                        templates: {
                            empty: [
                                '<div class="empty-message">',
                                'Unable to find any Field of Research codes that match the current query',
                                '</div>'
                            ].join('\n'),
                            suggestion: Handlebars.compile('<div>{{code}} - {{name}}</div>')
                        }
                    }).on('typeahead:selected', function (obj, datum) {
                        $("#add-field-of-research-btn").data("selected-data", datum);
                    }).on('typeahead:autocompleted ', function (obj, datum) {
                        $("#add-field-of-research-btn").data("selected-data", datum);
                    });

                    $("#seo-typeahead .typeahead").typeahead(
                    {
                        hint: true,
                        highlight: true,
                        minLength: 1
                    },
                    {
                        name: 'seo',
                        display: Handlebars.compile('{{code}} - {{name}}'),
                        source: seo,
                        templates: {
                            empty: [
                                '<div class="empty-message">',
                                'Unable to find any Socio Economic Objective codes that match the current query',
                                '</div>'
                            ].join('\n'),
                            suggestion: Handlebars.compile('<div>{{code}} - {{name}}</div>')
                        }
                    }).on('typeahead:selected', function (obj, datum) {
                        //$("#add-seo-btn").data("selected-data", datum);
                    }).on('typeahead:autocompleted ', function (obj, datum) {
                        //$("#add-seo-btn").data("selected-data", datum);
                    });

                    $("#sidebar-filters").show();

                })
                .fail(function (xhr) {
                    $("#sidebar-filters").hide();
                    var errorTemplate = getErrorTemplateHtml(xhr);
                    $("#search-header-section").hide();
                    $("#search-result-container").html(errorTemplate);
                })
                .always(function (xhr) {
                    $("#show-loading").hide();
                });

            };

            function resetUIFilters() {
                //Clear all UI Filters...
                $(".list-item-remove").closest("li").remove();

            }

            function updateUIFilters(routedFilter) {

                //Clear all UI Filters...
                resetUIFilters();
                
                //Add filters
                var grantFunderFilters = getRoutedFilterValues(routedFilter, grantFunderQueryParm);
                _.each(grantFunderFilters, function (value) {
                    
                    var data = _.find(grantFunderLookup, function (funder) {
                        return funder["short-name"] == value
                    });

                    addGrantFunderFilterItem(data["short-name"], data.name);
                });

                var programFilters = getRoutedFilterValues(routedFilter, programQueryParm);
                _.each(programFilters, function (value) {
                    var data = _.find(programLookup, function (program) {
                        return program.name == value
                    });

                    addProgramFilterItem(data.name);
                });

                var schemeFilters = getRoutedFilterValues(routedFilter, schemeQueryParm);
                _.each(schemeFilters, function (value) {
                    var data = _.find(schemeLookup, function (scheme) {
                        return scheme.name == value
                    });

                    addSchemeFilterItem(data.name);
                });

                var yearFromFilters = getRoutedFilterValues(routedFilter, yearFromQueryParm);
                _.each(yearFromFilters, function (value) {
                    var data = _.find(yearLookup, function (year) {
                        return year == value
                    });

                    addYearFromFilterItem(data);
                });

                var yearToFilters = getRoutedFilterValues(routedFilter, yearToQueryParm);
                _.each(yearToFilters, function (value) {
                    var data = _.find(yearLookup, function (year) {
                        return year == value
                    });

                    addYearToFilterItem(data);
                });

                var minFundingFilters = getRoutedFilterValues(routedFilter, minFundingQueryParm);
                if (minFundingFilters.length > 0) {
                    var minFunding = minFundingFilters[0];
                    addMinFundingFilterItem(minFunding);
                }

                var maxFundingFilters = getRoutedFilterValues(routedFilter, maxFundingQueryParm);
                if (maxFundingFilters.length > 0) {
                    var maxFunding = maxFundingFilters[0];
                    addMaxFundingFilterItem(maxFunding);
                }

                var adminOrgFilters = getRoutedFilterValues(routedFilter, adminOrgQueryParm);
                _.each(adminOrgFilters, function (value) {
                    var data = _.find(adminOrgLookup, function (adminOrg) {
                        return adminOrg["name"] == value
                    });

                    addAdminOrgFilterItem(data);
                });

                var stateFilters = getRoutedFilterValues(routedFilter, stateQueryParm);
                _.each(stateFilters, function (value) {
                    var data = _.find(stateLookup, function (state) {
                        return state["short-name"] == value
                    });

                    addStateFilterItem({ name: data.name, shortName: data["short-name"] });
                })

                var fourDigitFieldOfResearchFilters = getRoutedFilterValues(routedFilter, fourDigitForQueryParm);
                _.each(fourDigitFieldOfResearchFilters, function (value) {
                    var data = _.find(fieldOfResearchLookup, function (fieldOfResearch) {
                        return fieldOfResearch["code"] == value
                    });

                    addFourDigitFieldOfResearchFilterItem(data);
                });

                var twoDigitFieldOfResearchFilters = getRoutedFilterValues(routedFilter, twoDigitForQueryParm);
                _.each(twoDigitFieldOfResearchFilters, function (value) {
                    var data = _.find(fieldOfResearchLookup, function (fieldOfResearch) {
                        return fieldOfResearch["code"] == value
                    });

                    addTwoDigitFieldOfResearchFilterItem(data);
                });

                var seoFilters = getRoutedFilterValues(routedFilter, seoQueryParm);
                _.each(seoFilters, function (value) {
                    var data = _.find(seoLookup, function (seo) {
                        return seo["code"] == value
                    });

                    addSeoFilterItem(data);
                });

                var statusFilters = getRoutedFilterValues(routedFilter, statusQueryParm);
                _.each(statusFilters, function (value) {
                    var data = _.find(statusLookup, function (status) {
                        return status == value
                    });

                    addStatusFilterItem(data);
                });
                
            }

            function getRoutedFilterValues(filter, queryParameter) {

                // Regex to match quoted words
                var regxQuote = "([\"'])(?:(?=(\\\\?))\\2.)*?\\1";
                // Regex to match filter with key and value (eg. scheme="Linkage Projects")
                var regx = new RegExp(queryParameter + '\\s*=\\s*' + regxQuote, "ig");
                var filterKeyValues = filter.match(regx);

                //Get the list of values from matched keyValues
                var values = _.map(filterKeyValues, function (keyValue) {

                    // Apply regex to match the quoted string
                    var reg = new RegExp(regxQuote, "ig");
                    var value = keyValue.match(reg)[0];

                    // Remove the double quotes from the value
                    if (value) {
                        return value.replace(/(^")|("$)/g, '');
                    }
                });

                return values;
            }

        });

    </script>

    <!-- Handlebars - Results template -->
    <script id="search-result-template" type="text/x-handlebar-template">

        <article>
            {{#with data}}
            <h3 class="h4 g-mb-15">
                <a class="u-link-v6" href="/RGS/Web/Grants/{{encodeParameter code}}">{{code}} &mdash; {{grantee}}</a>
            </h3>
            <p>{{grant-title}}</p>
            <p>{{grant-summary}}</p>
            <ul class="list-unstyled mb-0">

                <li class="media g-mb-8">
                    <span class="d-block g-color-gray-dark-v5 g-width-220">Grant Funder:</span>
                    <span class="media-body">{{grant-funder}}</span>
                </li>
                <li class="media g-mb-8">
                    <span class="d-block g-color-gray-dark-v5 g-width-220">Grantee:</span>
                    <span class="media-body">{{grantee}}</span>
                </li>
                <li class="media g-mb-8">
                    <span class="d-block g-color-gray-dark-v5 g-width-220">Program Name:</span>
                    <span class="media-body">{{program-name}}</span>
                </li>
                <li class="media g-mb-8">
                    <span class="d-block g-color-gray-dark-v5 g-width-220">Scheme Name:</span>
                    <span class="media-body">{{scheme-name}}</span>
                </li>
                {{#if grant-priorities}}
                <li class="media g-mb-8">
                    <span class="d-block g-color-gray-dark-v5 g-width-220">Priority / Challenges:</span>
                    <span class="media-body">
                        <div class="table-responsive">
                          <table class="table" style="border-bottom:0px !important;">
                            <thead>
                              <tr>
                                <th style="padding-left:0px; border:0px !important; color:#555;">Type</th>
                                <th style="padding-left:0px; border:0px !important; color:#555;">Name</th>
                              </tr>
                            </thead>

                            <tbody>
                                {{#each grant-priorities}}
                                  <tr>
                                    <td style="color:#555; padding-left:0px;">{{priority-type}}</td>
                                    <td style="color:#555; padding-left:0px;">{{priority-name}}</td>
                                  </tr>
                                {{/each}}

                            </tbody>
                          </table>
                        </div>

                    </span>
                </li>
                {{/if}}
                <li class="media g-mb-8">
                    <span class="d-block g-color-gray-dark-v5 g-width-220">Lead Investigator:</span>
                    <span class="media-body">{{lead-investigator}}</span>
                </li>
                <li class="media g-mb-8">
                    <span class="d-block g-color-gray-dark-v5 g-width-220">Grant Value:</span>
                    <span class="media-body">{{formatCurrency grant-value}}</span>
                </li>
                <li class="media g-mb-8">
                    <span class="d-block g-color-gray-dark-v5 g-width-220">Funding Commencement Year:</span>
                    <span class="media-body">{{funding-commencement-year}}</span>
                </li>
                <li class="media g-mb-8">
                    <span class="d-block g-color-gray-dark-v5 g-width-220">Status:</span>
                    <span class="media-body">{{grant-status}}</span>
                </li>
                {{#if primary-field-of-research}}
                <li class="media g-mb-8">
                    <span class="d-block g-color-gray-dark-v5 g-width-220">Primary <acronym title="Field of Research">FoR</acronym>:</span>
                    <span class="media-body">{{primary-field-of-research}}</span>
                </li>
                {{/if}}
            </ul>
            {{/with}}

        </article>
        <hr class="g-brd-gray-light-v4 g-my-20">
    </script>

    <!-- Handlebars - Pagination template-->
    <script id="search-pagination-template" type="text/x-handlebars-template">
        {{#if totalPages}}
        <nav class="g-mb-50" aria-label="Page Navigation">
            <ul class="list-inline">
                {{#ifCond pageNumber '!=' 1}}
                <li class="list-inline-item">
                    <a class="u-pagination-v1__item u-btn-primary g-color-white g-bg-primary-dark-v1--hover rounded g-pa-4-13 grant-search-page-link" href="#" data-page-number="{{prevPageNumber}}" data-page-size="{{pageSize}}" data-sort="{{sort}}" aria-label="Previous">
                        <span aria-hidden="true">
                            <i class="fa fa-angle-left"></i>
                            Previous
                        </span>
                        <span class="sr-only">Previous</span>
                    </a>
                </li>
                {{/ifCond}}
                {{#ifCond pageNumber '!=' totalPages}}
                <li class="list-inline-item">
                    <a class="u-pagination-v1__item u-btn-primary g-color-white g-bg-primary-dark-v1--hover rounded g-pa-4-13 grant-search-page-link" href="#" data-page-number="{{nextPageNumber}}" data-page-size="{{pageSize}}" data-sort="{{sort}}" aria-label="Next">
                        <span aria-hidden="true">
                            Next
                            <i class="fa fa-angle-right"></i>
                        </span>
                        <span class="sr-only">Next</span>
                    </a>
                </li>
                <li class="list-inline-item float-right">
                    <span class="u-pagination-v1__item-info g-pa-4-11">Page {{pageNumber}} of {{totalPages}}</span>
                </li>
                {{/ifCond}}
            </ul>
        </nav>
        {{/if}}
    </script>

    <!-- Handlebars - Search info template-->
    <script id="search-info-template" type="text/x-handlebars-template">
        {{#if totalCount}}
        <div class="d-md-flex justify-content-between">
            <h3 class="h6 text-uppercase g-mb-10 g-mb--lg g-color-gray-dark-v1"><span class="g-color-gray-dark-v1">{{commaSeperator totalCount}}</span> Results</h3>
            <ul class="list-inline">
                <li class="list-inline-item g-mr-30 g-color-gray-dark-v1">
                    Show
                    <button type="button" class="btn btn-secondary dropdown-toggle h6 align-baseline g-brd-0 g-color-gray-dark-v1 g-color-black--hover g-bg-transparent g-font-weight-300 g-font-size-14 g-pa-0 g-pl-10 g-ma-0" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        {{pageSize}}
                    </button>
                    <div class="dropdown-menu rounded-0">
                        <a class="show-page-size dropdown-item g-color-gray-dark-v1 g-font-weight-300" href="#" data-sort="{{sort}}" data-page-number="{{pageNumber}}">20</a>
                        <a class="show-page-size dropdown-item g-color-gray-dark-v1 g-font-weight-300" href="#" data-sort="{{sort}}" data-page-number="{{pageNumber}}">50</a>
                        <a class="show-page-size dropdown-item g-color-gray-dark-v1 g-font-weight-300" href="#" data-sort="{{sort}}" data-page-number="{{pageNumber}}">100</a>
                        <a class="show-page-size dropdown-item g-color-gray-dark-v1 g-font-weight-300" href="#" data-sort="{{sort}}" data-page-number="{{pageNumber}}">1000</a>
                    </div>
                </li>
                <li class="list-inline-item g-mr-30 g-color-gray-dark-v1">
                    Page {{pageNumber}} of {{totalPages}}
                </li>
                <li class="list-inline-item">
                    <button type="button" class="btn btn-secondary dropdown-toggle h6 align-baseline g-brd-0 g-color-gray-dark-v1 g-color-black--hover g-bg-transparent g-font-weight-300 g-font-size-14 g-pa-0 g-pl-10 g-ma-0" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fa fa-download g-pos-rel g-top-1 mr-1"></i>Download as...
                    </button>
                    <div class="dropdown-menu rounded-0">
                        <a id="extract-to-file" class="dropdown-item g-color-gray-dark-v1 g-font-weight-300" href="#" data-raw="{{grantData}}" title="Extract results to CSV">CSV</a>
                        <a class="dropdown-item g-color-gray-dark-v1 g-font-weight-300" href="{{selfLink}}" target="_blank" title="Extract results to JSON">JSON</a>
                    </div>
                </li>
            </ul>
        </div>
        <div class="d-flex flex-row-reverse g-mb-10">
            <div class="form-group row">
                <label class="col-sm-4 col-form-label" for="sort-by">Sorted By:</label>
                <select class="form-control col-sm-8" id="sort-by" name="sort-by">
                    <option {{#equal sort ""}} selected {{/equal}}value="" data-page-size="{{pageSize}}">Most Relevant</option>
                    <option {{#equal sort "money"}} selected {{/equal}}value="money" data-page-size="{{pageSize}}">Grant Value - Low to High</option>
                    <option {{#equal sort "-money"}} selected {{/equal}} value="-money" data-page-size="{{pageSize}}">Grant Value - High to Low</option>
                    <option {{#equal sort "funding-year"}} selected {{/equal}} value="funding-year" data-page-size="{{pageSize}}">Funding Year - Old to New</option>
                    <option {{#equal sort "-funding-year"}} selected {{/equal}} value="-funding-year" data-page-size="{{pageSize}}">Funding Year - New to Old</option>
                </select>
            </div>
        </div>
        {{else}}
        <div class="d-md-flex justify-content-between g-mb-30">
            <h3 class="h6 g-mb-10 g-mb--lg g-color-gray-dark-v1">No results to display.</h3>
        </div>
        {{/if}}
    </script>

    <!-- Handlebars - Filter list template-->
    <script id="list-item-template" type="text/x-handlebars-template">
        <li class="my-3" data-value="{{value}}" data-display-name="{{displayName}}" data-query-parm="{{queryParm}}">
            <span class="d-flex justify-content-between u-link-v5 g-color-gray-dark-v1 g-parent">
                {{displayName}}
                <a class="list-item-remove d-inline-block u-link-v5 g-color-gray-dark-v5 g-brd-gray-light-v3 text-center g-px-10 g-py-3" href="#">x</a>
            </span>
        </li>
    </script>

</body>
</html>
 contentType 9 text/html url 48 https://dataportal.arc.gov.au:443/RGS/Web/Grants responseCode 3 200 