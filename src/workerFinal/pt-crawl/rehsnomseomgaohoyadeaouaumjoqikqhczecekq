rehsnomseomgaohoyadeaouaumjoqikqhczecekq length 6 115852 page 115852 
<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head id="ctl00_Head1"><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><title>
	no.96 (1984:Nov) - Castlemaine Naturalist - Biodiversity Heritage Library
</title><meta name="description" content="The Biodiversity Heritage Library works collaboratively to make biodiversity literature openly available to the world as part of a global biodiversity community." /><meta name="viewport" content="width=device-width, initial-scale=1" /><link rel="shortcut icon" href="/favicon.ico" /><link rel="apple-touch-icon" href="/apple-touch-icon.png" /><link rel="stylesheet" href="/css/bhlaustylereference.css?v=7" /><link rel="stylesheet" href="/css/style.css?v=26" /><link rel="Stylesheet" href="/css/bookviewer.css?v=3" /><link rel="stylesheet" href="/css/socicon.css?v=1" media="all" /><link rel="stylesheet" href="/css/cookieconsent.css" />
    <script src="/js/libs/modernizr-1.6.min.js"></script>

    
    <link rel="stylesheet" type="text/css" href="/css/BookReader.css?v=4" />
    <link rel="stylesheet" type="text/css" href="/css/bookviewer_extra.css?v=10" />
    <link rel="stylesheet" type="text/css" href="/css/nspop.css?v=1" />


    <!-- START OF SmartSource Data Collector TAG v10.4.23 -->
    <!-- Copyright (c) 2018 Webtrends Inc.  All rights reserved. -->
    <script type="text/plain" data-category="analytics" data-service="webtrends">
    window.webtrendsAsyncInit=function(){
        var dcs=new Webtrends.dcs().init({
            dcsid:"dcsse0w37bdzpxzj2yuxm4sap_9g8y",
            domain:"logs1.smithsonian.museum",
            timezone:-5,
            i18n:true,
            fpcdom:".biodiversitylibrary.org",
            plugins:{
            }
            }).track();
    };
    (function(){
        var s=document.createElement("script"); s.async=true; s.src="/js/webtrends.min.js";    
        var s2=document.getElementsByTagName("script")[0]; s2.parentNode.insertBefore(s,s2);
    }());
    </script>
    <noscript><img alt="dcsimg" id="dcsimg" width="1" height="1" src="//logs1.smithsonian.museum/dcsse0w37bdzpxzj2yuxm4sap_9g8y/njs.gif?dcsuri=/nojavascript&amp;WT.js=No&amp;WT.tv=10.4.23&amp;dcssip=www.biodiversitylibrary.org"/></noscript>
    <!-- END OF SmartSource Data Collector TAG v10.4.23 -->
<meta name="citation_title" content="Castlemaine Naturalist" /><meta name="citation_publication_date" content="1984" /><meta name="citation_publisher" content="Castlemaine Field Naturalists Club" /><meta name="citation_language" content="ENG" /><meta name="citation_volume" content="no.96 (1984:Nov)" /><meta name="DC.title" content="Castlemaine Naturalist" /><meta name="DC.issued" content="1984" /><meta name="DC.publisher" content="Castlemaine Field Naturalists Club" /><meta name="DC.language" content="ENG" /><meta name="DC.citation.volume" content="no.96 (1984:Nov)" /><meta name="DC.identifier.URI" content="https://www.biodiversitylibrary.org/item/334462" /><meta name="citation_author" content="Australia" /><meta name="DC.creator" content="Australia" /><meta name="citation_author" content="Castlemaine Field Naturalists Club" /><meta name="DC.creator" content="Castlemaine Field Naturalists Club" /><meta name="citation_author" content="Castlemaine Field Naturalists Club" /><meta name="DC.creator" content="Castlemaine Field Naturalists Club" /><meta name="citation_marc001" content="46577" /><meta name="citation_pdf_url" content="https://www.biodiversitylibrary.org/itempdf/334462" /></head>

<body id="book-master" class="book-master">
    <script type="module" src="/js/cookieconsent-config.js?v=2"></script>
    <noscript>
        <div id="noscript-warning">BHL works best with JavaScript enabled</div>
    </noscript>
     <form name="aspnetForm" method="post" action="./334462" id="aspnetForm">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="VhR6NXfzUVsgz6G/G8ZXCk1lkS7GQFbyT96vE4ZPYCtrJ8oZF+K2IMMkNKDWVJYhf0KjxvvdpN9G/vexjw1V7ryzWBXeunuqSdAjnp6DWcB9COqXiVHq4MfSvtlolZ4f86xUCxam2pFjLAbs85XixfMteCIZ0soTNcPLnFwUbG8HtkAy0k1ytJ/wXJ2s4qMosI1Rj0Wkok4tLQeRvMbyxgYBd0mjbrx3yOucjP1wiNJmUqEVxGcdz6LNHJPlGUvjyCNVe0CM8hyB1KmtluarAyVBYvIdIbT3AEL/d92G5cysKyzW73eY5FBELJ8xhvGG6O+EM+Is0aUhDM9GoXbOXA2K9gsbCpq2KfR5Mp04XrfkuihI4GLGUqHyn8eos7nRGa8VuAgTw2EIa5QEcO0KPA==" />

<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="CAF96C6B" />  
                   <header>
                <div class="column-wrap">
                    <a id="logo" href="/">
		                <h1>Biodiversity Heritage Library</h1>
                    </a>
		            <nav style="width:475;">
			     		<a href="https://about.biodiversitylibrary.org">About</a>
			            <a href="https://about.biodiversitylibrary.org/help/">Help</a>				            
                        <a href="https://about.biodiversitylibrary.org/help/faq/">FAQ</a>
                        <span id="headersocialbook">
                            <span id="socicons"></span>
                            <script type="text/javascript" src="/js/socicon.js?v=1"></script>
                        </span>
		            </nav>
                    <nav id="altmetricbadgebook" style="float:left;line-height:0px;margin-top:18px;">
                        <div data-badge-popover="bottom" data-badge-type="donut" data-uri="" data-hide-no-mentions="true" data-no-score="true" data-template="biodiversitylibrary" class="altmetric-embed"></div>
                    </nav>
                    <div id="searchbar">
                        <span id="searchbar-searchtype">
                            <input value="F" name="ctl00$rdoSearchType" type="radio" id="rdoSearchTypeF" checked="checked" /> <label for="rdoSearchTypeF">Full-text</label>
                            <input value="C" name="ctl00$rdoSearchType" type="radio" id="rdoSearchTypeC" /> <label for="rdoSearchTypeC">Catalog</label>
                            &nbsp;&nbsp;<a style="margin-top:-2px;" target="_blank" rel="noopener noreferrer" href="https://about.biodiversitylibrary.org/ufaqs/how-do-i-search-the-bhl-collection/"><img src="/images/help.png" alt="Search help" title="What's This?" height="16" width="16" /></a>
                        </span>
                        <a href="/advsearch" title="Advanced Search">advanced search</a>
        	            <input name="ctl00$tbSearchTerm" type="text" id="tbSearchTerm" class="field" />
                        <input type="submit" name="ctl00$btnSearchSubmit" value="submit" id="btnSearchSubmit" class="button" />
                        
                    </div>
                </div>
            </header>
        <div class="harmfulcontentbanner">
	        Please read BHL&apos;s <a title="harmful content" href="https://about.biodiversitylibrary.org/about/harmful-content">Acknowledgment of Harmful Content</a>
        </div>
        
        
    <div id="page-title">
        <div id="volumebar"  style="float:right;" classcss="js-invisible no-js-hide">
            <a href="https://about.biodiversitylibrary.org/help/faq/" title="FAQ" class="report"><img alt="FAQ" src="/images/rpterror.png" /></a>
            
                <div class="buttondrop download">Download Contents<div class="play"></div>
                    <div class="downloadcontents">
                        <div><a href="/bibliography/207756">View Metadata</a></div>
                        <div><a href="#" class="selectpages">Select pages to download</a></div>
                        <div><a href="#" class="selectpart">Download Part</a></div>
                        <div><a href="#" class="downloadbook">Download Book</a></div>
                        <div><a href="#" class="downloadcitation">Download Citation</a></div>
                        <div><a href="https://www.archive.org/details/castlemainenatunoveaustk" rel="noopener noreferrer" target="_blank">View at Internet Archive</a></div>
                    </div>
                </div> 
                <div class="jqmWindow" id="download-dialog">
                    <div class="head">
                        <a class="jqmClose" title="Close Dialog">Close Dialog</a>
                        <h2>Download book</h2>
                        <hr />
                    </div>
                    <a class="large-icon pdf" download="334462.pdf" 
                        href="/itempdf/334462">Download PDF</a>
                    <a class="large-icon all" href="https://www.archive.org/download/castlemainenatunoveaustk">Download All</a>
                    <a class="large-icon jp2" 
                        href="/itemimages/334462">Download JPEG 2000</a>
                    <a class="large-icon ocr" download="334462.txt" 
                        href="/itemtext/334462">Download Text</a>
                </div>
                <div class="jqmWindow" id="dlcitation-dialog">
                    <div class="head">
                        <a class="jqmClose" title="Close Dialog">Close Dialog</a>
                        <h2>Download citation</h2>
                        <hr />
                    </div>
                    <div class="bookcitationlinks">
                        <div class="bookcitelinklabel">BOOK</div>
                        <a class="large-icon ris" title="download ris" 
                            download="bhlitem334462.ris" 
                            href="/risdownload/334462">Download RIS</a>
                        <a class="large-icon bibtex" title="download bibtex" 
                            download="bhlitem334462.bib" 
                            href="/bibtexdownload/334462">Download BibTeX</a>
                    </div>
                    <div class="partcitationlinks">
                        <div class="partcitelinklabel">CURRENT ARTICLE</div>
                        <a class="large-icon ris" title="download ris" download="bhlpart334462.ris" href="/handlers/risdownload.ashx?pid=334462">Download RIS</a>
                        <a class="large-icon bibtex" title="download bibtex" download="bhlpart334462.bib" href="/handlers/bibtexdownload.ashx?pid=334462">Download BibTeX</a>
                    </div>
                </div>
            
                 <div id="volumedd">
                    <div class="play"></div>
                    <select name="ctl00$mainContentPlaceHolder$ddlVolumes" id="ddlVolumes">
	<option value="0|334274|">no.21 (1978 Feb)</option>
	<option value="0|334301|">no.22 (1978 Mar)</option>
	<option value="0|334299|">no.23 (1978 Apr)</option>
	<option value="0|334245|">no.24 (1978 May)</option>
	<option value="0|334222|">no.25 (1978 Jun)</option>
	<option value="0|334273|">no.26 (1978 Jul)</option>
	<option value="0|334311|">no.27 (1978 Aug)</option>
	<option value="0|334317|">no.28 (1978 Sep)</option>
	<option value="0|334251|">no.29 (1978 Oct)</option>
	<option value="0|334261|">no.30 (1978 Nov)</option>
	<option value="0|334247|">no.31 (1978 Dec)</option>
	<option value="0|334258|">no.33 (1979:March)</option>
	<option value="0|334249|">no.34 (1979:April)</option>
	<option value="0|334216|">no.35 (1979:May)</option>
	<option value="0|334220|">no.36 (1979:June)</option>
	<option value="0|334250|">no.37 (1979:July)</option>
	<option value="0|334319|">no.38 (1979:August)</option>
	<option value="0|334297|">no.39 (1979:September)</option>
	<option value="0|334310|">no.40 (1979:October)</option>
	<option value="0|334269|">no.41 (1979:November)</option>
	<option value="0|334296|">no.42 (1979:December)</option>
	<option value="0|334217|">no.43 (1980:Feb)</option>
	<option value="0|334302|">no.44 (1980:Mar)</option>
	<option value="0|334298|">no.45 (1980:Apr)</option>
	<option value="0|334458|">no.46 (1980:May)</option>
	<option value="0|334434|">no.47 (1980:Jun)</option>
	<option value="0|334456|">no.48 (1980:Jul)</option>
	<option value="0|334425|">no.54 (1981:Feb)</option>
	<option value="0|334433|">no.55 (1981:Mar)</option>
	<option value="0|334439|">no.56 (1981:Apr)</option>
	<option value="0|334464|">no.59 (1981:Jul)</option>
	<option value="0|334420|">no.62 (1981:Oct)</option>
	<option value="0|334435|">no.63 (1981:Nov)</option>
	<option value="0|334423|">no.67 (1982:Apr)</option>
	<option value="0|334440|">no.69 (1982:Jun)</option>
	<option value="0|334450|">no.70 (1982:Jul)</option>
	<option value="0|334467|">no.73 (1982:Oct)</option>
	<option value="0|334453|">no.74 (1982:Nov)</option>
	<option value="0|334418|">no.75 (1982:Dec)</option>
	<option value="0|334447|">no.76 (1983:Feb)</option>
	<option value="0|334461|">no.78 (1983:April)</option>
	<option value="0|334460|">no.81 (1983:July)</option>
	<option value="0|334452|">no.82 (1983:August)</option>
	<option value="0|334466|">no.83 (1983:Sep)</option>
	<option value="0|334442|">no.84 (1983:Oct)</option>
	<option value="0|334454|">no.85 (1983:Nov)</option>
	<option value="0|334457|">no.86 (1983:Dec)</option>
	<option value="0|334449|">no.87 (1984:Feb)</option>
	<option value="0|334465|">no.90 (1984:May)</option>
	<option value="0|334448|">no.91 (1984:Jun)</option>
	<option value="0|334468|">no.92 (1984:Jul)</option>
	<option value="0|334463|">no.93 (1984:Aug)</option>
	<option value="0|334441|">no.94 (1984:Sep)</option>
	<option value="0|334444|">no.95 (1984:Oct)</option>
	<option selected="selected" value="0|334462|">no.96 (1984:Nov)</option>
	<option value="0|332140|">v. 33.1-5, no.351-355 (2008:Feb-...</option>
	<option value="0|332136|">v. 33.6-11, no.356-361 (2008:Jul...</option>
	<option value="0|332085|">v. 34:1, no.362 (2009:Feb)</option>
	<option value="0|332087|">v. 34:2, no.363 (2009:Mar)</option>
	<option value="0|332084|">v. 34:3, no.364 (2009:Apr)</option>
	<option value="0|332156|">v. 34:4, no.365 (2009:May)</option>
	<option value="0|332076|">v. 34:5, no.366 (2009:Jun)</option>
	<option value="0|332174|">v. 34:6, no.367 (2009:Jul)</option>
	<option value="0|332082|">v. 34:7, no.368 (2009:Aug)</option>
	<option value="0|332086|">v. 34:8, no.369 (2009:Sep)</option>
	<option value="0|332124|">v. 34:9, no.370 (2009:Oct)</option>
	<option value="0|332115|">v. 34:10, no.371 (2009:Nov)</option>
	<option value="0|332081|">v. 34:11, no.372 (2009:Dec)</option>
	<option value="0|331776|">v. 35:1, no.373 (2010:Feb)</option>
	<option value="0|331909|">v. 35:2, no.374 (2010:Mar)</option>
	<option value="0|331928|">v. 35:3, no.375 (2010:Apr)</option>
	<option value="0|331926|">v. 35:4, no.376 (2010:May)</option>
	<option value="0|331910|">v. 35:5, no.377 (2010:Jun)</option>
	<option value="0|331789|">v. 35:6, no.378 (2010:Jul)</option>
	<option value="0|331792|">v. 35:7, no.379 (2010:Aug)</option>
	<option value="0|331828|">v. 35:8, no.380 (2010:Sep)</option>
	<option value="0|331853|">v. 35:9, no.381 (2010:Oct)</option>
	<option value="0|331791|">v. 35:10, no.382 (2010:Nov)</option>
	<option value="0|331884|">v. 35:11, no.383 (2010:Dec)</option>
	<option value="0|331823|">v. 36:1, no.384 (2011:Feb)</option>
	<option value="0|331879|">v. 36:2, no.385 (2011:Mar)</option>
	<option value="0|331779|">v. 36:3, no.386 (2011:Apr)</option>
	<option value="0|331903|">v. 36:4, no.387 (2011:May)</option>
	<option value="0|331912|">v. 36:5, no.388 (2011:Jun)</option>
	<option value="0|331814|">v. 36:6, no.389 (2011:Jul)</option>
	<option value="0|331826|">v. 36:7, no.390 (2011:Aug)</option>
	<option value="0|331800|">v. 36:8, no.391 (2011:Sep)</option>
	<option value="0|331865|">v. 36:9, no.392 (2011:Oct)</option>
	<option value="0|331767|">v. 36:10, no.393 (2011:Nov)</option>
	<option value="0|331793|">v. 36:11, no.394 (2011:Dec)</option>
	<option value="0|331808|">v. 37:1, no.395 (2012:Feb)</option>
	<option value="0|331781|">v. 37:2, no.396 (2012:Mar)</option>
	<option value="0|331805|">v. 37:3, no.397 (2012:Apr)</option>
	<option value="0|331825|">v. 37:4, no.398 (2012:May)</option>
	<option value="0|331822|">v. 37:5, no.399 (2012:Jun)</option>
	<option value="0|331771|">v. 37:6, no.400 (2012:Jul)</option>
	<option value="0|331820|">v. 37:7, no.401 (2012:Aug)</option>
	<option value="0|331772|">v. 37:8, no.402 (2012:Sep)</option>
	<option value="0|331798|">v. 37:9, no.403 (2012:Oct)</option>
	<option value="0|331829|">v. 37:10, no.404 (2012:Nov)</option>
	<option value="0|331796|">v. 37:11, no.405 (2012:Dec)</option>
	<option value="0|331799|">v. 38:1, no.406 (2013:Feb)</option>
	<option value="0|331819|">v. 38:2, no.407 (2013:Mar)</option>
	<option value="0|331907|">v. 38:3, no.408 (2013:Apr)</option>
	<option value="0|331972|">v. 38:4, no.409 (2013:May)</option>
	<option value="0|331969|">v. 38:5, no.410 (2013:Jun)</option>
	<option value="0|331892|">v. 38:6, no.411 (2013:Jul)</option>
	<option value="0|331923|">v. 38:7, no.412 (2013:Aug)</option>
	<option value="0|331905|">v. 38:8, no.413 (2013:Sep)</option>
	<option value="0|331888|">v. 38:9, no.414 (2013:Oct)</option>
	<option value="0|331764|">v. 38:10, no.415 (2013:Nov)</option>
	<option value="0|331882|">v. 38:11, no.416 (2013:Dec)</option>
	<option value="0|331763|">v. 39:1, no.417 (2014:Feb)</option>
	<option value="0|331896|">v. 39:2, no.418 (2014:Mar)</option>
	<option value="0|331811|">v. 39:3, no.419 (2014:Apr)</option>
	<option value="0|331816|">v. 39:4, no.420 (2014:May)</option>
	<option value="0|331861|">v. 39:5, no.421 (2014:Jun)</option>
	<option value="0|331906|">v. 39:6, no.422 (2014:Jul)</option>
	<option value="0|331921|">v. 39:7, no.423 (2014:Aug)</option>
	<option value="0|331891|">v. 39:8, no.424 (2014:Sep)</option>
	<option value="0|331904|">v. 39:9, no.425 (2014:Oct)</option>
	<option value="0|331818|">v. 39:10, no.426 (2014:Nov)</option>
	<option value="0|331815|">v. 39:11, no.427(2014:Dec)</option>
	<option value="0|333927|">v. 40:1, no.428 (2015:Feb)</option>
	<option value="0|334009|">v. 40:2, no.429 (2015:Mar)</option>
	<option value="0|333980|">v. 40:3, no.430 (2015:Apr)</option>
	<option value="0|334005|">v. 40:4, no.431 (2015:May)</option>
	<option value="0|333954|">v. 40:5, no.432 (2015:Jun)</option>
	<option value="0|333968|">v. 40:6, no.433 (2015:Jul)</option>
	<option value="0|333955|">v. 40:7, no.434 (2015:Aug)</option>
	<option value="0|333995|">v. 40:8, no.435 (2015:Sep)</option>
	<option value="0|333976|">v. 40:9, no.436 (2015:Oct)</option>
	<option value="0|334107|">v. 40:10, no.437 (2015:Nov)</option>
	<option value="0|334016|">v. 40:11, no.438 (2015:Dec)</option>
	<option value="0|334088|">v. 41:1, no.439 (2016:Feb)</option>
	<option value="0|334095|">v. 41:2, no.440 (2016:Mar)</option>
	<option value="0|334083|">v. 41:3, no.441 (2016:Apr)</option>
	<option value="0|334127|">v. 41:4, no.442 (2016:May)</option>
	<option value="0|334015|">v. 41:5, no.443 (2016:Jun)</option>
	<option value="0|334116|">v. 41:6, no.444 (2016:Jul)</option>
	<option value="0|334038|">v. 41:7, no.445 (2016:Aug)</option>
	<option value="0|334053|">v. 41:8, no.446 (2016:Sep)</option>
	<option value="0|334031|">v. 41:9, no.447 (2016:Oct)</option>
	<option value="0|334096|">v. 41:10, no.448 (2016:Nov)</option>
	<option value="0|334020|">v. 41:11, no.449 (2016:Dec)</option>
	<option value="0|334062|">v. 42:1, no.450 (2017:Jan)</option>
	<option value="0|334036|">v. 42:2, no.451 (2017:Mar)</option>
	<option value="0|334077|">v. 42:3, no.452 (2017:Apr)</option>
	<option value="0|334059|">v. 42:4, no.453 (2017:May)</option>
	<option value="0|334041|">v. 42:5, no.454 (2017:Jun)</option>
	<option value="0|334052|">v. 42:6, no.455 (2017:Jul)</option>
	<option value="0|334105|">v. 42:7, no.456 (2017:Aug)</option>
	<option value="0|334057|">v. 42:8, no.457 (2017:Sep)</option>
	<option value="0|334037|">v. 42:9, no.458 (2017:Oct)</option>
	<option value="0|334093|">v. 42:10, no.459 (2017:Nov)</option>
	<option value="0|334092|">v. 42:11, no.460 (2017:Dec)</option>
	<option value="0|334101|">v. 43:1, no.461 (2018:Feb)</option>
	<option value="0|334040|">v. 43:2, no.462 (2018:Mar)</option>
	<option value="0|334039|">v. 43:3, no.463 (2018:Apr)</option>
	<option value="0|334018|">v. 43:4, no.464 (2018:May)</option>
	<option value="0|334068|">v. 43:5, no.465 (2018:Jun)</option>
	<option value="0|334084|">v. 43:6, no.466 (2018:Jul)</option>
	<option value="0|334081|">v. 43:7, no.467 (2018:Aug)</option>
	<option value="0|334076|">v. 43:8, no.468 (2018:Sep)</option>
	<option value="0|334122|">v. 43:9, no.469 (2018:Oct)</option>
	<option value="0|334044|">v. 43:10, no.470 (2018:Nov)</option>
	<option value="0|334023|">v. 43:11, no.471 (2018:Dec)</option>
	<option value="0|334061|">v. 44:1, no.472 (2019:Feb)</option>
	<option value="0|334027|">v. 44:2, no.473 (2019:Mar)</option>
	<option value="0|334089|">v. 44:3, no.474 (2019:Apr)</option>
	<option value="0|334017|">v. 44:4, no.475 (2019:May)</option>
	<option value="0|334022|">v. 44:5, no.476 (2019:Jun)</option>
	<option value="0|334055|">v. 44:6, no.477 (2019:Jul)</option>
	<option value="0|334103|">v. 44:7, no.478 (2019:Aug)</option>
	<option value="0|334058|">v. 44:8, no.479 (2019:Sep)</option>
	<option value="0|334131|">v. 44:9, no.480 (2019:Oct)</option>
	<option value="0|334028|">v. 44:10, no.481 (2019:Nov)</option>
	<option value="0|334024|">v. 44:11, no.482 (2019:Dec)</option>
	<option value="0|334049|">v. 45:1, no.483 (2020:Feb)</option>
	<option value="0|334071|">v. 45:2, no.484 (2020:Mar)</option>
	<option value="0|334129|">v. 45:3, no.485 (2020:Apr)</option>
	<option value="0|334111|">v. 45:4, no.486 (2020:May)</option>
	<option value="0|334104|">v. 45:5, no.487 (2020:Jun)</option>
	<option value="0|334030|">v. 45:6, no.488 (2020:Jul)</option>
	<option value="0|334014|">v. 45:7, no.489 (2020:Aug)</option>
	<option value="0|334025|">v. 45:8, no.490 (2020:Sep)</option>
	<option value="0|334034|">v. 45:9, no.491 (2020:Oct)</option>
	<option value="0|334019|">v. 45:10, no.492 (2020:Nov)</option>
	<option value="0|334139|">v. 45:11, no.493 (2020:Dec)</option>
	<option value="0|334125|">v. 46:1, no.494 (2021:Feb)</option>
	<option value="0|334021|">v. 46:2, no.495 (2021:Mar)</option>
	<option value="0|334112|">v. 46:3, no.496 (2021:Apr)</option>
	<option value="0|334080|">v. 46:4, no.497 (2021:May)</option>
	<option value="0|334051|">v. 46:5, no.498 (2021:Jun)</option>
	<option value="0|334056|">v. 46:6, no.499 (2021:Jul)</option>
	<option value="0|334043|">v. 46:7 no.500 (2021:Aug)</option>
	<option value="0|334067|">v. 46:8 no.501 (2021:Sep)</option>
	<option value="0|334060|">v. 46:9 no.502 (2021:Oct)</option>
	<option value="0|334066|">v. 46:10 no.503 (2021:Nov)</option>
	<option value="0|334026|">v. 46:11, no.504 (2021:Dec)</option>
	<option value="0|334046|">v. 47:1, no.505 (2022:Feb)</option>
	<option value="0|334097|">v. 47:2, no.506 (2022:Mar)</option>
	<option value="0|334126|">v. 47:3, no.507 (2022:Apr)</option>
	<option value="0|334121|">v. 47:4, no.508 (2022:May)</option>
	<option value="0|334032|">v. 47:5, no.509 (2022:June)</option>
	<option value="0|334113|">v. 47:6, no.510 (2022:July)</option>
	<option value="0|334035|">v. 47:7, no.511 (2022:Aug)</option>
	<option value="0|334074|">v. 47:8, no.512 (2022:Sep)</option>
	<option value="0|334070|">v. 47:9, no.513 (2022:Oct)</option>
	<option value="0|334130|">v. 47:10, no.514 (2022:Nov)</option>
	<option value="0|334128|">v. 47:11, no.515 (2022:Dec)</option>
	<option value="0|329226|">v. 48.1, no.516 (2023:Feb)</option>
	<option value="0|329235|">v. 48.2, no.517 (2023:Mar)</option>
	<option value="0|329241|">v. 48.3, no.518 (2023:Apr)</option>
	<option value="0|331293|">v. 48:5, no.520 (2023:Jun)</option>
	<option value="0|331241|">v. 48:6, no.521 (2023:Jul)</option>
	<option value="0|331308|">v. 48:7, no.522 (2023:Aug)</option>
	<option value="0|331315|">v. 48:8, no.523 (2023:Sep)</option>
	<option value="0|331275|">v. 48:9, no.524 (2023:Oct)</option>
	<option value="0|331245|">v. 48:10, no.525 (2023:Nov)</option>
	<option value="0|334183|">v. 48:11, no.526 (2023:Dec)</option>
	<option value="0|334199|">v. 49:1, no.527 (2024:Feb)</option>
	<option value="0|334163|">v. 49:2, no.528 (2024:Mar)</option>
	<option value="0|334138|">v. 49:3, no.529 (2024:Apr)</option>
	<option value="0|334492|">v. 11.3, no.111 (1986:Apr)</option>
	<option value="0|334493|">v. 12.7, no.126 (1987:Aug)</option>
	<option value="0|334494|">v. 11.6, no.118 (1986:Nov)</option>
	<option value="0|334495|">v. 11.4, no.113 (1986:Jun)</option>
	<option value="0|334496|">v. 10.1, no.98 (1985:Feb)</option>
	<option value="0|334497|">v. 10.6, no.103 (1985:Jul)</option>
	<option value="0|334498|">v. 10.8, no.105 (1985:Sep)</option>
	<option value="0|334499|">no.110 (1986:Mar)</option>
	<option value="0|334500|">v. 12.10, no.129 (1987:Nov)</option>
	<option value="0|334501|">v. 10.2, no.99 (1985:Mar)</option>
	<option value="0|334503|">v. 10.11, no.108 (1985:Dec)</option>
	<option value="0|334504|">v. 11.1, no.119 (1986:Dec)</option>
	<option value="0|334505|">v. 12.2, no.121 (1987:Mar)</option>
	<option value="0|334506|">v. 11.6, no.115 (1986:Aug)</option>
	<option value="0|334507|">v. 12.6, no.125 (1987:Jul)</option>
	<option value="0|334521|">v. 12.3, no.122 (1987:Apr)</option>
	<option value="0|334525|">v. 11.8, no.117 (1986:Oct)</option>
	<option value="0|334527|">no.130 (1987:Dec)</option>
	<option value="0|334530|">v. 12.4, no.123 (1987:May)</option>
	<option value="0|334533|">v. 12.8, no.127 (1987:Sep)</option>
	<option value="0|334535|">v. 12.5, no.124 (1987:Jun)</option>
	<option value="0|334536|">v. 11.7, no.116 (1986:Sep)</option>
	<option value="0|334538|">v. 10.9, no.106 (1985:Oct)</option>
	<option value="0|334542|">v. 10.10, no.107 (1985:Nov)</option>
	<option value="0|334543|">v. 10.7, no.104 (1985:Aug)</option>
	<option value="0|334544|">v. 11.1, no.109 (1986:Feb)</option>
	<option value="0|334546|">v. 12.1, no.120 (1987:Feb)</option>
	<option value="0|334547|">v. 11.6, no.114 (1986:Jul)</option>

</select>
                </div>
            
        </div>
        <div id="titletext">
            <a class="ellipsis journaltitlelink" href="/bibliography/207756">Castlemaine Naturalist</a>
            <a id="articleTitleLink" class="ellipsis articletitlelink" href="#">
                
            </a>
        </div>
        <div class="jqmWindow" id="textsourcehelp-dialog">
            <div class="head">
                <a class="jqmClose" title="Close Dialog">Close Dialog</a>
                <h2>Text Sources</h2>
                <hr />
            </div>
            <div class="dialogbody">
                Page text in BHL originates from one of the following sources:
                <!--
                <ul>
                    <li>Uncorrected OCR - Machine-generated text. May include inconsistencies with the content of the original page.</li>
                    <li>Error-corrected OCR - Machine-generated, machine-corrected text.  Better quality than Uncorrected OCR, but may still include inconsistencies with the content of the original page.</li>
                    <li>Manual Transcription - Human-created and reviewed text.  For issues concerning manual transcription text, please contact the original holding institution.</li>
                </ul>
                -->
                <table style="margin: 0px 15px 15px 15px;">
                    <tr style="line-height:20px;">
                        <td width="150px;">
                            Uncorrected OCR
                        </td>
                        <td style="padding-bottom:10px;">
                            Machine-generated text. May include inconsistencies with the content of the original page.
                        </td>
                    </tr>
                    <tr style="line-height:20px;">
                        <td width="150px;">
                            Error-corrected OCR
                        </td>
                        <td style="padding-bottom:10px;">
                            Machine-generated, machine-corrected text.  Better quality than Uncorrected OCR, but may still include inconsistencies with the content of the original page.
                        </td>
                    </tr>
                    <tr style="line-height:20px;">
                        <td width="150px;">
                            Manual Transcription
                        </td>
                        <td style="padding-bottom:10px;">
                            Human-created and reviewed text.  For issues concerning manual transcription text, please contact the original holding institution.
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    <span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_id=https%3a%2f%2fwww.biodiversitylibrary.org%2fitem%2f334462&amp;rft_val_fmt=info%3aofi%2ffmt%3akev%3amtx%3abook&amp;rft.genre=book&amp;rft.btitle=Castlemaine+Naturalist&amp;rft.volume=no.96+(1984%3aNov)&amp;rft.place=%5bCastlemaine%2c+VIC%5d&amp;rft.pub=Castlemaine+Field+Naturalists+Club&amp;rft.aucorp=Australia&amp;rft.au=Australia&amp;rft.au=Castlemaine+Field+Naturalists+Club&amp;rft.au=Castlemaine+Field+Naturalists+Club&amp;rft.pages=1-12&amp;rft.tpages=12&amp;rft.date=1984"></span>
    </div> <!-- page-title -->

    <div id="bookviewercontainer">
        <div id="left-panel2">
            <div class="left-panel-boxes">
                <div id="leftpanetabswrapper" class="tabs_wrapper">
                    <div id="leftpanetabs">
                        <ul>
                            <li class="panel-box-heading active" id="pagestab"><span>Pages</span></li>
                            <li class="panel-box-heading" id="segmentstab"><span>Table of Contents</span></li>
                        </ul>
                    </div>
                    <div id="leftpanetabs_content">
                        <div id="pagestabcontent" class="optionbox">
                            <select size="4" name="ctl00$mainContentPlaceHolder$lstPages" id="lstPages" class="ui-pg-selbox pagelist">
	<option value="63514479" title="Page [1] (Cover, Illustration, Text)">Page [1] (Cover, Illustration, Text)</option>
	<option value="63514480" title="Page [2] (Text)">Page [2] (Text)</option>
	<option value="63514481" title="Page [3] (Text)">Page [3] (Text)</option>
	<option value="63514482" title="Page [4] (Map, Text)">Page [4] (Map, Text)</option>
	<option value="63514483" title="Page 5 (Text)">Page 5 (Text)</option>
	<option value="63514484" title="Page [6] (Text)">Page [6] (Text)</option>
	<option value="63514485" title="Page 7 (Text)">Page 7 (Text)</option>
	<option value="63514486" title="Page 8 (Text)">Page 8 (Text)</option>
	<option value="63514487" title="Page 9 (Text)">Page 9 (Text)</option>
	<option value="63514488" title="Page [10] (Map)">Page [10] (Map)</option>
	<option value="63514489" title="Page 11 (Illustration)">Page 11 (Illustration)</option>
	<option value="63514490" title="Page 12 (Cover, Text)">Page 12 (Cover, Text)</option>

</select>
                        </div>
                        <div id="segmentstabcontent" class="optionbox">
                            <!-- iDevices -->
                            <select size="4" name="ctl00$mainContentPlaceHolder$lbSegments" id="lbSegments" class="ui-pg-selbox pagelist">

</select>
                            <!-- non-iDevices -->
                            <div id="lstSegments" class="ui-pg-selbox pagelist">
                            <ul>
                                
                            </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="showmore">
                    <a href="#">Show More</a>
                </div>
                <div class="panel-box-heading">
                    URL for Current Page
                </div>
                <div class="urlbox"><a id="currentpageURL" href="#"></a></div>
                <div class="flickrbox">
                    <span id="flickrurlspan" style="display:none"><a class="flickrurl" id="currentFlickrURL" rel="noopener noreferrer" target="_blank" href="#">View Current Page in Flickr</a>&nbsp;<img width="12" src="/images/flickr-icon-normal.png"></span>&nbsp;
                </div>
            </div>
            <div id="names-container-div" class="left-panel-boxes limit-height">
                <div class="panel-box-heading">
                    Scientific Names on this Page
                </div>
                <div class="optionbox">
                    <h3 id="pagename" class="panel-box-childhead"></h3>
                    <div id="names-panel"></div>
                </div>
                <span class="ubiolink">Indexed by <a href="http://www.globalnames.org/">Global Names</a> <a href="http://www.globalnames.org/"><img src="/images/GNA_revised_icon_14.png" /></a></span>
            </div>
        </div> <!-- left-panel2 -->

        <div id="BRtoolbarwrapper"></div>

        <div id="bookwrapper">
            <div id="right-panel2">
                <div id="right-panel-content">
                    <div id="pageInfo-panel"> 
                        <div id="pageInfoDetails" class="text">
                            <div class="header">Journal Title</div>
                            <div class="detail">Castlemaine Naturalist</div>

                            
                                <div class="header">By</div>
                                <div class="detail">
                                    
                                        <a href="/creator/301401">Australia      </a><br />
                                    
                                        <a href="/creator/302941">Castlemaine Field Naturalists Club      </a><br />
                                    
                                </div>
                            
                                <div class="header">Publication Details</div>
                                <div class="detail">[Castlemaine, VIC] Castlemaine Field Naturalists Club</div>
                            
                                <div class="header">Year</div>
                                <div class="detail">1984</div>
                            
                                    <div class="header">
                                        
                                            Holding Institution
                                        
                                    </div>
                                    <div class="detail">
                                        
                                            <a rel="noopener noreferrer" target='_blank' href="https://castlemainefieldnaturalists.org.au/">Castlemaine Field Naturalists Club</a>
                                        
                                    </div>
                                
                                    <div class="header">
                                        
                                            Rights Holder
                                        
                                    </div>
                                    <div class="detail">
                                        
                                            <a rel="noopener noreferrer" target='_blank' href="https://castlemainefieldnaturalists.org.au/">Castlemaine Field Naturalists Club</a>
                                        
                                    </div>
                                
                                <div class="header">Sponsor</div>
                                <div class="detail">Public Record Office Victoria</div>
                            
                            <div class="header">Copyright & Usage</div>
                            <div class="detail">
                                
                                        License Type:<br />
                                        
                                            <a rel="noopener noreferrer" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">http://creativecommons.org/licenses/by-nc-sa/4.0/</a>
                                        
                                        <br /><br />
                                
                                        Rights:<br />
                                        
                                            <a rel="noopener noreferrer" target="_blank" href="http://biodiversitylibrary.org/permissions">http://biodiversitylibrary.org/permissions</a>
                                        
                                        <br /><br />
                                
                                    Copyright Status:<br />In copyright. Digitized with the permission of the rights holder.<br /><br />
                                    
                                            Rights Holder:<br />
                                            
                                                <a rel="noopener noreferrer" target='_blank' href="https://castlemainefieldnaturalists.org.au/">Castlemaine Field Naturalists Club</a>
                                                             
                                <br/>

                                
                            </div>
                        </div>
                    </div>

                    <div id="pageOCR-panel"> </div>

                    <!-- Search Panel -->
                    <div id="pageSearch-panel">
                        <div class="sibHeader">
                            <div class="sibHeaderTitle">Search Inside This Book:</div>
                            <div class="sibHeaderText">
                                <input id="sibSearchText" type="text" value="" /> <input id="sibSearchBtn" class="sibBtn" type="button" value="Search" />
                            </div>
                        </div>
                        <div id="searchResults">
                            <div>
                                <div class="sibResultsHeader">Results For:  <span id="sibTextEcho"></span> <span id="sibNumResults"></span></div>
                            </div>
                            <div class="sibResultsContainer">
                                <div class="sibResultsBox">
                                 </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div> <!-- right-panel2 -->
            <div id="bookcontent">
                <div id="toolbar-top" class="column-wrap">
                    <div id="mypdfbar" class="disabled">
                        <div style="position: absolute; top: 15px; left: 440px; font-size:13px;"> Click/Shift+Click pages to select for download </div>

                        <div id="BRtoolbar-pdfzoombuttons">
                            <a class="BRicon zoom_out" title="Zoom Out">zoom out</a>
                            <span class="zoomlabel">Zoom</span>
                            <a class="BRicon zoom_in" title="Zoom In">zoom in</a>
                        </div>

                        <span class="cancelpdf button">Cancel</span>
                        <span class="generate button">Generate</span>
                        <span class="review button">Review</span>
                        <span class="counter">No Pages Added</span>
                    </div>
                    <div class="jqmWindow" id="review-dialog">
                        <div class="head">
                            <a class="jqmClose" title="Close Dialog">Close Dialog</a>
                            <a class="button generate modal">Generate My PDF</a>
                            <h2>Review My PDF</h2>
                            <span id="page-count"></span>
                            <a class='dicon list-view' title='List View'>List View</a>
                            <a class='dicon icon-view' title='Icon View'>Icon View</a>
                            <hr />
                        </div>
                        <div class="body">
                            <ul>
                            </ul>
                        </div>
                    </div>
                    <div class="jqmWindow" id="generate-dialog">
                        <div class="head">
                            <a class="jqmClose" title="Close Dialog">Close Dialog</a>
                            <a class="button finish">Finish</a>
                            <a class="button review modal">Review My PDF</a>
                            <h2>Generate My PDF</h2>
                            <hr />
                        </div>
                        <div class="body form">
                            <div class="intro">
                                <p>If you are generating a PDF of a journal article or book chapter, please feel free to enter the title and author information. The information you enter here will be stored in the downloaded file to assist you in managing your downloaded PDFs locally.<br /><br /></p>
                            </div>
                            <div class="success">
                                <p>Thank you for your request. Please wait for an email containing a link to download the PDF.</p>
                                <p>For your reference, the confirmation number for this request is <span id="pdfId"></span>.</p>
                                <p><img style="margin-top:50px;" src="/images/bhlau%20images/image_book.jpg"></p>
                                <div style="float:left;margin:0;width:49%">
                                    <h3>Join Our Mailing List</h3>
                                    <p>Sign up to receive the latest BHL news, content highlights, and promotions.</p>
                                    <a class="featurebutton-home" title="Subscribe to BHL Newsletter" rel="noopener noreferrer" target="_blank" href="https://library.si.edu/bhl-newsletter-signup">Subscribe</a>
                                </div>
                                <div style="float:left;margin:0;width:49%">
                                    <h3>Help Support <span>BHL</span></h3>
                                    <p>BHL relies on donations to provide free PDF downloads and other services.  Help keep BHL free and open!</p>
                                    <a class="featurebutton-home" title="Donate" rel="noopener noreferrer" target="_blank" href="https://library.si.edu/donate-bhl">Donate</a>
                                </div>
                            </div>
                            <div class="failure">
                                <p>There was an issue with the request. Please try again and if the problem persists, please send us <a href="/contact">feedback</a>.</p>
                                <p>For your reference, the confirmation number for this request is <span id="pdfIdFail"></span>.</p>
                            </div>
                            <div class="required">
                                <label for="tbEmail">Email Address<span class="required">(required)</span></label>
                                <div class="field-wrap">
                                    <input class="field required email" type="text" id="tbEmail" name="tbEmail" /><span id="tbEmailErr" style="color:#8a1826; font-size:12px; font-family:Georgia,Times,serif; position:absolute; left:322px; top:6.5px;"></span>
                                </div>
                                <label for="grpImageOCR">Include</label>
                                <div class="field-wrap">
                                    <input id="tbImages" type="radio" name="ctl00$mainContentPlaceHolder$grpImageOCR" value="tbImages" checked="checked" /><label for="tbImages"> Page images only</label>&nbsp;&nbsp;<input id="tbImagesOcr" type="radio" name="ctl00$mainContentPlaceHolder$grpImageOCR" value="tbImagesOcr" /><label for="tbImagesOcr"> Page images and text</label>
                                </div>
                            </div>
                            <div class="optional">
                                <span>Optional</span>
                                <label for="tbTitle">Article/Chapter Title</label>
                                <div class="field-wrap">
                                    <input class="field" type="text" id="tbTitle" name="tbTitle" /><span id="tbTitleErr" style="color:#8a1826; font-size:12px; font-family:Georgia,Times,serif; position:absolute; left:312px; top:6.5px;"></span>
                                </div>
                                <label for="tbAuthors">Author(s)</label>
                                <div class="field-wrap">
                                    <input class="field" type="text" id="tbAuthors" name="tbAuthors" /><span class="example">Example: Charles Darwin, Carl Linnaeus</span>
                                </div>
                                <label for="tbSubjects">Subject(s)</label>
                                <div class="field-wrap">
                                    <input class="field" type="text" id="tbSubjects" name="tbSubjects" /><span class="example">Example: Birds, Classification, Mammals</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="BookReader"></div>

                <div class="bookattribution">Contributed by <a rel="noopener noreferrer" href="https://castlemainefieldnaturalists.org.au/" target="_blank">Castlemaine Field Naturalists Club</a></div>
            </div> <!-- bookcontent -->
        </div> <!-- bookwrapper -->
    </div> <!-- bookwrapper -->

    <div id="AnnotationBoxPlaceholder" class="active">
        <div id="AnnotationBox" class="active" style="display:none">
            <div id="header">
                <a href="/collection/darwinlibrary" title="Collection"><img src="/images/darwin_book_header.png" alt="Charles Darwin's Library"/></a>
                <div id="indicator"><span style="float:right"><a href="/browse/collection/darwinlibrary" title="Books">Book List</a>&nbsp; | &nbsp;<a href="/collection/darwinlibrary">Help</a></span></div>
            </div>
            <div id="contentbox">
                <div id="pageScroller">
                    <a id="aPrev" href="javascript:void(0);" title="Previous"><span class="pagescrollerarrow">&laquo;</span>previous</a>&nbsp;&nbsp;&nbsp;&nbsp;<a id="aNext" href="javascript:void(0);" title="Next">next<span class="pagescrollerarrow">&raquo;</span></a>
                </div>
                <div id="no-annotations-stub" style="display:none;">No Marks</div>  <!--display when no Annotations-->
                <div id="stub" style="display:none;">Marks</div>    <!--display when Annotation Box is collapsed-->
                <div id="content">
                    <div id="notes"></div>
                    <div id="phantom-legend">&nbsp;</div>   <!--handle offset when box is collapsed-->
                    <div id="legendcontainer">
                        <div id="toggle_legend">
                            <img id="show_legend" src="../Images/bib_plus.gif" alt="hide legend" style="display:none"/>
                            <img id="hide_legend" src="../Images/bib_minus.gif" alt="show legend"/>
                            key
                        </div>
                        <div id="legend-items">
                            <div id="items">
                                    <div>
                                    <span class="left-column" style="padding-right:4px;">&#8249;</span>
                                    <span class="right-column" style="padding-left:1px;">&#8250;</span>
                                    <span class="special-char-text" style="padding-right:10px;">deleted</span>
                                    <span class="special-char">&#65517;</span> <span class="special-char-text" style="padding-right:10px;">pinholes visible</span>
                                    <span class="special-char">&#10719;</span> <span class="special-char-text">line connects passages</span>
                                </div>
                                <div>
                                    <span class="left-column">&#171;</span>
                                    <span class="right-column">&#187;</span>
                                    <span class="special-char-text" style="padding-right:6px;">inserted</span>
                                    <span class="special-char">&#8657;</span> <span class="special-char-text" style="padding-right:10px;">count up from last line</span>
                                    <span class="special-char">&#247;*</span> <span class="special-char-text">long division</span>
                                </div>
                            </div>
                        </div>
                    </div> <!-- legendcontainer -->
                    <div id="copyrightcontainer">
                        <div id="copyrighttitle">Credit</div>
                        <div id="copyright">Edition of <i>Charles Darwin's Reading Notes</i><br />by Di Gregorio & Gill<br />(Darwin Manuscripts Project: <a href="https://darwin.amnh.org" title="AMNH" rel="noopener noreferrer" target="_blank">darwin.amnh.org</a>)</div>
                    </div>
                </div> <!-- content --> 
            </div> <!-- contentbox --> 
        </div>
        <div id="annotation-not-available">Annotation Not Available</div>
        
    </div> <!-- AnnotationBoxPlaceholder -->

            
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script>            !window.jQuery && document.write(unescape('%3Cscript src="/js/libs/jquery-1.4.4.min.js"%3E%3C/script%3E'))</script>

        
<script src="/js/libs/jquery.easing.1.3.js" type="text/javascript"></script>
<script src="/js/libs/jquery-ui-1.8.11.custom.min.js" type="text/javascript"></script>
<script src="/js/libs/jquery.hoverintent.min.js" type="text/javascript"></script>
<script src="/js/libs/jquery.xcolor.min.js" type="text/javascript"></script>
<script src="/js/libs/jqModal.min.js" type="text/javascript"></script>
<script src="/js/libs/jquery.jscrollpane.min.js" type="text/javascript"></script>
<script src="/js/libs/jquery.mousewheel.min.js" type="text/javascript"></script>
<script src="/js/libs/jquery.validate.min.js" type="text/javascript"></script>
<script src="/js/libs/jquery.bt.min.js" type="text/javascript"></script>
<script src="/js/libs/jquery.printElement.min.js" type="text/javascript"></script>
<script src="/js/libs/BookReader.js?v=4" type="text/javascript"></script>
<script src="/js/libs/dragscrollable.js" type="text/javascript"></script>
<script src="/js/libs/jquery.text-overflow.min.js" type="text/javascript"></script>
<script src="/js/nspop.js?v=2" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[

    var ocrPopUp;
    var pageToolBoxEvent = "click";
    if(Modernizr.touch){
        pageToolBoxEvent = "tap";
    }

    // actionMode: either standard reading mode or selecting pages to download
    // actionModeType.Read: default. 
    // actionModeType.Select: triggered when user selects option to download a set of pages.
    var actionModeType = {
        Read: 1,
        Select: 2
    };
    var actionMode = actionModeType.Read;

    if (navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)/i) !== null)
    {
        // Hide elements from iDevices
        $("#lstSegments").hide();
        $(".showmore a").hide();
    }
    else
    {
        $("#lbSegments").hide();
    }

    $(document).ready(function () {
        br = new BookReader();

        // Page info Json object
        var pages = [{"PageID":63514479,"WebDisplay":"Page [1] (Cover, Illustration, Text)","SequenceOrder":1,"BarCode":"castlemainenatunoveaustk","SegmentID":null,"GenreName":"","TextSource":"OCR","ExternalBaseUrl":"https://www.archive.org","Height":2539,"Width":1937,"FlickrUrl":""},{"PageID":63514480,"WebDisplay":"Page [2] (Text)","SequenceOrder":2,"BarCode":"castlemainenatunoveaustk","SegmentID":null,"GenreName":"","TextSource":"OCR","ExternalBaseUrl":"https://www.archive.org","Height":2539,"Width":1937,"FlickrUrl":""},{"PageID":63514481,"WebDisplay":"Page [3] (Text)","SequenceOrder":3,"BarCode":"castlemainenatunoveaustk","SegmentID":null,"GenreName":"","TextSource":"OCR","ExternalBaseUrl":"https://www.archive.org","Height":2539,"Width":1937,"FlickrUrl":""},{"PageID":63514482,"WebDisplay":"Page [4] (Map, Text)","SequenceOrder":4,"BarCode":"castlemainenatunoveaustk","SegmentID":null,"GenreName":"","TextSource":"OCR","ExternalBaseUrl":"https://www.archive.org","Height":2539,"Width":1937,"FlickrUrl":""},{"PageID":63514483,"WebDisplay":"Page 5 (Text)","SequenceOrder":5,"BarCode":"castlemainenatunoveaustk","SegmentID":null,"GenreName":"","TextSource":"OCR","ExternalBaseUrl":"https://www.archive.org","Height":2539,"Width":1937,"FlickrUrl":""},{"PageID":63514484,"WebDisplay":"Page [6] (Text)","SequenceOrder":6,"BarCode":"castlemainenatunoveaustk","SegmentID":null,"GenreName":"","TextSource":"OCR","ExternalBaseUrl":"https://www.archive.org","Height":2539,"Width":1937,"FlickrUrl":""},{"PageID":63514485,"WebDisplay":"Page 7 (Text)","SequenceOrder":7,"BarCode":"castlemainenatunoveaustk","SegmentID":null,"GenreName":"","TextSource":"OCR","ExternalBaseUrl":"https://www.archive.org","Height":2539,"Width":1937,"FlickrUrl":""},{"PageID":63514486,"WebDisplay":"Page 8 (Text)","SequenceOrder":8,"BarCode":"castlemainenatunoveaustk","SegmentID":null,"GenreName":"","TextSource":"OCR","ExternalBaseUrl":"https://www.archive.org","Height":2539,"Width":1937,"FlickrUrl":""},{"PageID":63514487,"WebDisplay":"Page 9 (Text)","SequenceOrder":9,"BarCode":"castlemainenatunoveaustk","SegmentID":null,"GenreName":"","TextSource":"OCR","ExternalBaseUrl":"https://www.archive.org","Height":2539,"Width":1937,"FlickrUrl":""},{"PageID":63514488,"WebDisplay":"Page [10] (Map)","SequenceOrder":10,"BarCode":"castlemainenatunoveaustk","SegmentID":null,"GenreName":"","TextSource":"OCR","ExternalBaseUrl":"https://www.archive.org","Height":2539,"Width":1937,"FlickrUrl":""},{"PageID":63514489,"WebDisplay":"Page 11 (Illustration)","SequenceOrder":11,"BarCode":"castlemainenatunoveaustk","SegmentID":null,"GenreName":"","TextSource":"OCR","ExternalBaseUrl":"https://www.archive.org","Height":2539,"Width":1937,"FlickrUrl":""},{"PageID":63514490,"WebDisplay":"Page 12 (Cover, Text)","SequenceOrder":12,"BarCode":"castlemainenatunoveaustk","SegmentID":null,"GenreName":"","TextSource":"OCR","ExternalBaseUrl":"https://www.archive.org","Height":2539,"Width":1937,"FlickrUrl":""}];

        br.pageProgression = "";

        var pdfPages = [];
        var pdfBar = $('#mypdfbar');
        var PdfModeType = {
            List: 1,
            Icon: 2
        };
        var pdfMode;
        var lastPdfIndex = -1;
        var isModalDialogChange;
        var cancelPdfSelection = false;
        var newpageOCR = $("#pageOCR-panel");
        var pageNames = $("#names-panel");

        // On Hide Action for Dialogs
        function onHideAction(hash) {
            if (isModalDialogChange) {
                hash.w.hide();
                hash.o.remove();
                resetGenerate();
            } else {
                hash.w.fadeOut(200);
                hash.o.fadeOut(200, function () {
                    hash.o.remove();
                    resetGenerate();
                });
            }

            function resetGenerate() {
                $('#generate-dialog div, #generate-dialog .footer, #generate-dialog .finish, #generate-dialog .review').show();
				$("#tbEmail").show();
                $('#generate-dialog .intro').show();
                $('#generate-dialog .success').hide();
                $('#generate-dialog .failure').hide();

                if (cancelPdfSelection) cancelSelectPages();
                cancelPdfSelection = false;
            }

            isModalDialogChange = false;
        };

        function selectPagesToDownload() {
            if (actionMode == actionModeType.Select) return;

            $('.BRtoolbar-container').hide();
            $('#toolbar-top').show();

            // Set up zoom actions on PDF toolbar
            var pdfToolbar = $('#toolbar-top');
            pdfToolbar.find('.zoom_out').unbind('click');   // unbind first so the same event isn't bound twice
            pdfToolbar.find('.zoom_in').unbind('click');
            pdfToolbar.find('.zoom_out').click(function (e) { br.zoom(-1); e.preventDefault(); });
            pdfToolbar.find('.zoom_in').click(function (e) { br.zoom(1); e.preventDefault(); });

            actionMode = actionModeType.Select;
            if (3 != br.mode) { br.switchMode(3); }

            $("#right-panel2").hide("fast", function () { if (br.mode == 3) { br.resizePageView(); } br.centerPageView(); });
            resetAnnotationsBox();
            resetSearchBox();
            resetPageOCRBox();
            resetPDFDialog();

            $(".pagetoolbox").show();
            setInterval('fixIEDisplayIssue()', 1000);
        }

        function cancelSelectPages() {
            if (actionMode == actionModeType.Read) return;

            actionMode = actionModeType.Read;
            $('.BRtoolbar-container').show();
            $('#toolbar-top').hide();

            for (var x = 0; x < pages.length; x++) {
                pdfPageIndex = $.inArray(x, pdfPages);
                if (pdfPageIndex >= 0) {
                    // Deselect the page
                    pdfPageCount = pdfPages.remove(pdfPageIndex);
                    $('#ptb' + x).removeClass('selected').attr('bt-xtitle', 'Add to My PDF');
                    lastPdfIndex = -1;
                    updatePdfPageCounter(pdfPageCount);
                }
            }

            $(".pagetoolbox").hide();
            lastPdfIndex = -1;
            fixIEDisplayIssue();
        }

        function updateOCR(index){
            newpageOCR.text("");
            newpageOCR.addClass('loading');
            $.ajax({
                type: 'get',
                url: '/pagesummary/',
                data: {
                    'op': 'GetPageOcrText',
                    'pageID': pages[index].PageID
                },
                success: function (data) {
                    newpageOCR.text("");
                    var header = $('<div/>', { 'class' : 'header' }).appendTo(newpageOCR);
                                        
                    if (data.success && (data.ocrText != "Text unavailable for this page."))
                    {
                        header.append(
                            $('<a/>', {
                                'class' : 'BRicon pop_ocr',
                                'title' : 'View text in Window',
                                'text' : 'View text in Window'
                            }).click(function() {
                                if ((typeof ocrPopUp == undefined) || !ocrPopUp || ocrPopUp.closed)
                                {
                                    ocrPopUp = window.open('about:blank', '_blank', 'width=650,height=440,scrollbars=yes');

                                    var html = '<html><head><title>Text on: ' + br.getPageName(index) + '</title></head>'
                                    html += '<body><div style="font:14px Georgia, Times, serif;">' + $.trim(data.ocrText).replace(/\n/g, '<br>') + '</div>'
                                    html += '</body></html>';

                                    ocrPopUp.document.write(html);
                                }
                            })
                        );
                    }

                    var textSource = "Uncorrected OCR";
                    switch (pages[index].TextSource) {
                        case "Text Import": textSource = "Manual Transcription"; break;
                        case "Purposeful Gaming": textSource = "Error-corrected OCR"; break;
                    }
                    
                    header.append(
                        $('<h5/>', {
                            'html': textSource + ' ' + '<a href="#" class="textsourcehelp" style="float:none" onclick="$(\'#textsourcehelp-dialog\').jqmShow()">' + 
                                $('<img/>', {
                                    'src': '/images/help.png',
                                    'alt': 'Text source help',
                                    'title': 'What Is This?',
                                    'style': 'vertical-align: middle;margin-top: -5px; height:16px; width:16px; cursor:pointer;'
                                }).get(0).outerHTML + "</a>"
                        }));

                    var text = $('<div/>', { 'class': 'text' })
                        .html('<span>' + $.trim(data.ocrText).replace(/\n/g, '<br />') + '<br /><br /><br /><br /><br /></span>')
                        .appendTo(newpageOCR);

                    // Create BeautyTips if canvas exists & not IE (results in singlepage view scrolling to top).
                    if(Modernizr.canvas && !$.browser.msie) {
                        $('.pop_ocr').bt({
                            padding: 10,
                            spikeLength:10,
                            spikeGirth:13,
                            fill: '#266099',
                            strokeWidth: 0,
                            shrinkToFit: true,
                            positions: ['most'],
                            overlap: -1,
                            cssStyles: { color: '#fff' },
                            hoverIntentOpts: {
                                interval: 500,
                                timeout: 0
                            },
                            showTip: function(box) {
                                if(!isAnimating) {
                                    $(box).show();
                                }
                            }
                        });
                    }

                    newpageOCR.removeClass('loading');
                },
                error: function (data) {
                    newpageOCR.removeClass('loading');
                    isAnimating = false;
                }
            });
        }

        function updatePageNames(index){
            pageNames.text("Loading...");
            pageNames.addClass('loading');
            $.ajax({
                type: 'get',
                url: '/pagesummary/',
                data: {
                    'op': 'GetPageNameList',
                    'pageID': pages[index].PageID
                },
                success: function (data, textStatus, jqXHR) {
                    if(data.length > 0) {
                        pageNames.empty();
                        $.each(data, function (index, name) {
                            var ubioLink = $('<span/>', { 'class': 'ubio-links' }).append(
                                $('<a/>', {
                                    'href': '/name/' + name.UrlName,
                                    'text': name.ResolvedNameString
                                })).appendTo(pageNames);

                            ubioLink.append("<a href='#' class='brlnkNameSources' data-resolved-name='" + name.ResolvedNameString + "' onclick='showNameSources(event, this);'><img src='/images/dna_9px_arrow.png' /></a>");
                        });
                    } else {
                        pageNames.empty();
                        pageNames.append($('<span/>', { 'text' : 'No Scientific Names found' }));
                    } 
                    pageNames.removeClass('loading');
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    pageNames.empty();
                    pageNames.removeClass('loading');
                    isAnimating = false;
                }
            });
        }

        // Check for Enter in Search Inside text box
        $("#sibSearchText").keypress(function (event) {
            var keycode = (event.keyCode ? event.keyCode : event.which);
            if (keycode == '13') $("#sibSearchBtn").click();
        });

        // Click binder for search button
        $("#sibSearchBtn").click(function () {
            var resultsBox = $(".sibResultsBox");
            $("#sibTextEcho").html($("#sibSearchText").val());

            resultsBox.html("Loading...");
            $("#searchResults").show();

            $.ajax({
                type: 'get',
                url: '/search/pages',
                data: 'q=' + encodeURIComponent($("#sibSearchText").val()) + '&itemId=' + 693951,
                success: function (data, textStatus, jqXHR) {
                    if (data.length > 0) {
                        $("#sibNumResults").html("(" + data.length + ")");
                        resultsBox.empty();
                        $.each(data, function (index, hit) {
                            // Build this for each hit
                            // <div class="sibResultBox">
                            //     <div><a href="#" class="sibResultPage">Page NN</a></div>
                            //     <div class="sibResultText">... hit text ...</div>
                            //     <div class="sibResultText">... hit text ...</div>
                            // </div>

                            var resultBox = $("<div/>", { "class": "sibResultBox" });
                            var resultPageDesc = $("<div/>")
                                .append($("<a/>", {
                                    "class": "sibResultPage",
                                    "href": "javascript:changePage(" + hit.Sequence + ")",
                                    "text": hit.PageDescription
                                }));
                            resultBox.append(resultPageDesc);

                            $.each(hit.Highlights, function (index2, highlight) {
                                resultBox.append($("<div/>", { "class": "sibResultText" }).append("... " + highlight.Item2 + " ..."));
                            });

                            resultBox.appendTo(resultsBox);
                        });
                    } else {
                        resultsBox.empty();
                        resultsBox.append($('<span/>', { 'text': 'No results found' }));
                    }
                    resultsBox.removeClass('loading');
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    resultsBox.empty();
                    resultsBox.append($('<span/>', { 'text': 'Error!  Please try again.' }));
                    isAnimating = false;
                }
            });
        });

        // Change binder for volumes dropdown
        $('#ddlVolumes').live("change", function () {
            var ids = $(this).val().split("|");
            if (ids[0] == 0) { // IsVirtual
                location.href = '/item/' + ids[1];  // BookID
            }
            else {
                location.href = "/page/" + ids[2];   // FirstSegmentID
            }
        });

        // Create Modal Dialogs
        $('#download-dialog').jqm({
            onHide: onHideAction,
            trigger: '.downloadbook'
        });
        $("#dlcitation-dialog").jqm({
            onHide: onHideAction,
            trigger: '.downloadcitation'
        });
        $('#textsourcehelp-dialog').jqm({
            onHide: onHideAction,
            trigger: '.textsourcehelp'
        });

        $('#review-dialog').jqm({
            toTop: true,
            onHide: onHideAction,
            onShow: function(hash) { 
                hash.w.show();
                $('.ellipsis').textOverflow();
            }
        });
        $('#generate-dialog').jqm({
            toTop: true,
            onHide: onHideAction
        });
        $(".buttondrop.download").click(function(){
            if ($(".downloadcontents").css("display") == "block") {
                $(".downloadcontents").slideUp("fast"); 
            } else {
                $(".downloadcontents").slideDown("fast"); 
            }
            
            $(document).mouseup(function (e){
                $(".downloadcontents").slideUp("fast"); 
                $(document).unbind("mouseup");
            });
        });
        $(".selectpages").click(function(){
            selectPagesToDownload();
        });
        $(".cancelpdf", pdfBar).click(function(){
            cancelSelectPages();
        });

        // Click Binder for PDF Review button
        var pdfReview = $('.review', pdfBar).click(function() {
            if(pdfPages.length > 0) {
                changePdfMode((pdfMode) ? pdfMode : PdfModeType.Icon, true);

                $('#review-dialog').jqmShow();
                $('#review-dialog .body').jScrollPane();
            }
        });

        // Click Binder for PDF Generate button
        var pdfGenerate = $('.generate', pdfBar).click(function() {
            if(pdfPages.length > 0) {
                $('#generate-dialog').jqmShow();
            }
        });        

        // Click Binder for PDF Generate button on Dialog
        $('#review-dialog .generate').click(function() {
            isModalDialogChange = true;
            $('#review-dialog').jqmHide();
            $('#generate-dialog').jqmShow();            
        });

        // Click Binder for PDF Review button on Dialog
        $('#generate-dialog .review').click(function() {
            isModalDialogChange = true;
            $('#generate-dialog').jqmHide();
            
            changePdfMode((pdfMode) ? pdfMode : PdfModeType.List, true);
            $('#review-dialog').jqmShow();
            $('#review-dialog .body').jScrollPane();
        });

        // Click Binder for list view on Review Dialog
        var pdfListLink = $('#review-dialog .list-view').click(function() {
            changePdfMode(PdfModeType.List);
            $('#review-dialog .body').data('jsp').reinitialise();
        });

        // Click Binder for icon view on Review Dialog
        var pdfIconLink = $('#review-dialog .icon-view').click(function() {
            changePdfMode(PdfModeType.Icon);
            $('#review-dialog .body').data('jsp').reinitialise();
        });

        // Binder for page dropdown list
        $('#lstPages').live("change", function(){
          br.jumpToIndex($('#lstPages').attr("selectedIndex"));
        });

        // Binder for segment list used by iDevices
        $('#lbSegments').live("change", function(){
            var pageNum = $('#lbSegments').attr("value"); 
            var pageIndex = br.getPageIndexWithPageNum(pageNum);

            if ('undefined' != typeof(pageIndex)) {
                var leafTop = 0;
                var h;
                br.jumpToIndex(pageIndex);
                $('#BRcontainer').attr('scrollTop', leafTop);
                return true;
            }
            // Page not found
            return false;
        });

        // Binders for non-iDevice segment list
        $(document).delegate("a.viewSegLinkTitle", "click", function() {
            return selectSeg(this);
        });

        function selectSeg(segLink)
        {
            var pageNum = $(segLink).attr("id"); 
            var pageIndex = br.getPageIndexWithPageNum(pageNum);

            highlightSeg(segLink);

            if ('undefined' != typeof(pageIndex)) {
                var leafTop = 0;
                var h;
                br.jumpToIndex(pageIndex);
                $('#BRcontainer').attr('scrollTop', leafTop);
                return true;
            }
            // Page not found
            return false;
        }

        function highlightSeg(segLink)
        {
            $("#lstSegments ul li").css("background-color", "#FFFFFF");
            $("#lstSegments ul li").css("color", "#444444");
            $("#lstSegments ul li a").css("color", "#444444");
            $("#lstSegments li .segListVolPage").css("color", "#000000");
            $(segLink).parent().css("background-color","Highlight");
            $(segLink).parent().css("color","HighlightText");
            $(segLink).css("color", "HighlightText");
            $(segLink).parent().children(".segListVolPage").css("color","#BFBFBF");
            $("#lbSegments").val($(segLink).attr("id"));
        }

        // Binder for "Show More" link
        $(document).delegate(".showmore a", "click", function() {
            var leftPanelHeight = $("#left-panel2").height();
            var newHeight = leftPanelHeight;
            var showMore = ($(this).html() === "Show More");

            if (showMore) 
            {
                $(this).html("Show Less");
                newHeight = leftPanelHeight * 0.75;
                $("#names-container-div").hide();
            }
            else 
            {
                $(this).html("Show More");
                newHeight = leftPanelHeight / 4;
                $("#names-container-div").show();
            };

            $("#lstPages").height(newHeight);
            $("#lstPages").css("min-height", newHeight);
            $("#lstSegments").height(newHeight);
            $("#lstSegments ul").height(newHeight);
        });

        // Function used to change the way pdfs are viewed (list/icon) on the Review Dialog
        function changePdfMode (mode, redraw) {
            if(pdfMode != mode || redraw) {
                pdfMode = mode;
                $('#review-dialog ul').empty();

                $('.dicon').removeClass('active');
                if(pdfMode == PdfModeType.List) {
                    pdfListLink.addClass('active');
                } else if(pdfMode == PdfModeType.Icon) {
                    pdfIconLink.addClass('active');
                }

                $.each(pdfPages, function(index, pdfPageIndex) { 
                    var pdfPage;
                    var deletePage = $("<a/>", { 'class': 'delete', text: 'delete' }).click(function() {
                        pdfPageCount = pdfPages.remove(index);
                        $('#ptb' + pdfPageIndex).removeClass('selected').attr('bt-xtitle', 'Add to My PDF');
                        lastPdfIndex = -1;
                        changePdfMode(mode, true);
                        updatePdfPageCounter(pdfPageCount);

                        $(this).parents('li').fadeOut(200, function() { 
                            $(this).remove(); 

                            if($('#review-dialog li').length == 0) {
                                $('#review-dialog').jqmHide();
                            }

                            $('#review-dialog .body').data('jsp').reinitialise();
                        });                        
                    });                    

                    if(mode == PdfModeType.List) {
                        var pageName = $('<span/>', { text : br.getPageName(pdfPageIndex) });
                        pdfPage = $('<li/>', { 'class' : 'listpage' }).append(pageName).append(deletePage);
                    } else if(mode == PdfModeType.Icon) {
                        var pageName = $('<span/>', { 'class' : 'ellipsis', text : br.getPageName(pdfPageIndex) });
                        var thumb = $('<img/>', { src: br.getPageURI(pdfPageIndex, 0, 100) });
                        var text = $('<div/>', { 'class' : 'text' }).append(pageName).append(deletePage);
                        pdfPage = $('<li/>', { 'class' : 'iconpage' }).append(thumb).append(text);
                    }

                    $('#review-dialog ul').append(pdfPage)
                });

                $('.ellipsis').textOverflow();
            }
        }

        var pdfGenerate = $('.generate', pdfBar);
        var pdfCounter = $('.counter', pdfBar);
        var pdfReviewCounter = $('#review-dialog #page-count');

        // Validation for Generate PDF Dialog
        function validatePdfForm() {
            var isValid = true;
            $('#tbEmailErr').html("");
            $('#tbTitleErr').html("");

            if ($.trim($("#tbEmail").val()) == "") {
                $('#tbEmailErr').html("Please enter an email address.");
                isValid = false;
            }

            var title = $.trim($("#tbTitle").val());
            var authors = $.trim($("#tbAuthors").val());
            var subjects = $.trim($("#tbSubjects").val());

            if (title.length == 0 && (authors.length > 1 || subjects.length > 1)) {
                $('#tbTitleErr').html("Please include a title.");
                isValid = false;
            }
            else if (title.length == 1) {
                $('#tbTitleErr').html("Please include a valid title.");
                isValid = false;
            }

            return (isValid);
        }

        // PDF Generation
        $('#generate-dialog .finish').click(function () {
            var finishButton = $(this);
            if(validatePdfForm() && !finishButton.hasClass('loading')) {                
                finishButton                    
                    .css('width', finishButton.width())
                    .addClass('loading');

                var pageIds = [];

                $.each(pdfPages, function(index, value) {
                    pageIds.push(pages[value].PageID);
                });
                
                $.ajax({
                    type: 'post',
                    url: '/generatepdf/',
                    data: {
                        'itemId': 693951,
                        'pages': pageIds.toString(),
                        'email': $('#tbEmail').val(),
                        'title': $('#tbTitle').val(),
                        'authors': $('#tbAuthors').val(),
                        'subjects': $('#tbSubjects').val(),
                        'imagesOnly': $('#tbImages:checked').val()
                    },
                    success: function (data) {
                        if(data.isSuccess) {
                            $('#pdfId').text(data.pdfId);

                            $('#generate-dialog .intro').fadeOut(function() {
                                $('#generate-dialog .success').fadeIn();
                                finishButton.removeClass('loading').removeAttr('style');
                            });

                            $('#generate-dialog .required, #generate-dialog .optional, #generate-dialog .finish').fadeOut();
                            $('#generate-dialog .required, #generate-dialog .optional, #generate-dialog .review').fadeOut();

                            // close off the PDF selection stuff.
                            cancelPdfSelection = true;
                        } else {
                            $('#pdfIdFail').text(data.pdfId);

                            $('#generate-dialog .required, #generate-dialog .optional, #generate-dialog .footer').fadeOut();

                            $('#generate-dialog .intro').fadeOut(function() {
                                $('#generate-dialog .failure').fadeIn();
                                finishButton.removeClass('loading').removeAttr('style');
                            });
                        }
                    },
                    error: function() {
                            // just show the error page for now.
                            location.pathname = '/error';
                    }
                });
            }
        });

        // Return the width of a given page.  Here we assume all images are 1600 pixels wide
        br.getPageWidth = function (index) {
            if (pages && (index >= 0) && pages[index].Width) return pages[index].Width;
            return 1600;
        }

        // Return the height of a given page.  Here we assume all images are 2400 pixels high
        br.getPageHeight = function (index) {
            if (pages && (index >= 0) && pages[index].Height) return pages[index].Height;
            return 2400;
        }

        br.imagesBaseURL = '/images/';

        br.getPageURI = function (index, reduce, width) {
            var url = "";
            if (pages != null) {
                var calculatedWidth = (width) ? width : Math.floor(br.getPageWidth(index) / reduce);
                url = pages[index].ExternalBaseUrl + '/download/' + pages[index].BarCode + '/page/n' + (pages[index].SequenceOrder - 1) + '_w' + calculatedWidth;
            }

            return url;
        }

        // Return which side, left or right, that a given page should be displayed on
        br.getPageSide = function (index) {
            if ('rl' != this.pageProgression) {
                // If pageProgression is not set RTL we assume it is LTR
                if (0 == (index & 0x1)) {
                    // Even-numbered page
                    return 'R';
                } else {
                    // Odd-numbered page
                    return 'L';
                }
            } else {
                // RTL
                if (0 == (index & 0x1)) {
                    return 'L';
                } else {
                    return 'R';
                }
            }
        }

        // This function returns the left and right indices for the user-visible
        // spread that contains the given index.  The return values may be
        // null if there is no facing page or the index is invalid.
        br.getSpreadIndices = function (pindex) {
            var spreadIndices = [null, null];
            if ('rl' == this.pageProgression) {
                // Right to Left
                if (this.getPageSide(pindex) == 'R') {
                    spreadIndices[1] = pindex;
                    spreadIndices[0] = pindex + 1;
                } else {
                    // Given index was LHS
                    spreadIndices[0] = pindex;
                    spreadIndices[1] = pindex - 1;
                }
            } else {
                // Left to right
                if (this.getPageSide(pindex) == 'L') {
                    spreadIndices[0] = pindex;
                    spreadIndices[1] = pindex + 1;
                } else {
                    // Given index was RHS
                    spreadIndices[1] = pindex;
                    spreadIndices[0] = pindex - 1;
                }
            }

            return spreadIndices;
        }

        br.bhlPageID = function(index){
         if (pages && (index >= 0) && pages[index].PageID) {             
                              
                return pages[index].PageID;         
            }
        }
        //function to update page URL, Names and text
        br.updatePageDetailsUI = function(index){
            var segListItem = $("#lstSegments li[id='" + pages[index].SegmentID + "']");
            var segTitleLink = $("#articleTitleLink");

            
            // Update the segment list
            var segTitle = $(segListItem).children("a.viewSegLinkTitle");
            if (segTitle != null) {
                if (pages[index].SegmentID != null) {
                    segTitleLink.html(pages[index].GenreName + ": " + segTitle.html());
                }
                else {
                    segTitleLink.html(segTitle.html());
                }
                segTitleLink.attr("href", "/part/" + pages[index].SegmentID);
            }
            highlightSeg(segTitle);
            

            // Update the Download Part and Download Citation menu items
            
            if (pages[index].SegmentID != null) {
                $(".selectpart").html("Download " + pages[index].GenreName);
                $(".selectpart").attr("href", "/partpdf/" + pages[index].SegmentID);
                $(".selectpart").attr("download", "part" + pages[index].SegmentID + ".pdf");
                $(".selectpart").show();
                $(".partcitelinklabel").html("CURRENT " + pages[index].GenreName.toUpperCase());
                $(".partcitationlinks a.large-icon.ris").attr("href", "/handlers/risdownload.ashx?pid=" + pages[index].SegmentID);
                $(".partcitationlinks a.large-icon.ris").attr("download", "bhlpart" + pages[index].SegmentID + ".ris");
                $(".partcitationlinks a.large-icon.bibtex").attr("href", "/handlers/bibtexdownload.ashx?pid=" + pages[index].SegmentID);
                $(".partcitationlinks a.large-icon.bibtex").attr("download", "bhlpart" + pages[index].SegmentID + ".bib");
                $(".partcitationlinks").show();
            }
            else {
                $(".selectpart").hide();
                $(".partcitationlinks").hide();
            }
            

            // Update the Altmetric badge
            
                $(".altmetric-embed").attr("data-uri", "https://www.biodiversitylibrary.org/item/" + "334462");
            
            if (typeof _altmetric_embed_init === 'function') _altmetric_embed_init();

            // Update page URL and names
            $("#currentpageURL").text("https://www.biodiversitylibrary.org/page/" + pages[index].PageID);
            $("#currentpageURL").attr("href", "https://www.biodiversitylibrary.org/page/" + pages[index].PageID);
            var currentFlickrUrl = $("#currentFlickrURL");
            var flickrUrlSpan = $("#flickrurlspan");
            if (pages[index].FlickrUrl == "")
            {
                flickrUrlSpan.toggle(false);
                currentFlickrUrl.attr("href", "#");
            }
            else
            {
                currentFlickrUrl.attr("href", pages[index].FlickrUrl);
                flickrUrlSpan.toggle(true);
            }

            var showOCRButton = $('#showOCRButton'); 
            if (showOCRButton.attr("title") == "Hide Text") {
                updateOCR(index);   // Update text if it is visible
            }
            updatePageNames(index);
            $("#pagename").text(br.getPageName(br.currentIndex()));
            if (typeof renderAnnotations == "function") renderAnnotations(index+1);
        }  
        
        // For a given "accessible page index" return the page number in the book.
        //
        // For example, index 5 might correspond to "Page 1" if there is front matter such
        // as a title page and table of contents.
        br.getPageNum = function (index) {
            return index + 1;
        }
        
        br.getPageIndexWithPageNum = function (pageNum) {
            if (pages) {
                for (var i=0; i<pages.length; i++) {
                    if (pages[i].PageID == pageNum) {
                        return i;
                    }
                }
            }
            return -1;
        }

        // Return the index number for the leaf
        br.leafNumToIndex = function (leaf) {
            return leaf - 1;
        }

        // Get a page name given a certain page index
        br.getPageName = function (index) {
            if (pages && (index >= 0) && pages[index].WebDisplay) {
                return pages[index].WebDisplay;
            }
        }

        // Function used by book reader to create the pagetoolbox
        br.getPageToolbox = function (index) {
            var pageToolbox = $("<div/>", { 'class': 'pagetoolbox', 'id': 'ptb' + index }).bind(pageToolBoxEvent, function (event) {
                /*
                var origBG = '#404040'
                var origActiveBG = '#455667';
                var activeBG = '#ffa200';
                */
                var pdfPageCount;
                var startIndex;
                var endIndex;

                if (event.shiftKey && lastPdfIndex !== -1) {
                    // Select multiple pages
                    if (index < lastPdfIndex) 
                        { startIndex = index; endIndex = lastPdfIndex - 1; }
                    else 
                        { startIndex = lastPdfIndex + 1; endIndex = index; }

                    for (x = startIndex; x <= endIndex; x++)
                    {
                        pdfPageIndex = $.inArray(x, pdfPages);

                        // Select/Deselect a single page
                        if(pdfPageIndex < 0) {
                            pdfPageCount = pdfPages.push(x);
                            $('#ptb' + x).addClass('selected').attr('bt-xtitle', 'Remove from My PDF');

                            if(!pdfBar.hasClass('active')) {
                                pdfBar.removeClass('disabled').addClass('active').fadeTo(200, 1);
                            }
                        }
                    }
                    lastPdfIndex = index;
                }
                else {
                    pdfPageIndex = $.inArray(index, pdfPages);

                    // Select/Deselect a single page
                    if(pdfPageIndex < 0) {
                        pdfPageCount = pdfPages.push(index);
                        pageToolbox.addClass('selected').attr('bt-xtitle', 'Remove from My PDF');

                        if(!pdfBar.hasClass('active')) {
                            pdfBar.removeClass('disabled').addClass('active').fadeTo(200, 1);
                        }
                        lastPdfIndex = index;
                    } else {
                        pdfPageCount = pdfPages.remove(pdfPageIndex);
                        pageToolbox.removeClass('selected').attr('bt-xtitle', 'Add to My PDF');
                        lastPdfIndex = -1;
                    }
                }

                // Re-sort pdfs
                pdfPages.sort(function (a, b){ return (a-b); });

                updatePdfPageCounter(pdfPageCount);

                // Prevent event propagating to dragscrollable
                event.stopPropagation();
            });

            var isAnimating = false;

            var pdfPageIndex = $.inArray(index, pdfPages);
            // Page has already been added to pdfPages
            if(pdfPageIndex >= 0) {
                pageToolbox.addClass('selected').css('display', 'block'); // .addClass('active')
            }

            // Hard coded dimensions due to inability to ensure correct dimensions
            pageToolbox.data('info', {
                index: index,
                origWidth: 230,
                origHeight: 70
            });

            return pageToolbox;
        }

        function updatePdfPageCounter(pdfPageCount) {
            var origBG = '#404040'
            var origActiveBG = '#455667';
            var activeBG = '#ffa200';

            pdfCounter.stop(true, true).animate({ backgroundColor : activeBG }, 100, 'easeOutQuad', function() {
                if(pdfPageCount <= 0) {
                    pdfCounter.text('No Pages Added');
                    pdfBar.removeClass('active').addClass('disabled');
                } else if(pdfPageCount == 1) {
                    pdfCounter.text(pdfPageCount + ' Page Added');
                    pdfReviewCounter.text(pdfPageCount + ' Page');
                } else {
                    pdfCounter.text(pdfPageCount + ' Pages Added');
                    pdfReviewCounter.text(pdfPageCount + ' Pages');
                }                        
            }).animate({ backgroundColor : (pdfPageCount <= 0) ? origBG : origActiveBG }, 400, 'easeOutQuad');
        }

        // Create BeautyTips if canvas exists & not IE (results in singlepage view scrolling to top)
        if(Modernizr.canvas && !$.browser.msie) {
            $('.dicon, .jqmClose').bt({
                padding: 10,
                spikeLength: 10,
                spikeGirth: 13,
                fill: '#266099',
                strokeWidth: 0,
                shrinkToFit: true,
                positions: ['most'],
                overlap: -1,
                cssStyles: { color: '#fff' },
                hoverIntentOpts: {
                    interval: 500,
                    timeout: 0
                }
            });
        }

        br.numLeafs = 12;
        br.bookTitle = '';
        br.imagesBaseURL = '/images/';
        br.titleLeaf = 1;

        BookReader.prototype.addPageToolBox = function (index, page) {
            var pageToolbox = this.getPageToolbox(index);
            pageToolbox.appendTo(page);
        }
        BookReader.prototype.add2upPageToolBox = function (index, page) {
            return;
        }

        BookReader.prototype.scrollDown = function() {
            br.next();
        }
        BookReader.prototype.scrollUp = function() {
            br.prev();
        }

        // Bookviewer crashes ie6, dont even attempt to load it
        if (!$('html').is('.ie6')) {
            br.init();

            var BRtoolbar = $("#BRtoolbar").detach();
            BRtoolbar.appendTo("#BRtoolbarwrapper");
            $('.BRtoolbar-container').append("<div id='BRtoolbar-extra'><a class='BRicon page_print' title='Print'>Print</a><a id='showSearchButton' title='Search Inside' class='BRButton BRButtonFeatured'>Search Inside</a><a id='showInfoButton' title='Show Info' class='BRButton'>Show<br/>Info</a><a id='showAnnotationsButton' class='BRButton' title='Show Annotations'>Show<br/>Annotations</a><a id='showOCRButton' class='BRButton' title='Show Text'>Show<br/>Text</a> </div>");
            var PDFtoolbar = $("#toolbar-top").detach();
            PDFtoolbar.prependTo("#BRtoolbar");
            $('#BRtoolbar').prepend("<div><a id='showPagesButton' class='BRicon book_leftmost' style='display: block;' title='Hide Pages'>Hide Pages</a></div>");
            var AnnotationBox = $("#AnnotationBox").detach();
            AnnotationBox.appendTo("#right-panel-content");

            if (!true) $("#showSearchButton").hide();

            // Print page 
            var printPageButton = $('.page_print');
            printPageButton.click(function () {
                $('<img/>', { src: br.getPageURI(br.currentIndex()) })
                    .printElement({
                        printMode: 'popup',
                        printBodyOptions: {
                            classNameToAdd: 'printPopup'
                        },
                        "leaveOpen": true,
                        pageTitle: 'Castlemaine Naturalist' + ((pages[br.currentIndex()].WebDisplay) ? ' - ' + pages[br.currentIndex()].WebDisplay : '')
                    });
            });

            // Toggle left hand container for Pages 
            var showPagesButton = $('#showPagesButton');
            showPagesButton.click(function () {
                $("#left-panel2").toggle("fast", function () { if (br.mode == 3) { br.resizePageView(); } br.centerPageView(); });
                if (showPagesButton.attr("title") == "Show Pages") {
                    showPagesButton.attr("title", "Hide Pages");
                    showPagesButton.text("Hide Pages");
                    showPagesButton.toggleClass("book_leftmost", true).toggleClass("book_rightmost", false);
                } else {
                    showPagesButton.attr("title", "Show Pages");
                    showPagesButton.text("Show Pages");
                    showPagesButton.toggleClass("book_leftmost", false).toggleClass("book_rightmost", true);
                }
            });

            // Toggle right hand container for text 
            var showOCRButton = $('#showOCRButton');
            showOCRButton.click(function () {
                newpageOCR.text("");
                if (showOCRButton.attr("title") == "Show Text") {
                    updateOCR(br.currentIndex());
                    $("#right-panel2").show("fast", function () { if (br.mode == 3) { br.resizePageView(); } br.centerPageView(); });
                    $("#pageOCR-panel").show();
                    showOCRButton.attr("title", "Hide Text");
                    showOCRButton.html("Hide<br/>Text");
                    showOCRButton.addClass("displayed");
                } else {
                    $("#right-panel2").hide("fast", function () { if (br.mode == 3) { br.resizePageView(); } br.centerPageView(); });
                    showOCRButton.attr("title", "Show Text");
                    showOCRButton.html("Show<br/>Text");
                    showOCRButton.removeClass("displayed");
                }

                resetInfoBox();
                resetAnnotationsBox();
                resetSearchBox();
            });

            // Toggle right hand container for info 
            var showInfoButton = $('#showInfoButton');
            showInfoButton.click(function () {
                if (showInfoButton.attr("title") == "Show Info") {
                    $("#right-panel2").show("fast", function () { if (br.mode == 3) { br.resizePageView(); } br.centerPageView(); });
                    $("#pageInfo-panel").show();
                    showInfoButton.attr("title", "Hide Info");
                    showInfoButton.html("Hide<br/>Info");
                    showInfoButton.addClass("displayed");
                } else {
                    $("#right-panel2").hide("fast", function () { if (br.mode == 3) { br.resizePageView(); } br.centerPageView(); });
                    showInfoButton.attr("title", "Show Info");
                    showInfoButton.html("Show<br/>Info");
                    showInfoButton.removeClass("displayed");
                }

                resetPageOCRBox();
                resetAnnotationsBox();
                resetSearchBox();
            });

            // Toggle right hand container for Search
            var showSearchButton = $('#showSearchButton');
            showSearchButton.click(function () {
                if (showSearchButton.attr("title") == "Search Inside") {
                    $("#right-panel2").show("fast", function () { if (br.mode == 3) { br.resizePageView(); } br.centerPageView(); });
                    $("#pageSearch-panel").show();
                    $("#sibSearchText").focus();
                    showSearchButton.attr("title", "Hide Search");
                    showSearchButton.html("Hide Search");
                    showSearchButton.addClass("displayed");
                } else {
                    $("#right-panel2").hide("fast", function () { if (br.mode == 3) { br.resizePageView(); } br.centerPageView(); });
                    showSearchButton.attr("title", "Search Inside");
                    showSearchButton.html("Search Inside");
                    showSearchButton.removeClass("displayed");
                }

                resetPageOCRBox();
                resetInfoBox();
                resetAnnotationsBox();
            });

            // Toggle right hand container for Annotations
            var showAnnotationsButton = $("#showAnnotationsButton");
            showAnnotationsButton.click(function () {
                if (showAnnotationsButton.attr("title") == "Show Annotations") {
                    $("#right-panel2").show("fast", function () { if (br.mode == 3) { br.resizePageView(); } br.centerPageView(); });
                    $("#AnnotationBox").show();
                    showAnnotationsButton.attr("title", "Hide Annotations");
                    showAnnotationsButton.html("Hide<br/>Annotations");
                    showAnnotationsButton.addClass("displayed");
                } else {
                    $("#right-panel2").hide("fast", function () { if (br.mode == 3) { br.resizePageView(); } br.centerPageView(); });
                    showAnnotationsButton.attr("title", "Show Annotations");
                    showAnnotationsButton.html("Show<br/>Annotations");
                    showAnnotationsButton.removeClass("displayed");
                }

                resetPageOCRBox();
                resetInfoBox();
                resetSearchBox();
            });

            if ("false" === "false") {
                showAnnotationsButton.hide();
            } else {
                showAnnotationsButton.trigger('click');
                window.setTimeout("br.centerPageView()", 500);
            }

            updateUIHeights(); 
        }

        $("#BRcontainer").bind('scroll', this, function (e) {
            if (self.mode != self.constMode2up) {
                e.data.loadLeafs();
            }
            $('.pagetoolbox').each(function () {
                if (actionMode == actionModeType.Select) {
                    $(this).show();
                }
            })
        });

    });

    $(window).bind('resize', this, function (e) {
        updateUIHeights(); 
    });

    function updateUIHeights() {
        var leftPanelHeight = $("#left-panel2").height();
        var pagesPanel = $("#lstPages").outerHeight();
        var namesPanel = $("#names-panel").outerHeight();

        var topTotalHeight = 0; 
        $("#left-panel2 .left-panel-boxes:first-child").children().each(function(){
            topTotalHeight = topTotalHeight + $(this).outerHeight();
        });
        topTotalHeight = topTotalHeight-pagesPanel;

        var bottomTotalHeight = 0; 
        $("#left-panel2 .left-panel-boxes:last-child").children().each(function(){
            bottomTotalHeight = bottomTotalHeight + $(this).outerHeight();
        });
        bottomTotalHeight = bottomTotalHeight-namesPanel;

        var lphh = (leftPanelHeight)/4;

        if (leftPanelHeight < 720) {
            topTotalHeight = 0;
            bottomTotalHeight = 0; 
        }

        if (topTotalHeight >= bottomTotalHeight) {
            finalHeight = topTotalHeight; 
        } else {
            finalHeight = bottomTotalHeight; 
        }
        finalHeight += lphh;

        $("#names-panel").height(leftPanelHeight/3);
        var isiPad = navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)/i) != null;
        if (!isiPad) {
            var newHeight = leftPanelHeight/4;
            var showMore = ($(".showmore a").html() === "Show Less");   // current state of list boxes
            if (showMore)
            {
                var newHeight = leftPanelHeight * 0.75;
            }
            $("#lstPages").height(newHeight);
            $("#lstPages").css("min-height", newHeight);
            $("#lstSegments").height(newHeight);
            $("#lstSegments ul").height(newHeight);
        }

        $("div.text span").height(leftPanelHeight-($("#BRtoolbarwrapper").height()+$("div.header").height())); 
    }

    function resetAnnotationsBox() {
        $("#AnnotationBox").hide();
        $("#showAnnotationsButton").attr("title", "Show Annotations");
        $("#showAnnotationsButton").html("Show<br/>Annotations");
        $("#showAnnotationsButton").removeClass("displayed");
    }

    function resetSearchBox() {
        $("#pageSearch-panel").hide();
        $("#showSearchButton").attr("title", "Search Inside");
        $("#showSearchButton").html("Search<br/>Inside");
        $("#showSearchButton").removeClass("displayed");
    }

    function resetInfoBox() {
        $("#pageInfo-panel").hide();
        $("#showInfoButton").attr("title", "Show Info");
        $("#showInfoButton").html("Show<br/>Info");
        $("#showInfoButton").removeClass("displayed");
    }

    function resetPageOCRBox() {
        $("#pageOCR-panel").hide();
        $("#showOCRButton").attr("title", "Show Text");
        $("#showOCRButton").html("Show<br/>Text");
        $("#showOCRButton").removeClass("displayed");
    }

    function resetPDFDialog() {
        $("#tbEmail").val("");
        $("#tbTitle").val("");
        $("#tbAuthors").val("");
        $("#tbSubjects").val("");
    }

    function fixIEDisplayIssue() {
        var pageWidth = $('.BRpagedivthumb img').css('width');
        var pageHeight = $('.BRpagedivthumb img').css('height');

        if ($.browser.msie && (parseInt($.browser.version, 10) === 8 || parseInt($.browser.version, 10) === 7)) {
            for (var i = 0; i < $('.BRpagedivthumb img').length; i++) {
                $('.BRpagedivthumb img').width(pageWidth);
                $('.BRpagedivthumb img').height(pageHeight); 
            }
        }
    }

    $(document).ready(function(){
        //	Called when we click on the tab itself
	    $('#pagestab').click(function() {

            if ($('#pagestab').hasClass('active')) return false; 

		    $('#pagestabcontent').show();
            $('#segmentstabcontent').hide();
            $('#pagestab').toggleClass("active");
            $('#segmentstab').toggleClass("active");

		    //	Do nothing when tab is clicked
		    return false;
	    });
	    //	Called when we click on the tab itself
	    $('#segmentstab').click(function() {
        
            if ($('#segmentstab').hasClass('active')) return false; 

		    $('#pagestabcontent').hide();
            $('#segmentstabcontent').show();
            $('#pagestab').toggleClass("active");
            $('#segmentstab').toggleClass("active");

		    //	Do nothing when tab is clicked
		    return false;
	    });
        var segmentCount = 0; 
        if (segmentCount == 0) {
            $('#segmentstab').hide();
        }

        
    });

//]]>
</script>

<script type="text/javascript">
<!--
    var pageSequence = [];   

    //initialize annotation box
    var $_AnnotationBox = $('#AnnotationBox'),
        $_hide_annotations = $('#AnnotationBox #hide-annotations'),
        $_stub = $('#AnnotationBox #stub'),
        $_show_annotations = $('#AnnotationBox #show-annotations'),
        $_related_annotations = $('#related-annotations'),
        $_annotationBoxContent = $('#AnnotationBox #content'),
        $_noAnnotationsStub = $('#no-annotations-stub');

    //initialize legend box
    var $_toggle_legend = $('#toggle_legend'),
        $_hide_legend = $('#hide_legend'),
        $_show_legend = $('#show_legend'),
        $_legend_items = $('#legend-items'),
        $_copyright = $('#AnnotationBox #copyright'),
        $_phantom_legend = $('#phantom-legend');

    //set show/hide for legend
    //use phantom_legend to keep rest of Annotation Box content evenly spaced
    $_toggle_legend.click(function() {
        if ($_phantom_legend.height() > 0)
            $_phantom_legend.height($_legend_items.outerHeight());
        $_legend_items.toggle(50, function() {
            $_phantom_legend.toggle(0);
            $_hide_legend.toggle();
            $_show_legend.toggle();
        });  
    });

    function changePage(index)
    {
        br.jumpToIndex(index-1); //Page Annotation index starts at 1, not zero so need to remove one.
    }

    function toggleAnnotationBody()
    {
        $_hide_annotations.toggle();
        $_AnnotationBox.toggleClass('active');
        $_show_annotations.toggle();
    }

    function setActive()
    {
        $_AnnotationBox.toggleClass('active', true);
        $_AnnotationBox.toggleClass('inactive', false);
        $_annotationBoxContent.show();
        $_noAnnotationsStub.hide();
    }

    function setInactive()
    {
        $_AnnotationBox.toggleClass('inactive', true);
        $_AnnotationBox.toggleClass('active', false);
        $_annotationBoxContent.hide();
        $_noAnnotationsStub.show();
    }

    function renderAnnotations(newSequence)
    {
        //Set Annotation Box
        var notes = $("#AnnotationBox #notes");

        //set notes
        var _newVal = $("#pageAnnotations_" + newSequence).html();
        if (_newVal) 
        {
            notes.html(_newVal);
            setActive();
        }
        else
        {
            setInactive();
        }

        set_scrollers(newSequence);
    }

    function set_scrollers(newSequence)
    {              
        /********************************************************************************
        * sets controls for going to first available annotated page in either direction *
        * If user has browsed to an unannotated page, have to determine where that page *
        * lies in the sequence, to determine its adjacent annotated pages. If we've     *
        * browsed to a page outside of the sequence, relabel the the controls to either *
        * "first" or "last"                                                             *
        ********************************************************************************/
        var aPrev = $("#AnnotationBox #pageScroller #aPrev"),
            aNext = $("#AnnotationBox #pageScroller #aNext");

        pIndex = map_sequence(newSequence, pageSequence);

        if (pIndex[0] >= 0) 
        {
            aPrev.html("<span class='pagescrollerarrow'>&laquo;</span>" + (pIndex[0] == (pageSequence.length - 1) ? "last marked page" : "previous marked page"));

            aPrev.attr('href', 'javascript:changePage(' + (pageSequence[pIndex[0]]) + ');');
            if (aPrev.is(':hidden')) 
            {
                aPrev.show();
            }
        }
        else              //no previous annotation, disable control
            aPrev.hide();

        if (pIndex[1] >= 0)
        {
            aNext.html((pIndex[1] == 0 ? "first marked page" : "next marked page") + "<span class='pagescrollerarrow'>&raquo;</span>");
            aNext.attr('href', 'javascript:changePage(' + (pageSequence[pIndex[1]]) + '); ');
            if (aNext.is(':hidden')) 
            {
                aNext.show();
            }
        }
        else              //no next annotation, disable control
            aNext.hide();    
    }
        
    function onRelatedItemHover(id)
    {
        return;
        // find containing page block and extract id for display
        var $_relatedAnnotation = $('#Annotation_' + id);
        var $page = $_relatedAnnotation.parentsUntil('#AnnotationRepository');
        if ($page.attr('id'))
            changePage($page.attr('id').replace("pageAnnotations_", ''));
        else
        {
            var $_relatedItem = $('#related-item' + id);
            var pos = $_relatedItem.offset();
            var $_not_avail = $('#annotation-not-available');
            $_not_avail.offset({top:pos.top - 35, left:pos.left});
            $_not_avail.show();
        }
    }

    function onRelatedItemBlur()
    {
        return;
        var $_not_avail = $('#annotation-not-available');
        $_not_avail.hide();
    }

    function onRelatedItemClick(id)
    {
        // find containing page block and extract id for display
        var $_relatedAnnotation = $('#Annotation_' + id);
        var $page = $_relatedAnnotation.parentsUntil('#AnnotationRepository');
        if ($page.attr('id'))
            changePage($page.attr('id').replace("pageAnnotations_", ''));
    }

    function map_sequence(x, set)
    {
        var left = 0, right = set.length - 1;
        if (x < set[left]) return new Array(-1, left);
        if (x > set[right]) return new Array(right, -1);
        if (x == set[left]) return new Array(-1, right == 0 ? -1 : 1);
        if (x == set[right]) return new Array(right == 0 ? -1 : right - 1, -1);

        for (y=0; y<=right; y++)
        {
            var start = y - 1, end = -1;
            if (x < set[y]) end = y;
            if (x == set[y]) end = y + 1;
            if (end != -1) return new Array(start, end);
        }
    }
-->
</script>
<script type="text/javascript">
<!--
    function toggleSubjectSection(id) {
        var subjItems = Array($('#subject-section-' + id),
                                $('#show-subjects' + id),
                                $('#hide-subjects' + id));
        for (i in subjItems) {
            subjItems[i].toggle();
        }
    }

    function toggleConceptSection(id) {
        var subjItems = Array($('#concept-section-' + id),
                                $('#show-concepts' + id),
                                $('#hide-concepts' + id));
        for (i in subjItems) {
            subjItems[i].toggle();
        }
    }
-->
</script>
  
        
        <script src="/js/plugins.js?v=2"></script>
        <script src="/js/script.js?v=6"></script>
        <script type="text/plain" src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js" data-category="analytics" data-service="altmetric"></script>
    </form>

    <script type="text/javascript" data-category="necessary">
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('consent', 'default', {
            ad_storage: 'denied',
            ad_user_data: 'denied',
            ad_personalization: 'denied',
            analytics_storage: 'denied',
            functionality_storage: 'denied',
            personalization_storage: 'denied',
            wait_for_update: 500
        });
        gtag('set', 'ads_data_redaction', true);
        //gtag('set', 'url_passthrough', true);
        gtag('js', new Date());
        gtag('config', 'G-KD1S13JQ03', {
            "dimension1": "CFNC",
            "dimension2": "334462",
            "dimension3": "Public Record Office Victoria"
        });
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KD1S13JQ03"></script>
    <script type="text/plain" data-category="analytics" data-service="ga">
        gtag('consent', 'update', {
            personalization_storage: 'granted',
            functionality_storage: 'granted',
            analytics_storage: 'granted'
        });
    </script>    
    <script type="text/plain" data-category="analytics" data-service="!ga">
        CookieConsent.eraseCookies(['_gid', /^_ga/], '/', location.hostname);
    </script>

</body>
</html> contentType 9 text/html url 51 https://www.biodiversitylibrary.org:443/item/334462 responseCode 3 200 