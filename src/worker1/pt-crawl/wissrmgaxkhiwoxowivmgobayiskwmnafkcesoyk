wissrmgaxkhiwoxowivmgobayiskwmnafkcesoyk length 5 35051 page 35051 <!DOCTYPE HTML>
<html lang="en">
  <head>
<!-- PDTQ-131 -->
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N3RT7TD');</script>
<!-- End Google Tag Manager -->
    
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>AWS CodeDeploy - Travis CI</title>
<link rel="stylesheet" href="/assets/stylesheets/main.css">
<link rel="alternate" type="application/rss+xml" title="Travis CI Build Environment Updates" href="https://docs.travis-ci.com/feed.build-env-updates.xml">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" defer></script>

<script src="/assets/javascripts/main.js" type="text/javascript" charset="utf-8" defer></script>
<script src="/assets/javascripts/prism.js" type="text/javascript" charset="utf-8" defer></script>
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@travisci" />
<meta name="twitter:creator" content="@travisci" />
<meta property="og:title" content="Travis CI Documentation" />
<meta property="og:type" content="website" />
<meta property="og:url" content=/user/deployment/codedeploy/ />
<meta property="og:description" content="AWS CodeDeploy" />
<meta property="og:image" content="/images/TravisCI-Full-Color.png" }} />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="642" />
<meta property="og:image:height" content="201" />
<meta property="og:image:alt" content="Travis CI logo" />


 

  </head>
  <body>
<!-- PDTQ-131 -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N3RT7TD"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <div class="wrapper">

      <header class="top">
  <div class="row topbar">
    <h1 id="logo" class="logo">
  <a href="https://travis-ci.com/" title="Travis CI">Travis</a>
</h1>

    <nav>
      <ul id="navigation" class="navigation">
        <li><a href="https://blog.travis-ci.com">Blog</a></li>
        <li><a href="/">Docs</a></li>
        <li class="toggle"><button type="button" id="toggle-menu" class="button--teal">Menu</button></li>
      </ul>
    </nav>
  </div>
</header>


      <div id="content" class="row">

        <div id="sidebar" class="sidebar">
  <div>
    <!-- <h2>Search</h2> -->
    <div class="searchbox">
      <form>
        <input type="text" id="st-search-input" class="searchbox-input" placeholder="Search the docs" />
      </form>
      <script type="text/javascript">
      var Swiftype = window.Swiftype || {};
        (function() {
          Swiftype.key = 'tXvDDzd4fNTBnLvxfEyx';

          Swiftype.searchSearchFields = {
            "page": ["title, body, tags"]
          };
          Swiftype.autocompleteSearchFields = {
            "page": ["title, body, tags"]
          };
          /** DO NOT EDIT BELOW THIS LINE **/
          var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
          script.src = "//swiftype.com/embed.js";
          var entry = document.getElementsByTagName('script')[0];
          document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
        }());
      </script>
    </div>
  </div>

  <section class="sidebar-navigation">
    <nav>
      <h3>Getting Started</h3>
      <ul>
        <li><a href="/user/for-beginners/">Core Concepts for Beginners</a></li>
        <li><a href="/user/tutorial/">Travis CI Tutorial</a></li>
        <li><a href="/user/customizing-the-build/">Customizing the Build</a></li>
        <li><a href="/user/speeding-up-the-build/">Speeding up the Build</a></li>
        <li><a href="/user/docker/">Using Docker in your Build</a></li>
        <li><a href="/user/gui-and-headless-browsers/">Headless Testing with Browsers</a></li>
        <li><a href="/user/pull-requests/">Building Pull Requests</a></li>
        <li><a href="/user/cron-jobs/">Cron Jobs</a></li>
        <li><a href="/user/common-build-problems/">Common Build Problems</a></li>
        <li><a href="https://github.com/travis-ci/travis#readme">Command Line Client</a></li>
        <li><a href="/user/build-config-imports/">Build Config Imports</a></li>
        <li><a href="/user/build-config-validation/">Build Config Validation</a></li>
      </ul>

      <h3>Jobs, Builds, Matrices and Stages</h3>
      <ul>
        <li><a href="/user/job-lifecycle/">Job Lifecycle</a></li>
        <li><a href="/user/build-matrix/">Build Matrix</a></li>
        <li><a href="/user/build-stages/">Build Stages</a></li>
        <li><a href="/user/conditional-builds-stages-jobs/">Conditional Builds, Stages, and Jobs</a></li>
      </ul>

      <h3>Installing Dependencies</h3>
      <ul>
        <li><a href="/user/installing-dependencies/">Installing Dependencies</a></li>
        <li><a href="/user/private-dependencies/">Private Dependencies GitHub</a></li>
        <li><a href="/user/private-dependencies-bb/">Private Dependencies Bitbucket</a></li>
        <li><a href="/user/database-setup/">Setting up Services and Databases</a></li>
        <li><a href="/user/caching/">Caching Dependencies</a></li>
        <li><a href="/user/using-workspaces/">Caching Dependencies within a Build (Workspaces)</a></li>
        <li><a href="/user/ssh-known-hosts/">Adding to SSH Known Hosts</a></li>
      </ul>

      <h3>Programming Languages</h3>
      <ul>
      
        <li><a href="/user/languages/android/">Android</a></li>
      
        <li><a href="/user/languages/c/">C</a></li>
      
        <li><a href="/user/languages/csharp/">C#</a></li>
      
        <li><a href="/user/languages/cpp/">C++</a></li>
      
        <li><a href="/user/languages/clojure/">Clojure</a></li>
      
        <li><a href="/user/languages/crystal/">Crystal</a></li>
      
        <li><a href="/user/languages/d/">D</a></li>
      
        <li><a href="/user/languages/dart/">Dart</a></li>
      
        <li><a href="/user/languages/elixir/">Elixir</a></li>
      
        <li><a href="/user/languages/elm/">Elm</a></li>
      
        <li><a href="/user/languages/erlang/">Erlang</a></li>
      
        <li><a href="/user/languages/csharp/">F#</a></li>
      
        <li><a href="/user/languages/minimal-and-generic/">Generic</a></li>
      
        <li><a href="/user/languages/go/">Go</a></li>
      
        <li><a href="/user/languages/groovy/">Groovy</a></li>
      
        <li><a href="/user/languages/haskell/">Haskell</a></li>
      
        <li><a href="/user/languages/haxe/">Haxe</a></li>
      
        <li><a href="/user/languages/java/">Java</a></li>
      
        <li><a href="/user/languages/javascript-with-nodejs/">JavaScript <small>(with Node.js)</small></a></li>
      
        <li><a href="/user/languages/julia/">Julia</a></li>
      
        <li><a href="/user/languages/matlab/">MATLAB</a></li>
      
        <li><a href="/user/languages/minimal-and-generic/">Minimal</a></li>
      
        <li><a href="/user/languages/nix/">Nix</a></li>
      
        <li><a href="/user/languages/objective-c/">Objective-C</a></li>
      
        <li><a href="/user/languages/perl/">Perl</a></li>
      
        <li><a href="/user/languages/perl6/">Perl6</a></li>
      
        <li><a href="/user/languages/php/">PHP</a></li>
      
        <li><a href="/user/languages/python/">Python</a></li>
      
        <li><a href="/user/languages/r/">R</a></li>
      
        <li><a href="/user/languages/ruby/">Ruby</a></li>
      
        <li><a href="/user/languages/rust/">Rust</a></li>
      
        <li><a href="/user/languages/scala/">Scala</a></li>
      
        <li><a href="/user/languages/smalltalk/">Smalltalk</a></li>
      
        <li><a href="/user/languages/objective-c/">Swift</a></li>
      
        <li><a href="/user/languages/csharp/">Visual Basic</a></li>
      
        <li><a href="/user/languages/community-supported-languages/">Adding a language</a></li>
      </ul>

      <h3>Deployments and Uploads</h3>
      <ul>
        
          <li class="is-overview"><a href="/user/deployment/">Overview</a></li>
          
        
        
          <li><a href="/user/deployment/anynines/">anynines</a></li>
        
          <li><a href="/user/deployment/atlas/">Atlas</a></li>
        
          <li><a href="/user/deployment/codedeploy/">AWS CodeDeploy</a></li>
        
          <li><a href="/user/deployment/elasticbeanstalk/">AWS Elastic Beanstalk</a></li>
        
          <li><a href="/user/deployment/lambda/">AWS Lambda</a></li>
        
          <li><a href="/user/deployment/opsworks/">AWS OpsWorks</a></li>
        
          <li><a href="/user/deployment/s3/">AWS S3</a></li>
        
          <li><a href="/user/deployment/azure-web-apps/">Azure Web Apps</a></li>
        
          <li><a href="/user/deployment/bintray/">bintray</a></li>
        
          <li><a href="/user/deployment/bitballoon/">BitBalloon</a></li>
        
          <li><a href="/user/deployment/bluemixcloudfoundry/">Bluemix CloudFoundry</a></li>
        
          <li><a href="/user/deployment/boxfuse/">Boxfuse</a></li>
        
          <li><a href="/user/deployment/catalyze/">Catalyze</a></li>
        
          <li><a href="/user/deployment/chefsupermarket/">Chef Supermarket</a></li>
        
          <li><a href="/user/deployment/cloud66/">Cloud 66</a></li>
        
          <li><a href="/user/deployment/cloudfoundry/">CloudFoundry</a></li>
        
          <li><a href="/user/deployment/cargo/">Cargo</a></li>
        
          <li><a href="/user/deployment/engineyard/">Engine Yard</a></li>
        
          <li><a href="/user/deployment/pages/">GitHub Pages</a></li>
        
          <li><a href="/user/deployment/releases/">GitHub Releases</a></li>
        
          <li><a href="/user/deployment/google-app-engine/">Google App Engine</a></li>
        
          <li><a href="/user/deployment/gcs/">Google Cloud Storage</a></li>
        
          <li><a href="/user/deployment/firebase/">Google Firebase</a></li>
        
          <li><a href="/user/deployment/hackage/">Hackage</a></li>
        
          <li><a href="/user/deployment/hephy/">Hephy</a></li>
        
          <li><a href="/user/deployment/heroku/">Heroku</a></li>
        
          <li><a href="/user/deployment/launchpad/">Launchpad</a></li>
        
          <li><a href="/user/deployment/npm/">npm</a></li>
        
          <li><a href="/user/deployment/openshift/">OpenShift</a></li>
        
          <li><a href="/user/deployment/packagecloud/">packagecloud.io</a></li>
        
          <li><a href="/user/deployment/puppetforge/">Puppet Forge</a></li>
        
          <li><a href="/user/deployment/pypi/">PyPI</a></li>
        
          <li><a href="/user/deployment/cloudfiles/">Rackspace Cloud Files</a></li>
        
          <li><a href="/user/deployment/rubygems/">RubyGems</a></li>
        
          <li><a href="/user/deployment/scalingo/">Scalingo</a></li>
        
          <li><a href="/user/deployment/script/">Script</a></li>
        
          <li><a href="/user/deployment/snaps/">Snap Store</a></li>
        
          <li><a href="/user/deployment/surge/">Surge.sh</a></li>
        
          <li><a href="/user/deployment/testfairy/">TestFairy</a></li>
        
          <li><a href="/user/deployment/transifex/">Transifex</a></li>
        
        <li><a href="/user/uploading-artifacts/">Uploading Build Artifacts</a></li>
      </ul>

      <h3>CI Environment Reference</h3>
      <ul>
        <li class="is-overview"><a href="/user/reference/overview/">Overview</a></li>
        <li><a href="/user/reference/linux/">Ubuntu Linux CI Environment References</a></li>
        <li><a href="/user/reference/osx/">macOS CI Environment Reference</a></li>
        <li><a href="/user/reference/windows/">Windows CI Environment Reference</a></li>
        <li><a href="/user/reference/freebsd/">FreeBSD CI Environment Reference</a></li>
        <li><a href="/user/multi-os/">Building on Multiple Operating Systems</a></li>
        <li><a href="/user/multi-cpu-architectures/">Building on Multiple CPU Architectures</a></li>
        <li><a href="/user/environment-variables/">Environment Variables</a></li>
        <li><a href="/user/build-environment-updates/">Build Environment Updates</a></li>
        <li><a href="/user/ip-addresses/">Build Machines IP Addresses</a></li>
      </ul>

      <h3>Security and Secure Software Supply Chain</h3>
      <ul>
        <li><a href="/user/encryption-keys/">Encrypting Sensitive Data</a></li>
        <li><a href="/user/encrypting-files/">Encrypting Files</a></li>
        <li><a href="/user/github-oauth-scopes/">GitHub Permissions used by Travis CI</a></li>
        <li><a href="/user/bb-oauth-scopes/">Bitbucket Permissions used by Travis CI</a></li>
        <li><a href="/user/assembla-oauth-scopes/">Assembla Permissions used by Travis CI</a></li>
        <li><a href="/user/gl-oauth-scopes/">GitLab Permissions used by Travis CI</a></li>
        <li><a href="/user/disable-job-logs/">Disable Job Logs Availability</a></li>
        <li><a href="/user/best-practices-security/">Best Practices in Securing Your Data</a></li>
        <li><a href="/user/securely-signing-software">Securely Signing Software</a></li>
        <li><a href="/user/sbom">Software Bill of Materials</a></li>
      </ul>

      <h3>Integrations and Notifications</h3>
      <ul>
        <li><a href="/user/notifications/">Configuring Notifications</a></li>
        <li><a href="/user/status-images/">Showing Build Status Images</a></li>
        <li><a href="/user/code-climate/">Code Climate</a></li>
        <li><a href="/user/deepsource/">DeepSource</a></li>
        <li><a href="/user/coveralls/">Coveralls</a></li>
        <li><a href="/user/coverity-scan/">Coverity Scan</a></li>
        <li><a href="/user/browserstack/">BrowserStack</a></li>
        <li><a href="/user/sauce-connect/">Sauce Labs</a></li>
        <li><a href="/user/sonarcloud/">SonarCloud</a></li>
        <li><a href="/user/sourceclear/">SourceClear</a></li>
        <li><a href="/user/build-feeds/">Atom Feeds</a></li>
        <li><a href="/user/cc-menu/">CCMenu / CCTray Feeds</a></li>
        <li><a href="/user/integration/platformio/">Embedded Builds with PlatformIO</a></li>
        <li><a href="/user/hashicorp-vault-integration">Hashicorp Vault</a></li>
        <li><a href="/user/apps/">3rd Party Apps, Clients and Tools</a></li>
      </ul>

      <h3>Developer Program</h3>
      <ul>
        <li class="is-overview"><a href="/user/developer/">Overview</a></li>
        <li><a href="https://developer.travis-ci.com/">API V3</a></li>
        <li><a href="/user/triggering-builds/">Triggering Builds with API V3</a></li>
        <li><a href="https://github.com/travis-ci/travis#ruby-library">The Ruby Library</a></li>
      </ul>
      
      <h3>Hosted Billing</h3>
      <ul>
        <li class="is-overview"><a href="/user/billing-overview/">Overview</a></li>
        <li><a href="/user/billing-autorefill/">Auto-refill</a></li>
        <li><a href="/user/billing-faq/">FAQ</a></li>
      </ul>

      <h3>Travis CI Enterprise</h3>
      <ul>
        <li><a href="/user/enterprise/">Enterprise Docs</a></li>
      </ul>

    </nav>
  </section>

  <section class="sidebar-notice">
    <p>This documentation site is Open Source.
      The <a href="https://github.com/travis-ci/docs-travis-ci-com">README in our Git repository</a> explains how to contribute.</p>
    <p>Travis CI relies on Open Source <a href="/user/open_source_license/">licensing information</a>.</p>
  </section>

</div><!-- /#sidebar -->


        <main id="main" class="main" data-swiftype-index='true'>
          
            <aside class="improve-page" data-swiftype-index='false'><a href="https://github.com/travis-ci/docs-travis-ci-com/edit/master/user/deployment/codedeploy.md" target="_blank" title="Edit this page on GitHub" class="button-pen" data-proofer-ignore>Improve this page on GitHub</a></aside>
            <h1 class="title">AWS CodeDeploy</h1>
          

          
            <blockquote>
              <p>
                This page documents deployments using dpl v1 which currently is the default
                version. The next major version dpl v2 will be released soon, and we recommend
                starting to use it. Please see <a href="https://blog.travis-ci.com/2019-08-27-deployment-tooling-dpl-v2-preview-release">our blog post</a>
                for details. <a href="/user/deployment-v2">dpl v2 documentation can be found here</a>.
              </p>
            </blockquote>
          


          
            <div id="toc" class="toc">
              <ul class="list-language">
  <li><a href="#branch-to-deploy-from">Branch to deploy from</a></li>
  <li><a href="#s3-deployment-or-github-deployment">S3 deployment or GitHub deployment</a></li>
  <li><a href="#waiting-for-deployments">Waiting for Deployments</a></li>
  <li><a href="#bundle-types">Bundle Types</a></li>
  <li><a href="#conditional-deployments">Conditional deployments</a></li>
  <li><a href="#note-on-gitignore">Note on <code class="highlighter-rouge">.gitignore</code></a></li>
  <li><a href="#running-commands-before-and-after-deploy">Running commands before and after deploy</a></li>
  <li><a href="#aws-region-to-deploy-to">AWS region to deploy to</a></li>
</ul>

            </div>
          

          <p>Travis CI can automatically trigger a new Deployment on <a href="http://aws.amazon.com/documentation/codedeploy/">AWS CodeDeploy</a> after a successful build.</p>

<p>For a minimal configuration with S3, add the following to your <code class="highlighter-rouge">.travis.yml</code>:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">deploy</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">provider</span><span class="pi">:</span> <span class="s">s3</span>
    <span class="c1"># rest of S3 deployment for MyApp.zip</span>
    <span class="c1"># ⋮</span>
  <span class="pi">-</span> <span class="na">provider</span><span class="pi">:</span> <span class="s">codedeploy</span>
    <span class="na">access_key_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">YOUR</span><span class="nv"> </span><span class="s">AWS</span><span class="nv"> </span><span class="s">ACCESS</span><span class="nv"> </span><span class="s">KEY"</span>
    <span class="na">secret_access_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">YOUR</span><span class="nv"> </span><span class="s">AWS</span><span class="nv"> </span><span class="s">SECRET</span><span class="nv"> </span><span class="s">KEY"</span>
    <span class="na">bucket</span><span class="pi">:</span> <span class="s2">"</span><span class="s">S3</span><span class="nv"> </span><span class="s">Bucket"</span>
    <span class="na">key</span><span class="pi">:</span> <span class="s">latest/MyApp.zip</span>
    <span class="na">application</span><span class="pi">:</span> <span class="s">MyApp</span>
    <span class="na">deployment_group</span><span class="pi">:</span> <span class="s">MyDeploymentGroup</span>
</code></pre></div></div>

<p>Note that in this example, Travis CI will attempt to deploy to an existing CodeDeploy Application called MyApp in AWS Region <code class="highlighter-rouge">us-east-1</code>.</p>

<p>A complete example can be found <a href="https://github.com/travis-ci/cat-party/blob/master/.travis.yml">here</a>.</p>

<p>You can find your AWS Access Keys <a href="https://console.aws.amazon.com/iam/home?#security_credential">here</a>. It is recommended to encrypt that key.</p>

<p>If your CodeDeploy application lives in any region other than <code class="highlighter-rouge">us-east-1</code> please add a region field to <code class="highlighter-rouge">.travis.yml</code> (see <a href="/user/deployment/codedeploy#aws-region-to-deploy-to">AWS-region-to-deploy-to</a>).</p>

<p>Assuming you have the Travis CI command line client installed, you can do it like this:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>travis encrypt <span class="nt">--add</span> deploy.secret_access_key
</code></pre></div></div>

<p>You will be prompted to enter your api key on the command line.</p>

<p>You can also have the <code class="highlighter-rouge">travis</code> tool set up everything for you:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>travis setup codedeploy
</code></pre></div></div>

<p>Keep in mind that the above command has to run in your project directory, so it can modify the <code class="highlighter-rouge">.travis.yml</code> for you.</p>

<p>This command will also offer to set up <a href="/user/deployment/s3/">S3 deployment</a>, if you want to bundle to be uploaded from the Travis CI build.</p>

<h2 id="branch-to-deploy-from">Branch to deploy from <a href="#branch-to-deploy-from" class="toc-anchor">#</a></h2>

<p>You can explicitly specify the branch to deploy from with the <strong>on</strong> option:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">deploy</span><span class="pi">:</span>
  <span class="na">provider</span><span class="pi">:</span> <span class="s">codedeploy</span>
  <span class="na">access_key_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">YOUR</span><span class="nv"> </span><span class="s">AWS</span><span class="nv"> </span><span class="s">ACCESS</span><span class="nv"> </span><span class="s">KEY"</span>
  <span class="na">secret_access_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">YOUR</span><span class="nv"> </span><span class="s">AWS</span><span class="nv"> </span><span class="s">SECRET</span><span class="nv"> </span><span class="s">KEY"</span>
  <span class="na">bucket</span><span class="pi">:</span> <span class="s2">"</span><span class="s">S3</span><span class="nv"> </span><span class="s">Bucket"</span>
  <span class="na">key</span><span class="pi">:</span> <span class="s">latest/MyApp.zip</span>
  <span class="na">bundle_type</span><span class="pi">:</span> <span class="s">zip</span>
  <span class="na">application</span><span class="pi">:</span> <span class="s">MyApp</span>
  <span class="na">deployment_group</span><span class="pi">:</span> <span class="s">MyDeploymentGroup</span>
  <span class="na">on</span><span class="pi">:</span>
    <span class="na">branch</span><span class="pi">:</span> <span class="s">production</span>
</code></pre></div></div>

<p>Alternatively, you can also configure Travis CI to deploy from all branches:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">deploy</span><span class="pi">:</span>
  <span class="na">provider</span><span class="pi">:</span> <span class="s">codedeploy</span>
  <span class="na">access_key_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">YOUR</span><span class="nv"> </span><span class="s">AWS</span><span class="nv"> </span><span class="s">ACCESS</span><span class="nv"> </span><span class="s">KEY"</span>
  <span class="na">secret_access_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">YOUR</span><span class="nv"> </span><span class="s">AWS</span><span class="nv"> </span><span class="s">SECRET</span><span class="nv"> </span><span class="s">KEY"</span>
  <span class="na">bucket</span><span class="pi">:</span> <span class="s2">"</span><span class="s">S3</span><span class="nv"> </span><span class="s">Bucket"</span>
  <span class="na">key</span><span class="pi">:</span> <span class="s">latest/MyApp.zip</span>
  <span class="na">bundle_type</span><span class="pi">:</span> <span class="s">zip</span>
  <span class="na">application</span><span class="pi">:</span> <span class="s">MyApp</span>
  <span class="na">deployment_group</span><span class="pi">:</span> <span class="s">MyDeploymentGroup</span>
  <span class="na">on</span><span class="pi">:</span>
    <span class="na">all_branches</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<p>Builds triggered from Pull Requests will never trigger a release.</p>

<h2 id="s3-deployment-or-github-deployment">S3 deployment or GitHub deployment <a href="#s3-deployment-or-github-deployment" class="toc-anchor">#</a></h2>

<p>For a minimal configuration with GitHub, add the following to your <code class="highlighter-rouge">.travis.yml</code>:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">deploy</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">provider</span><span class="pi">:</span> <span class="s">codedeploy</span>
    <span class="na">revision_type</span><span class="pi">:</span> <span class="s">github</span>
    <span class="na">access_key_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">YOUR</span><span class="nv"> </span><span class="s">AWS</span><span class="nv"> </span><span class="s">ACCESS</span><span class="nv"> </span><span class="s">KEY"</span>
    <span class="na">secret_access_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">YOUR</span><span class="nv"> </span><span class="s">AWS</span><span class="nv"> </span><span class="s">SECRET</span><span class="nv"> </span><span class="s">KEY"</span>
    <span class="na">application</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Your</span><span class="nv"> </span><span class="s">Codedeploy</span><span class="nv"> </span><span class="s">application"</span>
    <span class="na">deployment_group</span><span class="pi">:</span> <span class="s2">"</span><span class="s">The</span><span class="nv"> </span><span class="s">Deployment</span><span class="nv"> </span><span class="s">group</span><span class="nv"> </span><span class="s">associated</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">codedeploy</span><span class="nv"> </span><span class="s">application"</span>
    <span class="na">region</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Region</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">your</span><span class="nv"> </span><span class="s">ec2</span><span class="nv"> </span><span class="s">instance</span><span class="nv"> </span><span class="s">is."</span>
</code></pre></div></div>

<p>Please note that <code class="highlighter-rouge">region</code> should match the instance region on which codedeploy is configured.</p>

<p>Also note that GitHub deployments target a specific commit, and any unversioned files will not be deployed. If you need to add unversioned files to your deployment, use an S3 deployment instead.</p>

<h2 id="waiting-for-deployments">Waiting for Deployments <a href="#waiting-for-deployments" class="toc-anchor">#</a></h2>

<p>By default, the build will continue immediately after triggering a CodeDeploy deploy. To wait for the deploy to complete, use the <strong>wait_until_deployed</strong> option:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">deploy</span><span class="pi">:</span>
  <span class="na">provider</span><span class="pi">:</span> <span class="s">codedeploy</span>
  <span class="na">wait_until_deployed</span><span class="pi">:</span> <span class="no">true</span>
  <span class="c1"># ⋮</span>
</code></pre></div></div>

<p>Travis CI will wait for the deploy to complete, and log whether it succeeded.</p>

<h2 id="bundle-types">Bundle Types <a href="#bundle-types" class="toc-anchor">#</a></h2>

<p>The <a href="http://docs.aws.amazon.com/codedeploy/latest/APIReference/API_S3Location.html#CodeDeploy-Type-S3Location-bundleType">bundleType</a> of your application is inferred from the file extension of <code class="highlighter-rouge">key</code> or <code class="highlighter-rouge">s3_key</code> set in your <code class="highlighter-rouge">.travis.yml</code>.</p>

<p>If your <code class="highlighter-rouge">.travis.yml</code> contains both, and they do not match, set <code class="highlighter-rouge">bundle_type</code> explicitly to the correct value.</p>

<h2 id="conditional-deployments">Conditional deployments <a href="#conditional-deployments" class="toc-anchor">#</a></h2>

<p>You can deploy only when certain conditions are met.
See <a href="/user/deployment#conditional-releases-with-on">Conditional Releases with <code class="highlighter-rouge">on:</code></a>.</p>

<h2 id="note-on-gitignore">Note on <code class="highlighter-rouge">.gitignore</code> <a href="#note-on-gitignore" class="toc-anchor">#</a></h2>

<p>As this deployment strategy relies on <code class="highlighter-rouge">git</code>, be mindful that the deployment will
honor <code class="highlighter-rouge">.gitignore</code>.</p>

<p>If your <code class="highlighter-rouge">.gitignore</code> file matches something that your build creates, use
<a href="#running-commands-before-and-after-deploy"><code class="highlighter-rouge">before_deploy</code></a> to change
its content.</p>

<h2 id="running-commands-before-and-after-deploy">Running commands before and after deploy <a href="#running-commands-before-and-after-deploy" class="toc-anchor">#</a></h2>

<p>Sometimes you want to run commands before or after deploying. You can use the <code class="highlighter-rouge">before_deploy</code> and <code class="highlighter-rouge">after_deploy</code> stages for this. These will only be triggered if Travis CI is actually deploying.</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">before_deploy</span><span class="pi">:</span> <span class="s2">"</span><span class="s">echo</span><span class="nv"> </span><span class="s">'ready?'"</span>
<span class="na">deploy</span><span class="pi">:</span>
  <span class="c1"># ⋮</span>
<span class="na">after_deploy</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">./after_deploy_1.sh</span>
  <span class="pi">-</span> <span class="s">./after_deploy_2.sh</span>
</code></pre></div></div>

<h2 id="aws-region-to-deploy-to">AWS region to deploy to <a href="#aws-region-to-deploy-to" class="toc-anchor">#</a></h2>

<p>You can explicitly specify the AWS region to deploy to with the <strong>region</strong> option:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">deploy</span><span class="pi">:</span>
  <span class="na">provider</span><span class="pi">:</span> <span class="s">codedeploy</span>
  <span class="na">access_key_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">YOUR</span><span class="nv"> </span><span class="s">AWS</span><span class="nv"> </span><span class="s">ACCESS</span><span class="nv"> </span><span class="s">KEY"</span>
  <span class="na">secret_access_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">YOUR</span><span class="nv"> </span><span class="s">AWS</span><span class="nv"> </span><span class="s">SECRET</span><span class="nv"> </span><span class="s">KEY"</span>
  <span class="na">bucket</span><span class="pi">:</span> <span class="s2">"</span><span class="s">S3</span><span class="nv"> </span><span class="s">Bucket"</span>
  <span class="na">key</span><span class="pi">:</span> <span class="s">latest/MyApp.zip</span>
  <span class="na">bundle_type</span><span class="pi">:</span> <span class="s">zip</span>
  <span class="na">application</span><span class="pi">:</span> <span class="s">MyApp</span>
  <span class="na">deployment_group</span><span class="pi">:</span> <span class="s">MyDeploymentGroup</span>
  <span class="na">region</span><span class="pi">:</span> <span class="s">us-west-1</span>
</code></pre></div></div>


        </main>
      </div><!-- /#content -->

      <footer class="footer">
  <div class="layout-inner">
    <div class="footer-elem">
      <svg width="142px" height="45.381px" viewBox="0 0 142 45.381" enable-background="new 0 0 142 45.381" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink= "http://www.w3.org/1999/xlink">
        <title>Travis CI Mascot</title>
        <image xlink:href="https://styleguide.travis-ci.com/images/logos/travis-footer-logo-new.svg" x="0" y="0" width="142px" height="45.381px" />
      </svg>
    </div>

    <div class="footer-elem"></div>

    <div class="footer-elem">
      <h3 class="footer-title">©Travis CI, GmbH</h3>
      <address>Rigaer Straße 8<br>10247 Berlin, Germany</address>
      <ul>
        <li><a href="https://travisci.workable.com/" title="Jobs at Travis CI">Work with Travis CI</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Help</h3>
      <ul>
        <li><a href="https://docs.travis-ci.com" title="Travis CI Docs">Documentation</a></li>
        <li><a href="https://changelog.travis-ci.com/">Changelog</a></li>
        <li><a href="https://blog.travis-ci.com/" title="Travis CI Blog">Blog</a></li>
        <li><a href="mailto:support@travis-ci.com" title="Email Travis CI support">Email</a></li>
        <li><a href="https://twitter.com/travisci" title="Travis CI on Twitter">Twitter</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Company</h3>
      <ul>
        <li><a href="/imprint.html" title="Imprint">Imprint</a></li>
        <li><a href="https://ideracorp.com/legal/TravisCI">Legal</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Travis CI Status</h3>
      <ul>
        <li><div class="status-circle none">Status:</div>
          <a href="http://www.traviscistatus.com/">Travis CI Status</a>
        </li>
      </ul>
    </div>
  </div>
</footer>

<script>
 fetch('https://pnpcptp8xh9k.statuspage.io/api/v2/status.json').then(function(response) {
   return response.json();
 }).then(function(data) {
   if (data.status && data.status.indicator) {
     document.querySelector('.status-circle').classList.add(data.status.indicator);
   }
 });
</script>

    </div><!-- /.wrapper -->
  </body>
</html>
 contentType 9 text/html url 58 https://docs.travis-ci.com:443/user/deployment/codedeploy/ responseCode 3 200 