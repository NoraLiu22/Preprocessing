rekemkbsgaocvsxmomcegeckycsamsloqcgitcte length 4 8922 page 8922 
<html>
<head>
<title>r86805 MediaWiki - Code Review archive</title>
<meta charset="utf-8">
<link rel="stylesheet" href="../ext.codereview.styles.css"/>
</head>
<body>
<h1>r86805 MediaWiki - Code Review archive</h1>
<div id="mw-content-text" class="mw-body-content"><form action="/wiki/Special:Code/MediaWiki/86805" method="post"><table class="mw-codereview-meta"><tr><td>Repository:</td><td><a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki" title="Special:Code/MediaWiki">MediaWiki</a></td></tr>
<tr><td>Revision:</td><td>&lt;&#160;<a href="./86804.html" title="Special:Code/MediaWiki/86804">r86804</a>‎ | <b>r86805</b> | <a href="./86806.html" title="Special:Code/MediaWiki/86806">r86806</a>&#160;&gt;</td></tr>
<tr><td>Date:</td><td>01:10, 24 April 2011</td></tr>
<tr><td>Author:</td><td><a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/author/kaldari" title="Special:Code/MediaWiki/author/kaldari">kaldari</a></td></tr>
<tr><td>Status:</td><td>ok</td></tr>
<tr><td>Tags:</td><td></td></tr>
<tr><td>Comment:</td><td><div class="mw-codereview-message">fix for <a class="external" href="https://bugzilla.wikimedia.org/show_bug.cgi?id=28655">bug 28655</a> - #time interpreting years incorrectly</div></td></tr>
<tr><td>Modified paths:</td><td><div class='mw-codereview-paths mw-content-ltr'><ul>
<li><b>/trunk/extensions/ParserFunctions/ParserFunctions_body.php</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fextensions%2FParserFunctions%2FParserFunctions_body.php" title="Special:Code/MediaWiki">history</a>)</li>
</ul></div>
</td></tr>
</table>
<h2>Diff <small>[<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki/86805&amp;action=purge" title="Special:Code/MediaWiki/86805">purge</a>]</small></h2><div class='mw-codereview-diff' id='mw-codereview-diff'><table class="mw-codereview-diff"><tr id="1" class="patchedfile"><td colspan="3">Index: trunk/extensions/ParserFunctions/ParserFunctions_body.php</td></tr>



<tr id="5"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -449,6 +449,11 @@</span></td></tr>
<tr id="6"><td class="linenumbers">450</td><td class="linenumbers">450</td><td class="unchanged"><span> 					# if local time was not requested, convert to UTC</span></td></tr>
<tr id="7"><td class="linenumbers">451</td><td class="linenumbers">451</td><td class="unchanged"><span> 					$tz = new DateTimeZone( 'UTC' );</span></td></tr>
<tr id="8"><td class="linenumbers">452</td><td class="linenumbers">452</td><td class="unchanged"><span> 				}</span></td></tr>
<tr id="9"><td class="linenumbers"> </td><td class="linenumbers">453</td><td class="ins"><ins>+				</ins></td></tr>
<tr id="10"><td class="linenumbers"> </td><td class="linenumbers">454</td><td class="ins"><ins>+				# Correct for DateTime interpreting 'XXXX' as XX:XX o'clock</ins></td></tr>
<tr id="11"><td class="linenumbers"> </td><td class="linenumbers">455</td><td class="ins"><ins>+				if ( preg_match( '/^[0-9]{4}$/', $date ) ) {</ins></td></tr>
<tr id="12"><td class="linenumbers"> </td><td class="linenumbers">456</td><td class="ins"><ins>+					$date = '00:00 '.$date;</ins></td></tr>
<tr id="13"><td class="linenumbers"> </td><td class="linenumbers">457</td><td class="ins"><ins>+				}</ins></td></tr>
<tr id="14"><td class="linenumbers">453</td><td class="linenumbers">458</td><td class="unchanged"><span> </span></td></tr>
<tr id="15"><td class="linenumbers">454</td><td class="linenumbers">459</td><td class="unchanged"><span> 				# Parse date</span></td></tr>
<tr id="16"><td class="linenumbers">455</td><td class="linenumbers">460</td><td class="unchanged"><span> 				if ( $date !== '' ) {</span></td></tr>
</table>
</div>
<h2 id='code-references'>Follow-up revisions</h2>
<table border='1' class='wikitable'><tr><th>Revision</th><th>Commit summary</th><th>Author</th><th>Date</th></tr><tr class='mw-codereview-status-resolved'><td><a href="./86927.html" title="Special:Code/MediaWiki/86927">r86927</a></td><td>adding language support to #time parser function, per <a class="external" href="https://bugzilla.wikimedia.org/show_bug.cgi?id=28655">bug 28655</a></td><td><a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/author/kaldari" title="Special:Code/MediaWiki/author/kaldari">kaldari</a></td><td>00:26, 26 April 2011</td></tr>
<tr class='mw-codereview-status-ok'><td><a href="./87170.html" title="Special:Code/MediaWiki/87170">r87170</a></td><td>1.17: MFT <a href="./85546.html" title="Special:Code/MediaWiki/85546">r85546</a>, <a href="./86450.html" title="Special:Code/MediaWiki/86450">r86450</a>, <a href="./86625.html" title="Special:Code/MediaWiki/86625">r86625</a>, <a href="./86805.html" title="Special:Code/MediaWiki/86805">r86805</a>, <a href="./86841.html" title="Special:Code/MediaWiki/86841">r86841</a>, <a href="./86904.html" title="Special:Code/MediaWiki/86904">r86904</a>, <a href="./86973.html" title="Special:Code/MediaWiki/86973">r86973</a>, <a href="./87030.html" title="Special:Code/MediaWiki/87030">r87030</a></td><td><a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/author/catrope" title="Special:Code/MediaWiki/author/catrope">catrope</a></td><td>16:57, 30 April 2011</td></tr>
<tr class='mw-codereview-status-resolved'><td><a href="./87353.html" title="Special:Code/MediaWiki/87353">r87353</a></td><td>1.17wmf1: MFT <a href="./85546.html" title="Special:Code/MediaWiki/85546">r85546</a>, <a href="./86409.html" title="Special:Code/MediaWiki/86409">r86409</a>, <a href="./86450.html" title="Special:Code/MediaWiki/86450">r86450</a>, <a href="./86625.html" title="Special:Code/MediaWiki/86625">r86625</a>, <a href="./86788.html" title="Special:Code/MediaWiki/86788">r86788</a>, <a href="./86805.html" title="Special:Code/MediaWiki/86805">r86805</a>, <a href="./86841.html" title="Special:Code/MediaWiki/86841">r86841</a>, <a href="./86904.html" title="Special:Code/MediaWiki/86904">r86904</a>,...</td><td><a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/author/catrope" title="Special:Code/MediaWiki/author/catrope">catrope</a></td><td>20:27, 3 May 2011</td></tr>
<tr class='mw-codereview-status-ok'><td><a href="./106987.html" title="Special:Code/MediaWiki/106987">r106987</a></td><td>Add test and output for {{#time:d F Y|1988-02-28|nl}}. This test should pass....</td><td><a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/author/siebrand" title="Special:Code/MediaWiki/author/siebrand">siebrand</a></td><td>21:59, 21 December 2011</td></tr></table><h2 id='code-changes'>Status &amp; tagging log</h2>
<ul class='mw-codereview-changes'><li>20:33, 3 May 2011&#160;<a href="https://www.mediawiki.org/wiki/User:Catrope" class="mw-userlink" title="User:Catrope"><bdi>Catrope</bdi></a> <span class="mw-usertoollinks">(<a href="https://www.mediawiki.org/wiki/User_talk:Catrope" class="mw-usertoollinks-talk" title="User talk:Catrope">talk</a> | <a href="https://www.mediawiki.org/wiki/Special:Contributions/Catrope" class="mw-usertoollinks-contribs" title="Special:Contributions/Catrope">contribs</a>)</span>&#160;changed the <b>tags</b> for r86805 <i>[<b>removed:</b> 1.17wmf1]</i></li>
<li>16:57, 30 April 2011&#160;<a href="https://www.mediawiki.org/wiki/User:Catrope" class="mw-userlink" title="User:Catrope"><bdi>Catrope</bdi></a> <span class="mw-usertoollinks">(<a href="https://www.mediawiki.org/wiki/User_talk:Catrope" class="mw-usertoollinks-talk" title="User talk:Catrope">talk</a> | <a href="https://www.mediawiki.org/wiki/Special:Contributions/Catrope" class="mw-usertoollinks-contribs" title="Special:Contributions/Catrope">contribs</a>)</span>&#160;changed the <b>tags</b> for r86805 <i>[<b>removed:</b> 1.17]</i></li>
<li>16:38, 30 April 2011&#160;<a href="https://www.mediawiki.org/wiki/User:Catrope" class="mw-userlink" title="User:Catrope"><bdi>Catrope</bdi></a> <span class="mw-usertoollinks">(<a href="https://www.mediawiki.org/wiki/User_talk:Catrope" class="mw-usertoollinks-talk" title="User talk:Catrope">talk</a> | <a href="https://www.mediawiki.org/wiki/Special:Contributions/Catrope" class="mw-usertoollinks-contribs" title="Special:Contributions/Catrope">contribs</a>)</span>&#160;changed the <b>status</b> of r86805 <i>[<b>removed:</b> new&#160;<b>added:</b> ok]</i></li>
<li>01:12, 24 April 2011&#160;<a href="https://www.mediawiki.org/wiki/User:Kaldari" class="mw-userlink" title="User:Kaldari"><bdi>Kaldari</bdi></a> <span class="mw-usertoollinks">(<a href="https://www.mediawiki.org/wiki/User_talk:Kaldari" class="mw-usertoollinks-talk" title="User talk:Kaldari">talk</a> | <a href="https://www.mediawiki.org/wiki/Special:Contributions/Kaldari" class="mw-usertoollinks-contribs" title="Special:Contributions/Kaldari">contribs</a>)</span>&#160;changed the <b>tags</b> for r86805 <i>[<b>added:</b> 1.17,1.17wmf1]</i></li></ul></form></div>
</body>
</html>
 contentType 9 text/html url 64 https://static-codereview.wikimedia.org:443/MediaWiki/86805.html responseCode 3 200 