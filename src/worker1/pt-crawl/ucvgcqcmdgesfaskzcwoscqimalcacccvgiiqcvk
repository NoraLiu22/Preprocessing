ucvgcqcmdgesfaskzcwoscqimalcacccvgiiqcvk length 5 46712 page 46712 <!DOCTYPE HTML>
<html lang="en">
  <head>
<!-- PDTQ-131 -->
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N3RT7TD');</script>
<!-- End Google Tag Manager -->
    
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Private Dependencies GitHub - Travis CI</title>
<link rel="stylesheet" href="/assets/stylesheets/main.css">
<link rel="alternate" type="application/rss+xml" title="Travis CI Build Environment Updates" href="https://docs.travis-ci.com/feed.build-env-updates.xml">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" defer></script>

<script src="/assets/javascripts/main.js" type="text/javascript" charset="utf-8" defer></script>
<script src="/assets/javascripts/prism.js" type="text/javascript" charset="utf-8" defer></script>
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@travisci" />
<meta name="twitter:creator" content="@travisci" />
<meta property="og:title" content="Travis CI Documentation" />
<meta property="og:type" content="website" />
<meta property="og:url" content=/user/private-dependencies/ />
<meta property="og:description" content="Private Dependencies GitHub" />
<meta property="og:image" content="/images/TravisCI-Full-Color.png" }} />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="642" />
<meta property="og:image:height" content="201" />
<meta property="og:image:alt" content="Travis CI logo" />


 

  </head>
  <body>
<!-- PDTQ-131 -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N3RT7TD"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <div class="wrapper">

      <header class="top">
  <div class="row topbar">
    <h1 id="logo" class="logo">
  <a href="https://travis-ci.com/" title="Travis CI">Travis</a>
</h1>

    <nav>
      <ul id="navigation" class="navigation">
        <li><a href="https://blog.travis-ci.com">Blog</a></li>
        <li><a href="/">Docs</a></li>
        <li class="toggle"><button type="button" id="toggle-menu" class="button--teal">Menu</button></li>
      </ul>
    </nav>
  </div>
</header>


      <div id="content" class="row">

        <div id="sidebar" class="sidebar">
  <div>
    <!-- <h2>Search</h2> -->
    <div class="searchbox">
      <form>
        <input type="text" id="st-search-input" class="searchbox-input" placeholder="Search the docs" />
      </form>
      <script type="text/javascript">
      var Swiftype = window.Swiftype || {};
        (function() {
          Swiftype.key = 'tXvDDzd4fNTBnLvxfEyx';

          Swiftype.searchSearchFields = {
            "page": ["title, body, tags"]
          };
          Swiftype.autocompleteSearchFields = {
            "page": ["title, body, tags"]
          };
          /** DO NOT EDIT BELOW THIS LINE **/
          var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
          script.src = "//swiftype.com/embed.js";
          var entry = document.getElementsByTagName('script')[0];
          document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
        }());
      </script>
    </div>
  </div>

  <section class="sidebar-navigation">
    <nav>
      <h3>Getting Started</h3>
      <ul>
        <li><a href="/user/for-beginners/">Core Concepts for Beginners</a></li>
        <li><a href="/user/tutorial/">Travis CI Tutorial</a></li>
        <li><a href="/user/customizing-the-build/">Customizing the Build</a></li>
        <li><a href="/user/speeding-up-the-build/">Speeding up the Build</a></li>
        <li><a href="/user/docker/">Using Docker in your Build</a></li>
        <li><a href="/user/gui-and-headless-browsers/">Headless Testing with Browsers</a></li>
        <li><a href="/user/pull-requests/">Building Pull Requests</a></li>
        <li><a href="/user/cron-jobs/">Cron Jobs</a></li>
        <li><a href="/user/common-build-problems/">Common Build Problems</a></li>
        <li><a href="https://github.com/travis-ci/travis#readme">Command Line Client</a></li>
        <li><a href="/user/build-config-imports/">Build Config Imports</a></li>
        <li><a href="/user/build-config-validation/">Build Config Validation</a></li>
      </ul>

      <h3>Jobs, Builds, Matrices and Stages</h3>
      <ul>
        <li><a href="/user/job-lifecycle/">Job Lifecycle</a></li>
        <li><a href="/user/build-matrix/">Build Matrix</a></li>
        <li><a href="/user/build-stages/">Build Stages</a></li>
        <li><a href="/user/conditional-builds-stages-jobs/">Conditional Builds, Stages, and Jobs</a></li>
      </ul>

      <h3>Installing Dependencies</h3>
      <ul>
        <li><a href="/user/installing-dependencies/">Installing Dependencies</a></li>
        <li><a href="/user/private-dependencies/">Private Dependencies GitHub</a></li>
        <li><a href="/user/private-dependencies-bb/">Private Dependencies Bitbucket</a></li>
        <li><a href="/user/database-setup/">Setting up Services and Databases</a></li>
        <li><a href="/user/caching/">Caching Dependencies</a></li>
        <li><a href="/user/using-workspaces/">Caching Dependencies within a Build (Workspaces)</a></li>
        <li><a href="/user/ssh-known-hosts/">Adding to SSH Known Hosts</a></li>
      </ul>

      <h3>Programming Languages</h3>
      <ul>
      
        <li><a href="/user/languages/android/">Android</a></li>
      
        <li><a href="/user/languages/c/">C</a></li>
      
        <li><a href="/user/languages/csharp/">C#</a></li>
      
        <li><a href="/user/languages/cpp/">C++</a></li>
      
        <li><a href="/user/languages/clojure/">Clojure</a></li>
      
        <li><a href="/user/languages/crystal/">Crystal</a></li>
      
        <li><a href="/user/languages/d/">D</a></li>
      
        <li><a href="/user/languages/dart/">Dart</a></li>
      
        <li><a href="/user/languages/elixir/">Elixir</a></li>
      
        <li><a href="/user/languages/elm/">Elm</a></li>
      
        <li><a href="/user/languages/erlang/">Erlang</a></li>
      
        <li><a href="/user/languages/csharp/">F#</a></li>
      
        <li><a href="/user/languages/minimal-and-generic/">Generic</a></li>
      
        <li><a href="/user/languages/go/">Go</a></li>
      
        <li><a href="/user/languages/groovy/">Groovy</a></li>
      
        <li><a href="/user/languages/haskell/">Haskell</a></li>
      
        <li><a href="/user/languages/haxe/">Haxe</a></li>
      
        <li><a href="/user/languages/java/">Java</a></li>
      
        <li><a href="/user/languages/javascript-with-nodejs/">JavaScript <small>(with Node.js)</small></a></li>
      
        <li><a href="/user/languages/julia/">Julia</a></li>
      
        <li><a href="/user/languages/matlab/">MATLAB</a></li>
      
        <li><a href="/user/languages/minimal-and-generic/">Minimal</a></li>
      
        <li><a href="/user/languages/nix/">Nix</a></li>
      
        <li><a href="/user/languages/objective-c/">Objective-C</a></li>
      
        <li><a href="/user/languages/perl/">Perl</a></li>
      
        <li><a href="/user/languages/perl6/">Perl6</a></li>
      
        <li><a href="/user/languages/php/">PHP</a></li>
      
        <li><a href="/user/languages/python/">Python</a></li>
      
        <li><a href="/user/languages/r/">R</a></li>
      
        <li><a href="/user/languages/ruby/">Ruby</a></li>
      
        <li><a href="/user/languages/rust/">Rust</a></li>
      
        <li><a href="/user/languages/scala/">Scala</a></li>
      
        <li><a href="/user/languages/smalltalk/">Smalltalk</a></li>
      
        <li><a href="/user/languages/objective-c/">Swift</a></li>
      
        <li><a href="/user/languages/csharp/">Visual Basic</a></li>
      
        <li><a href="/user/languages/community-supported-languages/">Adding a language</a></li>
      </ul>

      <h3>Deployments and Uploads</h3>
      <ul>
        
          <li class="is-overview"><a href="/user/deployment/">Overview</a></li>
          
        
        
          <li><a href="/user/deployment/anynines/">anynines</a></li>
        
          <li><a href="/user/deployment/atlas/">Atlas</a></li>
        
          <li><a href="/user/deployment/codedeploy/">AWS CodeDeploy</a></li>
        
          <li><a href="/user/deployment/elasticbeanstalk/">AWS Elastic Beanstalk</a></li>
        
          <li><a href="/user/deployment/lambda/">AWS Lambda</a></li>
        
          <li><a href="/user/deployment/opsworks/">AWS OpsWorks</a></li>
        
          <li><a href="/user/deployment/s3/">AWS S3</a></li>
        
          <li><a href="/user/deployment/azure-web-apps/">Azure Web Apps</a></li>
        
          <li><a href="/user/deployment/bintray/">bintray</a></li>
        
          <li><a href="/user/deployment/bitballoon/">BitBalloon</a></li>
        
          <li><a href="/user/deployment/bluemixcloudfoundry/">Bluemix CloudFoundry</a></li>
        
          <li><a href="/user/deployment/boxfuse/">Boxfuse</a></li>
        
          <li><a href="/user/deployment/catalyze/">Catalyze</a></li>
        
          <li><a href="/user/deployment/chefsupermarket/">Chef Supermarket</a></li>
        
          <li><a href="/user/deployment/cloud66/">Cloud 66</a></li>
        
          <li><a href="/user/deployment/cloudfoundry/">CloudFoundry</a></li>
        
          <li><a href="/user/deployment/cargo/">Cargo</a></li>
        
          <li><a href="/user/deployment/engineyard/">Engine Yard</a></li>
        
          <li><a href="/user/deployment/pages/">GitHub Pages</a></li>
        
          <li><a href="/user/deployment/releases/">GitHub Releases</a></li>
        
          <li><a href="/user/deployment/google-app-engine/">Google App Engine</a></li>
        
          <li><a href="/user/deployment/gcs/">Google Cloud Storage</a></li>
        
          <li><a href="/user/deployment/firebase/">Google Firebase</a></li>
        
          <li><a href="/user/deployment/hackage/">Hackage</a></li>
        
          <li><a href="/user/deployment/hephy/">Hephy</a></li>
        
          <li><a href="/user/deployment/heroku/">Heroku</a></li>
        
          <li><a href="/user/deployment/launchpad/">Launchpad</a></li>
        
          <li><a href="/user/deployment/npm/">npm</a></li>
        
          <li><a href="/user/deployment/openshift/">OpenShift</a></li>
        
          <li><a href="/user/deployment/packagecloud/">packagecloud.io</a></li>
        
          <li><a href="/user/deployment/puppetforge/">Puppet Forge</a></li>
        
          <li><a href="/user/deployment/pypi/">PyPI</a></li>
        
          <li><a href="/user/deployment/cloudfiles/">Rackspace Cloud Files</a></li>
        
          <li><a href="/user/deployment/rubygems/">RubyGems</a></li>
        
          <li><a href="/user/deployment/scalingo/">Scalingo</a></li>
        
          <li><a href="/user/deployment/script/">Script</a></li>
        
          <li><a href="/user/deployment/snaps/">Snap Store</a></li>
        
          <li><a href="/user/deployment/surge/">Surge.sh</a></li>
        
          <li><a href="/user/deployment/testfairy/">TestFairy</a></li>
        
          <li><a href="/user/deployment/transifex/">Transifex</a></li>
        
        <li><a href="/user/uploading-artifacts/">Uploading Build Artifacts</a></li>
      </ul>

      <h3>CI Environment Reference</h3>
      <ul>
        <li class="is-overview"><a href="/user/reference/overview/">Overview</a></li>
        <li><a href="/user/reference/linux/">Ubuntu Linux CI Environment References</a></li>
        <li><a href="/user/reference/osx/">macOS CI Environment Reference</a></li>
        <li><a href="/user/reference/windows/">Windows CI Environment Reference</a></li>
        <li><a href="/user/reference/freebsd/">FreeBSD CI Environment Reference</a></li>
        <li><a href="/user/multi-os/">Building on Multiple Operating Systems</a></li>
        <li><a href="/user/multi-cpu-architectures/">Building on Multiple CPU Architectures</a></li>
        <li><a href="/user/environment-variables/">Environment Variables</a></li>
        <li><a href="/user/build-environment-updates/">Build Environment Updates</a></li>
        <li><a href="/user/ip-addresses/">Build Machines IP Addresses</a></li>
      </ul>

      <h3>Security and Secure Software Supply Chain</h3>
      <ul>
        <li><a href="/user/encryption-keys/">Encrypting Sensitive Data</a></li>
        <li><a href="/user/encrypting-files/">Encrypting Files</a></li>
        <li><a href="/user/github-oauth-scopes/">GitHub Permissions used by Travis CI</a></li>
        <li><a href="/user/bb-oauth-scopes/">Bitbucket Permissions used by Travis CI</a></li>
        <li><a href="/user/assembla-oauth-scopes/">Assembla Permissions used by Travis CI</a></li>
        <li><a href="/user/gl-oauth-scopes/">GitLab Permissions used by Travis CI</a></li>
        <li><a href="/user/disable-job-logs/">Disable Job Logs Availability</a></li>
        <li><a href="/user/best-practices-security/">Best Practices in Securing Your Data</a></li>
        <li><a href="/user/securely-signing-software">Securely Signing Software</a></li>
        <li><a href="/user/sbom">Software Bill of Materials</a></li>
      </ul>

      <h3>Integrations and Notifications</h3>
      <ul>
        <li><a href="/user/notifications/">Configuring Notifications</a></li>
        <li><a href="/user/status-images/">Showing Build Status Images</a></li>
        <li><a href="/user/code-climate/">Code Climate</a></li>
        <li><a href="/user/deepsource/">DeepSource</a></li>
        <li><a href="/user/coveralls/">Coveralls</a></li>
        <li><a href="/user/coverity-scan/">Coverity Scan</a></li>
        <li><a href="/user/browserstack/">BrowserStack</a></li>
        <li><a href="/user/sauce-connect/">Sauce Labs</a></li>
        <li><a href="/user/sonarcloud/">SonarCloud</a></li>
        <li><a href="/user/sourceclear/">SourceClear</a></li>
        <li><a href="/user/build-feeds/">Atom Feeds</a></li>
        <li><a href="/user/cc-menu/">CCMenu / CCTray Feeds</a></li>
        <li><a href="/user/integration/platformio/">Embedded Builds with PlatformIO</a></li>
        <li><a href="/user/hashicorp-vault-integration">Hashicorp Vault</a></li>
        <li><a href="/user/apps/">3rd Party Apps, Clients and Tools</a></li>
      </ul>

      <h3>Developer Program</h3>
      <ul>
        <li class="is-overview"><a href="/user/developer/">Overview</a></li>
        <li><a href="https://developer.travis-ci.com/">API V3</a></li>
        <li><a href="/user/triggering-builds/">Triggering Builds with API V3</a></li>
        <li><a href="https://github.com/travis-ci/travis#ruby-library">The Ruby Library</a></li>
      </ul>
      
      <h3>Hosted Billing</h3>
      <ul>
        <li class="is-overview"><a href="/user/billing-overview/">Overview</a></li>
        <li><a href="/user/billing-autorefill/">Auto-refill</a></li>
        <li><a href="/user/billing-faq/">FAQ</a></li>
      </ul>

      <h3>Travis CI Enterprise</h3>
      <ul>
        <li><a href="/user/enterprise/">Enterprise Docs</a></li>
      </ul>

    </nav>
  </section>

  <section class="sidebar-notice">
    <p>This documentation site is Open Source.
      The <a href="https://github.com/travis-ci/docs-travis-ci-com">README in our Git repository</a> explains how to contribute.</p>
    <p>Travis CI relies on Open Source <a href="/user/open_source_license/">licensing information</a>.</p>
  </section>

</div><!-- /#sidebar -->


        <main id="main" class="main" data-swiftype-index='true'>
          
            <aside class="improve-page" data-swiftype-index='false'><a href="https://github.com/travis-ci/docs-travis-ci-com/edit/master/user/private-dependencies.md" target="_blank" title="Edit this page on GitHub" class="button-pen" data-proofer-ignore>Improve this page on GitHub</a></aside>
            <h1 class="title">Private Dependencies GitHub</h1>
          

          


          
            <div id="toc" class="toc">
              <ul class="list-language">
  <li><a href="#deploy-key">Deploy Key</a></li>
  <li><a href="#user-key">User Key</a></li>
  <li><a href="#password">Password</a></li>
  <li><a href="#api-token">API Token</a></li>
  <li><a href="#dedicated-user-account">Dedicated User Account</a></li>
</ul>

            </div>
          

          <p><em>Some of the features described here are currently <strong>only available for private repositories on <a href="https://travis-ci.com">travis-ci.com</a></strong>.</em></p>

<p>When testing a private repository, you might need to pull in other private
repositories as dependencies via <a href="http://git-scm.com/book/en/Git-Tools-Submodules">git
submodules</a>, a custom script,
or a dependency management tool like <a href="http://bundler.io/">Bundler</a> or
<a href="https://getcomposer.org/">Composer</a>.</p>

<p>Git submodules must be cloned early on in the build process, and so must use
either the <a href="#deploy-key">Deploy Key</a> or <a href="#user-key">User Key</a> method.</p>

<p>If the dependency is also on GitHub, there are four different ways of fetching
the repository from within a Travis CI VM. Each one has advantages and
disavantages, so read each method carefully and pick the one that applies best
to your situation.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Authentication</th>
      <th style="text-align: left">Protocol</th>
      <th style="text-align: left">Dependency URL format</th>
      <th style="text-align: left">Gives access to</th>
      <th style="text-align: left">Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong><a href="#deploy-key">Deploy Key</a></strong></td>
      <td style="text-align: left">SSH</td>
      <td style="text-align: left"><code class="highlighter-rouge">git@github.com/…</code></td>
      <td style="text-align: left">single repository</td>
      <td style="text-align: left">used by default for main repository</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong><a href="#user-key">User Key</a></strong></td>
      <td style="text-align: left">SSH</td>
      <td style="text-align: left"><code class="highlighter-rouge">git@github.com/…</code></td>
      <td style="text-align: left">all repos user has access to</td>
      <td style="text-align: left"><strong>recommended</strong> for dependencies</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong><a href="#password">Password</a></strong></td>
      <td style="text-align: left">HTTPS</td>
      <td style="text-align: left"><code class="highlighter-rouge">https://…</code></td>
      <td style="text-align: left">all repos user has access to</td>
      <td style="text-align: left">password can be encrypted</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong><a href="#api-token">API token</a></strong></td>
      <td style="text-align: left">HTTPS</td>
      <td style="text-align: left"><code class="highlighter-rouge">https://…</code></td>
      <td style="text-align: left">all repos user has access to</td>
      <td style="text-align: left">token can be encrypted</td>
    </tr>
  </tbody>
</table>

<p>You can use a <a href="#dedicated-user-account">dedicated CI user account</a> for all but
the deploy key approach. This allows you to limit access to a well defined list
of repositories, and make sure that access is read only.</p>

<h2 id="deploy-key">Deploy Key <a href="#deploy-key" class="toc-anchor">#</a></h2>

<p>GitHub allows you to set up SSH keys for a repository. These deploy keys have some great advantages:</p>

<ul>
  <li>They are not bound to a user account, so they will not get invalidated by removing users from a repository.</li>
  <li>They do not give access to other, unrelated repositories.</li>
  <li>The same key can be used for dependencies not stored on GitHub.</li>
</ul>

<p>However, using deploy keys is complicated by the fact that GitHub does not allow you to reuse keys. So a single private key cannot access multiple GitHub repositories.</p>

<p>You could include a different private key for every dependency in the repository, possibly <a href="/user/encrypting-files">encrypting them</a>. Maintaining complex dependency graphs this way can be complex and hard to maintain. For that reason, we recommend using a <a href="#user-key">user key</a> instead.</p>

<h2 id="user-key">User Key <a href="#user-key" class="toc-anchor">#</a></h2>

<p><em>Custom SSH keys are currently <strong>only available for private repositories on <a href="https://travis-ci.com">travis-ci.com</a></strong>.</em></p>

<p>You can add SSH keys to user accounts on GitHub. Most users have probably already done this to be able to clone the repositories locally.</p>

<p>This way, a single key can access multiple repositories. To limit the list of repositories and type of access, it is recommended to create a <a href="#dedicated-user-account">dedicated CI user account</a>.</p>

<h3 id="repository-settings---forks">Repository settings - forks <a href="#repository-settings---forks" class="toc-anchor">#</a></h3>

<blockquote>
  <p>Repository security settings for forked repositories on Git are available starting March 1st, 2022.</p>
</blockquote>

<p>For Git repositories, you may manage per repository how the <a href="/user/environment-variables/">environment variables</a> and the <a href="/user/private-dependencies/#user-key">custom SSH keys</a> will be handled in Travis CI when a build triggered as an effect of filing a Pull Request from a forked repository. Two settings are available specifically for this purpose, allowing you to customize your security vs. collaboration setup.</p>

<ul>
  <li><strong>base repository</strong> - a Git repository, which is forked by someone else</li>
  <li><strong>fork</strong> or <strong>forked repository</strong> - any Git repository forked from the <strong>base repository</strong></li>
  <li><strong>PR</strong> - Pull Request (e.g. in GitHub, BitBucket, GitLab) or Merge Request (in Assembla)</li>
</ul>

<blockquote>
  <p>Please note: Repositories activated in <a href="https://app.travis-ci.com">Travis CI</a> before <strong>March 1st, 2022</strong> will have the <code class="highlighter-rouge">Share encrypted environment variables with forks (PRs) </code> setting set to OFF. Please verify your collaboration model if necessary (especially for public repositories). The <code class="highlighter-rouge">Share SSH keys with forks (PRs)</code> will be set to ON for private repositories not to break too many collaboration setups.
Repository settings will be set by default to OFF for any repository activated in <a href="https://app.travis-ci.com">Travis CI</a> after <strong>March 1st, 2022</strong>. For repositories activated in Travis CI after <strong>March 1st, 2022</strong>, you may want to consider changing the default settings depending on your collaboration model.</p>
</blockquote>

<h3 id="share-ssh-keys-with-forks-prs">Share SSH keys with forks (PRs) <a href="#share-ssh-keys-with-forks-prs" class="toc-anchor">#</a></h3>

<blockquote>
  <p>Please Note: The ‘Share SSH keys with forks (PRs)’ repository setting is applicable only for private repositories in the <a href="https://app.travis-ci.com">travis-ci.com</a> environment.</p>
</blockquote>

<p>This setting determines if the custom SSH keys from the <strong>base repository</strong> will be shared with the <strong>forked repository</strong> in a fork-to-base pull request (changes are merged from the fork repository into the base repository). In the case of a base-to-base pull request (changes are merged from the base repository into itself), the custom SSH keys will always be available.</p>

<p>In the case of a fork-to-fork pull request (changes are merged from the forked repository into itself), the custom SSH keys from the base repository will never be available.</p>

<p>In the case of a fork-to-base pull request:</p>
<ul>
  <li>if this setting is ON, the custom SSH keys from the base repository will be available to the <strong>forked repository</strong>, which means that the build in the forked repository will be able to use the custom SSH keys from the base repository. Consider setting to ON if your collaboration model requires working with Pull Requests (PRs) from forked repositories or there are dependencies defined, which rely on SSH key from <strong>base repository</strong>.</li>
  <li>If this setting is OFF and the build is relying on custom SSH keys i.e. for fetching some additional dependencies, it will fail with a no access error.</li>
</ul>

<blockquote>
  <p>Please Note: In the <a href="https://app.travis-ci.com">travis-ci.com</a>, secrets may also be stored in encrypted environment variables, available for both public and private repositories. Read more about <a href="/user/environment-variables/">encrypted environment variables</a>.</p>
</blockquote>

<h3 id="using-an-existing-key">Using an existing key <a href="#using-an-existing-key" class="toc-anchor">#</a></h3>

<p><a href="/images/2019-07-settings-ssh-key.png" class="small right"> <img src="/images/2019-07-settings-ssh-key.png" alt="Adding an SSH key via the web interface." /> </a></p>

<p>Assumptions:</p>

<ul>
  <li>The repository you are running the builds for is called “myorg/main” and depends on “myorg/lib1” and “myorg/lib2”.</li>
  <li>You have a key already set up on your machine, for instance under <code class="highlighter-rouge">~/.ssh/id_rsa</code> (default on Unix systems).</li>
</ul>

<p>You can add a new key using the repository settings. Paste the contents of <code class="highlighter-rouge">~/.ssh/id_rsa</code> into the “Private Key” text field and give it a nice description.</p>

<p>Alternatively, you can use the following <a href="https://github.com/travis-ci/travis.rb">CLI</a> command to add the key to Travis CI:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>travis sshkey <span class="nt">--upload</span> ~/.ssh/id_rsa <span class="nt">-r</span> myorg/main
Key description: Key to clone myorg/lib1 and myorg/lib2
updating ssh key <span class="k">for </span>myorg/main with key from ~/.ssh/id_rsa
Current SSH key: Key to clone myorg/lib1 and myorg/lib2
</code></pre></div></div>

<p>You can omit the <code class="highlighter-rouge">-r myorg/main</code> if your current working directory is a clone of the “myorg/main” repository.</p>

<h3 id="generating-a-new-key">Generating a new key <a href="#generating-a-new-key" class="toc-anchor">#</a></h3>

<p>Assumptions:</p>

<ul>
  <li>The repository you are running the builds for is called “myorg/main” and depends on “myorg/lib1” and “myorg/lib2”.</li>
  <li>You know the credentials for a user account that has at least read access to all three repositories.</li>
</ul>

<p>The <code class="highlighter-rouge">travis</code> command line tool can generate a new key for you and set it up on both Travis CI and GitHub. In order to do so, it will ask you for a GitHub user name and password This is very handy if you have just created a <a href="#dedicated-user-account">dedicated user</a> or if you don’t have a key set up on your machine that you want to use.</p>

<p>The credentials will only be used to access GitHub and will not be stored or shared with any other service.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>travis sshkey <span class="nt">--generate</span> <span class="nt">-r</span> myorg/main
We need the GitHub login <span class="k">for </span>the account you want to add the key to.
This information will not be sent to Travis CI, only to api.github.com.
The password will not be displayed.

Username: ci-user
Password <span class="k">for </span>ci-user: <span class="k">**************</span>

Generating RSA key.
Uploading public key to GitHub.
Uploading private key to Travis CI.

You can store the private key to reuse it <span class="k">for </span>other repositories <span class="o">(</span>travis sshkey <span class="nt">--upload</span> FILE<span class="o">)</span><span class="nb">.</span>
Store private key? |no|

Current SSH key: key <span class="k">for </span>fetching dependencies <span class="k">for </span>myorg/main
</code></pre></div></div>

<p>You can omit the <code class="highlighter-rouge">-r myorg/main</code> if your current working directory is a clone of the “myorg/main” repository.</p>

<p>At the end of the process, it will ask you whether you want to store the generated key somewhere, usually it is safe to say “no” here. After all, you can just generate a new key as necessary. See <a href="#reusing-a-generated-key">below</a> for instructions on storing and reusing a generated key.</p>

<h3 id="reusing-a-generated-key">Reusing a generated key <a href="#reusing-a-generated-key" class="toc-anchor">#</a></h3>

<p>Assumptions:</p>

<ul>
  <li>The repository you are running the builds for is called “myorg/main” and depends on “myorg/lib1” and “myorg/lib2”.</li>
  <li>You know the credentials for a user account that has at least read access to all three repositories.</li>
  <li>You only want to generate a single key, so you can revoke it easily or use it for accessing other sourced for dependencies or deploy targets.</li>
</ul>

<p>This is absolutely optional, nothing keeps you from generating new keys for all the repositories you are testing.</p>

<p>You follow the <a href="#generating-a-new-key">steps above</a>, but choose to store the key. It will ask you for a path to store it under.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>travis sshkey <span class="nt">--generate</span> <span class="nt">-r</span> myorg/main <span class="nt">--description</span> <span class="s2">"CI dependencies"</span>
We need the GitHub login <span class="k">for </span>the account you want to add the key to.
This information will not be sent to Travis CI, only to api.github.com.
The password will not be displayed.

Username: ci-user
Password <span class="k">for </span>ci-user: <span class="k">**************</span>

Generating RSA key.
Uploading public key to GitHub.
Uploading private key to Travis CI.

You can store the private key to reuse it <span class="k">for </span>other repositories <span class="o">(</span>travis sshkey <span class="nt">--upload</span> FILE<span class="o">)</span><span class="nb">.</span>
Store private key? |no| <span class="nb">yes
</span>Path: |id_travis_rsa| myorg_key

Current SSH key: CI dependencies
</code></pre></div></div>

<p>And as always, you can omit the <code class="highlighter-rouge">-r myorg/main</code> if your current working directory is a clone of the “myorg/main” repository.</p>

<p>You can then <a href="#using-an-existing-key">upload</a> the key for myorg/main2:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>travis sshkey <span class="nt">--upload</span> myorg_key <span class="nt">-r</span> myorg/main2 <span class="nt">--description</span> <span class="s2">"CI dependencies"</span>
updating ssh key <span class="k">for </span>myorg/main with key from myorg_key
Current SSH key: CI dependencies
</code></pre></div></div>

<p>Starting with the 1.7.0 release of the <code class="highlighter-rouge">travis</code> command line tool, you are able to combine it with the <code class="highlighter-rouge">repos</code> command to set up the key not only for “main” and “main2”, but all repositories under the “myorg” organization.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>travis repos <span class="nt">--active</span> <span class="nt">--owner</span> myorg <span class="nt">--com</span> | xargs <span class="nt">-I</span> % travis sshkey <span class="nt">--upload</span> myorg_key <span class="nt">-r</span> % <span class="nt">--description</span> <span class="s2">"CI dependencies"</span>
updating ssh key <span class="k">for </span>myorg/main with key from myorg_key
Current SSH key: CI dependencies
updating ssh key <span class="k">for </span>myorg/main2 with key from myorg_key
Current SSH key: CI dependencies
updating ssh key <span class="k">for </span>myorg/lib1 with key from myorg_key
Current SSH key: CI dependencies
updating ssh key <span class="k">for </span>myorg/lib2 with key from myorg_key
Current SSH key: CI dependencies
</code></pre></div></div>

<blockquote>
  <p>Note that if you’re still using <a href="http://www.travis-ci.org">travis-ci.org</a> you need to use <code class="highlighter-rouge">--org</code> instead of <code class="highlighter-rouge">--com</code>.</p>
</blockquote>

<h2 id="password">Password <a href="#password" class="toc-anchor">#</a></h2>

<p>Assumptions:</p>

<ul>
  <li>The repository you are running the builds for is called “myorg/main” and depends on “myorg/lib1” and “myorg/lib2”.</li>
  <li>You know the credentials for a user account that has at least read access to all three repositories.</li>
</ul>

<p>To pull in dependencies with a password, you will have to use the user name and password in the Git HTTPS URL: <code class="highlighter-rouge">https://ci-user:mypassword123@github.com/myorg/lib1.git</code>.</p>

<p>Alternatively, you can also write the credentials to the <code class="highlighter-rouge">~/.netrc</code> file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>machine github.com
  login ci-user
  password mypassword123
</code></pre></div></div>

<p>You can also encrypt the password and then write it to the netrc in a <code class="highlighter-rouge">before_install</code> step in your <code class="highlighter-rouge">.travis.yml</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>travis <span class="nb">env set </span>CI_USER_PASSWORD mypassword123 <span class="nt">--private</span> <span class="nt">-r</span> myorg/main
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>before_install:
- <span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"machine github.com</span><span class="se">\n</span><span class="s2">  login ci-user</span><span class="se">\n</span><span class="s2">  password </span><span class="nv">$CI_USER_PASSWORD</span><span class="s2">"</span> <span class="o">&gt;</span> ~/.netrc
</code></pre></div></div>

<p>It is also possible to inject the credentials into URLs, for instance, in a Gemfile, it would look like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">source</span> <span class="s1">'https://rubygems.org'</span>
<span class="n">gemspec</span>

<span class="k">if</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'CI'</span><span class="p">]</span>
  <span class="c1"># use HTTPS with password on Travis CI</span>
  <span class="n">git_source</span> <span class="ss">:github</span> <span class="k">do</span> <span class="o">|</span><span class="n">repo_name</span><span class="o">|</span>
    <span class="n">repo_name</span> <span class="o">=</span> <span class="s2">"</span><span class="si">#{</span><span class="n">repo_name</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">repo_name</span><span class="si">}</span><span class="s2">"</span> <span class="k">unless</span> <span class="n">repo_name</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="s2">"/"</span><span class="p">)</span>
    <span class="s2">"https://ci-user:</span><span class="si">#{</span><span class="no">ENV</span><span class="p">.</span><span class="nf">fetch</span><span class="p">(</span><span class="s2">"CI_USER_PASSWORD"</span><span class="p">)</span><span class="si">}</span><span class="s2">@github.com/</span><span class="si">#{</span><span class="n">repo_name</span><span class="si">}</span><span class="s2">.git"</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">gem</span> <span class="s1">'lib1'</span><span class="p">,</span> <span class="ss">github: </span><span class="s2">"myorg/lib1"</span>
<span class="n">gem</span> <span class="s1">'lib2'</span><span class="p">,</span> <span class="ss">github: </span><span class="s2">"myorg/lib2"</span>
</code></pre></div></div>

<blockquote>
  <p>In case of private git submodules, be aware that the <code class="highlighter-rouge">git submodule
update --init recursive</code> command runs before the <code class="highlighter-rouge">~/.netrc</code> credentials
are updated. If you are writing credentials to <code class="highlighter-rouge">~/.netrc</code>, disable the automatic loading of
submodules, update the credentials and add an explicit step to update the submodules:</p>

  <div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">git</span><span class="pi">:</span>
  <span class="na">submodules</span><span class="pi">:</span> <span class="no">false</span>
<span class="na">before_install</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">echo -e "machine github.com\n  login ci-user\n  password $CI_USER_PASSWORD" &gt;~/.netrc</span>
  <span class="pi">-</span> <span class="s">git submodule update --init --recursive</span>
</code></pre></div>  </div>
</blockquote>

<h2 id="api-token">API Token <a href="#api-token" class="toc-anchor">#</a></h2>

<p>Assumptions:</p>

<ul>
  <li>The repository you are running the builds for is called “myorg/main” and depends on “myorg/lib1” and “myorg/lib2”.</li>
  <li>You know the credentials for a user account that has at least read access to all three repositories.</li>
</ul>

<p>This approach works just like the <a href="#password">password</a> approach outlined above, except instead of the username/password pair, you use a GitHub API token.</p>

<p>Under the GitHub account settings for the user you want to use, navigate to <a href="https://github.com/settings/developers">Settings &gt; Developer settings</a>, and then generate a “Personal access tokens”. Make sure the token has the “repo” scope.</p>

<p>Your <code class="highlighter-rouge">~/.netrc</code> should look like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>machine github.com
  login the-generated-token
</code></pre></div></div>

<p>You can also use it in URLs directly: <code class="highlighter-rouge">https://the-generated-token@github.com/myorg/lib1.git</code>.</p>

<p>Use the <code class="highlighter-rouge">encrypt</code> command to add the token to your <code class="highlighter-rouge">.travis.yml</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>travis <span class="nb">env set </span>CI_USER_TOKEN the-generated-token <span class="nt">--private</span> <span class="nt">-r</span> myorg/main
</code></pre></div></div>

<p>You can then have Travis CI write to the <code class="highlighter-rouge">~/.netrc</code> on every build.</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">before_install</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">echo -e "machine github.com\n  login $CI_USER_TOKEN" &gt; ~/.netrc</span>
</code></pre></div></div>

<p>It is also possible to inject the token into URLs, for instance, in a Gemfile, it would look like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">source</span> <span class="s1">'https://rubygems.org'</span>
<span class="n">gemspec</span>

<span class="k">if</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'CI'</span><span class="p">]</span>
  <span class="c1"># use HTTPS with token on Travis CI</span>
  <span class="n">git_source</span> <span class="ss">:github</span> <span class="k">do</span> <span class="o">|</span><span class="n">repo_name</span><span class="o">|</span>
    <span class="n">repo_name</span> <span class="o">=</span> <span class="s2">"</span><span class="si">#{</span><span class="n">repo_name</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">repo_name</span><span class="si">}</span><span class="s2">"</span> <span class="k">unless</span> <span class="n">repo_name</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="s2">"/"</span><span class="p">)</span>
    <span class="s2">"https://</span><span class="si">#{</span><span class="no">ENV</span><span class="p">.</span><span class="nf">fetch</span><span class="p">(</span><span class="s2">"CI_USER_TOKEN"</span><span class="p">)</span><span class="si">}</span><span class="s2">@github.com/</span><span class="si">#{</span><span class="n">repo_name</span><span class="si">}</span><span class="s2">.git"</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">gem</span> <span class="s1">'lib1'</span><span class="p">,</span> <span class="ss">github: </span><span class="s2">"myorg/lib1"</span>
<span class="n">gem</span> <span class="s1">'lib2'</span><span class="p">,</span> <span class="ss">github: </span><span class="s2">"myorg/lib2"</span>
</code></pre></div></div>

<blockquote>
  <p>In case of private git submodules, be aware that the <code class="highlighter-rouge">git submodule
update --init --recursive</code> command runs before the <code class="highlighter-rouge">~/.netrc</code> credentials
are updated. If you are writing credentials to <code class="highlighter-rouge">~/.netrc</code>, disable the automatic loading of
submodules, update the credentials and add an explicit step to update the submodules:</p>

  <div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">git</span><span class="pi">:</span>
  <span class="na">submodules</span><span class="pi">:</span> <span class="no">false</span>
<span class="na">before_install</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">echo -e "\n\nmachine github.com\n login $CI_USER_TOKEN\n" &gt;~/.netrc</span>
  <span class="pi">-</span> <span class="s">git submodule update --init --recursive</span>
</code></pre></div>  </div>
</blockquote>

<blockquote>
  <p>The <code class="highlighter-rouge">.netrc</code> file is deleted for security reasons right after having cloned the repository of which the build and its submodules are executed!</p>
</blockquote>

<h2 id="dedicated-user-account">Dedicated User Account <a href="#dedicated-user-account" class="toc-anchor">#</a></h2>

<p>As mentioned a few times, it might make sense to create a dedicated CI user for the following reasons:</p>

<ul>
  <li>The CI user will only have access to the repositories you want it to have access to.</li>
  <li>You can limit the access to read access.</li>
  <li>Less risk when it comes to leaking keys or credentials.</li>
  <li>The CI user will not leave the organization for non-technical reasons and accidentally break all your builds.</li>
</ul>

<p>In order to do so, you need to register on GitHub as if you would be signing up for a normal user.  Registering users cannot be automated, since that would violate the GitHub Terms of Service.</p>


        </main>
      </div><!-- /#content -->

      <footer class="footer">
  <div class="layout-inner">
    <div class="footer-elem">
      <svg width="142px" height="45.381px" viewBox="0 0 142 45.381" enable-background="new 0 0 142 45.381" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink= "http://www.w3.org/1999/xlink">
        <title>Travis CI Mascot</title>
        <image xlink:href="https://styleguide.travis-ci.com/images/logos/travis-footer-logo-new.svg" x="0" y="0" width="142px" height="45.381px" />
      </svg>
    </div>

    <div class="footer-elem"></div>

    <div class="footer-elem">
      <h3 class="footer-title">©Travis CI, GmbH</h3>
      <address>Rigaer Straße 8<br>10247 Berlin, Germany</address>
      <ul>
        <li><a href="https://travisci.workable.com/" title="Jobs at Travis CI">Work with Travis CI</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Help</h3>
      <ul>
        <li><a href="https://docs.travis-ci.com" title="Travis CI Docs">Documentation</a></li>
        <li><a href="https://changelog.travis-ci.com/">Changelog</a></li>
        <li><a href="https://blog.travis-ci.com/" title="Travis CI Blog">Blog</a></li>
        <li><a href="mailto:support@travis-ci.com" title="Email Travis CI support">Email</a></li>
        <li><a href="https://twitter.com/travisci" title="Travis CI on Twitter">Twitter</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Company</h3>
      <ul>
        <li><a href="/imprint.html" title="Imprint">Imprint</a></li>
        <li><a href="https://ideracorp.com/legal/TravisCI">Legal</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Travis CI Status</h3>
      <ul>
        <li><div class="status-circle none">Status:</div>
          <a href="http://www.traviscistatus.com/">Travis CI Status</a>
        </li>
      </ul>
    </div>
  </div>
</footer>

<script>
 fetch('https://pnpcptp8xh9k.statuspage.io/api/v2/status.json').then(function(response) {
   return response.json();
 }).then(function(data) {
   if (data.status && data.status.indicator) {
     document.querySelector('.status-circle').classList.add(data.status.indicator);
   }
 });
</script>

    </div><!-- /.wrapper -->
  </body>
</html>
 contentType 9 text/html url 57 https://docs.travis-ci.com:443/user/private-dependencies/ responseCode 3 200 