sovehajsmkkansamwqoaeslakabekqpcqmmgkcak length 5 43726 page 43726 
<html>
<head>
<title>r20409 MediaWiki - Code Review archive</title>
<meta charset="utf-8">
<link rel="stylesheet" href="../ext.codereview.styles.css"/>
</head>
<body>
<h1>r20409 MediaWiki - Code Review archive</h1>
<div id="mw-content-text" class="mw-body-content"><form action="/wiki/Special:Code/MediaWiki/20409" method="post"><table class="mw-codereview-meta"><tr><td>Repository:</td><td><a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki" title="Special:Code/MediaWiki">MediaWiki</a></td></tr>
<tr><td>Revision:</td><td>&lt;&#160;<a href="./20408.html" title="Special:Code/MediaWiki/20408">r20408</a>‎ | <b>r20409</b> | <a href="./20410.html" title="Special:Code/MediaWiki/20410">r20410</a>&#160;&gt;</td></tr>
<tr><td>Date:</td><td>21:48, 13 March 2007</td></tr>
<tr><td>Author:</td><td><a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/author/raymond" title="Special:Code/MediaWiki/author/raymond">raymond</a></td></tr>
<tr><td>Status:</td><td>old</td></tr>
<tr><td>Tags:</td><td></td></tr>
<tr><td>Comment:</td><td><div class="mw-codereview-message">* (<a class="external" href="https://bugzilla.wikimedia.org/show_bug.cgi?id=3984">bug 3984</a>) Searching in logs by title%</div></td></tr>
<tr><td>Modified paths:</td><td><div class='mw-codereview-paths mw-content-ltr'><ul>
<li><b>/trunk/phase3/RELEASE-NOTES</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fphase3%2FRELEASE-NOTES" title="Special:Code/MediaWiki">history</a>)</li>
<li><b>/trunk/phase3/includes/SpecialLog.php</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fphase3%2Fincludes%2FSpecialLog.php" title="Special:Code/MediaWiki">history</a>)</li>
<li><b>/trunk/phase3/languages/messages/MessagesDe.php</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fphase3%2Flanguages%2Fmessages%2FMessagesDe.php" title="Special:Code/MediaWiki">history</a>)</li>
<li><b>/trunk/phase3/languages/messages/MessagesEn.php</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fphase3%2Flanguages%2Fmessages%2FMessagesEn.php" title="Special:Code/MediaWiki">history</a>)</li>
<li><b>/trunk/phase3/maintenance/language/messages.inc</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fphase3%2Fmaintenance%2Flanguage%2Fmessages.inc" title="Special:Code/MediaWiki">history</a>)</li>
</ul></div>
</td></tr>
</table>
<h2>Diff <small>[<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki/20409&amp;action=purge" title="Special:Code/MediaWiki/20409">purge</a>]</small></h2><div class='mw-codereview-diff' id='mw-codereview-diff'><table class="mw-codereview-diff"><tr id="1" class="patchedfile"><td colspan="3">Index: trunk/phase3/RELEASE-NOTES</td></tr>



<tr id="5"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -267,6 +267,7 @@</span></td></tr>
<tr id="6"><td class="linenumbers">268</td><td class="linenumbers">268</td><td class="unchanged"><span> * Make Special:Listusers caseinsensitive for first letter</span></td></tr>
<tr id="7"><td class="linenumbers">269</td><td class="linenumbers">269</td><td class="unchanged"><span> * Default tidy.conf has been moved from extensions module into includes.</span></td></tr>
<tr id="8"><td class="linenumbers">270</td><td class="linenumbers">270</td><td class="unchanged"><span> * Ignore lonely '''''</span></td></tr>
<tr id="9"><td class="linenumbers"> </td><td class="linenumbers">271</td><td class="ins"><ins>+* (bug 3984) Searching in logs by title%</ins></td></tr>
<tr id="10"><td class="linenumbers">271</td><td class="linenumbers">272</td><td class="unchanged"><span> </span></td></tr>
<tr id="11"><td class="linenumbers">272</td><td class="linenumbers">273</td><td class="unchanged"><span> </span></td></tr>
<tr id="12"><td class="linenumbers">273</td><td class="linenumbers">274</td><td class="unchanged"><span> == Languages updated ==</span></td></tr>
<tr id="13" class="patchedfile"><td colspan="3">Index: trunk/phase3/languages/messages/MessagesDe.php</td></tr>



<tr id="17"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -880,7 +880,7 @@</span></td></tr>
<tr id="18"><td class="linenumbers">881</td><td class="linenumbers">881</td><td class="unchanged"><span> 'grouppage-bureaucrat' => '{{ns:project}}:Bürokraten',</span></td></tr>
<tr id="19"><td class="linenumbers">882</td><td class="linenumbers">882</td><td class="unchanged"><span> </span></td></tr>
<tr id="20"><td class="linenumbers">883</td><td class="linenumbers">883</td><td class="unchanged"><span> # User rights log</span></td></tr>
<tr id="21"><td class="linenumbers">884</td><td class="linenumbers"> </td><td class="del"><del>-'rightslog'      => 'Benutzerrechte-Logbuch',</del></td></tr>
<tr id="22"><td class="linenumbers"> </td><td class="linenumbers">884</td><td class="ins"><ins>+'rightslog'      => 'Rechte-Logbuch',</ins></td></tr>
<tr id="23"><td class="linenumbers">885</td><td class="linenumbers">885</td><td class="unchanged"><span> 'rightslogtext'  => 'Dies ist das Logbuch der Änderungen der Benutzerrechte.',</span></td></tr>
<tr id="24"><td class="linenumbers">886</td><td class="linenumbers">886</td><td class="unchanged"><span> 'rightslogentry' => 'änderte die Gruppenzugehörigkeit für „[[$1]]“ von „$2“ auf „$3“.',</span></td></tr>
<tr id="25"><td class="linenumbers">887</td><td class="linenumbers">887</td><td class="unchanged"><span> 'rightsnone'     => '(-)',</span></td></tr>
<tr id="26"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -1178,10 +1178,18 @@</span></td></tr>
<tr id="27"><td class="linenumbers">1179</td><td class="linenumbers">1179</td><td class="unchanged"><span> 'isbn'               => 'ISBN',</span></td></tr>
<tr id="28"><td class="linenumbers">1180</td><td class="linenumbers">1180</td><td class="unchanged"><span> 'alphaindexline'     => '$1 bis $2',</span></td></tr>
<tr id="29"><td class="linenumbers">1181</td><td class="linenumbers">1181</td><td class="unchanged"><span> 'version'            => 'Version',</span></td></tr>
<tr id="30"><td class="linenumbers">1182</td><td class="linenumbers"> </td><td class="del"><del>-'log'                => 'Logbücher',</del></td></tr>
<tr id="31"><td class="linenumbers">1183</td><td class="linenumbers"> </td><td class="del"><del>-'alllogstext'        => 'Kombinierte Anzeige der Datei-, Lösch-, Seitenschutz-, Benutzersperr- und Rechte-Logbücher.&lt;br />Sie können die Anzeige durch die Auswahl des Logbuchtyps, des Benutzers oder des Seitentitels einschränken.',</del></td></tr>
<tr id="32"><td class="linenumbers">1184</td><td class="linenumbers"> </td><td class="del"><del>-'logempty'           => 'Keine passenden Einträge.',</del></td></tr>
<tr id="33"><td class="linenumbers">1185</td><td class="linenumbers">1182</td><td class="unchanged"><span> </span></td></tr>
<tr id="34"><td class="linenumbers"> </td><td class="linenumbers">1183</td><td class="ins"><ins>+# Special:Logs</ins></td></tr>
<tr id="35"><td class="linenumbers"> </td><td class="linenumbers">1184</td><td class="ins"><ins>+'specialloguserlabel'  => 'Benutzer:',</ins></td></tr>
<tr id="36"><td class="linenumbers"> </td><td class="linenumbers">1185</td><td class="ins"><ins>+'speciallogtitlelabel' => 'Titel:',</ins></td></tr>
<tr id="37"><td class="linenumbers"> </td><td class="linenumbers">1186</td><td class="ins"><ins>+'log'                  => 'Logbücher',</ins></td></tr>
<tr id="38"><td class="linenumbers"> </td><td class="linenumbers">1187</td><td class="ins"><ins>+'alllogstext'          => "Dies ist die kombinierte Anzeige aller in {{SITENAME}} geführten Logbücher.</ins></td></tr>
<tr id="39"><td class="linenumbers"> </td><td class="linenumbers">1188</td><td class="ins"><ins>+Die Ausgabe kann durch die Auswahl des Logbuchtyps, des Benutzers oder des Seitentitels eingeschränkt werden.</ins></td></tr>
<tr id="40"><td class="linenumbers"> </td><td class="linenumbers">1189</td><td class="ins"><ins>+</ins></td></tr>
<tr id="41"><td class="linenumbers"> </td><td class="linenumbers">1190</td><td class="ins"><ins>+Durch Markieren von „{{int:title-pattern}}“ wird nach Titeln gesucht, die mit diesem Begriff anfangen und beliebig enden. Es können keine Platzhalter ''(Wildcards)'' benutzt werden",</ins></td></tr>
<tr id="42"><td class="linenumbers"> </td><td class="linenumbers">1191</td><td class="ins"><ins>+'logempty'             => 'Keine passenden Einträge.',</ins></td></tr>
<tr id="43"><td class="linenumbers"> </td><td class="linenumbers">1192</td><td class="ins"><ins>+'title-pattern'        => 'Titel beginnt mit …',</ins></td></tr>
<tr id="44"><td class="linenumbers"> </td><td class="linenumbers">1193</td><td class="ins"><ins>+</ins></td></tr>
<tr id="45"><td class="linenumbers">1186</td><td class="linenumbers">1194</td><td class="unchanged"><span> # Special:Allpages</span></td></tr>
<tr id="46"><td class="linenumbers">1187</td><td class="linenumbers">1195</td><td class="unchanged"><span> 'nextpage'          => 'Nächste Seite ($1)',</span></td></tr>
<tr id="47"><td class="linenumbers">1188</td><td class="linenumbers">1196</td><td class="unchanged"><span> 'prevpage'          => 'Vorherige Seite ($1)',</span></td></tr>
<tr id="48"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -1809,10 +1817,6 @@</span></td></tr>
<tr id="49"><td class="linenumbers">1810</td><td class="linenumbers">1818</td><td class="unchanged"><span> 'variantname-kk-cn' => 'kk-cn',</span></td></tr>
<tr id="50"><td class="linenumbers">1811</td><td class="linenumbers">1819</td><td class="unchanged"><span> 'variantname-kk'    => 'kk',</span></td></tr>
<tr id="51"><td class="linenumbers">1812</td><td class="linenumbers">1820</td><td class="unchanged"><span> </span></td></tr>
<tr id="52"><td class="linenumbers">1813</td><td class="linenumbers"> </td><td class="del"><del>-# Labels for User: and Title: on Special:Log pages</del></td></tr>
<tr id="53"><td class="linenumbers">1814</td><td class="linenumbers"> </td><td class="del"><del>-'specialloguserlabel'  => 'Benutzer:',</del></td></tr>
<tr id="54"><td class="linenumbers">1815</td><td class="linenumbers"> </td><td class="del"><del>-'speciallogtitlelabel' => 'Titel:',</del></td></tr>
<tr id="55"><td class="linenumbers">1816</td><td class="linenumbers"> </td><td class="del"><del>-</del></td></tr>
<tr id="56"><td class="linenumbers">1817</td><td class="linenumbers">1821</td><td class="unchanged"><span> 'passwordtooshort' => 'Das Passwort ist zu kurz. Es muss mindestens $1 Zeichen lang sein.',</span></td></tr>
<tr id="57"><td class="linenumbers">1818</td><td class="linenumbers">1822</td><td class="unchanged"><span> </span></td></tr>
<tr id="58"><td class="linenumbers">1819</td><td class="linenumbers">1823</td><td class="unchanged"><span> # Metadata</span></td></tr>
<tr id="59" class="patchedfile"><td colspan="3">Index: trunk/phase3/languages/messages/MessagesEn.php</td></tr>



<tr id="63"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -1575,12 +1575,16 @@</span></td></tr>
<tr id="64"><td class="linenumbers">1576</td><td class="linenumbers">1576</td><td class="unchanged"><span> 'pubmedurl' =>  'http://www.ncbi.nlm.nih.gov/entrez/query.fcgi?cmd=Retrieve&amp;db=pubmed&amp;dopt=Abstract&amp;list_uids=$1',</span></td></tr>
<tr id="65"><td class="linenumbers">1577</td><td class="linenumbers">1577</td><td class="unchanged"><span> 'alphaindexline' => "$1 to $2",</span></td></tr>
<tr id="66"><td class="linenumbers">1578</td><td class="linenumbers">1578</td><td class="unchanged"><span> 'version'		=> 'Version',</span></td></tr>
<tr id="67"><td class="linenumbers">1579</td><td class="linenumbers"> </td><td class="del"><del>-'log'		=> 'Logs',</del></td></tr>
<tr id="68"><td class="linenumbers">1580</td><td class="linenumbers"> </td><td class="del"><del>-'alllogstext'	=> 'Combined display of upload, deletion, protection, blocking, and sysop logs.</del></td></tr>
<tr id="69"><td class="linenumbers"> </td><td class="linenumbers">1579</td><td class="ins"><ins>+</ins></td></tr>
<tr id="70"><td class="linenumbers"> </td><td class="linenumbers">1580</td><td class="ins"><ins>+# Special:Logs</ins></td></tr>
<tr id="71"><td class="linenumbers"> </td><td class="linenumbers">1581</td><td class="ins"><ins>+'specialloguserlabel'  => 'Benutzer:',</ins></td></tr>
<tr id="72"><td class="linenumbers"> </td><td class="linenumbers">1582</td><td class="ins"><ins>+'speciallogtitlelabel' => 'Titel:',</ins></td></tr>
<tr id="73"><td class="linenumbers"> </td><td class="linenumbers">1583</td><td class="ins"><ins>+'log'                  => 'Logs',</ins></td></tr>
<tr id="74"><td class="linenumbers"> </td><td class="linenumbers">1584</td><td class="ins"><ins>+'alllogstext'          => 'Combined display of all available logs of {{SITENAME}}.</ins></td></tr>
<tr id="75"><td class="linenumbers">1581</td><td class="linenumbers">1585</td><td class="unchanged"><span> You can narrow down the view by selecting a log type, the user name, or the affected page.',</span></td></tr>
<tr id="76"><td class="linenumbers">1582</td><td class="linenumbers"> </td><td class="del"><del>-'logempty' => 'No matching items in log.',</del></td></tr>
<tr id="77"><td class="linenumbers"> </td><td class="linenumbers">1586</td><td class="ins"><ins>+'logempty'             => 'No matching items in log.',</ins></td></tr>
<tr id="78"><td class="linenumbers"> </td><td class="linenumbers">1587</td><td class="ins"><ins>+'title-pattern'        => 'Title starts with �',</ins></td></tr>
<tr id="79"><td class="linenumbers">1583</td><td class="linenumbers">1588</td><td class="unchanged"><span> </span></td></tr>
<tr id="80"><td class="linenumbers">1584</td><td class="linenumbers"> </td><td class="del"><del>-</del></td></tr>
<tr id="81"><td class="linenumbers">1585</td><td class="linenumbers">1589</td><td class="unchanged"><span> # Special:Allpages</span></td></tr>
<tr id="82"><td class="linenumbers">1586</td><td class="linenumbers">1590</td><td class="unchanged"><span> 'nextpage'          => 'Next page ($1)',</span></td></tr>
<tr id="83"><td class="linenumbers">1587</td><td class="linenumbers">1591</td><td class="unchanged"><span> 'prevpage'          => 'Previous page ($1)',</span></td></tr>
<tr id="84"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -2327,10 +2331,6 @@</span></td></tr>
<tr id="85"><td class="linenumbers">2328</td><td class="linenumbers">2332</td><td class="unchanged"><span> 'variantname-kk-cn' => 'kk-cn',</span></td></tr>
<tr id="86"><td class="linenumbers">2329</td><td class="linenumbers">2333</td><td class="unchanged"><span> 'variantname-kk' => 'kk',</span></td></tr>
<tr id="87"><td class="linenumbers">2330</td><td class="linenumbers">2334</td><td class="unchanged"><span> </span></td></tr>
<tr id="88"><td class="linenumbers">2331</td><td class="linenumbers"> </td><td class="del"><del>-# labels for User: and Title: on Special:Log pages</del></td></tr>
<tr id="89"><td class="linenumbers">2332</td><td class="linenumbers"> </td><td class="del"><del>-'specialloguserlabel' => 'User:',</del></td></tr>
<tr id="90"><td class="linenumbers">2333</td><td class="linenumbers"> </td><td class="del"><del>-'speciallogtitlelabel' => 'Title:',</del></td></tr>
<tr id="91"><td class="linenumbers">2334</td><td class="linenumbers"> </td><td class="del"><del>-</del></td></tr>
<tr id="92"><td class="linenumbers">2335</td><td class="linenumbers">2335</td><td class="unchanged"><span> 'passwordtooshort' => 'Your password is too short. It must have at least $1 characters.',</span></td></tr>
<tr id="93"><td class="linenumbers">2336</td><td class="linenumbers">2336</td><td class="unchanged"><span> </span></td></tr>
<tr id="94"><td class="linenumbers">2337</td><td class="linenumbers">2337</td><td class="unchanged"><span> # Metadata</span></td></tr>
<tr id="95" class="patchedfile"><td colspan="3">Index: trunk/phase3/includes/SpecialLog.php</td></tr>



<tr id="99"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -66,7 +66,7 @@</span></td></tr>
<tr id="100"><td class="linenumbers">67</td><td class="linenumbers">67</td><td class="unchanged"><span> </span></td></tr>
<tr id="101"><td class="linenumbers">68</td><td class="linenumbers">68</td><td class="unchanged"><span> 		$this->limitType( $request->getVal( 'type' ) );</span></td></tr>
<tr id="102"><td class="linenumbers">69</td><td class="linenumbers">69</td><td class="unchanged"><span> 		$this->limitUser( $request->getText( 'user' ) );</span></td></tr>
<tr id="103"><td class="linenumbers">70</td><td class="linenumbers"> </td><td class="del"><del>-		$this->limitTitle( $request->getText( 'page' ) );</del></td></tr>
<tr id="104"><td class="linenumbers"> </td><td class="linenumbers">70</td><td class="ins"><ins>+		$this->limitTitle( $request->getText( 'page' ) , $request->getBool( 'pattern' ) );</ins></td></tr>
<tr id="105"><td class="linenumbers">71</td><td class="linenumbers">71</td><td class="unchanged"><span> 		$this->limitTime( $request->getVal( 'from' ), '>=' );</span></td></tr>
<tr id="106"><td class="linenumbers">72</td><td class="linenumbers">72</td><td class="unchanged"><span> 		$this->limitTime( $request->getVal( 'until' ), '&lt;=' );</span></td></tr>
<tr id="107"><td class="linenumbers">73</td><td class="linenumbers">73</td><td class="unchanged"><span> </span></td></tr>
<tr id="108"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -116,15 +116,21 @@</span></td></tr>
<tr id="109"><td class="linenumbers">117</td><td class="linenumbers">117</td><td class="unchanged"><span> 	 * @param string $page Title name as text</span></td></tr>
<tr id="110"><td class="linenumbers">118</td><td class="linenumbers">118</td><td class="unchanged"><span> 	 * @private</span></td></tr>
<tr id="111"><td class="linenumbers">119</td><td class="linenumbers">119</td><td class="unchanged"><span> 	 */</span></td></tr>
<tr id="112"><td class="linenumbers">120</td><td class="linenumbers"> </td><td class="del"><del>-	function limitTitle( $page ) {</del></td></tr>
<tr id="113"><td class="linenumbers"> </td><td class="linenumbers">120</td><td class="ins"><ins>+	function limitTitle( $page , $pattern ) {</ins></td></tr>
<tr id="114"><td class="linenumbers">121</td><td class="linenumbers">121</td><td class="unchanged"><span> 		$title = Title::newFromText( $page );</span></td></tr>
<tr id="115"><td class="linenumbers">122</td><td class="linenumbers">122</td><td class="unchanged"><span> 		if( empty( $page ) || is_null( $title )  ) {</span></td></tr>
<tr id="116"><td class="linenumbers">123</td><td class="linenumbers">123</td><td class="unchanged"><span> 			return false;</span></td></tr>
<tr id="117"><td class="linenumbers">124</td><td class="linenumbers">124</td><td class="unchanged"><span> 		}</span></td></tr>
<tr id="118"><td class="linenumbers">125</td><td class="linenumbers">125</td><td class="unchanged"><span> 		$this->title =&amp; $title;</span></td></tr>
<tr id="119"><td class="linenumbers">126</td><td class="linenumbers"> </td><td class="del"><del>-		$safetitle = $this->db->strencode( $title->getDBkey() );</del></td></tr>
<tr id="120"><td class="linenumbers"> </td><td class="linenumbers">126</td><td class="ins"><ins>+		$this->pattern = $pattern;</ins></td></tr>
<tr id="121"><td class="linenumbers">127</td><td class="linenumbers">127</td><td class="unchanged"><span> 		$ns = $title->getNamespace();</span></td></tr>
<tr id="122"><td class="linenumbers">128</td><td class="linenumbers"> </td><td class="del"><del>-		$this->whereClauses[] = "log_namespace=$ns AND log_title='$safetitle'";</del></td></tr>
<tr id="123"><td class="linenumbers"> </td><td class="linenumbers">128</td><td class="ins"><ins>+		if ( $pattern ) {</ins></td></tr>
<tr id="124"><td class="linenumbers"> </td><td class="linenumbers">129</td><td class="ins"><ins>+			$safetitle = $this->db->escapeLike( $title->getDBkey() ); // use escapeLike to avoid expensive search patterns like 't%st%'</ins></td></tr>
<tr id="125"><td class="linenumbers"> </td><td class="linenumbers">130</td><td class="ins"><ins>+			$this->whereClauses[] = "log_namespace=$ns AND log_title LIKE '$safetitle%'";</ins></td></tr>
<tr id="126"><td class="linenumbers"> </td><td class="linenumbers">131</td><td class="ins"><ins>+		} else {</ins></td></tr>
<tr id="127"><td class="linenumbers"> </td><td class="linenumbers">132</td><td class="ins"><ins>+			$safetitle = $this->db->strencode( $title->getDBkey() );</ins></td></tr>
<tr id="128"><td class="linenumbers"> </td><td class="linenumbers">133</td><td class="ins"><ins>+			$this->whereClauses[] = "log_namespace=$ns AND log_title = '$safetitle'";</ins></td></tr>
<tr id="129"><td class="linenumbers"> </td><td class="linenumbers">134</td><td class="ins"><ins>+		}</ins></td></tr>
<tr id="130"><td class="linenumbers">129</td><td class="linenumbers">135</td><td class="unchanged"><span> 	}</span></td></tr>
<tr id="131"><td class="linenumbers">130</td><td class="linenumbers">136</td><td class="unchanged"><span> </span></td></tr>
<tr id="132"><td class="linenumbers">131</td><td class="linenumbers">137</td><td class="unchanged"><span> 	/**</span></td></tr>
<tr id="133"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -188,6 +194,13 @@</span></td></tr>
<tr id="134"><td class="linenumbers">189</td><td class="linenumbers">195</td><td class="unchanged"><span> 	}</span></td></tr>
<tr id="135"><td class="linenumbers">190</td><td class="linenumbers">196</td><td class="unchanged"><span> </span></td></tr>
<tr id="136"><td class="linenumbers">191</td><td class="linenumbers">197</td><td class="unchanged"><span> 	/**</span></td></tr>
<tr id="137"><td class="linenumbers"> </td><td class="linenumbers">198</td><td class="ins"><ins>+	 * @return boolean The checkbox, if titles should be searched by a pattern too</ins></td></tr>
<tr id="138"><td class="linenumbers"> </td><td class="linenumbers">199</td><td class="ins"><ins>+	 */</ins></td></tr>
<tr id="139"><td class="linenumbers"> </td><td class="linenumbers">200</td><td class="ins"><ins>+	function queryPattern() {</ins></td></tr>
<tr id="140"><td class="linenumbers"> </td><td class="linenumbers">201</td><td class="ins"><ins>+		return $this->pattern;</ins></td></tr>
<tr id="141"><td class="linenumbers"> </td><td class="linenumbers">202</td><td class="ins"><ins>+	}</ins></td></tr>
<tr id="142"><td class="linenumbers"> </td><td class="linenumbers">203</td><td class="ins"><ins>+</ins></td></tr>
<tr id="143"><td class="linenumbers"> </td><td class="linenumbers">204</td><td class="ins"><ins>+	/**</ins></td></tr>
<tr id="144"><td class="linenumbers">192</td><td class="linenumbers">205</td><td class="unchanged"><span> 	 * @return string The text of the title that this LogReader has been limited to.</span></td></tr>
<tr id="145"><td class="linenumbers">193</td><td class="linenumbers">206</td><td class="unchanged"><span> 	 */</span></td></tr>
<tr id="146"><td class="linenumbers">194</td><td class="linenumbers">207</td><td class="unchanged"><span> 	function queryTitle() {</span></td></tr>
<tr id="147"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -227,9 +240,13 @@</span></td></tr>
<tr id="148"><td class="linenumbers">228</td><td class="linenumbers">241</td><td class="unchanged"><span> 		$this->showHeader( $wgOut );</span></td></tr>
<tr id="149"><td class="linenumbers">229</td><td class="linenumbers">242</td><td class="unchanged"><span> 		$this->showOptions( $wgOut );</span></td></tr>
<tr id="150"><td class="linenumbers">230</td><td class="linenumbers">243</td><td class="unchanged"><span> 		$result = $this->getLogRows();</span></td></tr>
<tr id="151"><td class="linenumbers">231</td><td class="linenumbers"> </td><td class="del"><del>-		$this->showPrevNext( $wgOut );</del></td></tr>
<tr id="152"><td class="linenumbers">232</td><td class="linenumbers"> </td><td class="del"><del>-		$this->doShowList( $wgOut, $result );</del></td></tr>
<tr id="153"><td class="linenumbers">233</td><td class="linenumbers"> </td><td class="del"><del>-		$this->showPrevNext( $wgOut );</del></td></tr>
<tr id="154"><td class="linenumbers"> </td><td class="linenumbers">244</td><td class="ins"><ins>+		if ( $this->numResults > 0 ) {</ins></td></tr>
<tr id="155"><td class="linenumbers"> </td><td class="linenumbers">245</td><td class="ins"><ins>+			$this->showPrevNext( $wgOut );</ins></td></tr>
<tr id="156"><td class="linenumbers"> </td><td class="linenumbers">246</td><td class="ins"><ins>+			$this->doShowList( $wgOut, $result );</ins></td></tr>
<tr id="157"><td class="linenumbers"> </td><td class="linenumbers">247</td><td class="ins"><ins>+			$this->showPrevNext( $wgOut );</ins></td></tr>
<tr id="158"><td class="linenumbers"> </td><td class="linenumbers">248</td><td class="ins"><ins>+		} else {</ins></td></tr>
<tr id="159"><td class="linenumbers"> </td><td class="linenumbers">249</td><td class="ins"><ins>+			$this->showError( $wgOut );</ins></td></tr>
<tr id="160"><td class="linenumbers"> </td><td class="linenumbers">250</td><td class="ins"><ins>+		}</ins></td></tr>
<tr id="161"><td class="linenumbers">234</td><td class="linenumbers">251</td><td class="unchanged"><span> 	}</span></td></tr>
<tr id="162"><td class="linenumbers">235</td><td class="linenumbers">252</td><td class="unchanged"><span> </span></td></tr>
<tr id="163"><td class="linenumbers">236</td><td class="linenumbers">253</td><td class="unchanged"><span> 	/**</span></td></tr>
<tr id="164"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -278,20 +295,20 @@</span></td></tr>
<tr id="165"><td class="linenumbers">279</td><td class="linenumbers">296</td><td class="unchanged"><span> </span></td></tr>
<tr id="166"><td class="linenumbers">280</td><td class="linenumbers">297</td><td class="unchanged"><span> 	function doShowList( &amp;$out, $result ) {</span></td></tr>
<tr id="167"><td class="linenumbers">281</td><td class="linenumbers">298</td><td class="unchanged"><span> 		// Rewind result pointer and go through it again, making the HTML</span></td></tr>
<tr id="168"><td class="linenumbers">282</td><td class="linenumbers"> </td><td class="del"><del>-		if ($this->numResults > 0) {</del></td></tr>
<tr id="169"><td class="linenumbers">283</td><td class="linenumbers"> </td><td class="del"><del>-			$html = "\n&lt;ul>\n";</del></td></tr>
<tr id="170"><td class="linenumbers">284</td><td class="linenumbers"> </td><td class="del"><del>-			$result->seek( 0 );</del></td></tr>
<tr id="171"><td class="linenumbers">285</td><td class="linenumbers"> </td><td class="del"><del>-			while( $s = $result->fetchObject() ) {</del></td></tr>
<tr id="172"><td class="linenumbers">286</td><td class="linenumbers"> </td><td class="del"><del>-				$html .= $this->logLine( $s );</del></td></tr>
<tr id="173"><td class="linenumbers">287</td><td class="linenumbers"> </td><td class="del"><del>-			}</del></td></tr>
<tr id="174"><td class="linenumbers">288</td><td class="linenumbers"> </td><td class="del"><del>-			$html .= "\n&lt;/ul>\n";</del></td></tr>
<tr id="175"><td class="linenumbers">289</td><td class="linenumbers"> </td><td class="del"><del>-			$out->addHTML( $html );</del></td></tr>
<tr id="176"><td class="linenumbers">290</td><td class="linenumbers"> </td><td class="del"><del>-		} else {</del></td></tr>
<tr id="177"><td class="linenumbers">291</td><td class="linenumbers"> </td><td class="del"><del>-			$out->addWikiText( wfMsg( 'logempty' ) );</del></td></tr>
<tr id="178"><td class="linenumbers"> </td><td class="linenumbers">299</td><td class="ins"><ins>+		$html = "\n&lt;ul>\n";</ins></td></tr>
<tr id="179"><td class="linenumbers"> </td><td class="linenumbers">300</td><td class="ins"><ins>+		$result->seek( 0 );</ins></td></tr>
<tr id="180"><td class="linenumbers"> </td><td class="linenumbers">301</td><td class="ins"><ins>+		while( $s = $result->fetchObject() ) {</ins></td></tr>
<tr id="181"><td class="linenumbers"> </td><td class="linenumbers">302</td><td class="ins"><ins>+			$html .= $this->logLine( $s );</ins></td></tr>
<tr id="182"><td class="linenumbers">292</td><td class="linenumbers">303</td><td class="unchanged"><span> 		}</span></td></tr>
<tr id="183"><td class="linenumbers"> </td><td class="linenumbers">304</td><td class="ins"><ins>+		$html .= "\n&lt;/ul>\n";</ins></td></tr>
<tr id="184"><td class="linenumbers"> </td><td class="linenumbers">305</td><td class="ins"><ins>+		$out->addHTML( $html );</ins></td></tr>
<tr id="185"><td class="linenumbers">293</td><td class="linenumbers">306</td><td class="unchanged"><span> 		$result->free();</span></td></tr>
<tr id="186"><td class="linenumbers">294</td><td class="linenumbers">307</td><td class="unchanged"><span> 	}</span></td></tr>
<tr id="187"><td class="linenumbers">295</td><td class="linenumbers">308</td><td class="unchanged"><span> </span></td></tr>
<tr id="188"><td class="linenumbers"> </td><td class="linenumbers">309</td><td class="ins"><ins>+	function showError( &amp;$out ) {</ins></td></tr>
<tr id="189"><td class="linenumbers"> </td><td class="linenumbers">310</td><td class="ins"><ins>+		$out->addWikiText( wfMsg( 'logempty' ) );</ins></td></tr>
<tr id="190"><td class="linenumbers"> </td><td class="linenumbers">311</td><td class="ins"><ins>+	}</ins></td></tr>
<tr id="191"><td class="linenumbers"> </td><td class="linenumbers">312</td><td class="ins"><ins>+</ins></td></tr>
<tr id="192"><td class="linenumbers">296</td><td class="linenumbers">313</td><td class="unchanged"><span> 	/**</span></td></tr>
<tr id="193"><td class="linenumbers">297</td><td class="linenumbers">314</td><td class="unchanged"><span> 	 * @param Object $s a single row from the result set</span></td></tr>
<tr id="194"><td class="linenumbers">298</td><td class="linenumbers">315</td><td class="unchanged"><span> 	 * @return string Formatted HTML list item</span></td></tr>
<tr id="195"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -372,12 +389,15 @@</span></td></tr>
<tr id="196"><td class="linenumbers">373</td><td class="linenumbers">390</td><td class="unchanged"><span> 		$title = SpecialPage::getTitleFor( 'Log' );</span></td></tr>
<tr id="197"><td class="linenumbers">374</td><td class="linenumbers">391</td><td class="unchanged"><span> 		$special = htmlspecialchars( $title->getPrefixedDBkey() );</span></td></tr>
<tr id="198"><td class="linenumbers">375</td><td class="linenumbers">392</td><td class="unchanged"><span> 		$out->addHTML( "&lt;form action=\"$action\" method=\"get\">\n" .</span></td></tr>
<tr id="199"><td class="linenumbers"> </td><td class="linenumbers">393</td><td class="ins"><ins>+			'&lt;fieldset>' .</ins></td></tr>
<tr id="200"><td class="linenumbers"> </td><td class="linenumbers">394</td><td class="ins"><ins>+			Xml::element( 'legend', array(), wfMsg( 'log' ) ) .</ins></td></tr>
<tr id="201"><td class="linenumbers">376</td><td class="linenumbers">395</td><td class="unchanged"><span> 			Xml::hidden( 'title', $special ) . "\n" .</span></td></tr>
<tr id="202"><td class="linenumbers">377</td><td class="linenumbers">396</td><td class="unchanged"><span> 			$this->getTypeMenu() . "\n" .</span></td></tr>
<tr id="203"><td class="linenumbers">378</td><td class="linenumbers">397</td><td class="unchanged"><span> 			$this->getUserInput() . "\n" .</span></td></tr>
<tr id="204"><td class="linenumbers">379</td><td class="linenumbers">398</td><td class="unchanged"><span> 			$this->getTitleInput() . "\n" .</span></td></tr>
<tr id="205"><td class="linenumbers"> </td><td class="linenumbers">399</td><td class="ins"><ins>+			$this->getTitlePattern() . "\n" .</ins></td></tr>
<tr id="206"><td class="linenumbers">380</td><td class="linenumbers">400</td><td class="unchanged"><span> 			Xml::submitButton( wfMsg( 'allpagessubmit' ) ) . "\n" .</span></td></tr>
<tr id="207"><td class="linenumbers">381</td><td class="linenumbers"> </td><td class="del"><del>-			"&lt;/form>" );</del></td></tr>
<tr id="208"><td class="linenumbers"> </td><td class="linenumbers">401</td><td class="ins"><ins>+			"&lt;/fieldset>&lt;/form>" );</ins></td></tr>
<tr id="209"><td class="linenumbers">382</td><td class="linenumbers">402</td><td class="unchanged"><span> 	}</span></td></tr>
<tr id="210"><td class="linenumbers">383</td><td class="linenumbers">403</td><td class="unchanged"><span> </span></td></tr>
<tr id="211"><td class="linenumbers">384</td><td class="linenumbers">404</td><td class="unchanged"><span> 	/**</span></td></tr>
<tr id="212"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -428,6 +448,15 @@</span></td></tr>
<tr id="213"><td class="linenumbers">429</td><td class="linenumbers">449</td><td class="unchanged"><span> 	}</span></td></tr>
<tr id="214"><td class="linenumbers">430</td><td class="linenumbers">450</td><td class="unchanged"><span> </span></td></tr>
<tr id="215"><td class="linenumbers">431</td><td class="linenumbers">451</td><td class="unchanged"><span> 	/**</span></td></tr>
<tr id="216"><td class="linenumbers"> </td><td class="linenumbers">452</td><td class="ins"><ins>+	 * @return boolean Checkbox</ins></td></tr>
<tr id="217"><td class="linenumbers"> </td><td class="linenumbers">453</td><td class="ins"><ins>+	 * @private</ins></td></tr>
<tr id="218"><td class="linenumbers"> </td><td class="linenumbers">454</td><td class="ins"><ins>+	 */</ins></td></tr>
<tr id="219"><td class="linenumbers"> </td><td class="linenumbers">455</td><td class="ins"><ins>+	function getTitlePattern() {</ins></td></tr>
<tr id="220"><td class="linenumbers"> </td><td class="linenumbers">456</td><td class="ins"><ins>+		$pattern = $this->reader->queryPattern();</ins></td></tr>
<tr id="221"><td class="linenumbers"> </td><td class="linenumbers">457</td><td class="ins"><ins>+		return Xml::checkLabel( wfMsg( 'title-pattern' ), 'pattern', 'pattern', $pattern );</ins></td></tr>
<tr id="222"><td class="linenumbers"> </td><td class="linenumbers">458</td><td class="ins"><ins>+	}</ins></td></tr>
<tr id="223"><td class="linenumbers"> </td><td class="linenumbers">459</td><td class="ins"><ins>+</ins></td></tr>
<tr id="224"><td class="linenumbers"> </td><td class="linenumbers">460</td><td class="ins"><ins>+	/**</ins></td></tr>
<tr id="225"><td class="linenumbers">432</td><td class="linenumbers">461</td><td class="unchanged"><span> 	 * @param OutputPage &amp;$out where to send output</span></td></tr>
<tr id="226"><td class="linenumbers">433</td><td class="linenumbers">462</td><td class="unchanged"><span> 	 * @private</span></td></tr>
<tr id="227"><td class="linenumbers">434</td><td class="linenumbers">463</td><td class="unchanged"><span> 	 */</span></td></tr>
<tr id="228"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -437,6 +466,7 @@</span></td></tr>
<tr id="229"><td class="linenumbers">438</td><td class="linenumbers">467</td><td class="unchanged"><span> 		$pieces[] = 'type=' . urlencode( $this->reader->queryType() );</span></td></tr>
<tr id="230"><td class="linenumbers">439</td><td class="linenumbers">468</td><td class="unchanged"><span> 		$pieces[] = 'user=' . urlencode( $this->reader->queryUser() );</span></td></tr>
<tr id="231"><td class="linenumbers">440</td><td class="linenumbers">469</td><td class="unchanged"><span> 		$pieces[] = 'page=' . urlencode( $this->reader->queryTitle() );</span></td></tr>
<tr id="232"><td class="linenumbers"> </td><td class="linenumbers">470</td><td class="ins"><ins>+		$pieces[] = 'pattern=' . urlencode( $this->reader->queryPattern() );</ins></td></tr>
<tr id="233"><td class="linenumbers">441</td><td class="linenumbers">471</td><td class="unchanged"><span> 		$bits = implode( '&amp;', $pieces );</span></td></tr>
<tr id="234"><td class="linenumbers">442</td><td class="linenumbers">472</td><td class="unchanged"><span> 		list( $limit, $offset ) = $wgRequest->getLimitOffset();</span></td></tr>
<tr id="235"><td class="linenumbers">443</td><td class="linenumbers">473</td><td class="unchanged"><span> </span></td></tr>
<tr id="236" class="patchedfile"><td colspan="3">Index: trunk/phase3/maintenance/language/messages.inc</td></tr>



<tr id="240"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -976,9 +976,14 @@</span></td></tr>
<tr id="241"><td class="linenumbers">977</td><td class="linenumbers">977</td><td class="unchanged"><span> 		'pubmedurl',</span></td></tr>
<tr id="242"><td class="linenumbers">978</td><td class="linenumbers">978</td><td class="unchanged"><span> 		'alphaindexline',</span></td></tr>
<tr id="243"><td class="linenumbers">979</td><td class="linenumbers">979</td><td class="unchanged"><span> 		'version',</span></td></tr>
<tr id="244"><td class="linenumbers"> </td><td class="linenumbers">980</td><td class="ins"><ins>+	),</ins></td></tr>
<tr id="245"><td class="linenumbers"> </td><td class="linenumbers">981</td><td class="ins"><ins>+	'logpages' => array(</ins></td></tr>
<tr id="246"><td class="linenumbers">980</td><td class="linenumbers">982</td><td class="unchanged"><span> 		'log',</span></td></tr>
<tr id="247"><td class="linenumbers">981</td><td class="linenumbers">983</td><td class="unchanged"><span> 		'alllogstext',</span></td></tr>
<tr id="248"><td class="linenumbers">982</td><td class="linenumbers">984</td><td class="unchanged"><span> 		'logempty',</span></td></tr>
<tr id="249"><td class="linenumbers"> </td><td class="linenumbers">985</td><td class="ins"><ins>+		'specialloguserlabel',</ins></td></tr>
<tr id="250"><td class="linenumbers"> </td><td class="linenumbers">986</td><td class="ins"><ins>+		'speciallogtitlelabel',</ins></td></tr>
<tr id="251"><td class="linenumbers"> </td><td class="linenumbers">987</td><td class="ins"><ins>+		'title-pattern',</ins></td></tr>
<tr id="252"><td class="linenumbers">983</td><td class="linenumbers">988</td><td class="unchanged"><span> 	),</span></td></tr>
<tr id="253"><td class="linenumbers">984</td><td class="linenumbers">989</td><td class="unchanged"><span> 	'allpages' => array(</span></td></tr>
<tr id="254"><td class="linenumbers">985</td><td class="linenumbers">990</td><td class="unchanged"><span> 		'nextpage',</span></td></tr>
<tr id="255"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -1597,10 +1602,6 @@</span></td></tr>
<tr id="256"><td class="linenumbers">1598</td><td class="linenumbers">1603</td><td class="unchanged"><span> 		'variantname-kk-cn',</span></td></tr>
<tr id="257"><td class="linenumbers">1599</td><td class="linenumbers">1604</td><td class="unchanged"><span> 		'variantname-kk',</span></td></tr>
<tr id="258"><td class="linenumbers">1600</td><td class="linenumbers">1605</td><td class="unchanged"><span> 	),</span></td></tr>
<tr id="259"><td class="linenumbers">1601</td><td class="linenumbers"> </td><td class="del"><del>-	'specialloglabels' => array(</del></td></tr>
<tr id="260"><td class="linenumbers">1602</td><td class="linenumbers"> </td><td class="del"><del>-		'specialloguserlabel',</del></td></tr>
<tr id="261"><td class="linenumbers">1603</td><td class="linenumbers"> </td><td class="del"><del>-		'speciallogtitlelabel',</del></td></tr>
<tr id="262"><td class="linenumbers">1604</td><td class="linenumbers"> </td><td class="del"><del>-	),</del></td></tr>
<tr id="263"><td class="linenumbers">1605</td><td class="linenumbers">1606</td><td class="unchanged"><span> 	'passwordtooshort' => array(</span></td></tr>
<tr id="264"><td class="linenumbers">1606</td><td class="linenumbers">1607</td><td class="unchanged"><span> 		'passwordtooshort',</span></td></tr>
<tr id="265"><td class="linenumbers">1607</td><td class="linenumbers">1608</td><td class="unchanged"><span> 	),</span></td></tr>
<tr id="266"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -2099,6 +2100,7 @@</span></td></tr>
<tr id="267"><td class="linenumbers">2100</td><td class="linenumbers">2101</td><td class="unchanged"><span> 	'specialpages'        => 'Miscellaneous special pages',</span></td></tr>
<tr id="268"><td class="linenumbers">2101</td><td class="linenumbers">2102</td><td class="unchanged"><span> 	'booksources'         => 'Book sources',</span></td></tr>
<tr id="269"><td class="linenumbers">2102</td><td class="linenumbers">2103</td><td class="unchanged"><span> 	'specialpages2'       => '',</span></td></tr>
<tr id="270"><td class="linenumbers"> </td><td class="linenumbers">2104</td><td class="ins"><ins>+	'logpages'            => 'Special:Logs',</ins></td></tr>
<tr id="271"><td class="linenumbers">2103</td><td class="linenumbers">2105</td><td class="unchanged"><span> 	'allpages'            => 'Special:Allpages',</span></td></tr>
<tr id="272"><td class="linenumbers">2104</td><td class="linenumbers">2106</td><td class="unchanged"><span> 	'listusers'           => 'Special:Listusers',</span></td></tr>
<tr id="273"><td class="linenumbers">2105</td><td class="linenumbers">2107</td><td class="unchanged"><span> 	'emailuser'           => 'E-mail user',</span></td></tr>
<tr id="274"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -2142,7 +2144,6 @@</span></td></tr>
<tr id="275"><td class="linenumbers">2143</td><td class="linenumbers">2145</td><td class="unchanged"><span> Variants for Chinese language",</span></td></tr>
<tr id="276"><td class="linenumbers">2144</td><td class="linenumbers">2146</td><td class="unchanged"><span> 	'variantname-sr'      => 'Variants for Serbian language',</span></td></tr>
<tr id="277"><td class="linenumbers">2145</td><td class="linenumbers">2147</td><td class="unchanged"><span> 	'variantname-kk'      => 'Variants for Kazakh language',</span></td></tr>
<tr id="278"><td class="linenumbers">2146</td><td class="linenumbers"> </td><td class="del"><del>-	'specialloglabels'    => 'Labels for User: and Title: on Special:Log pages',</del></td></tr>
<tr id="279"><td class="linenumbers">2147</td><td class="linenumbers">2148</td><td class="unchanged"><span> 	'passwordtooshort'    => '',</span></td></tr>
<tr id="280"><td class="linenumbers">2148</td><td class="linenumbers">2149</td><td class="unchanged"><span> 	'media-info'          => 'Media information',</span></td></tr>
<tr id="281"><td class="linenumbers">2149</td><td class="linenumbers">2150</td><td class="unchanged"><span> 	'metadata'            => 'Metadata',</span></td></tr>
</table>
</div>
<h2 id='code-references'>Follow-up revisions</h2>
<table border='1' class='wikitable'><tr><th>Revision</th><th>Commit summary</th><th>Author</th><th>Date</th></tr><tr class='mw-codereview-status-old'><td><a href="./20419.html" title="Special:Code/MediaWiki/20419">r20419</a></td><td>fix for <a href="./20409.html" title="Special:Code/MediaWiki/20409">r20409</a>. Thanks to VoA.</td><td><a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/author/raymond" title="Special:Code/MediaWiki/author/raymond">raymond</a></td><td>00:04, 14 March 2007</td></tr></table></form></div>
</body>
</html>
 contentType 9 text/html url 64 https://static-codereview.wikimedia.org:443/MediaWiki/20409.html responseCode 3 200 