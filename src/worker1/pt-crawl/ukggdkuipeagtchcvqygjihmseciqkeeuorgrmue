ukggdkuipeagtchcvqygjihmseciqkeeuorgrmue length 5 47826 page 47826 <!DOCTYPE HTML>
<html lang="en">
  <head>
<!-- PDTQ-131 -->
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N3RT7TD');</script>
<!-- End Google Tag Manager -->
    
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Build Matrix - Travis CI</title>
<link rel="stylesheet" href="/assets/stylesheets/main.css">
<link rel="alternate" type="application/rss+xml" title="Travis CI Build Environment Updates" href="https://docs.travis-ci.com/feed.build-env-updates.xml">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" defer></script>

<script src="/assets/javascripts/main.js" type="text/javascript" charset="utf-8" defer></script>
<script src="/assets/javascripts/prism.js" type="text/javascript" charset="utf-8" defer></script>
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@travisci" />
<meta name="twitter:creator" content="@travisci" />
<meta property="og:title" content="Travis CI Documentation" />
<meta property="og:type" content="website" />
<meta property="og:url" content=/user/build-matrix/ />
<meta property="og:description" content="Build Matrix" />
<meta property="og:image" content="/images/TravisCI-Full-Color.png" }} />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="642" />
<meta property="og:image:height" content="201" />
<meta property="og:image:alt" content="Travis CI logo" />


 

  </head>
  <body>
<!-- PDTQ-131 -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N3RT7TD"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <div class="wrapper">

      <header class="top">
  <div class="row topbar">
    <h1 id="logo" class="logo">
  <a href="https://travis-ci.com/" title="Travis CI">Travis</a>
</h1>

    <nav>
      <ul id="navigation" class="navigation">
        <li><a href="https://blog.travis-ci.com">Blog</a></li>
        <li><a href="/">Docs</a></li>
        <li class="toggle"><button type="button" id="toggle-menu" class="button--teal">Menu</button></li>
      </ul>
    </nav>
  </div>
</header>


      <div id="content" class="row">

        <div id="sidebar" class="sidebar">
  <div>
    <!-- <h2>Search</h2> -->
    <div class="searchbox">
      <form>
        <input type="text" id="st-search-input" class="searchbox-input" placeholder="Search the docs" />
      </form>
      <script type="text/javascript">
      var Swiftype = window.Swiftype || {};
        (function() {
          Swiftype.key = 'tXvDDzd4fNTBnLvxfEyx';

          Swiftype.searchSearchFields = {
            "page": ["title, body, tags"]
          };
          Swiftype.autocompleteSearchFields = {
            "page": ["title, body, tags"]
          };
          /** DO NOT EDIT BELOW THIS LINE **/
          var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
          script.src = "//swiftype.com/embed.js";
          var entry = document.getElementsByTagName('script')[0];
          document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
        }());
      </script>
    </div>
  </div>

  <section class="sidebar-navigation">
    <nav>
      <h3>Getting Started</h3>
      <ul>
        <li><a href="/user/for-beginners/">Core Concepts for Beginners</a></li>
        <li><a href="/user/tutorial/">Travis CI Tutorial</a></li>
        <li><a href="/user/customizing-the-build/">Customizing the Build</a></li>
        <li><a href="/user/speeding-up-the-build/">Speeding up the Build</a></li>
        <li><a href="/user/docker/">Using Docker in your Build</a></li>
        <li><a href="/user/gui-and-headless-browsers/">Headless Testing with Browsers</a></li>
        <li><a href="/user/pull-requests/">Building Pull Requests</a></li>
        <li><a href="/user/cron-jobs/">Cron Jobs</a></li>
        <li><a href="/user/common-build-problems/">Common Build Problems</a></li>
        <li><a href="https://github.com/travis-ci/travis#readme">Command Line Client</a></li>
        <li><a href="/user/build-config-imports/">Build Config Imports</a></li>
        <li><a href="/user/build-config-validation/">Build Config Validation</a></li>
      </ul>

      <h3>Jobs, Builds, Matrices and Stages</h3>
      <ul>
        <li><a href="/user/job-lifecycle/">Job Lifecycle</a></li>
        <li><a href="/user/build-matrix/">Build Matrix</a></li>
        <li><a href="/user/build-stages/">Build Stages</a></li>
        <li><a href="/user/conditional-builds-stages-jobs/">Conditional Builds, Stages, and Jobs</a></li>
      </ul>

      <h3>Installing Dependencies</h3>
      <ul>
        <li><a href="/user/installing-dependencies/">Installing Dependencies</a></li>
        <li><a href="/user/private-dependencies/">Private Dependencies GitHub</a></li>
        <li><a href="/user/private-dependencies-bb/">Private Dependencies Bitbucket</a></li>
        <li><a href="/user/database-setup/">Setting up Services and Databases</a></li>
        <li><a href="/user/caching/">Caching Dependencies</a></li>
        <li><a href="/user/using-workspaces/">Caching Dependencies within a Build (Workspaces)</a></li>
        <li><a href="/user/ssh-known-hosts/">Adding to SSH Known Hosts</a></li>
      </ul>

      <h3>Programming Languages</h3>
      <ul>
      
        <li><a href="/user/languages/android/">Android</a></li>
      
        <li><a href="/user/languages/c/">C</a></li>
      
        <li><a href="/user/languages/csharp/">C#</a></li>
      
        <li><a href="/user/languages/cpp/">C++</a></li>
      
        <li><a href="/user/languages/clojure/">Clojure</a></li>
      
        <li><a href="/user/languages/crystal/">Crystal</a></li>
      
        <li><a href="/user/languages/d/">D</a></li>
      
        <li><a href="/user/languages/dart/">Dart</a></li>
      
        <li><a href="/user/languages/elixir/">Elixir</a></li>
      
        <li><a href="/user/languages/elm/">Elm</a></li>
      
        <li><a href="/user/languages/erlang/">Erlang</a></li>
      
        <li><a href="/user/languages/csharp/">F#</a></li>
      
        <li><a href="/user/languages/minimal-and-generic/">Generic</a></li>
      
        <li><a href="/user/languages/go/">Go</a></li>
      
        <li><a href="/user/languages/groovy/">Groovy</a></li>
      
        <li><a href="/user/languages/haskell/">Haskell</a></li>
      
        <li><a href="/user/languages/haxe/">Haxe</a></li>
      
        <li><a href="/user/languages/java/">Java</a></li>
      
        <li><a href="/user/languages/javascript-with-nodejs/">JavaScript <small>(with Node.js)</small></a></li>
      
        <li><a href="/user/languages/julia/">Julia</a></li>
      
        <li><a href="/user/languages/matlab/">MATLAB</a></li>
      
        <li><a href="/user/languages/minimal-and-generic/">Minimal</a></li>
      
        <li><a href="/user/languages/nix/">Nix</a></li>
      
        <li><a href="/user/languages/objective-c/">Objective-C</a></li>
      
        <li><a href="/user/languages/perl/">Perl</a></li>
      
        <li><a href="/user/languages/perl6/">Perl6</a></li>
      
        <li><a href="/user/languages/php/">PHP</a></li>
      
        <li><a href="/user/languages/python/">Python</a></li>
      
        <li><a href="/user/languages/r/">R</a></li>
      
        <li><a href="/user/languages/ruby/">Ruby</a></li>
      
        <li><a href="/user/languages/rust/">Rust</a></li>
      
        <li><a href="/user/languages/scala/">Scala</a></li>
      
        <li><a href="/user/languages/smalltalk/">Smalltalk</a></li>
      
        <li><a href="/user/languages/objective-c/">Swift</a></li>
      
        <li><a href="/user/languages/csharp/">Visual Basic</a></li>
      
        <li><a href="/user/languages/community-supported-languages/">Adding a language</a></li>
      </ul>

      <h3>Deployments and Uploads</h3>
      <ul>
        
          <li class="is-overview"><a href="/user/deployment/">Overview</a></li>
          
        
        
          <li><a href="/user/deployment/anynines/">anynines</a></li>
        
          <li><a href="/user/deployment/atlas/">Atlas</a></li>
        
          <li><a href="/user/deployment/codedeploy/">AWS CodeDeploy</a></li>
        
          <li><a href="/user/deployment/elasticbeanstalk/">AWS Elastic Beanstalk</a></li>
        
          <li><a href="/user/deployment/lambda/">AWS Lambda</a></li>
        
          <li><a href="/user/deployment/opsworks/">AWS OpsWorks</a></li>
        
          <li><a href="/user/deployment/s3/">AWS S3</a></li>
        
          <li><a href="/user/deployment/azure-web-apps/">Azure Web Apps</a></li>
        
          <li><a href="/user/deployment/bintray/">bintray</a></li>
        
          <li><a href="/user/deployment/bitballoon/">BitBalloon</a></li>
        
          <li><a href="/user/deployment/bluemixcloudfoundry/">Bluemix CloudFoundry</a></li>
        
          <li><a href="/user/deployment/boxfuse/">Boxfuse</a></li>
        
          <li><a href="/user/deployment/catalyze/">Catalyze</a></li>
        
          <li><a href="/user/deployment/chefsupermarket/">Chef Supermarket</a></li>
        
          <li><a href="/user/deployment/cloud66/">Cloud 66</a></li>
        
          <li><a href="/user/deployment/cloudfoundry/">CloudFoundry</a></li>
        
          <li><a href="/user/deployment/cargo/">Cargo</a></li>
        
          <li><a href="/user/deployment/engineyard/">Engine Yard</a></li>
        
          <li><a href="/user/deployment/pages/">GitHub Pages</a></li>
        
          <li><a href="/user/deployment/releases/">GitHub Releases</a></li>
        
          <li><a href="/user/deployment/google-app-engine/">Google App Engine</a></li>
        
          <li><a href="/user/deployment/gcs/">Google Cloud Storage</a></li>
        
          <li><a href="/user/deployment/firebase/">Google Firebase</a></li>
        
          <li><a href="/user/deployment/hackage/">Hackage</a></li>
        
          <li><a href="/user/deployment/hephy/">Hephy</a></li>
        
          <li><a href="/user/deployment/heroku/">Heroku</a></li>
        
          <li><a href="/user/deployment/launchpad/">Launchpad</a></li>
        
          <li><a href="/user/deployment/npm/">npm</a></li>
        
          <li><a href="/user/deployment/openshift/">OpenShift</a></li>
        
          <li><a href="/user/deployment/packagecloud/">packagecloud.io</a></li>
        
          <li><a href="/user/deployment/puppetforge/">Puppet Forge</a></li>
        
          <li><a href="/user/deployment/pypi/">PyPI</a></li>
        
          <li><a href="/user/deployment/cloudfiles/">Rackspace Cloud Files</a></li>
        
          <li><a href="/user/deployment/rubygems/">RubyGems</a></li>
        
          <li><a href="/user/deployment/scalingo/">Scalingo</a></li>
        
          <li><a href="/user/deployment/script/">Script</a></li>
        
          <li><a href="/user/deployment/snaps/">Snap Store</a></li>
        
          <li><a href="/user/deployment/surge/">Surge.sh</a></li>
        
          <li><a href="/user/deployment/testfairy/">TestFairy</a></li>
        
          <li><a href="/user/deployment/transifex/">Transifex</a></li>
        
        <li><a href="/user/uploading-artifacts/">Uploading Build Artifacts</a></li>
      </ul>

      <h3>CI Environment Reference</h3>
      <ul>
        <li class="is-overview"><a href="/user/reference/overview/">Overview</a></li>
        <li><a href="/user/reference/linux/">Ubuntu Linux CI Environment References</a></li>
        <li><a href="/user/reference/osx/">macOS CI Environment Reference</a></li>
        <li><a href="/user/reference/windows/">Windows CI Environment Reference</a></li>
        <li><a href="/user/reference/freebsd/">FreeBSD CI Environment Reference</a></li>
        <li><a href="/user/multi-os/">Building on Multiple Operating Systems</a></li>
        <li><a href="/user/multi-cpu-architectures/">Building on Multiple CPU Architectures</a></li>
        <li><a href="/user/environment-variables/">Environment Variables</a></li>
        <li><a href="/user/build-environment-updates/">Build Environment Updates</a></li>
        <li><a href="/user/ip-addresses/">Build Machines IP Addresses</a></li>
      </ul>

      <h3>Security and Secure Software Supply Chain</h3>
      <ul>
        <li><a href="/user/encryption-keys/">Encrypting Sensitive Data</a></li>
        <li><a href="/user/encrypting-files/">Encrypting Files</a></li>
        <li><a href="/user/github-oauth-scopes/">GitHub Permissions used by Travis CI</a></li>
        <li><a href="/user/bb-oauth-scopes/">Bitbucket Permissions used by Travis CI</a></li>
        <li><a href="/user/assembla-oauth-scopes/">Assembla Permissions used by Travis CI</a></li>
        <li><a href="/user/gl-oauth-scopes/">GitLab Permissions used by Travis CI</a></li>
        <li><a href="/user/disable-job-logs/">Disable Job Logs Availability</a></li>
        <li><a href="/user/best-practices-security/">Best Practices in Securing Your Data</a></li>
        <li><a href="/user/securely-signing-software">Securely Signing Software</a></li>
        <li><a href="/user/sbom">Software Bill of Materials</a></li>
      </ul>

      <h3>Integrations and Notifications</h3>
      <ul>
        <li><a href="/user/notifications/">Configuring Notifications</a></li>
        <li><a href="/user/status-images/">Showing Build Status Images</a></li>
        <li><a href="/user/code-climate/">Code Climate</a></li>
        <li><a href="/user/deepsource/">DeepSource</a></li>
        <li><a href="/user/coveralls/">Coveralls</a></li>
        <li><a href="/user/coverity-scan/">Coverity Scan</a></li>
        <li><a href="/user/browserstack/">BrowserStack</a></li>
        <li><a href="/user/sauce-connect/">Sauce Labs</a></li>
        <li><a href="/user/sonarcloud/">SonarCloud</a></li>
        <li><a href="/user/sourceclear/">SourceClear</a></li>
        <li><a href="/user/build-feeds/">Atom Feeds</a></li>
        <li><a href="/user/cc-menu/">CCMenu / CCTray Feeds</a></li>
        <li><a href="/user/integration/platformio/">Embedded Builds with PlatformIO</a></li>
        <li><a href="/user/hashicorp-vault-integration">Hashicorp Vault</a></li>
        <li><a href="/user/apps/">3rd Party Apps, Clients and Tools</a></li>
      </ul>

      <h3>Developer Program</h3>
      <ul>
        <li class="is-overview"><a href="/user/developer/">Overview</a></li>
        <li><a href="https://developer.travis-ci.com/">API V3</a></li>
        <li><a href="/user/triggering-builds/">Triggering Builds with API V3</a></li>
        <li><a href="https://github.com/travis-ci/travis#ruby-library">The Ruby Library</a></li>
      </ul>
      
      <h3>Hosted Billing</h3>
      <ul>
        <li class="is-overview"><a href="/user/billing-overview/">Overview</a></li>
        <li><a href="/user/billing-autorefill/">Auto-refill</a></li>
        <li><a href="/user/billing-faq/">FAQ</a></li>
      </ul>

      <h3>Travis CI Enterprise</h3>
      <ul>
        <li><a href="/user/enterprise/">Enterprise Docs</a></li>
      </ul>

    </nav>
  </section>

  <section class="sidebar-notice">
    <p>This documentation site is Open Source.
      The <a href="https://github.com/travis-ci/docs-travis-ci-com">README in our Git repository</a> explains how to contribute.</p>
    <p>Travis CI relies on Open Source <a href="/user/open_source_license/">licensing information</a>.</p>
  </section>

</div><!-- /#sidebar -->


        <main id="main" class="main" data-swiftype-index='true'>
          
            <aside class="improve-page" data-swiftype-index='false'><a href="https://github.com/travis-ci/docs-travis-ci-com/edit/master/user/build-matrix.md" target="_blank" title="Edit this page on GitHub" class="button-pen" data-proofer-ignore>Improve this page on GitHub</a></aside>
            <h1 class="title">Build Matrix</h1>
          

          


          
            <div id="toc" class="toc">
              <ul class="list-language">
  <li><a href="#matrix-expansion">Matrix Expansion</a></li>
  <li><a href="#listing-individual-jobs">Listing individual jobs</a></li>
  <li><a href="#excluding-jobs">Excluding Jobs</a></li>
  <li><a href="#explicitly-including-jobs">Explicitly Including Jobs</a></li>
  <li><a href="#rows-that-are-allowed-to-fail">Rows that are Allowed to Fail</a></li>
  <li><a href="#fast-finishing">Fast Finishing</a></li>
  <li><a href="#using-different-programming-languages-per-job">Using Different Programming Languages per Job</a></li>
  <li><a href="#job-names">Job Names</a></li>
  <li><a href="#job-uniqueness-and-duplicate-jobs">Job Uniqueness and Duplicate Jobs</a></li>
</ul>

            </div>
          

          <p>A build matrix is made up by several multiple jobs that run in parallel.</p>

<p>This can be useful in many cases, but the two primary reasons to use a build matrix are:</p>

<ul>
  <li><a href="/user/speeding-up-the-build">Reducing the overall build execution time</a></li>
  <li>Running tests against different versions of runtimes or dependencies</li>
</ul>

<p>The examples on this page focus on the latter use case.</p>

<p>There are two ways to define a matrix in the <code class="highlighter-rouge">.travis.yml</code> file:</p>

<ul>
  <li>Using the Matrix Expansion feature</li>
  <li>Listing individual job configs</li>
</ul>

<p>Both features can be combined.</p>

<h2 id="matrix-expansion">Matrix Expansion <a href="#matrix-expansion" class="toc-anchor">#</a></h2>

<p>Certain keys are defined as matrix expansion keys that take arrays of values,
creating an additional job per value. If several matrix expansion keys are
given, this multiplies the number of jobs created.</p>

<p>For example, the following configuration produces a build matrix that expands
to <em>8 individual (2 * 2 * 2)</em> jobs, combining each value from the three
matrix expansion keys <code class="highlighter-rouge">rvm</code>, <code class="highlighter-rouge">gemfile</code>, and <code class="highlighter-rouge">env</code>.</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">rvm</span><span class="pi">:</span>
<span class="pi">-</span> <span class="m">2.5</span>
<span class="pi">-</span> <span class="m">2.2</span>
<span class="na">gemfile</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">gemfiles/Gemfile.rails-3.2.x</span>
<span class="pi">-</span> <span class="s">gemfiles/Gemfile.rails-3.0.x</span>
<span class="na">env</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">ISOLATED=true</span>
<span class="pi">-</span> <span class="s">ISOLATED=false</span>
</code></pre></div></div>

<h2 id="listing-individual-jobs">Listing individual jobs <a href="#listing-individual-jobs" class="toc-anchor">#</a></h2>

<p>In addition, jobs can be specified by adding entries to the key <code class="highlighter-rouge">jobs.include</code>.</p>

<p>For example, if not all of those combinations of the matrix expansion above are
relevant, jobs can be specified individually like so:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">include</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">rvm</span><span class="pi">:</span> <span class="m">2.5</span>
    <span class="na">gemfile</span><span class="pi">:</span> <span class="s">gemfiles/Gemfile.rails-3.2.x</span>
    <span class="na">env</span><span class="pi">:</span> <span class="s">ISOLATED=false</span>
  <span class="pi">-</span> <span class="na">rvm</span><span class="pi">:</span> <span class="m">2.2</span>
    <span class="na">gemfile</span><span class="pi">:</span> <span class="s">gemfiles/Gemfile.rails-3.0.x</span>
    <span class="na">env</span><span class="pi">:</span> <span class="s">ISOLATED=true</span>
</code></pre></div></div>

<blockquote>
  <p>Build matrixes are currently limited to a maximum of <strong>200 jobs</strong> for both
private and public repositories. If you are on an open-source plan, please
remember that Travis CI provides this service free of charge to the
community. So please only specify the matrix you <em>actually need</em>.</p>
</blockquote>

<blockquote>
  <p>You can also have a look at the <a href="https://config.travis-ci.com/ref/language">Language</a> section in our <a href="https://config.travis-ci.com/">Travis CI Build Config Reference</a>.</p>
</blockquote>

<h2 id="excluding-jobs">Excluding Jobs <a href="#excluding-jobs" class="toc-anchor">#</a></h2>

<p>The build matrix expansion sometimes produced unwanted combinations. In that
case it can be convenient to exclude certain combinations using the key
<code class="highlighter-rouge">jobs.exclude</code>, instead of listing all jobs individually.</p>

<p>For example, this would exclude two jobs from the build matrix:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">exclude</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">rvm</span><span class="pi">:</span> <span class="s">1.9.3</span>
    <span class="na">gemfile</span><span class="pi">:</span> <span class="s">gemfiles/Gemfile.rails-2.3.x</span>
    <span class="na">env</span><span class="pi">:</span> <span class="s">ISOLATED=true</span>
  <span class="pi">-</span> <span class="na">rvm</span><span class="pi">:</span> <span class="s">jruby</span>
    <span class="na">gemfile</span><span class="pi">:</span> <span class="s">gemfiles/Gemfile.rails-2.3.x</span>
    <span class="na">env</span><span class="pi">:</span> <span class="s">ISOLATED=true</span>
</code></pre></div></div>

<p>If the jobs you want to exclude from the build matrix share the same matrix
parameters, you can specify only those and omit the varying parts.</p>

<p>Suppose you have:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">ruby</span>
<span class="na">rvm</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">1.9.3</span>
<span class="pi">-</span> <span class="s">2.0.0</span>
<span class="pi">-</span> <span class="s">2.1.0</span>
<span class="na">env</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">DB=mongodb</span>
<span class="pi">-</span> <span class="s">DB=redis</span>
<span class="pi">-</span> <span class="s">DB=mysql</span>
<span class="na">gemfile</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">Gemfile</span>
<span class="pi">-</span> <span class="s">gemfiles/rails4.gemfile</span>
<span class="pi">-</span> <span class="s">gemfiles/rails31.gemfile</span>
<span class="pi">-</span> <span class="s">gemfiles/rails32.gemfile</span>
</code></pre></div></div>

<p>This results in a 3×3×4 build matrix. To exclude all jobs which have <code class="highlighter-rouge">rvm</code> value <code class="highlighter-rouge">2.0.0</code> <em>and</em>
<code class="highlighter-rouge">gemfile</code> value <code class="highlighter-rouge">Gemfile</code>, you can write:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">exclude</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">rvm</span><span class="pi">:</span> <span class="s">2.0.0</span>
    <span class="na">gemfile</span><span class="pi">:</span> <span class="s">Gemfile</span>
</code></pre></div></div>

<p>Which is equivalent to:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">exclude</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">rvm</span><span class="pi">:</span> <span class="s">2.0.0</span>
    <span class="na">gemfile</span><span class="pi">:</span> <span class="s">Gemfile</span>
    <span class="na">env</span><span class="pi">:</span> <span class="s">DB=mongodb</span>
  <span class="pi">-</span> <span class="na">rvm</span><span class="pi">:</span> <span class="s">2.0.0</span>
    <span class="na">gemfile</span><span class="pi">:</span> <span class="s">Gemfile</span>
    <span class="na">env</span><span class="pi">:</span> <span class="s">DB=redis</span>
  <span class="pi">-</span> <span class="na">rvm</span><span class="pi">:</span> <span class="s">2.0.0</span>
    <span class="na">gemfile</span><span class="pi">:</span> <span class="s">Gemfile</span>
    <span class="na">env</span><span class="pi">:</span> <span class="s">DB=mysql</span>
</code></pre></div></div>

<h3 id="excluding-jobs-with-env-value">Excluding jobs with <code class="highlighter-rouge">env</code> value <a href="#excluding-jobs-with-env-value" class="toc-anchor">#</a></h3>

<p>When excluding jobs with <code class="highlighter-rouge">env</code> values, the value must match
<em>exactly</em>.</p>

<p>For example,</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">ruby</span>
<span class="na">rvm</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">1.9.3</span>
<span class="pi">-</span> <span class="s">2.0.0</span>
<span class="pi">-</span> <span class="s">2.1.0</span>
<span class="na">env</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">DB=mongodb SUITE=all</span>
<span class="pi">-</span> <span class="s">DB=mongodb SUITE=compact</span>
<span class="pi">-</span> <span class="s">DB=redis</span>
<span class="pi">-</span> <span class="s">DB=mysql</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">exclude</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">rvm</span><span class="pi">:</span> <span class="s">1.9.3</span>
      <span class="na">env</span><span class="pi">:</span> <span class="s">DB=mongodb</span>
</code></pre></div></div>

<p>defines a 3×4 matrix, because the <code class="highlighter-rouge">env</code> value does not match with
any job defined in the matrix.</p>

<p>To exclude all Ruby 1.9.3 jobs with <code class="highlighter-rouge">DB=mongodb</code> set, write:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">ruby</span>
<span class="na">rvm</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">1.9.3</span>
<span class="pi">-</span> <span class="s">2.0.0</span>
<span class="pi">-</span> <span class="s">2.1.0</span>
<span class="na">env</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">DB=mongodb SUITE=all</span>
<span class="pi">-</span> <span class="s">DB=mongodb SUITE=compact</span>
<span class="pi">-</span> <span class="s">DB=redis</span>
<span class="pi">-</span> <span class="s">DB=mysql</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">exclude</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">rvm</span><span class="pi">:</span> <span class="s">1.9.3</span>
      <span class="na">env</span><span class="pi">:</span> <span class="s">DB=mongodb SUITE=all</span> <span class="c1"># not 'env: DB=mongodb' or 'env: SUITE=all DB=mongodb'</span>
    <span class="pi">-</span> <span class="na">rvm</span><span class="pi">:</span> <span class="s">1.9.3</span>
      <span class="na">env</span><span class="pi">:</span> <span class="s">DB=mongodb SUITE=compact</span> <span class="c1"># not 'env: SUITE=compact DB=mongodb'</span>
</code></pre></div></div>

<h2 id="explicitly-including-jobs">Explicitly Including Jobs <a href="#explicitly-including-jobs" class="toc-anchor">#</a></h2>

<p>It is also possible to include entries into the matrix with <code class="highlighter-rouge">jobs.include</code>:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">include</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">rvm</span><span class="pi">:</span> <span class="s">ruby-head</span>
    <span class="na">gemfile</span><span class="pi">:</span> <span class="s">gemfiles/Gemfile.rails-3.2.x</span>
    <span class="na">env</span><span class="pi">:</span> <span class="s">ISOLATED=false</span>
</code></pre></div></div>

<p>This adds a particular job to the build matrix which has already been populated.</p>

<p>This is useful if you want to only test the latest version of a dependency together with the latest version of the runtime.</p>

<p>You can use this method to create a build matrix containing only specific combinations.
For example,</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">python</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">include</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">python</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2.7"</span>
    <span class="na">env</span><span class="pi">:</span> <span class="s">TEST_SUITE=suite_2_7</span>
  <span class="pi">-</span> <span class="na">python</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.8"</span>
    <span class="na">env</span><span class="pi">:</span> <span class="s">TEST_SUITE=suite_3_8</span>
  <span class="pi">-</span> <span class="na">python</span><span class="pi">:</span> <span class="s2">"</span><span class="s">pypy"</span>
    <span class="na">env</span><span class="pi">:</span> <span class="s">TEST_SUITE=suite_pypy</span>
<span class="na">script</span><span class="pi">:</span> <span class="s">./test.py $TEST_SUITE</span>
</code></pre></div></div>

<p>creates a build matrix with 3 jobs, which runs test suite for each version
of Python.</p>

<h3 id="explicitly-included-jobs-inherit-the-first-value-in-the-array">Explicitly included jobs inherit the first value in the array <a href="#explicitly-included-jobs-inherit-the-first-value-in-the-array" class="toc-anchor">#</a></h3>

<p>The jobs which are explicitly included inherit the first value of the expansion
keys defined.</p>

<p>In this example with a 3-job Python build matrix, each job in <code class="highlighter-rouge">jobs.include</code>
has the <code class="highlighter-rouge">python</code> value set to <code class="highlighter-rouge">'3.8'</code>.
You can explicitly set the python version for a specific entry:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">python</span>
<span class="na">python</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s1">'</span><span class="s">3.8'</span>
  <span class="pi">-</span> <span class="s1">'</span><span class="s">3.7'</span>
  <span class="pi">-</span> <span class="s1">'</span><span class="s">2.7'</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">include</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">python</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span> <span class="c1"># this is not strictly necessary</span>
      <span class="na">env</span><span class="pi">:</span> <span class="s">EXTRA_TESTS=true</span>
    <span class="pi">-</span> <span class="na">python</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.7'</span>
      <span class="na">env</span><span class="pi">:</span> <span class="s">EXTRA_TESTS=true</span>
<span class="na">script</span><span class="pi">:</span> <span class="s">env $EXTRA_TESTS ./test.py $TEST_SUITE</span>
</code></pre></div></div>

<h3 id="explicitly-included-jobs-with-only-one-element-in-the-build-matrix">Explicitly included jobs with only one element in the build matrix <a href="#explicitly-included-jobs-with-only-one-element-in-the-build-matrix" class="toc-anchor">#</a></h3>

<p>As a special case, if your build matrix has only one element <em>and</em> you have
explicitly included jobs, matrix expansion is not done and the explicit jobs
<em>completely</em> define your build. For example:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">python</span>
<span class="na">python</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s1">'</span><span class="s">3.8'</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">include</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">env</span><span class="pi">:</span> <span class="s">EXTRA_TESTS=true</span>
<span class="c1"># only defines one job with `python: 3.8` and `env: EXTRA_TESTS=true`</span>
</code></pre></div></div>

<p>If you need a (sole) job from the matrix in such case, add a blank job entry with curly brackets to the build instruction 
(as that instruction would inherit all values from the matrix):</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">python</span>
<span class="na">python</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s1">'</span><span class="s">3.8'</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">include</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="pi">{}</span>
    <span class="pi">-</span> <span class="na">env</span><span class="pi">:</span> <span class="s">EXTRA_TESTS=true</span>
<span class="c1"># defines two jobs:</span>
<span class="c1">#   - python: 3.8</span>
<span class="c1">#   - python: 3.8</span>
<span class="c1">#     env: EXTRA_TESTS=true</span>
</code></pre></div></div>

<h2 id="rows-that-are-allowed-to-fail">Rows that are Allowed to Fail <a href="#rows-that-are-allowed-to-fail" class="toc-anchor">#</a></h2>

<p>You can define rows that are allowed to fail in the build matrix. Allowed
failures are items in your build matrix that are allowed to fail without causing
the entire build to fail. This lets you add in experimental and
preparatory builds to test against versions or configurations that you are not
ready to officially support.</p>

<p>Define allowed failures in the build matrix as key/value pairs:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">allow_failures</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">rvm</span><span class="pi">:</span> <span class="s">1.9.3</span>
</code></pre></div></div>

<h3 id="matching-jobs-with-allow_failures">Matching Jobs with <code class="highlighter-rouge">allow_failures</code> <a href="#matching-jobs-with-allow_failures" class="toc-anchor">#</a></h3>

<p>When matching jobs against the definitions given in <code class="highlighter-rouge">allow_failures</code>, <em>all</em>
conditions in <code class="highlighter-rouge">allow_failures</code> must be met exactly, and
all the keys in <code class="highlighter-rouge">allow_failures</code> element must exist in the
top level of the build matrix (i.e., not in <code class="highlighter-rouge">jobs.include</code>).</p>

<h4 id="allow_failures-examples"><code class="highlighter-rouge">allow_failures</code> Examples <a href="#allow_failures-examples" class="toc-anchor">#</a></h4>

<p>Consider</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">ruby</span>

<span class="na">rvm</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">2.0.0</span>
<span class="pi">-</span> <span class="s">2.1.6</span>

<span class="na">env</span><span class="pi">:</span>
  <span class="na">global</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">SECRET_VAR1=SECRET1</span>
  <span class="na">jobs</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">SECRET_VAR2=SECRET2</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">allow_failures</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">env</span><span class="pi">:</span> <span class="s">SECRET_VAR1=SECRET1 SECRET_VAR2=SECRET2</span>
</code></pre></div></div>

<p>Here, no job is allowed to fail because no job has the <code class="highlighter-rouge">env</code> value
<code class="highlighter-rouge">SECRET_VAR1=SECRET1 SECRET_VAR2=SECRET2</code>.</p>

<p>Next,</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">php</span>
<span class="na">php</span><span class="pi">:</span>
<span class="pi">-</span> <span class="m">5.6</span>
<span class="pi">-</span> <span class="m">7.0</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">include</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">php</span><span class="pi">:</span> <span class="m">7.0</span>
    <span class="na">env</span><span class="pi">:</span> <span class="s">KEY=VALUE</span>
  <span class="na">allow_failures</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">php</span><span class="pi">:</span> <span class="m">7.0</span>
    <span class="na">env</span><span class="pi">:</span> <span class="s">KEY=VALUE</span>
</code></pre></div></div>

<p>Without the top-level <code class="highlighter-rouge">env</code>, no job will be allowed to fail.</p>

<h2 id="fast-finishing">Fast Finishing <a href="#fast-finishing" class="toc-anchor">#</a></h2>

<p>If some rows in the build matrix are allowed to fail, the build won’t be marked as finished until they have completed.</p>

<p>To mark the build as finished as soon as possible, add <code class="highlighter-rouge">fast_finish: true</code> to the <code class="highlighter-rouge">jobs</code> section of your <code class="highlighter-rouge">.travis.yml</code> like this:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">fast_finish</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<p>Now, the build result will be determined as soon as all the required jobs finish, based on these results, while the rest of the <code class="highlighter-rouge">allow_failures</code> jobs continue to run.</p>

<h2 id="using-different-programming-languages-per-job">Using Different Programming Languages per Job <a href="#using-different-programming-languages-per-job" class="toc-anchor">#</a></h2>
<p>You can also use the <code class="highlighter-rouge">jobs.include</code> feature to have different languages for each job in your build. For example,</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">dist</span><span class="pi">:</span> <span class="s">xenial</span>
<span class="na">language</span><span class="pi">:</span> <span class="s">php</span>
<span class="na">php</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s1">'</span><span class="s">5.6'</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">include</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">language</span><span class="pi">:</span> <span class="s">python</span>
      <span class="na">python</span><span class="pi">:</span> <span class="m">3.8</span>
      <span class="na">script</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">python -c "print('Hi from Python!')"</span>

    <span class="pi">-</span> <span class="na">language</span><span class="pi">:</span> <span class="s">node_js</span>
      <span class="na">node_js</span><span class="pi">:</span> <span class="m">12</span>
      <span class="na">script</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">node -e "console.log('Hi from NodeJS!')"</span>

    <span class="pi">-</span> <span class="na">language</span><span class="pi">:</span> <span class="s">java</span>
      <span class="na">jdk</span><span class="pi">:</span> <span class="s">openjdk8</span>
      <span class="na">script</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">javac -help</span>
</code></pre></div></div>
<p>This creates a build with 3 jobs as follows:</p>

<ul>
  <li>A Python 3.8 job</li>
  <li>A  Node.js 12 job</li>
  <li>A Java OpenJDK 8 job</li>
</ul>

<h2 id="job-names">Job Names <a href="#job-names" class="toc-anchor">#</a></h2>

<p>Jobs listed in <code class="highlighter-rouge">jobs.include</code> can be named by using the key <code class="highlighter-rouge">name</code>, like so:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">include</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Job </span><span class="m">1</span>
    <span class="na">script</span><span class="pi">:</span> <span class="s">echo "Running job 1"</span>

</code></pre></div></div>

<p>This name will appear on the build matrix UI and can be convenient in order to
quickly identify jobs in a large matrix.</p>

<p>Jobs generated through the Matrix Expansion feature cannot be named.</p>

<h2 id="job-uniqueness-and-duplicate-jobs">Job Uniqueness and Duplicate Jobs <a href="#job-uniqueness-and-duplicate-jobs" class="toc-anchor">#</a></h2>

<p>Jobs need to be unique, and duplicate jobs are dropped during the <a href="/user/build-config-validation">Build Config Validation</a>
process.</p>

<p>For example, this config would result in only one job using the <a href="/user/build-config-yaml#private-keys-as-yaml-anchors-and-aliases-and-external-tooling">YAML anchors and aliases</a>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">_shared_job</span><span class="pi">:</span> <span class="nl">&amp;shared_job</span>
  <span class="na">script</span><span class="pi">:</span> <span class="s">echo "shared script config"</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">include</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">&lt;&lt;</span><span class="pi">:</span> <span class="nv">*shared_job</span>
  <span class="pi">-</span> <span class="s">&lt;&lt;</span><span class="pi">:</span> <span class="nv">*shared_job</span>
</code></pre></div></div>

<p>In rare circumstances it can still be desirable to execute multiple jobs with the same config. In such cases, job uniqueness can be achieved by specifying any additional key, e.g. a job name:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">_shared_job</span><span class="pi">:</span> <span class="nl">&amp;shared_job</span>
  <span class="na">script</span><span class="pi">:</span> <span class="s">echo "shared script config"</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">include</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Job </span><span class="m">1</span>
    <span class="s">&lt;&lt;</span><span class="pi">:</span> <span class="nv">*shared_job</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Job </span><span class="m">2</span>
    <span class="s">&lt;&lt;</span><span class="pi">:</span> <span class="nv">*shared_job</span>
</code></pre></div></div>


        </main>
      </div><!-- /#content -->

      <footer class="footer">
  <div class="layout-inner">
    <div class="footer-elem">
      <svg width="142px" height="45.381px" viewBox="0 0 142 45.381" enable-background="new 0 0 142 45.381" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink= "http://www.w3.org/1999/xlink">
        <title>Travis CI Mascot</title>
        <image xlink:href="https://styleguide.travis-ci.com/images/logos/travis-footer-logo-new.svg" x="0" y="0" width="142px" height="45.381px" />
      </svg>
    </div>

    <div class="footer-elem"></div>

    <div class="footer-elem">
      <h3 class="footer-title">©Travis CI, GmbH</h3>
      <address>Rigaer Straße 8<br>10247 Berlin, Germany</address>
      <ul>
        <li><a href="https://travisci.workable.com/" title="Jobs at Travis CI">Work with Travis CI</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Help</h3>
      <ul>
        <li><a href="https://docs.travis-ci.com" title="Travis CI Docs">Documentation</a></li>
        <li><a href="https://changelog.travis-ci.com/">Changelog</a></li>
        <li><a href="https://blog.travis-ci.com/" title="Travis CI Blog">Blog</a></li>
        <li><a href="mailto:support@travis-ci.com" title="Email Travis CI support">Email</a></li>
        <li><a href="https://twitter.com/travisci" title="Travis CI on Twitter">Twitter</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Company</h3>
      <ul>
        <li><a href="/imprint.html" title="Imprint">Imprint</a></li>
        <li><a href="https://ideracorp.com/legal/TravisCI">Legal</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Travis CI Status</h3>
      <ul>
        <li><div class="status-circle none">Status:</div>
          <a href="http://www.traviscistatus.com/">Travis CI Status</a>
        </li>
      </ul>
    </div>
  </div>
</footer>

<script>
 fetch('https://pnpcptp8xh9k.statuspage.io/api/v2/status.json').then(function(response) {
   return response.json();
 }).then(function(data) {
   if (data.status && data.status.indicator) {
     document.querySelector('.status-circle').classList.add(data.status.indicator);
   }
 });
</script>

    </div><!-- /.wrapper -->
  </body>
</html>
 contentType 9 text/html url 49 https://docs.travis-ci.com:443/user/build-matrix/ responseCode 3 200 