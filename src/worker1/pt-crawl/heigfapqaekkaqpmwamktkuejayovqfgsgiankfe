heigfapqaekkaqpmwamktkuejayovqfgsgiankfe length 5 24310 page 24310 
<html>
<head>
<title>r36920 MediaWiki - Code Review archive</title>
<meta charset="utf-8">
<link rel="stylesheet" href="../ext.codereview.styles.css"/>
</head>
<body>
<h1>r36920 MediaWiki - Code Review archive</h1>
<div id="mw-content-text" class="mw-body-content"><form action="/wiki/Special:Code/MediaWiki/36920" method="post"><table class="mw-codereview-meta"><tr><td>Repository:</td><td><a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki" title="Special:Code/MediaWiki">MediaWiki</a></td></tr>
<tr><td>Revision:</td><td>&lt;&#160;<a href="./36919.html" title="Special:Code/MediaWiki/36919">r36919</a>‎ | <b>r36920</b> | <a href="./36921.html" title="Special:Code/MediaWiki/36921">r36921</a>&#160;&gt;</td></tr>
<tr><td>Date:</td><td>15:13, 2 July 2008</td></tr>
<tr><td>Author:</td><td><a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/author/daniel" title="Special:Code/MediaWiki/author/daniel">daniel</a></td></tr>
<tr><td>Status:</td><td>old</td></tr>
<tr><td>Tags:</td><td></td></tr>
<tr><td>Comment:</td><td><div class="mw-codereview-message">optionally show category tree in the sidebar (requires skin update from <a href="./36917.html" title="Special:Code/MediaWiki/36917">r36917</a>)</div></td></tr>
<tr><td>Modified paths:</td><td><div class='mw-codereview-paths mw-content-ltr'><ul>
<li><b>/trunk/extensions/CategoryTree/CategoryTree.i18n.php</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fextensions%2FCategoryTree%2FCategoryTree.i18n.php" title="Special:Code/MediaWiki">history</a>)</li>
<li><b>/trunk/extensions/CategoryTree/CategoryTree.php</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fextensions%2FCategoryTree%2FCategoryTree.php" title="Special:Code/MediaWiki">history</a>)</li>
<li><b>/trunk/extensions/CategoryTree/CategoryTreeFunctions.php</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fextensions%2FCategoryTree%2FCategoryTreeFunctions.php" title="Special:Code/MediaWiki">history</a>)</li>
</ul></div>
</td></tr>
</table>
<h2>Diff <small>[<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki/36920&amp;action=purge" title="Special:Code/MediaWiki/36920">purge</a>]</small></h2><div class='mw-codereview-diff' id='mw-codereview-diff'><table class="mw-codereview-diff"><tr id="1" class="patchedfile"><td colspan="3">Index: trunk/extensions/CategoryTree/CategoryTreeFunctions.php</td></tr>



<tr id="5"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -340,7 +340,7 @@</span></td></tr>
<tr id="6"><td class="linenumbers">341</td><td class="linenumbers">341</td><td class="unchanged"><span> 	* Custom tag implementation. This is called by efCategoryTreeParserHook, which is used to</span></td></tr>
<tr id="7"><td class="linenumbers">342</td><td class="linenumbers">342</td><td class="unchanged"><span> 	* load CategoryTreeFunctions.php on demand.</span></td></tr>
<tr id="8"><td class="linenumbers">343</td><td class="linenumbers">343</td><td class="unchanged"><span> 	*/</span></td></tr>
<tr id="9"><td class="linenumbers">344</td><td class="linenumbers"> </td><td class="del"><del>-	function getTag( &amp;$parser, $category, $hideroot = false, $attr, $depth=1 ) {</del></td></tr>
<tr id="10"><td class="linenumbers"> </td><td class="linenumbers">344</td><td class="ins"><ins>+	function getTag( $parser, $category, $hideroot = false, $attr, $depth=1 ) {</ins></td></tr>
<tr id="11"><td class="linenumbers">345</td><td class="linenumbers">345</td><td class="unchanged"><span> 		global $wgCategoryTreeDisableCache, $wgCategoryTreeDynamicTag;</span></td></tr>
<tr id="12"><td class="linenumbers">346</td><td class="linenumbers">346</td><td class="unchanged"><span> 		static $uniq = 0;</span></td></tr>
<tr id="13"><td class="linenumbers">347</td><td class="linenumbers">347</td><td class="unchanged"><span> </span></td></tr>
<tr id="14"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -348,7 +348,7 @@</span></td></tr>
<tr id="15"><td class="linenumbers">349</td><td class="linenumbers">349</td><td class="unchanged"><span> 		if ( $category === '' ) {</span></td></tr>
<tr id="16"><td class="linenumbers">350</td><td class="linenumbers">350</td><td class="unchanged"><span> 			return false;</span></td></tr>
<tr id="17"><td class="linenumbers">351</td><td class="linenumbers">351</td><td class="unchanged"><span> 		}</span></td></tr>
<tr id="18"><td class="linenumbers">352</td><td class="linenumbers"> </td><td class="del"><del>-		if ( $wgCategoryTreeDisableCache &amp;&amp; !$wgCategoryTreeDynamicTag ) {</del></td></tr>
<tr id="19"><td class="linenumbers"> </td><td class="linenumbers">352</td><td class="ins"><ins>+		if ( $parser &amp;&amp; $wgCategoryTreeDisableCache &amp;&amp; !$wgCategoryTreeDynamicTag ) {</ins></td></tr>
<tr id="20"><td class="linenumbers">353</td><td class="linenumbers">353</td><td class="unchanged"><span> 			$parser->disableCache();</span></td></tr>
<tr id="21"><td class="linenumbers">354</td><td class="linenumbers">354</td><td class="unchanged"><span> 		}</span></td></tr>
<tr id="22"><td class="linenumbers">355</td><td class="linenumbers">355</td><td class="unchanged"><span> 		$title = self::makeTitle( $category );</span></td></tr>
<tr id="23" class="patchedfile"><td colspan="3">Index: trunk/extensions/CategoryTree/CategoryTree.i18n.php</td></tr>



<tr id="27"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -15,7 +15,8 @@</span></td></tr>
<tr id="28"><td class="linenumbers">16</td><td class="linenumbers">16</td><td class="unchanged"><span>  */</span></td></tr>
<tr id="29"><td class="linenumbers">17</td><td class="linenumbers">17</td><td class="unchanged"><span> $messages['en'] = array(</span></td></tr>
<tr id="30"><td class="linenumbers">18</td><td class="linenumbers">18</td><td class="unchanged"><span> 	'categorytree'                  => 'CategoryTree',</span></td></tr>
<tr id="31"><td class="linenumbers">19</td><td class="linenumbers"> </td><td class="del"><del>-	'categorytree-tab'              => 'Tree',</del></td></tr>
<tr id="32"><td class="linenumbers"> </td><td class="linenumbers">19</td><td class="ins"><ins>+	'categorytree-portlet'          => 'Categories',</ins></td></tr>
<tr id="33"><td class="linenumbers"> </td><td class="linenumbers">20</td><td class="ins"><ins>+#	'categorytree-tab'              => 'Tree',</ins></td></tr>
<tr id="34"><td class="linenumbers">20</td><td class="linenumbers">21</td><td class="unchanged"><span> 	'categorytree-legend'           => 'Show category tree',</span></td></tr>
<tr id="35"><td class="linenumbers">21</td><td class="linenumbers">22</td><td class="unchanged"><span> 	'categorytree-desc'             => 'Dynamically navigate the [[Special:CategoryTree|category structure]]',</span></td></tr>
<tr id="36"><td class="linenumbers">22</td><td class="linenumbers">23</td><td class="unchanged"><span> 	'categorytree-header'           => 'Enter a category name to see its contents as a tree structure.</span></td></tr>
<tr id="37"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -592,6 +593,7 @@</span></td></tr>
<tr id="38"><td class="linenumbers">593</td><td class="linenumbers">594</td><td class="unchanged"><span>  */</span></td></tr>
<tr id="39"><td class="linenumbers">594</td><td class="linenumbers">595</td><td class="unchanged"><span> $messages['de'] = array(</span></td></tr>
<tr id="40"><td class="linenumbers">595</td><td class="linenumbers">596</td><td class="unchanged"><span> 	'categorytree'                  => 'Kategorienbaum',</span></td></tr>
<tr id="41"><td class="linenumbers"> </td><td class="linenumbers">597</td><td class="ins"><ins>+	'categorytree-portlet'          => 'Kategorien',</ins></td></tr>
<tr id="42"><td class="linenumbers">596</td><td class="linenumbers">598</td><td class="unchanged"><span> 	'categorytree-tab'              => 'Baum',</span></td></tr>
<tr id="43"><td class="linenumbers">597</td><td class="linenumbers">599</td><td class="unchanged"><span> 	'categorytree-legend'           => 'Zeige Kategorienbaum',</span></td></tr>
<tr id="44"><td class="linenumbers">598</td><td class="linenumbers">600</td><td class="unchanged"><span> 	'categorytree-desc'             => 'Dynamische Navigation für die [[Special:CategoryTree|Kategorien-Struktur]]',</span></td></tr>
<tr id="45" class="patchedfile"><td colspan="3">Index: trunk/extensions/CategoryTree/CategoryTree.php</td></tr>



<tr id="49"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -62,6 +62,7 @@</span></td></tr>
<tr id="50"><td class="linenumbers">63</td><td class="linenumbers">63</td><td class="unchanged"><span> # Set $wgCategoryTreeForceHeaders to true to force the JS and CSS headers for CategoryTree to be included on every page. </span></td></tr>
<tr id="51"><td class="linenumbers">64</td><td class="linenumbers">64</td><td class="unchanged"><span> # May be usefull for using CategoryTree from within system messages, in the sidebar, or a custom skin.</span></td></tr>
<tr id="52"><td class="linenumbers">65</td><td class="linenumbers">65</td><td class="unchanged"><span> $wgCategoryTreeForceHeaders = false; </span></td></tr>
<tr id="53"><td class="linenumbers"> </td><td class="linenumbers">66</td><td class="ins"><ins>+$wgCategoryTreeSidebarRoot = NULL;</ins></td></tr>
<tr id="54"><td class="linenumbers">66</td><td class="linenumbers">67</td><td class="unchanged"><span> </span></td></tr>
<tr id="55"><td class="linenumbers">67</td><td class="linenumbers">68</td><td class="unchanged"><span> $wgCategoryTreeExtPath = '/extensions/CategoryTree';</span></td></tr>
<tr id="56"><td class="linenumbers">68</td><td class="linenumbers">69</td><td class="unchanged"><span> $wgCategoryTreeVersion = '2';  #NOTE: bump this when you change the CSS or JS files!</span></td></tr>
<tr id="57"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -83,6 +84,14 @@</span></td></tr>
<tr id="58"><td class="linenumbers">84</td><td class="linenumbers">85</td><td class="unchanged"><span> $wgCategoryTreeSpecialPageOptions = array(); #Options to be used for Special:CategoryTree</span></td></tr>
<tr id="59"><td class="linenumbers">85</td><td class="linenumbers">86</td><td class="unchanged"><span> $wgCategoryTreeSpecialPageOptions['showcount'] = true;</span></td></tr>
<tr id="60"><td class="linenumbers">86</td><td class="linenumbers">87</td><td class="unchanged"><span> </span></td></tr>
<tr id="61"><td class="linenumbers"> </td><td class="linenumbers">88</td><td class="ins"><ins>+$wgCategoryTreeSidebarOptions = array(); #Options to be used in the sidebar (for use with $wgCategoryTreeSidebarRoot)</ins></td></tr>
<tr id="62"><td class="linenumbers"> </td><td class="linenumbers">89</td><td class="ins"><ins>+$wgCategoryTreeSidebarOptions['mode'] = CT_MODE_CATEGORIES;</ins></td></tr>
<tr id="63"><td class="linenumbers"> </td><td class="linenumbers">90</td><td class="ins"><ins>+$wgCategoryTreeSidebarOptions['hideprefix'] = CT_HIDEPREFIX_CATEGORIES;</ins></td></tr>
<tr id="64"><td class="linenumbers"> </td><td class="linenumbers">91</td><td class="ins"><ins>+$wgCategoryTreeSidebarOptions['showcount'] = false;</ins></td></tr>
<tr id="65"><td class="linenumbers"> </td><td class="linenumbers">92</td><td class="ins"><ins>+$wgCategoryTreeSidebarOptions['hideroot'] = true;</ins></td></tr>
<tr id="66"><td class="linenumbers"> </td><td class="linenumbers">93</td><td class="ins"><ins>+$wgCategoryTreeSidebarOptions['namespaces'] = false; </ins></td></tr>
<tr id="67"><td class="linenumbers"> </td><td class="linenumbers">94</td><td class="ins"><ins>+$wgCategoryTreeSidebarOptions['depth'] = 1;</ins></td></tr>
<tr id="68"><td class="linenumbers"> </td><td class="linenumbers">95</td><td class="ins"><ins>+</ins></td></tr>
<tr id="69"><td class="linenumbers">87</td><td class="linenumbers">96</td><td class="unchanged"><span> /**</span></td></tr>
<tr id="70"><td class="linenumbers">88</td><td class="linenumbers">97</td><td class="unchanged"><span>  * Register extension setup hook and credits</span></td></tr>
<tr id="71"><td class="linenumbers">89</td><td class="linenumbers">98</td><td class="unchanged"><span>  */</span></td></tr>
<tr id="72"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -132,7 +141,7 @@</span></td></tr>
<tr id="73"><td class="linenumbers">133</td><td class="linenumbers">142</td><td class="unchanged"><span> 	global $wgUseAjax, $wgHooks, $wgOut;</span></td></tr>
<tr id="74"><td class="linenumbers">134</td><td class="linenumbers">143</td><td class="unchanged"><span> 	global $wgCategoryTreeDefaultOptions, $wgCategoryTreeDefaultMode, $wgCategoryTreeOmitNamespace;</span></td></tr>
<tr id="75"><td class="linenumbers">135</td><td class="linenumbers">144</td><td class="unchanged"><span> 	global $wgCategoryTreeCategoryPageOptions, $wgCategoryTreeCategoryPageMode;</span></td></tr>
<tr id="76"><td class="linenumbers">136</td><td class="linenumbers"> </td><td class="del"><del>-	global $wgCategoryTreeForceHeaders;</del></td></tr>
<tr id="77"><td class="linenumbers"> </td><td class="linenumbers">145</td><td class="ins"><ins>+	global $wgCategoryTreeSidebarRoot, $wgCategoryTreeForceHeaders;</ins></td></tr>
<tr id="78"><td class="linenumbers">137</td><td class="linenumbers">146</td><td class="unchanged"><span> </span></td></tr>
<tr id="79"><td class="linenumbers">138</td><td class="linenumbers">147</td><td class="unchanged"><span> 	# Abort if AJAX is not enabled</span></td></tr>
<tr id="80"><td class="linenumbers">139</td><td class="linenumbers">148</td><td class="unchanged"><span> 	if ( !$wgUseAjax ) {</span></td></tr>
<tr id="81"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -140,6 +149,11 @@</span></td></tr>
<tr id="82"><td class="linenumbers">141</td><td class="linenumbers">150</td><td class="unchanged"><span> 		return;</span></td></tr>
<tr id="83"><td class="linenumbers">142</td><td class="linenumbers">151</td><td class="unchanged"><span> 	}</span></td></tr>
<tr id="84"><td class="linenumbers">143</td><td class="linenumbers">152</td><td class="unchanged"><span> </span></td></tr>
<tr id="85"><td class="linenumbers"> </td><td class="linenumbers">153</td><td class="ins"><ins>+	if ( $wgCategoryTreeSidebarRoot ) {</ins></td></tr>
<tr id="86"><td class="linenumbers"> </td><td class="linenumbers">154</td><td class="ins"><ins>+		$wgCategoryTreeForceHeaders = true; # needed on every page anyway</ins></td></tr>
<tr id="87"><td class="linenumbers"> </td><td class="linenumbers">155</td><td class="ins"><ins>+		$wgHooks['SkinTemplateOutputPageBeforeExec'][] = 'efCategoryTreeSkinTemplateOutputPageBeforeExec';</ins></td></tr>
<tr id="88"><td class="linenumbers"> </td><td class="linenumbers">156</td><td class="ins"><ins>+	}</ins></td></tr>
<tr id="89"><td class="linenumbers"> </td><td class="linenumbers">157</td><td class="ins"><ins>+</ins></td></tr>
<tr id="90"><td class="linenumbers">144</td><td class="linenumbers">158</td><td class="unchanged"><span> 	if ( defined( 'MW_SUPPORTS_PARSERFIRSTCALLINIT' ) ) {</span></td></tr>
<tr id="91"><td class="linenumbers">145</td><td class="linenumbers">159</td><td class="unchanged"><span> 		$wgHooks['ParserFirstCallInit'][] = 'efCategoryTreeSetHooks';</span></td></tr>
<tr id="92"><td class="linenumbers">146</td><td class="linenumbers">160</td><td class="unchanged"><span> 	} else {</span></td></tr>
<tr id="93"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -274,23 +288,40 @@</span></td></tr>
<tr id="94"><td class="linenumbers">275</td><td class="linenumbers">289</td><td class="unchanged"><span> }</span></td></tr>
<tr id="95"><td class="linenumbers">276</td><td class="linenumbers">290</td><td class="unchanged"><span> </span></td></tr>
<tr id="96"><td class="linenumbers">277</td><td class="linenumbers">291</td><td class="unchanged"><span> /**</span></td></tr>
<tr id="97"><td class="linenumbers"> </td><td class="linenumbers">292</td><td class="ins"><ins>+ * Hook implementation for injecting a category tree into the sidebar.</ins></td></tr>
<tr id="98"><td class="linenumbers"> </td><td class="linenumbers">293</td><td class="ins"><ins>+ * Registered automatically if $wgCategoryTreeSidebarRoot is set to a category name.</ins></td></tr>
<tr id="99"><td class="linenumbers"> </td><td class="linenumbers">294</td><td class="ins"><ins>+ */</ins></td></tr>
<tr id="100"><td class="linenumbers"> </td><td class="linenumbers">295</td><td class="ins"><ins>+function efCategoryTreeSkinTemplateOutputPageBeforeExec( &amp;$skin, &amp;$tpl ) {</ins></td></tr>
<tr id="101"><td class="linenumbers"> </td><td class="linenumbers">296</td><td class="ins"><ins>+	global $wgCategoryTreeSidebarRoot, $wgCategoryTreeSidebarOptions;</ins></td></tr>
<tr id="102"><td class="linenumbers"> </td><td class="linenumbers">297</td><td class="ins"><ins>+	</ins></td></tr>
<tr id="103"><td class="linenumbers"> </td><td class="linenumbers">298</td><td class="ins"><ins>+	$html = efCategoryTreeParserHook( $wgCategoryTreeSidebarRoot, $wgCategoryTreeSidebarOptions );</ins></td></tr>
<tr id="104"><td class="linenumbers"> </td><td class="linenumbers">299</td><td class="ins"><ins>+	if ( $html ) $tpl->data['sidebar']['categorytree-portlet'] = $html; //requires MW 1.13, r36917</ins></td></tr>
<tr id="105"><td class="linenumbers"> </td><td class="linenumbers">300</td><td class="ins"><ins>+</ins></td></tr>
<tr id="106"><td class="linenumbers"> </td><td class="linenumbers">301</td><td class="ins"><ins>+	return true;</ins></td></tr>
<tr id="107"><td class="linenumbers"> </td><td class="linenumbers">302</td><td class="ins"><ins>+}</ins></td></tr>
<tr id="108"><td class="linenumbers"> </td><td class="linenumbers">303</td><td class="ins"><ins>+</ins></td></tr>
<tr id="109"><td class="linenumbers"> </td><td class="linenumbers">304</td><td class="ins"><ins>+</ins></td></tr>
<tr id="110"><td class="linenumbers"> </td><td class="linenumbers">305</td><td class="ins"><ins>+/**</ins></td></tr>
<tr id="111"><td class="linenumbers">278</td><td class="linenumbers">306</td><td class="unchanged"><span>  * Entry point for the &lt;categorytree> tag parser hook.</span></td></tr>
<tr id="112"><td class="linenumbers">279</td><td class="linenumbers">307</td><td class="unchanged"><span>  * This loads CategoryTreeFunctions.php and calls CategoryTree::getTag()</span></td></tr>
<tr id="113"><td class="linenumbers">280</td><td class="linenumbers">308</td><td class="unchanged"><span>  */</span></td></tr>
<tr id="114"><td class="linenumbers">281</td><td class="linenumbers"> </td><td class="del"><del>-function efCategoryTreeParserHook( $cat, $argv, &amp;$parser ) {</del></td></tr>
<tr id="115"><td class="linenumbers">282</td><td class="linenumbers"> </td><td class="del"><del>-	global $wgCategoryTreeDefaultMode;</del></td></tr>
<tr id="116"><td class="linenumbers"> </td><td class="linenumbers">309</td><td class="ins"><ins>+function efCategoryTreeParserHook( $cat, $argv, $parser = NULL ) {</ins></td></tr>
<tr id="117"><td class="linenumbers"> </td><td class="linenumbers">310</td><td class="ins"><ins>+	global $wgCategoryTreeDefaultMode, $wgOut;</ins></td></tr>
<tr id="118"><td class="linenumbers">283</td><td class="linenumbers">311</td><td class="unchanged"><span> </span></td></tr>
<tr id="119"><td class="linenumbers">284</td><td class="linenumbers"> </td><td class="del"><del>-	$parser->mOutput->mCategoryTreeTag = true; # flag for use by efCategoryTreeParserOutput</del></td></tr>
<tr id="120"><td class="linenumbers"> </td><td class="linenumbers">312</td><td class="ins"><ins>+	if ( $parser ) {</ins></td></tr>
<tr id="121"><td class="linenumbers"> </td><td class="linenumbers">313</td><td class="ins"><ins>+		$parser->mOutput->mCategoryTreeTag = true; # flag for use by efCategoryTreeParserOutput</ins></td></tr>
<tr id="122"><td class="linenumbers"> </td><td class="linenumbers">314</td><td class="ins"><ins>+	}</ins></td></tr>
<tr id="123"><td class="linenumbers"> </td><td class="linenumbers">315</td><td class="ins"><ins>+	else {</ins></td></tr>
<tr id="124"><td class="linenumbers"> </td><td class="linenumbers">316</td><td class="ins"><ins>+		CategoryTree::setHeaders( $wgOut );</ins></td></tr>
<tr id="125"><td class="linenumbers"> </td><td class="linenumbers">317</td><td class="ins"><ins>+	}</ins></td></tr>
<tr id="126"><td class="linenumbers">285</td><td class="linenumbers">318</td><td class="unchanged"><span> </span></td></tr>
<tr id="127"><td class="linenumbers">286</td><td class="linenumbers"> </td><td class="del"><del>-	static $initialized = false;</del></td></tr>
<tr id="128"><td class="linenumbers">287</td><td class="linenumbers"> </td><td class="del"><del>-</del></td></tr>
<tr id="129"><td class="linenumbers">288</td><td class="linenumbers">319</td><td class="unchanged"><span> 	$ct = new CategoryTree( $argv );</span></td></tr>
<tr id="130"><td class="linenumbers">289</td><td class="linenumbers">320</td><td class="unchanged"><span> </span></td></tr>
<tr id="131"><td class="linenumbers">290</td><td class="linenumbers">321</td><td class="unchanged"><span> 	$attr = Sanitizer::validateTagAttributes( $argv, 'div' );</span></td></tr>
<tr id="132"><td class="linenumbers">291</td><td class="linenumbers">322</td><td class="unchanged"><span> </span></td></tr>
<tr id="133"><td class="linenumbers">292</td><td class="linenumbers">323</td><td class="unchanged"><span> 	$hideroot = isset( $argv[ 'hideroot' ] ) ? CategoryTree::decodeBoolean( $argv[ 'hideroot' ] ) : null;</span></td></tr>
<tr id="134"><td class="linenumbers">293</td><td class="linenumbers">324</td><td class="unchanged"><span> 	$onlyroot = isset( $argv[ 'onlyroot' ] ) ? CategoryTree::decodeBoolean( $argv[ 'onlyroot' ] ) : null;</span></td></tr>
<tr id="135"><td class="linenumbers">294</td><td class="linenumbers"> </td><td class="del"><del>-	$depthArg = isset( $argv[ 'depth' ] ) ? $argv[ 'depth' ] : null;</del></td></tr>
<tr id="136"><td class="linenumbers"> </td><td class="linenumbers">325</td><td class="ins"><ins>+	$depthArg = isset( $argv[ 'depth' ] ) ? (int)$argv[ 'depth' ] : null;</ins></td></tr>
<tr id="137"><td class="linenumbers">295</td><td class="linenumbers">326</td><td class="unchanged"><span> </span></td></tr>
<tr id="138"><td class="linenumbers">296</td><td class="linenumbers">327</td><td class="unchanged"><span> 	$depth = efCategoryTreeCapDepth( $ct->getOption( 'mode' ), $depthArg );</span></td></tr>
<tr id="139"><td class="linenumbers">297</td><td class="linenumbers">328</td><td class="unchanged"><span> 	if ( $onlyroot ) $depth = 0;</span></td></tr>
</table>
</div>
<h2 id='code-referenced'>Past revisions this follows-up on</h2>
<table border='1' class='wikitable'><tr><th>Revision</th><th>Commit summary</th><th>Author</th><th>Date</th></tr><tr class='mw-codereview-status-old'><td><a href="./36917.html" title="Special:Code/MediaWiki/36917">r36917</a></td><td>Allow raw HTML blocks in data['sidebar'] array. This provides a simple ways f...</td><td><a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/author/daniel" title="Special:Code/MediaWiki/author/daniel">daniel</a></td><td>14:45, 2 July 2008</td></tr></table><h2 id='code-changes'>Status &amp; tagging log</h2>
<ul class='mw-codereview-changes'><li>15:28, 12 September 2011&#160;<a href="https://www.mediawiki.org/wiki/User:Meno25" class="mw-userlink" title="User:Meno25"><bdi>Meno25</bdi></a> <span class="mw-usertoollinks">(<a href="https://www.mediawiki.org/wiki/User_talk:Meno25" class="mw-usertoollinks-talk" title="User talk:Meno25">talk</a> | <a href="https://www.mediawiki.org/wiki/Special:Contributions/Meno25" class="mw-usertoollinks-contribs" title="Special:Contributions/Meno25">contribs</a>)</span>&#160;changed the <b>status</b> of r36920 <i>[<b>removed:</b> ok&#160;<b>added:</b> old]</i></li></ul></form></div>
</body>
</html>
 contentType 9 text/html url 64 https://static-codereview.wikimedia.org:443/MediaWiki/36920.html responseCode 3 200 