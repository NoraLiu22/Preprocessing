lilcmodmvemcbciifiimlkmcnijmwgmsmeggesdg length 5 32647 page 32647 
<html>
<head>
<title>r20385 MediaWiki - Code Review archive</title>
<meta charset="utf-8">
<link rel="stylesheet" href="../ext.codereview.styles.css"/>
</head>
<body>
<h1>r20385 MediaWiki - Code Review archive</h1>
<div id="mw-content-text" class="mw-body-content"><form action="/wiki/Special:Code/MediaWiki/20385" method="post"><table class="mw-codereview-meta"><tr><td>Repository:</td><td><a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki" title="Special:Code/MediaWiki">MediaWiki</a></td></tr>
<tr><td>Revision:</td><td>&lt;&#160;<a href="./20384.html" title="Special:Code/MediaWiki/20384">r20384</a>‎ | <b>r20385</b> | <a href="./20386.html" title="Special:Code/MediaWiki/20386">r20386</a>&#160;&gt;</td></tr>
<tr><td>Date:</td><td>11:39, 13 March 2007</td></tr>
<tr><td>Author:</td><td><a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/author/daniel" title="Special:Code/MediaWiki/author/daniel">daniel</a></td></tr>
<tr><td>Status:</td><td>old</td></tr>
<tr><td>Tags:</td><td></td></tr>
<tr><td>Comment:</td><td><div class="mw-codereview-message">introducing onlyroot option (and removing obsolete email address)</div></td></tr>
<tr><td>Modified paths:</td><td><div class='mw-codereview-paths mw-content-ltr'><ul>
<li><b>/trunk/extensions/CategoryTree/CategoryTree.css</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fextensions%2FCategoryTree%2FCategoryTree.css" title="Special:Code/MediaWiki">history</a>)</li>
<li><b>/trunk/extensions/CategoryTree/CategoryTree.i18n.lt.php</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fextensions%2FCategoryTree%2FCategoryTree.i18n.lt.php" title="Special:Code/MediaWiki">history</a>)</li>
<li><b>/trunk/extensions/CategoryTree/CategoryTree.i18n.nl.php</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fextensions%2FCategoryTree%2FCategoryTree.i18n.nl.php" title="Special:Code/MediaWiki">history</a>)</li>
<li><b>/trunk/extensions/CategoryTree/CategoryTree.i18n.php</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fextensions%2FCategoryTree%2FCategoryTree.i18n.php" title="Special:Code/MediaWiki">history</a>)</li>
<li><b>/trunk/extensions/CategoryTree/CategoryTree.js</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fextensions%2FCategoryTree%2FCategoryTree.js" title="Special:Code/MediaWiki">history</a>)</li>
<li><b>/trunk/extensions/CategoryTree/CategoryTree.php</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fextensions%2FCategoryTree%2FCategoryTree.php" title="Special:Code/MediaWiki">history</a>)</li>
<li><b>/trunk/extensions/CategoryTree/CategoryTreeFunctions.php</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fextensions%2FCategoryTree%2FCategoryTreeFunctions.php" title="Special:Code/MediaWiki">history</a>)</li>
<li><b>/trunk/extensions/CategoryTree/CategoryTreePage.php</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fextensions%2FCategoryTree%2FCategoryTreePage.php" title="Special:Code/MediaWiki">history</a>)</li>
<li><b>/trunk/extensions/CategoryTree/README</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fextensions%2FCategoryTree%2FREADME" title="Special:Code/MediaWiki">history</a>)</li>
</ul></div>
</td></tr>
</table>
<h2>Diff <small>[<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki/20385&amp;action=purge" title="Special:Code/MediaWiki/20385">purge</a>]</small></h2><div class='mw-codereview-diff' id='mw-codereview-diff'><table class="mw-codereview-diff"><tr id="1" class="patchedfile"><td colspan="3">Index: trunk/extensions/CategoryTree/CategoryTree.php</td></tr>



<tr id="5"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -5,8 +5,8 @@</span></td></tr>
<tr id="6"><td class="linenumbers">6</td><td class="linenumbers">6</td><td class="unchanged"><span>  * to display the category structure of a wiki</span></td></tr>
<tr id="7"><td class="linenumbers">7</td><td class="linenumbers">7</td><td class="unchanged"><span>  *</span></td></tr>
<tr id="8"><td class="linenumbers">8</td><td class="linenumbers">8</td><td class="unchanged"><span>  * @addtogroup Extensions</span></td></tr>
<tr id="9"><td class="linenumbers">9</td><td class="linenumbers"> </td><td class="del"><del>- * @author Daniel Kinzler &lt;duesentrieb@brightbyte.de></del></td></tr>
<tr id="10"><td class="linenumbers">10</td><td class="linenumbers"> </td><td class="del"><del>- * @copyright © 2006 Daniel Kinzler</del></td></tr>
<tr id="11"><td class="linenumbers"> </td><td class="linenumbers">9</td><td class="ins"><ins>+ * @author Daniel Kinzler, brightbyte.de</ins></td></tr>
<tr id="12"><td class="linenumbers"> </td><td class="linenumbers">10</td><td class="ins"><ins>+ * @copyright © 2006-2007 Daniel Kinzler</ins></td></tr>
<tr id="13"><td class="linenumbers">11</td><td class="linenumbers">11</td><td class="unchanged"><span>  * @licence GNU General Public Licence 2.0 or later</span></td></tr>
<tr id="14"><td class="linenumbers">12</td><td class="linenumbers">12</td><td class="unchanged"><span>  */</span></td></tr>
<tr id="15"><td class="linenumbers">13</td><td class="linenumbers">13</td><td class="unchanged"><span>  </span></td></tr>
<tr id="16"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -112,6 +112,25 @@</span></td></tr>
<tr id="17"><td class="linenumbers">113</td><td class="linenumbers">113</td><td class="unchanged"><span> }</span></td></tr>
<tr id="18"><td class="linenumbers">114</td><td class="linenumbers">114</td><td class="unchanged"><span> </span></td></tr>
<tr id="19"><td class="linenumbers">115</td><td class="linenumbers">115</td><td class="unchanged"><span> /**</span></td></tr>
<tr id="20"><td class="linenumbers"> </td><td class="linenumbers">116</td><td class="ins"><ins>+* Helper function to convert a string to a boolean value.</ins></td></tr>
<tr id="21"><td class="linenumbers"> </td><td class="linenumbers">117</td><td class="ins"><ins>+* Perhaps make this a global function in MediaWiki proper</ins></td></tr>
<tr id="22"><td class="linenumbers"> </td><td class="linenumbers">118</td><td class="ins"><ins>+*/</ins></td></tr>
<tr id="23"><td class="linenumbers"> </td><td class="linenumbers">119</td><td class="ins"><ins>+function efCategoryTreeAsBool( $s ) {</ins></td></tr>
<tr id="24"><td class="linenumbers"> </td><td class="linenumbers">120</td><td class="ins"><ins>+	if ( is_null( $s ) || is_bool( $s ) ) return $s;</ins></td></tr>
<tr id="25"><td class="linenumbers"> </td><td class="linenumbers">121</td><td class="ins"><ins>+	$s = trim( strtolower( $s ) );</ins></td></tr>
<tr id="26"><td class="linenumbers"> </td><td class="linenumbers">122</td><td class="ins"><ins>+</ins></td></tr>
<tr id="27"><td class="linenumbers"> </td><td class="linenumbers">123</td><td class="ins"><ins>+	if ( $s === '1' || $s === 'yes' || $s === 'on' || $s === 'true' ) {</ins></td></tr>
<tr id="28"><td class="linenumbers"> </td><td class="linenumbers">124</td><td class="ins"><ins>+		return true;</ins></td></tr>
<tr id="29"><td class="linenumbers"> </td><td class="linenumbers">125</td><td class="ins"><ins>+	}</ins></td></tr>
<tr id="30"><td class="linenumbers"> </td><td class="linenumbers">126</td><td class="ins"><ins>+	else if ( $s === '0' || $s === 'no' || $s === 'off' || $s === 'false' ) {</ins></td></tr>
<tr id="31"><td class="linenumbers"> </td><td class="linenumbers">127</td><td class="ins"><ins>+		return false;</ins></td></tr>
<tr id="32"><td class="linenumbers"> </td><td class="linenumbers">128</td><td class="ins"><ins>+	}</ins></td></tr>
<tr id="33"><td class="linenumbers"> </td><td class="linenumbers">129</td><td class="ins"><ins>+	else {</ins></td></tr>
<tr id="34"><td class="linenumbers"> </td><td class="linenumbers">130</td><td class="ins"><ins>+		return NULL;</ins></td></tr>
<tr id="35"><td class="linenumbers"> </td><td class="linenumbers">131</td><td class="ins"><ins>+	}</ins></td></tr>
<tr id="36"><td class="linenumbers"> </td><td class="linenumbers">132</td><td class="ins"><ins>+}</ins></td></tr>
<tr id="37"><td class="linenumbers"> </td><td class="linenumbers">133</td><td class="ins"><ins>+</ins></td></tr>
<tr id="38"><td class="linenumbers"> </td><td class="linenumbers">134</td><td class="ins"><ins>+/**</ins></td></tr>
<tr id="39"><td class="linenumbers">116</td><td class="linenumbers">135</td><td class="unchanged"><span>  * Entry point for the &lt;categorytree> tag parser hook.</span></td></tr>
<tr id="40"><td class="linenumbers">117</td><td class="linenumbers">136</td><td class="unchanged"><span>  * This loads CategoryTreeFunctions.php and calls CategoryTree::getTag()</span></td></tr>
<tr id="41"><td class="linenumbers">118</td><td class="linenumbers">137</td><td class="unchanged"><span>  */</span></td></tr>
<tr id="42"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -135,20 +154,15 @@</span></td></tr>
<tr id="43"><td class="linenumbers">136</td><td class="linenumbers">155</td><td class="unchanged"><span> 		$mode = CT_MODE_CATEGORIES;</span></td></tr>
<tr id="44"><td class="linenumbers">137</td><td class="linenumbers">156</td><td class="unchanged"><span> 	}</span></td></tr>
<tr id="45"><td class="linenumbers">138</td><td class="linenumbers">157</td><td class="unchanged"><span> 	</span></td></tr>
<tr id="46"><td class="linenumbers">139</td><td class="linenumbers"> </td><td class="del"><del>-	$hideroot = isset( $argv[ 'hideroot' ] ) ? $argv[ 'hideroot' ] : null;</del></td></tr>
<tr id="47"><td class="linenumbers">140</td><td class="linenumbers"> </td><td class="del"><del>-	if ( $hideroot !== NULL ) {</del></td></tr>
<tr id="48"><td class="linenumbers">141</td><td class="linenumbers"> </td><td class="del"><del>-		$hideroot = trim( strtolower( $hideroot ) );</del></td></tr>
<tr id="49"><td class="linenumbers">142</td><td class="linenumbers"> </td><td class="del"><del>-		</del></td></tr>
<tr id="50"><td class="linenumbers">143</td><td class="linenumbers"> </td><td class="del"><del>-		if ( $hideroot === '1' || $hideroot === 'yes' || $hideroot === 'on' || $hideroot === 'true' ) {</del></td></tr>
<tr id="51"><td class="linenumbers">144</td><td class="linenumbers"> </td><td class="del"><del>-			$hideroot = true;</del></td></tr>
<tr id="52"><td class="linenumbers">145</td><td class="linenumbers"> </td><td class="del"><del>-		}</del></td></tr>
<tr id="53"><td class="linenumbers">146</td><td class="linenumbers"> </td><td class="del"><del>-		else if ( $hideroot === '0' || $hideroot === 'no' || $hideroot === 'off' || $hideroot === 'false' ) {</del></td></tr>
<tr id="54"><td class="linenumbers">147</td><td class="linenumbers"> </td><td class="del"><del>-			$hideroot = false;</del></td></tr>
<tr id="55"><td class="linenumbers">148</td><td class="linenumbers"> </td><td class="del"><del>-		}</del></td></tr>
<tr id="56"><td class="linenumbers">149</td><td class="linenumbers"> </td><td class="del"><del>-	}</del></td></tr>
<tr id="57"><td class="linenumbers"> </td><td class="linenumbers">158</td><td class="ins"><ins>+	$hideroot = isset( $argv[ 'hideroot' ] ) ? efCategoryTreeAsBool( $argv[ 'hideroot' ] ) : null;</ins></td></tr>
<tr id="58"><td class="linenumbers"> </td><td class="linenumbers">159</td><td class="ins"><ins>+	$onlyroot = isset( $argv[ 'onlyroot' ] ) ? efCategoryTreeAsBool( $argv[ 'onlyroot' ] ) : null;</ins></td></tr>
<tr id="59"><td class="linenumbers">150</td><td class="linenumbers">160</td><td class="unchanged"><span> </span></td></tr>
<tr id="60"><td class="linenumbers"> </td><td class="linenumbers">161</td><td class="ins"><ins>+	if ( $onlyroot ) $display = 'onlyroot';</ins></td></tr>
<tr id="61"><td class="linenumbers"> </td><td class="linenumbers">162</td><td class="ins"><ins>+	else if ( $hideroot ) $display = 'hideroot';</ins></td></tr>
<tr id="62"><td class="linenumbers"> </td><td class="linenumbers">163</td><td class="ins"><ins>+	else $display = 'expandroot';</ins></td></tr>
<tr id="63"><td class="linenumbers"> </td><td class="linenumbers">164</td><td class="ins"><ins>+</ins></td></tr>
<tr id="64"><td class="linenumbers">151</td><td class="linenumbers">165</td><td class="unchanged"><span> 	$ct = new CategoryTree;</span></td></tr>
<tr id="65"><td class="linenumbers">152</td><td class="linenumbers"> </td><td class="del"><del>-	return $ct->getTag( $parser, $cat, $mode, $hideroot, $style );</del></td></tr>
<tr id="66"><td class="linenumbers"> </td><td class="linenumbers">166</td><td class="ins"><ins>+	return $ct->getTag( $parser, $cat, $mode, $display, $style );</ins></td></tr>
<tr id="67"><td class="linenumbers">153</td><td class="linenumbers">167</td><td class="unchanged"><span> }</span></td></tr>
<tr id="68"><td class="linenumbers">154</td><td class="linenumbers">168</td><td class="unchanged"><span> </span></td></tr>
<tr id="69"><td class="linenumbers">155</td><td class="linenumbers">169</td><td class="unchanged"><span> /**</span></td></tr>
<tr id="70" class="patchedfile"><td colspan="3">Index: trunk/extensions/CategoryTree/README</td></tr>



<tr id="74"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -1,6 +1,6 @@</span></td></tr>
<tr id="75"><td class="linenumbers">2</td><td class="linenumbers">2</td><td class="unchanged"><span> --------------------------------------------------------------------------</span></td></tr>
<tr id="76"><td class="linenumbers">3</td><td class="linenumbers">3</td><td class="unchanged"><span> README for the CategoryTree extension</span></td></tr>
<tr id="77"><td class="linenumbers">4</td><td class="linenumbers"> </td><td class="del"><del>-Copyright © 2006 Daniel Kinzler</del></td></tr>
<tr id="78"><td class="linenumbers"> </td><td class="linenumbers">4</td><td class="ins"><ins>+Copyright © 2006-2007 Daniel Kinzler</ins></td></tr>
<tr id="79"><td class="linenumbers">5</td><td class="linenumbers">5</td><td class="unchanged"><span> Licenses: GNU General Public Licence (GPL)</span></td></tr>
<tr id="80"><td class="linenumbers">6</td><td class="linenumbers">6</td><td class="unchanged"><span>           GNU Free Documentation License (GFDL)</span></td></tr>
<tr id="81"><td class="linenumbers">7</td><td class="linenumbers">7</td><td class="unchanged"><span> --------------------------------------------------------------------------</span></td></tr>
<tr id="82"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -49,12 +49,14 @@</span></td></tr>
<tr id="83"><td class="linenumbers">50</td><td class="linenumbers">50</td><td class="unchanged"><span> </span></td></tr>
<tr id="84"><td class="linenumbers">51</td><td class="linenumbers">51</td><td class="unchanged"><span> The custom tag is called &lt;categorytree>. For example, if you put</span></td></tr>
<tr id="85"><td class="linenumbers">52</td><td class="linenumbers">52</td><td class="unchanged"><span> &lt;categorytree>Foo&lt;/categorytree> on a wiki page, it will show the contents</span></td></tr>
<tr id="86"><td class="linenumbers">53</td><td class="linenumbers"> </td><td class="del"><del>-of category Foo as a dynamic tree on that page. The tag accepts three</del></td></tr>
<tr id="87"><td class="linenumbers"> </td><td class="linenumbers">53</td><td class="ins"><ins>+of category Foo as a dynamic tree on that page. The tag accepts the following</ins></td></tr>
<tr id="88"><td class="linenumbers">54</td><td class="linenumbers">54</td><td class="unchanged"><span> attributes, using a HTML-like syntax:</span></td></tr>
<tr id="89"><td class="linenumbers">55</td><td class="linenumbers">55</td><td class="unchanged"><span> </span></td></tr>
<tr id="90"><td class="linenumbers">56</td><td class="linenumbers">56</td><td class="unchanged"><span> * hideroot - set this to "on" to hide the "root" node of the tree, i.e.</span></td></tr>
<tr id="91"><td class="linenumbers">57</td><td class="linenumbers">57</td><td class="unchanged"><span>              the mention of category Foo from the example.</span></td></tr>
<tr id="92"><td class="linenumbers">58</td><td class="linenumbers">58</td><td class="unchanged"><span>              </span></td></tr>
<tr id="93"><td class="linenumbers"> </td><td class="linenumbers">59</td><td class="ins"><ins>+* onlyroot - set this to "on" show only the "root" node of the tree initially</ins></td></tr>
<tr id="94"><td class="linenumbers"> </td><td class="linenumbers">60</td><td class="ins"><ins>+             </ins></td></tr>
<tr id="95"><td class="linenumbers">59</td><td class="linenumbers">61</td><td class="unchanged"><span> * mode - can be "categories" (the default), "pages" or "all". "categories"</span></td></tr>
<tr id="96"><td class="linenumbers">60</td><td class="linenumbers">62</td><td class="unchanged"><span>          only lists subcategories; "pages" lists all pages in the category</span></td></tr>
<tr id="97"><td class="linenumbers">61</td><td class="linenumbers">63</td><td class="unchanged"><span>          except images; "all" shows all pages in the category.</span></td></tr>
<tr id="98" class="patchedfile"><td colspan="3">Index: trunk/extensions/CategoryTree/CategoryTree.i18n.php</td></tr>



<tr id="102"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -4,7 +4,7 @@</span></td></tr>
<tr id="103"><td class="linenumbers">5</td><td class="linenumbers">5</td><td class="unchanged"><span>  * Internationalisation file for the CategoryTree extension</span></td></tr>
<tr id="104"><td class="linenumbers">6</td><td class="linenumbers">6</td><td class="unchanged"><span>  *</span></td></tr>
<tr id="105"><td class="linenumbers">7</td><td class="linenumbers">7</td><td class="unchanged"><span>  * @addtogroup Extensions</span></td></tr>
<tr id="106"><td class="linenumbers">8</td><td class="linenumbers"> </td><td class="del"><del>- * @author Daniel Kinzler &lt;duesentrieb@brightbyte.de></del></td></tr>
<tr id="107"><td class="linenumbers"> </td><td class="linenumbers">8</td><td class="ins"><ins>+ * @author Daniel Kinzler, brightbyte.de</ins></td></tr>
<tr id="108"><td class="linenumbers">9</td><td class="linenumbers">9</td><td class="unchanged"><span>  * @copyright © 2006 Daniel Kinzler</span></td></tr>
<tr id="109"><td class="linenumbers">10</td><td class="linenumbers">10</td><td class="unchanged"><span>  * @licence GNU General Public Licence 2.0 or later</span></td></tr>
<tr id="110"><td class="linenumbers">11</td><td class="linenumbers">11</td><td class="unchanged"><span>  */</span></td></tr>
<tr id="111" class="patchedfile"><td colspan="3">Index: trunk/extensions/CategoryTree/CategoryTree.js</td></tr>



<tr id="115"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -4,7 +4,7 @@</span></td></tr>
<tr id="116"><td class="linenumbers">5</td><td class="linenumbers">5</td><td class="unchanged"><span>  *</span></td></tr>
<tr id="117"><td class="linenumbers">6</td><td class="linenumbers">6</td><td class="unchanged"><span>  * @package MediaWiki</span></td></tr>
<tr id="118"><td class="linenumbers">7</td><td class="linenumbers">7</td><td class="unchanged"><span>  * @subpackage Extensions</span></td></tr>
<tr id="119"><td class="linenumbers">8</td><td class="linenumbers"> </td><td class="del"><del>- * @author Daniel Kinzler &lt;duesentrieb@brightbyte.de></del></td></tr>
<tr id="120"><td class="linenumbers"> </td><td class="linenumbers">8</td><td class="ins"><ins>+ * @author Daniel Kinzler, brightbyte.de</ins></td></tr>
<tr id="121"><td class="linenumbers">9</td><td class="linenumbers">9</td><td class="unchanged"><span>  * @copyright © 2006 Daniel Kinzler</span></td></tr>
<tr id="122"><td class="linenumbers">10</td><td class="linenumbers">10</td><td class="unchanged"><span>  * @licence GNU General Public Licence 2.0 or later</span></td></tr>
<tr id="123"><td class="linenumbers">11</td><td class="linenumbers">11</td><td class="unchanged"><span> */</span></td></tr>
<tr id="124" class="patchedfile"><td colspan="3">Index: trunk/extensions/CategoryTree/CategoryTree.i18n.nl.php</td></tr>



<tr id="128"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -4,7 +4,7 @@</span></td></tr>
<tr id="129"><td class="linenumbers">5</td><td class="linenumbers">5</td><td class="unchanged"><span>  * Internationalisation file for the CategoryTree extension</span></td></tr>
<tr id="130"><td class="linenumbers">6</td><td class="linenumbers">6</td><td class="unchanged"><span>  *</span></td></tr>
<tr id="131"><td class="linenumbers">7</td><td class="linenumbers">7</td><td class="unchanged"><span>  * @addtogroup Extensions</span></td></tr>
<tr id="132"><td class="linenumbers">8</td><td class="linenumbers"> </td><td class="del"><del>- * @author Dutch translation by JePe and Siebrand, source file by Daniel Kinzler &lt;duesentrieb@brightbyte.de></del></td></tr>
<tr id="133"><td class="linenumbers"> </td><td class="linenumbers">8</td><td class="ins"><ins>+ * @author Dutch translation by JePe and Siebrand, source file by Daniel Kinzler, brightbyte.de</ins></td></tr>
<tr id="134"><td class="linenumbers">9</td><td class="linenumbers">9</td><td class="unchanged"><span>  * @copyright © 2006 Daniel Kinzler, JePe, Siebrand</span></td></tr>
<tr id="135"><td class="linenumbers">10</td><td class="linenumbers">10</td><td class="unchanged"><span>  * @licence GNU General Public Licence 2.0 or later</span></td></tr>
<tr id="136"><td class="linenumbers">11</td><td class="linenumbers">11</td><td class="unchanged"><span>  */</span></td></tr>
<tr id="137" class="patchedfile"><td colspan="3">Index: trunk/extensions/CategoryTree/CategoryTreeFunctions.php</td></tr>



<tr id="141"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -5,8 +5,8 @@</span></td></tr>
<tr id="142"><td class="linenumbers">6</td><td class="linenumbers">6</td><td class="unchanged"><span>  * to display the category structure of a wiki</span></td></tr>
<tr id="143"><td class="linenumbers">7</td><td class="linenumbers">7</td><td class="unchanged"><span>  *</span></td></tr>
<tr id="144"><td class="linenumbers">8</td><td class="linenumbers">8</td><td class="unchanged"><span>  * @addtogroup Extensions</span></td></tr>
<tr id="145"><td class="linenumbers">9</td><td class="linenumbers"> </td><td class="del"><del>- * @author Daniel Kinzler &lt;duesentrieb@brightbyte.de></del></td></tr>
<tr id="146"><td class="linenumbers">10</td><td class="linenumbers"> </td><td class="del"><del>- * @copyright © 2006 Daniel Kinzler</del></td></tr>
<tr id="147"><td class="linenumbers"> </td><td class="linenumbers">9</td><td class="ins"><ins>+ * @author Daniel Kinzler, brightbyte.de</ins></td></tr>
<tr id="148"><td class="linenumbers"> </td><td class="linenumbers">10</td><td class="ins"><ins>+ * @copyright © 2006-2007 Daniel Kinzler</ins></td></tr>
<tr id="149"><td class="linenumbers">11</td><td class="linenumbers">11</td><td class="unchanged"><span>  * @licence GNU General Public Licence 2.0 or later</span></td></tr>
<tr id="150"><td class="linenumbers">12</td><td class="linenumbers">12</td><td class="unchanged"><span>  */</span></td></tr>
<tr id="151"><td class="linenumbers">13</td><td class="linenumbers">13</td><td class="unchanged"><span>  </span></td></tr>
<tr id="152"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -113,7 +113,7 @@</span></td></tr>
<tr id="153"><td class="linenumbers">114</td><td class="linenumbers">114</td><td class="unchanged"><span> 	* Custom tag implementation. This is called by efCategoryTreeParserHook, which is used to </span></td></tr>
<tr id="154"><td class="linenumbers">115</td><td class="linenumbers">115</td><td class="unchanged"><span> 	* load CategoryTreeFunctions.php on demand.</span></td></tr>
<tr id="155"><td class="linenumbers">116</td><td class="linenumbers">116</td><td class="unchanged"><span> 	*/</span></td></tr>
<tr id="156"><td class="linenumbers">117</td><td class="linenumbers"> </td><td class="del"><del>-	function getTag( &amp;$parser, $category, $mode, $hideroot = false, $style = '' ) {</del></td></tr>
<tr id="157"><td class="linenumbers"> </td><td class="linenumbers">117</td><td class="ins"><ins>+	function getTag( &amp;$parser, $category, $mode, $display = 'expandroot', $style = '' ) {</ins></td></tr>
<tr id="158"><td class="linenumbers">118</td><td class="linenumbers">118</td><td class="unchanged"><span> 		global $wgCategoryTreeDisableCache, $wgCategoryTreeDynamicTag;</span></td></tr>
<tr id="159"><td class="linenumbers">119</td><td class="linenumbers">119</td><td class="unchanged"><span> 		static $uniq = 0;</span></td></tr>
<tr id="160"><td class="linenumbers">120</td><td class="linenumbers">120</td><td class="unchanged"><span> </span></td></tr>
<tr id="161"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -138,7 +138,7 @@</span></td></tr>
<tr id="162"><td class="linenumbers">139</td><td class="linenumbers">139</td><td class="unchanged"><span> 			$html .= wfCloseElement( 'span' );</span></td></tr>
<tr id="163"><td class="linenumbers">140</td><td class="linenumbers">140</td><td class="unchanged"><span> 			}</span></td></tr>
<tr id="164"><td class="linenumbers">141</td><td class="linenumbers">141</td><td class="unchanged"><span> 		else {</span></td></tr>
<tr id="165"><td class="linenumbers">142</td><td class="linenumbers"> </td><td class="del"><del>-			if ( !$hideroot ) $html .= CategoryTree::renderNode( $title, $mode, true, $wgCategoryTreeDynamicTag );</del></td></tr>
<tr id="166"><td class="linenumbers"> </td><td class="linenumbers">142</td><td class="ins"><ins>+			if ( $display != 'hideroot' ) $html .= CategoryTree::renderNode( $title, $mode, $display != 'onlyroot', $wgCategoryTreeDynamicTag );</ins></td></tr>
<tr id="167"><td class="linenumbers">143</td><td class="linenumbers">143</td><td class="unchanged"><span> 			else if ( !$wgCategoryTreeDynamicTag ) $html .= $this->renderChildren( $title, $mode );</span></td></tr>
<tr id="168"><td class="linenumbers">144</td><td class="linenumbers">144</td><td class="unchanged"><span> 			else {</span></td></tr>
<tr id="169"><td class="linenumbers">145</td><td class="linenumbers">145</td><td class="unchanged"><span> 				$uniq += 1;</span></td></tr>
<tr id="170"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -273,7 +273,7 @@</span></td></tr>
<tr id="171"><td class="linenumbers">274</td><td class="linenumbers">274</td><td class="unchanged"><span> 		</span></td></tr>
<tr id="172"><td class="linenumbers">275</td><td class="linenumbers">275</td><td class="unchanged"><span> 		$load = false;</span></td></tr>
<tr id="173"><td class="linenumbers">276</td><td class="linenumbers">276</td><td class="unchanged"><span> 		</span></td></tr>
<tr id="174"><td class="linenumbers">277</td><td class="linenumbers"> </td><td class="del"><del>-		if ( $loadchildren ) {</del></td></tr>
<tr id="175"><td class="linenumbers"> </td><td class="linenumbers">277</td><td class="ins"><ins>+		if ( $children &amp;&amp; $loadchildren ) {</ins></td></tr>
<tr id="176"><td class="linenumbers">278</td><td class="linenumbers">278</td><td class="unchanged"><span> 			$uniq += 1;</span></td></tr>
<tr id="177"><td class="linenumbers">279</td><td class="linenumbers">279</td><td class="unchanged"><span> </span></td></tr>
<tr id="178"><td class="linenumbers">280</td><td class="linenumbers">280</td><td class="unchanged"><span> 			$load = 'ct-' . $uniq . '-' . mt_rand( 1, 100000 );</span></td></tr>
<tr id="179" class="patchedfile"><td colspan="3">Index: trunk/extensions/CategoryTree/CategoryTree.i18n.lt.php</td></tr>



<tr id="183"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -4,7 +4,7 @@</span></td></tr>
<tr id="184"><td class="linenumbers">5</td><td class="linenumbers">5</td><td class="unchanged"><span>  * Internationalisation file for the CategoryTree extension</span></td></tr>
<tr id="185"><td class="linenumbers">6</td><td class="linenumbers">6</td><td class="unchanged"><span>  *</span></td></tr>
<tr id="186"><td class="linenumbers">7</td><td class="linenumbers">7</td><td class="unchanged"><span>  * @addtogroup Extensions</span></td></tr>
<tr id="187"><td class="linenumbers">8</td><td class="linenumbers"> </td><td class="del"><del>- * @author Daniel Kinzler &lt;duesentrieb@brightbyte.de></del></td></tr>
<tr id="188"><td class="linenumbers"> </td><td class="linenumbers">8</td><td class="ins"><ins>+ * @author Daniel Kinzler, brightbyte.de</ins></td></tr>
<tr id="189"><td class="linenumbers">9</td><td class="linenumbers">9</td><td class="unchanged"><span>  * @copyright © 2006 Daniel Kinzler</span></td></tr>
<tr id="190"><td class="linenumbers">10</td><td class="linenumbers">10</td><td class="unchanged"><span>  * @licence GNU General Public Licence 2.0 or later</span></td></tr>
<tr id="191"><td class="linenumbers">11</td><td class="linenumbers">11</td><td class="unchanged"><span>  */</span></td></tr>
<tr id="192" class="patchedfile"><td colspan="3">Index: trunk/extensions/CategoryTree/CategoryTreePage.php</td></tr>



<tr id="196"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -4,7 +4,7 @@</span></td></tr>
<tr id="197"><td class="linenumbers">5</td><td class="linenumbers">5</td><td class="unchanged"><span>  * to display the category structure of a wiki</span></td></tr>
<tr id="198"><td class="linenumbers">6</td><td class="linenumbers">6</td><td class="unchanged"><span>  *</span></td></tr>
<tr id="199"><td class="linenumbers">7</td><td class="linenumbers">7</td><td class="unchanged"><span>  * @addtogroup Extensions</span></td></tr>
<tr id="200"><td class="linenumbers">8</td><td class="linenumbers"> </td><td class="del"><del>- * @author Daniel Kinzler &lt;duesentrieb@brightbyte.de></del></td></tr>
<tr id="201"><td class="linenumbers"> </td><td class="linenumbers">8</td><td class="ins"><ins>+ * @author Daniel Kinzler, brightbyte.de</ins></td></tr>
<tr id="202"><td class="linenumbers">9</td><td class="linenumbers">9</td><td class="unchanged"><span>  * @copyright © 2006 Daniel Kinzler</span></td></tr>
<tr id="203"><td class="linenumbers">10</td><td class="linenumbers">10</td><td class="unchanged"><span>  * @licence GNU General Public Licence 2.0 or later</span></td></tr>
<tr id="204"><td class="linenumbers">11</td><td class="linenumbers">11</td><td class="unchanged"><span>  */</span></td></tr>
<tr id="205" class="patchedfile"><td colspan="3">Index: trunk/extensions/CategoryTree/CategoryTree.css</td></tr>



<tr id="209"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -4,7 +4,7 @@</span></td></tr>
<tr id="210"><td class="linenumbers">5</td><td class="linenumbers">5</td><td class="unchanged"><span>  *</span></td></tr>
<tr id="211"><td class="linenumbers">6</td><td class="linenumbers">6</td><td class="unchanged"><span>  * @package MediaWiki</span></td></tr>
<tr id="212"><td class="linenumbers">7</td><td class="linenumbers">7</td><td class="unchanged"><span>  * @subpackage Extensions</span></td></tr>
<tr id="213"><td class="linenumbers">8</td><td class="linenumbers"> </td><td class="del"><del>- * @author Daniel Kinzler &lt;duesentrieb@brightbyte.de></del></td></tr>
<tr id="214"><td class="linenumbers"> </td><td class="linenumbers">8</td><td class="ins"><ins>+ * @author Daniel Kinzler, brightbyte.de</ins></td></tr>
<tr id="215"><td class="linenumbers">9</td><td class="linenumbers">9</td><td class="unchanged"><span>  * @copyright © 2006 Daniel Kinzler</span></td></tr>
<tr id="216"><td class="linenumbers">10</td><td class="linenumbers">10</td><td class="unchanged"><span>  * @licence GNU General Public Licence 2.0 or later</span></td></tr>
<tr id="217"><td class="linenumbers">11</td><td class="linenumbers">11</td><td class="unchanged"><span> */</span></td></tr>
</table>
</div>
</form></div>
</body>
</html>
 contentType 9 text/html url 64 https://static-codereview.wikimedia.org:443/MediaWiki/20385.html responseCode 3 200 