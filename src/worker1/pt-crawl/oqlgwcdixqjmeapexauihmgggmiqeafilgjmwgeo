oqlgwcdixqjmeapexauihmgggmiqeafilgjmwgeo length 5 38452 page 38452 <!DOCTYPE HTML>
<html lang="en">
  <head>
<!-- PDTQ-131 -->
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N3RT7TD');</script>
<!-- End Google Tag Manager -->
    
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Encryption keys - Travis CI</title>
<link rel="stylesheet" href="/assets/stylesheets/main.css">
<link rel="alternate" type="application/rss+xml" title="Travis CI Build Environment Updates" href="https://docs.travis-ci.com/feed.build-env-updates.xml">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" defer></script>

<script src="/assets/javascripts/main.js" type="text/javascript" charset="utf-8" defer></script>
<script src="/assets/javascripts/prism.js" type="text/javascript" charset="utf-8" defer></script>
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@travisci" />
<meta name="twitter:creator" content="@travisci" />
<meta property="og:title" content="Travis CI Documentation" />
<meta property="og:type" content="website" />
<meta property="og:url" content=/user/encryption-keys/ />
<meta property="og:description" content="Encryption keys" />
<meta property="og:image" content="/images/TravisCI-Full-Color.png" }} />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="642" />
<meta property="og:image:height" content="201" />
<meta property="og:image:alt" content="Travis CI logo" />


 

  </head>
  <body>
<!-- PDTQ-131 -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N3RT7TD"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <div class="wrapper">

      <header class="top">
  <div class="row topbar">
    <h1 id="logo" class="logo">
  <a href="https://travis-ci.com/" title="Travis CI">Travis</a>
</h1>

    <nav>
      <ul id="navigation" class="navigation">
        <li><a href="https://blog.travis-ci.com">Blog</a></li>
        <li><a href="/">Docs</a></li>
        <li class="toggle"><button type="button" id="toggle-menu" class="button--teal">Menu</button></li>
      </ul>
    </nav>
  </div>
</header>


      <div id="content" class="row">

        <div id="sidebar" class="sidebar">
  <div>
    <!-- <h2>Search</h2> -->
    <div class="searchbox">
      <form>
        <input type="text" id="st-search-input" class="searchbox-input" placeholder="Search the docs" />
      </form>
      <script type="text/javascript">
      var Swiftype = window.Swiftype || {};
        (function() {
          Swiftype.key = 'tXvDDzd4fNTBnLvxfEyx';

          Swiftype.searchSearchFields = {
            "page": ["title, body, tags"]
          };
          Swiftype.autocompleteSearchFields = {
            "page": ["title, body, tags"]
          };
          /** DO NOT EDIT BELOW THIS LINE **/
          var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
          script.src = "//swiftype.com/embed.js";
          var entry = document.getElementsByTagName('script')[0];
          document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
        }());
      </script>
    </div>
  </div>

  <section class="sidebar-navigation">
    <nav>
      <h3>Getting Started</h3>
      <ul>
        <li><a href="/user/for-beginners/">Core Concepts for Beginners</a></li>
        <li><a href="/user/tutorial/">Travis CI Tutorial</a></li>
        <li><a href="/user/customizing-the-build/">Customizing the Build</a></li>
        <li><a href="/user/speeding-up-the-build/">Speeding up the Build</a></li>
        <li><a href="/user/docker/">Using Docker in your Build</a></li>
        <li><a href="/user/gui-and-headless-browsers/">Headless Testing with Browsers</a></li>
        <li><a href="/user/pull-requests/">Building Pull Requests</a></li>
        <li><a href="/user/cron-jobs/">Cron Jobs</a></li>
        <li><a href="/user/common-build-problems/">Common Build Problems</a></li>
        <li><a href="https://github.com/travis-ci/travis#readme">Command Line Client</a></li>
        <li><a href="/user/build-config-imports/">Build Config Imports</a></li>
        <li><a href="/user/build-config-validation/">Build Config Validation</a></li>
      </ul>

      <h3>Jobs, Builds, Matrices and Stages</h3>
      <ul>
        <li><a href="/user/job-lifecycle/">Job Lifecycle</a></li>
        <li><a href="/user/build-matrix/">Build Matrix</a></li>
        <li><a href="/user/build-stages/">Build Stages</a></li>
        <li><a href="/user/conditional-builds-stages-jobs/">Conditional Builds, Stages, and Jobs</a></li>
      </ul>

      <h3>Installing Dependencies</h3>
      <ul>
        <li><a href="/user/installing-dependencies/">Installing Dependencies</a></li>
        <li><a href="/user/private-dependencies/">Private Dependencies GitHub</a></li>
        <li><a href="/user/private-dependencies-bb/">Private Dependencies Bitbucket</a></li>
        <li><a href="/user/database-setup/">Setting up Services and Databases</a></li>
        <li><a href="/user/caching/">Caching Dependencies</a></li>
        <li><a href="/user/using-workspaces/">Caching Dependencies within a Build (Workspaces)</a></li>
        <li><a href="/user/ssh-known-hosts/">Adding to SSH Known Hosts</a></li>
      </ul>

      <h3>Programming Languages</h3>
      <ul>
      
        <li><a href="/user/languages/android/">Android</a></li>
      
        <li><a href="/user/languages/c/">C</a></li>
      
        <li><a href="/user/languages/csharp/">C#</a></li>
      
        <li><a href="/user/languages/cpp/">C++</a></li>
      
        <li><a href="/user/languages/clojure/">Clojure</a></li>
      
        <li><a href="/user/languages/crystal/">Crystal</a></li>
      
        <li><a href="/user/languages/d/">D</a></li>
      
        <li><a href="/user/languages/dart/">Dart</a></li>
      
        <li><a href="/user/languages/elixir/">Elixir</a></li>
      
        <li><a href="/user/languages/elm/">Elm</a></li>
      
        <li><a href="/user/languages/erlang/">Erlang</a></li>
      
        <li><a href="/user/languages/csharp/">F#</a></li>
      
        <li><a href="/user/languages/minimal-and-generic/">Generic</a></li>
      
        <li><a href="/user/languages/go/">Go</a></li>
      
        <li><a href="/user/languages/groovy/">Groovy</a></li>
      
        <li><a href="/user/languages/haskell/">Haskell</a></li>
      
        <li><a href="/user/languages/haxe/">Haxe</a></li>
      
        <li><a href="/user/languages/java/">Java</a></li>
      
        <li><a href="/user/languages/javascript-with-nodejs/">JavaScript <small>(with Node.js)</small></a></li>
      
        <li><a href="/user/languages/julia/">Julia</a></li>
      
        <li><a href="/user/languages/matlab/">MATLAB</a></li>
      
        <li><a href="/user/languages/minimal-and-generic/">Minimal</a></li>
      
        <li><a href="/user/languages/nix/">Nix</a></li>
      
        <li><a href="/user/languages/objective-c/">Objective-C</a></li>
      
        <li><a href="/user/languages/perl/">Perl</a></li>
      
        <li><a href="/user/languages/perl6/">Perl6</a></li>
      
        <li><a href="/user/languages/php/">PHP</a></li>
      
        <li><a href="/user/languages/python/">Python</a></li>
      
        <li><a href="/user/languages/r/">R</a></li>
      
        <li><a href="/user/languages/ruby/">Ruby</a></li>
      
        <li><a href="/user/languages/rust/">Rust</a></li>
      
        <li><a href="/user/languages/scala/">Scala</a></li>
      
        <li><a href="/user/languages/smalltalk/">Smalltalk</a></li>
      
        <li><a href="/user/languages/objective-c/">Swift</a></li>
      
        <li><a href="/user/languages/csharp/">Visual Basic</a></li>
      
        <li><a href="/user/languages/community-supported-languages/">Adding a language</a></li>
      </ul>

      <h3>Deployments and Uploads</h3>
      <ul>
        
          <li class="is-overview"><a href="/user/deployment/">Overview</a></li>
          
        
        
          <li><a href="/user/deployment/anynines/">anynines</a></li>
        
          <li><a href="/user/deployment/atlas/">Atlas</a></li>
        
          <li><a href="/user/deployment/codedeploy/">AWS CodeDeploy</a></li>
        
          <li><a href="/user/deployment/elasticbeanstalk/">AWS Elastic Beanstalk</a></li>
        
          <li><a href="/user/deployment/lambda/">AWS Lambda</a></li>
        
          <li><a href="/user/deployment/opsworks/">AWS OpsWorks</a></li>
        
          <li><a href="/user/deployment/s3/">AWS S3</a></li>
        
          <li><a href="/user/deployment/azure-web-apps/">Azure Web Apps</a></li>
        
          <li><a href="/user/deployment/bintray/">bintray</a></li>
        
          <li><a href="/user/deployment/bitballoon/">BitBalloon</a></li>
        
          <li><a href="/user/deployment/bluemixcloudfoundry/">Bluemix CloudFoundry</a></li>
        
          <li><a href="/user/deployment/boxfuse/">Boxfuse</a></li>
        
          <li><a href="/user/deployment/catalyze/">Catalyze</a></li>
        
          <li><a href="/user/deployment/chefsupermarket/">Chef Supermarket</a></li>
        
          <li><a href="/user/deployment/cloud66/">Cloud 66</a></li>
        
          <li><a href="/user/deployment/cloudfoundry/">CloudFoundry</a></li>
        
          <li><a href="/user/deployment/cargo/">Cargo</a></li>
        
          <li><a href="/user/deployment/engineyard/">Engine Yard</a></li>
        
          <li><a href="/user/deployment/pages/">GitHub Pages</a></li>
        
          <li><a href="/user/deployment/releases/">GitHub Releases</a></li>
        
          <li><a href="/user/deployment/google-app-engine/">Google App Engine</a></li>
        
          <li><a href="/user/deployment/gcs/">Google Cloud Storage</a></li>
        
          <li><a href="/user/deployment/firebase/">Google Firebase</a></li>
        
          <li><a href="/user/deployment/hackage/">Hackage</a></li>
        
          <li><a href="/user/deployment/hephy/">Hephy</a></li>
        
          <li><a href="/user/deployment/heroku/">Heroku</a></li>
        
          <li><a href="/user/deployment/launchpad/">Launchpad</a></li>
        
          <li><a href="/user/deployment/npm/">npm</a></li>
        
          <li><a href="/user/deployment/openshift/">OpenShift</a></li>
        
          <li><a href="/user/deployment/packagecloud/">packagecloud.io</a></li>
        
          <li><a href="/user/deployment/puppetforge/">Puppet Forge</a></li>
        
          <li><a href="/user/deployment/pypi/">PyPI</a></li>
        
          <li><a href="/user/deployment/cloudfiles/">Rackspace Cloud Files</a></li>
        
          <li><a href="/user/deployment/rubygems/">RubyGems</a></li>
        
          <li><a href="/user/deployment/scalingo/">Scalingo</a></li>
        
          <li><a href="/user/deployment/script/">Script</a></li>
        
          <li><a href="/user/deployment/snaps/">Snap Store</a></li>
        
          <li><a href="/user/deployment/surge/">Surge.sh</a></li>
        
          <li><a href="/user/deployment/testfairy/">TestFairy</a></li>
        
          <li><a href="/user/deployment/transifex/">Transifex</a></li>
        
        <li><a href="/user/uploading-artifacts/">Uploading Build Artifacts</a></li>
      </ul>

      <h3>CI Environment Reference</h3>
      <ul>
        <li class="is-overview"><a href="/user/reference/overview/">Overview</a></li>
        <li><a href="/user/reference/linux/">Ubuntu Linux CI Environment References</a></li>
        <li><a href="/user/reference/osx/">macOS CI Environment Reference</a></li>
        <li><a href="/user/reference/windows/">Windows CI Environment Reference</a></li>
        <li><a href="/user/reference/freebsd/">FreeBSD CI Environment Reference</a></li>
        <li><a href="/user/multi-os/">Building on Multiple Operating Systems</a></li>
        <li><a href="/user/multi-cpu-architectures/">Building on Multiple CPU Architectures</a></li>
        <li><a href="/user/environment-variables/">Environment Variables</a></li>
        <li><a href="/user/build-environment-updates/">Build Environment Updates</a></li>
        <li><a href="/user/ip-addresses/">Build Machines IP Addresses</a></li>
      </ul>

      <h3>Security and Secure Software Supply Chain</h3>
      <ul>
        <li><a href="/user/encryption-keys/">Encrypting Sensitive Data</a></li>
        <li><a href="/user/encrypting-files/">Encrypting Files</a></li>
        <li><a href="/user/github-oauth-scopes/">GitHub Permissions used by Travis CI</a></li>
        <li><a href="/user/bb-oauth-scopes/">Bitbucket Permissions used by Travis CI</a></li>
        <li><a href="/user/assembla-oauth-scopes/">Assembla Permissions used by Travis CI</a></li>
        <li><a href="/user/gl-oauth-scopes/">GitLab Permissions used by Travis CI</a></li>
        <li><a href="/user/disable-job-logs/">Disable Job Logs Availability</a></li>
        <li><a href="/user/best-practices-security/">Best Practices in Securing Your Data</a></li>
        <li><a href="/user/securely-signing-software">Securely Signing Software</a></li>
        <li><a href="/user/sbom">Software Bill of Materials</a></li>
      </ul>

      <h3>Integrations and Notifications</h3>
      <ul>
        <li><a href="/user/notifications/">Configuring Notifications</a></li>
        <li><a href="/user/status-images/">Showing Build Status Images</a></li>
        <li><a href="/user/code-climate/">Code Climate</a></li>
        <li><a href="/user/deepsource/">DeepSource</a></li>
        <li><a href="/user/coveralls/">Coveralls</a></li>
        <li><a href="/user/coverity-scan/">Coverity Scan</a></li>
        <li><a href="/user/browserstack/">BrowserStack</a></li>
        <li><a href="/user/sauce-connect/">Sauce Labs</a></li>
        <li><a href="/user/sonarcloud/">SonarCloud</a></li>
        <li><a href="/user/sourceclear/">SourceClear</a></li>
        <li><a href="/user/build-feeds/">Atom Feeds</a></li>
        <li><a href="/user/cc-menu/">CCMenu / CCTray Feeds</a></li>
        <li><a href="/user/integration/platformio/">Embedded Builds with PlatformIO</a></li>
        <li><a href="/user/hashicorp-vault-integration">Hashicorp Vault</a></li>
        <li><a href="/user/apps/">3rd Party Apps, Clients and Tools</a></li>
      </ul>

      <h3>Developer Program</h3>
      <ul>
        <li class="is-overview"><a href="/user/developer/">Overview</a></li>
        <li><a href="https://developer.travis-ci.com/">API V3</a></li>
        <li><a href="/user/triggering-builds/">Triggering Builds with API V3</a></li>
        <li><a href="https://github.com/travis-ci/travis#ruby-library">The Ruby Library</a></li>
      </ul>
      
      <h3>Hosted Billing</h3>
      <ul>
        <li class="is-overview"><a href="/user/billing-overview/">Overview</a></li>
        <li><a href="/user/billing-autorefill/">Auto-refill</a></li>
        <li><a href="/user/billing-faq/">FAQ</a></li>
      </ul>

      <h3>Travis CI Enterprise</h3>
      <ul>
        <li><a href="/user/enterprise/">Enterprise Docs</a></li>
      </ul>

    </nav>
  </section>

  <section class="sidebar-notice">
    <p>This documentation site is Open Source.
      The <a href="https://github.com/travis-ci/docs-travis-ci-com">README in our Git repository</a> explains how to contribute.</p>
    <p>Travis CI relies on Open Source <a href="/user/open_source_license/">licensing information</a>.</p>
  </section>

</div><!-- /#sidebar -->


        <main id="main" class="main" data-swiftype-index='true'>
          
            <aside class="improve-page" data-swiftype-index='false'><a href="https://github.com/travis-ci/docs-travis-ci-com/edit/master/user/encryption-keys.md" target="_blank" title="Edit this page on GitHub" class="button-pen" data-proofer-ignore>Improve this page on GitHub</a></aside>
            <h1 class="title">Encryption keys</h1>
          

          


          
            <div id="toc" class="toc">
              <ul class="list-language">
  <li><a href="#encryption-scheme">Encryption scheme</a></li>
  <li><a href="#usage">Usage</a></li>
  <li><a href="#fetching-the-public-key-for-your-repository">Fetching the public key for your repository</a></li>
</ul>

            </div>
          

          <p><strong>We have separate documentation on <a href="/user/encrypting-files/">encrypting files</a>.</strong></p>

<p>A repository’s <code class="highlighter-rouge">.travis.yml</code> file can have “encrypted values”, such as <a href="/user/environment-variables/">environment variables</a>, notification settings, and deploy api keys. These encrypted values can be added by anyone, but are only readable by Travis CI. The repository owner does not keep any secret key material.</p>

<h3 id="repository-settings---forks">Repository settings - forks <a href="#repository-settings---forks" class="toc-anchor">#</a></h3>

<blockquote>
  <p>Repository security settings for forked repositories on Git are available starting March 1st, 2022.</p>
</blockquote>

<p>For Git repositories, you may manage per repository how the <a href="/user/environment-variables/">environment variables</a> and the <a href="/user/private-dependencies/#user-key">custom SSH keys</a> will be handled in Travis CI when a build triggered as an effect of filing a Pull Request from a forked repository. Two settings are available specifically for this purpose, allowing you to customize your security vs. collaboration setup.</p>

<ul>
  <li><strong>base repository</strong> - a Git repository, which is forked by someone else</li>
  <li><strong>fork</strong> or <strong>forked repository</strong> - any Git repository forked from the <strong>base repository</strong></li>
  <li><strong>PR</strong> - Pull Request (e.g. in GitHub, BitBucket, GitLab) or Merge Request (in Assembla)</li>
</ul>

<blockquote>
  <p>Please note: Repositories activated in <a href="https://app.travis-ci.com">Travis CI</a> before <strong>March 1st, 2022</strong> will have the <code class="highlighter-rouge">Share encrypted environment variables with forks (PRs) </code> setting set to OFF. Please verify your collaboration model if necessary (especially for public repositories). The <code class="highlighter-rouge">Share SSH keys with forks (PRs)</code> will be set to ON for private repositories not to break too many collaboration setups.
Repository settings will be set by default to OFF for any repository activated in <a href="https://app.travis-ci.com">Travis CI</a> after <strong>March 1st, 2022</strong>. For repositories activated in Travis CI after <strong>March 1st, 2022</strong>, you may want to consider changing the default settings depending on your collaboration model.</p>
</blockquote>

<h3 id="share-encrypted-environment-variables-with-forks-prs">Share encrypted environment variables with forks (PRs) <a href="#share-encrypted-environment-variables-with-forks-prs" class="toc-anchor">#</a></h3>

<p>This setting determines if the base repository´s encrypted environment variables will be shared with the forked repository in a fork-to-base pull request (the fork repository merges changes into the base repository).</p>

<p>In the case of a base-to-base pull request (changes are merged from the <strong>base repository</strong> into itself), the encrypted environment variables will always be available. This allows collaborators to file Pull Requests using the repository encrypted environment variables and preserve existing checks configured, e.g. in GitHub.</p>

<p>In the case of a fork-to-fork pull request (changes are merged from the <strong>forked repository</strong> into itself), the encrypted environment variables from the <strong>base repository</strong> will never be available. Therefore, one needs to replace or bypass them directly in <strong>forked repository</strong>.</p>

<p>In the case of a fork-to-base pull request:</p>
<ul>
  <li>If this setting is ON, the encrypted environment variables will be available to the forked repository, which means that builds in the <strong>forked repository</strong> will have access to the encrypted environment variables from the <strong>base repository</strong>. This may be a less secure approach yet allows for a collaboration using forks and Pull Requests (PRs).</li>
  <li>If this setting is OFF and the build relies on any encrypted environment variable, the PR from <strong>fork</strong> to <strong>base repository</strong> will fail. This secures your <strong>base repository</strong> encrypted environmental variables by putting a constraint on accessing them from <strong>forks</strong>.</li>
</ul>

<blockquote>
  <p>Please Note: In the <a href="https://app.travis-ci.com">travis-ci.com</a> environment, Custom SSH keys are only available for private repositories. Read more about <a href="/user/private-dependencies/#user-key">custom SSH keys</a>.</p>
</blockquote>

<blockquote>
  <p>Starting June 2021 travis-ci.org is disabled and therefore no longer supported. Please use travis-ci.com.</p>
</blockquote>

<h2 id="encryption-scheme">Encryption scheme <a href="#encryption-scheme" class="toc-anchor">#</a></h2>

<p>Travis CI uses asymmetric cryptography. For each registered repository, Travis CI generates an RSA keypair.
Travis CI keeps the private key private, but makes the repository’s public key available to those who have access to the repository.</p>

<p>Once the public key is available, anyone (including those without push access to
your repository) can encrypt data which can only be decrypted by Travis CI,
using the corresponding private key.</p>

<h3 id="obtaining-the-public-keys">Obtaining the public keys <a href="#obtaining-the-public-keys" class="toc-anchor">#</a></h3>

<p>The method to obtain the public key depends on where the target repository
exists, and the API version you are using.</p>

<p>Furthermore, the request may require authorization via the <code class="highlighter-rouge">Authorization: token</code>
header depending on the repository’s location and visibility, as well as
the API version used.</p>

<table>
  <caption><tt>Authorization</tt> header requirement</caption>
  <tr>
    <th rowspan="2">Repository visibility and location</th>
    <th rowspan="2">API server</th>
    <th>API v1</th>
    <th>API v3</th>
  </tr>
  <tr>
    <td><tt>/repos/OWNER/REPO/key</tt></td>
    <td><tt>/v3/repo/OWNER%2fREPO/key_pair/generated</tt></td>
  </tr>
  <tr>
    <td>public on .com</td>
    <td><a href="https://api.travis-ci.com">https://api.travis-ci.com</a></td>
    <td>yes<br /></td>
    <td>yes<br /></td>
  </tr>
  <tr>
    <td>private on .com</td>
    <td><a href="https://api.travis-ci.com">https://api.travis-ci.com</a></td>
    <td>yes<br /></td>
    <td>yes</td>
  </tr>
</table>

<blockquote>
  <p>Notice that API v3 endpoints above show the repository name with <code class="highlighter-rouge">%2f</code>.</p>
</blockquote>

<p>If the <code class="highlighter-rouge">Authorization: token</code> header is required, you can obtain the token by
visiting the account page:</p>
<ul>
  <li><a href="https://app.travis-ci.com/account/preferences">travis-ci.com</a></li>
</ul>

<h3 id="examples">Examples <a href="#examples" class="toc-anchor">#</a></h3>

<p>Here are some examples of <code class="highlighter-rouge">curl</code> commands to obtain the public key.</p>

<ol>
  <li>
    <p>A public repository on travis-ci.com using API v1</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl https://api.travis-ci.com/repos/travis-ci/travis-build/key
</code></pre></div>    </div>
  </li>
  <li>
    <p>A public repository on travis-ci.com using API v3</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -H "Authorization: token **TOKEN**" https://api.travis-ci.com/v3/repo/travis-ci%2ftravis-build/key_pair/generated
</code></pre></div>    </div>
  </li>
  <li>
    <p>A private repository on travis-ci.com using API v3</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -H "Authorization: token **TOKEN**" https://api.travis-ci.com/v3/repo/OWNER%2fREPO/key_pair/generated
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="usage">Usage <a href="#usage" class="toc-anchor">#</a></h2>

<p>The easiest way to encrypt something with the public key is to use Travis CLI.
This tool is written in Ruby and published as a gem. First, you need to install
the gem:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gem <span class="nb">install </span>travis
</code></pre></div></div>

<p>If you are using <a href="https://app.travis-ci.com">travis-ci.com</a>, you need to login first:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>travis login <span class="nt">--pro</span>
</code></pre></div></div>

<p>Then, you can use <code class="highlighter-rouge">encrypt</code> command to encrypt data (This example assumes you are running the command in your project directory. If not, add <code class="highlighter-rouge">-r owner/project</code>):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>travis encrypt <span class="nv">SOMEVAR</span><span class="o">=</span><span class="s2">"secretvalue"</span>
</code></pre></div></div>

<p>Or, if you are using <a href="https://app.travis-ci.com">travis-ci.com</a>, you will need to add <code class="highlighter-rouge">--pro</code> to the CLI:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>travis encrypt <span class="nt">--pro</span> <span class="nv">SOMEVAR</span><span class="o">=</span><span class="s2">"secretvalue"</span>
</code></pre></div></div>

<p>This will output a string looking something like:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">secure</span><span class="pi">:</span> <span class="s2">"</span><span class="s">....</span><span class="nv"> </span><span class="s">encrypted</span><span class="nv"> </span><span class="s">data</span><span class="nv"> </span><span class="s">...."</span>
</code></pre></div></div>

<p>Now you can place it in the <code class="highlighter-rouge">.travis.yml</code> file.</p>

<p>You can also skip the above, and add it automatically by running:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>travis encrypt <span class="nv">SOMEVAR</span><span class="o">=</span><span class="s2">"secretvalue"</span> <span class="nt">--add</span>
</code></pre></div></div>

<p>Please note that the name of the environment variable and its value are both encoded in the string produced by “travis encrypt.” You must add the entry to your .travis.yml with key “secure” (underneath the “env” key). This makes the environment variable SOMEVAR with value “secretvalue” available to your program.</p>

<p>You may add multiple entries to your .travis.yml with key “secure.” They will all be available to your program.</p>

<p>Encrypted values can be used in
<a href="/user/environment-variables#defining-encrypted-variables-in-travisyml">secure environment variables in the build matrix</a>
and <a href="/user/notifications">notifications</a>.</p>

<h3 id="note-on-escaping-certain-symbols">Note on escaping certain symbols <a href="#note-on-escaping-certain-symbols" class="toc-anchor">#</a></h3>

<p>When you use <code class="highlighter-rouge">travis encrypt</code> to encrypt sensitive data, it is important to note that it will
be processed as a <code class="highlighter-rouge">bash</code> statement.
This means that secret you are encrypting should not cause errors when <code class="highlighter-rouge">bash</code> parses it.
Having incomplete data will cause <code class="highlighter-rouge">bash</code> to dump the error statement to the log, which
contains portions of your sensitive data.</p>

<p>Thus, you need to escape <a href="http://www.tldp.org/LDP/abs/html/special-chars.html">special characters</a>
such as braces, parentheses, backslashes, and pipe symbols.</p>

<p>For example, you would type <code class="highlighter-rouge">ma&amp;w!doc</code> as <code class="highlighter-rouge">ma\&amp;w\!doc</code>.</p>

<p>And to assign the string <code class="highlighter-rouge">6&amp;a(5!1Ab\</code> to <code class="highlighter-rouge">FOO</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>travis encrypt <span class="s2">"FOO=6</span><span class="se">\\</span><span class="s2">&amp;a</span><span class="se">\\</span><span class="s2">(5</span><span class="se">\\</span><span class="s2">!1Ab</span><span class="se">\\\\</span><span class="s2">"</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">travis</code> encrypts the string <code class="highlighter-rouge">FOO=6\&amp;a\(5\!1Ab\\</code>, which then <code class="highlighter-rouge">bash</code> uses to evaluate in the build environment.</p>

<p>Equivalently, you can do</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>travis encrypt <span class="s1">'FOO=6\&amp;a\(5\!1Ab\\'</span>
</code></pre></div></div>

<h3 id="notifications-example">Notifications Example <a href="#notifications-example" class="toc-anchor">#</a></h3>

<p>We want to add campfire notifications to our .travis.yml file, but we don’t want to publicly expose our API token.</p>

<p>The entry should be in this format:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">notifications</span><span class="pi">:</span>
  <span class="na">campfire</span><span class="pi">:</span>
    <span class="na">rooms</span><span class="pi">:</span> <span class="s2">"</span><span class="s">[subdomain]:[api</span><span class="nv"> </span><span class="s">token]@[room</span><span class="nv"> </span><span class="s">id]"</span>
</code></pre></div></div>

<p>For us, that is somedomain:abcxyz@14.</p>

<p>We encrypt this string</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>travis encrypt somedomain:abcxyz@14
</code></pre></div></div>

<p>Which produces something like this</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Please add the following to your .travis.yml file:

  secure: "ABC5OwLpwB7L6Ca...."
</code></pre></div></div>

<p>We add to our .travis.yml file</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">notifications</span><span class="pi">:</span>
  <span class="na">campfire</span><span class="pi">:</span>
    <span class="na">rooms</span><span class="pi">:</span>
      <span class="na">secure</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ABC5OwLpwB7L6Ca...."</span>
</code></pre></div></div>

<p>And we’re done.</p>

<h3 id="detailed-discussion">Detailed Discussion <a href="#detailed-discussion" class="toc-anchor">#</a></h3>

<p>The secure var system takes values of the form <code class="highlighter-rouge">{ 'secure' =&gt; 'encrypted string' }</code> in the (parsed YAML) configuration and replaces it with the decrypted string.</p>

<p>So</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">notifications</span><span class="pi">:</span>
  <span class="na">campfire</span><span class="pi">:</span>
    <span class="na">rooms</span><span class="pi">:</span>
      <span class="na">secure</span><span class="pi">:</span> <span class="s2">"</span><span class="s">encrypted</span><span class="nv"> </span><span class="s">string"</span>
</code></pre></div></div>

<p>becomes</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">notifications</span><span class="pi">:</span>
  <span class="na">campfire</span><span class="pi">:</span>
    <span class="na">rooms</span><span class="pi">:</span> <span class="s2">"</span><span class="s">decrypted</span><span class="nv"> </span><span class="s">string"</span>
</code></pre></div></div>

<p>while</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">notifications</span><span class="pi">:</span>
  <span class="na">campfire</span><span class="pi">:</span>
    <span class="na">rooms</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">secure</span><span class="pi">:</span> <span class="s2">"</span><span class="s">encrypted</span><span class="nv"> </span><span class="s">string"</span>
</code></pre></div></div>

<p>becomes</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">notifications</span><span class="pi">:</span>
  <span class="na">campfire</span><span class="pi">:</span>
    <span class="na">rooms</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">decrypted</span><span class="nv"> </span><span class="s">string"</span>
</code></pre></div></div>

<p>In the case of secure env vars</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">env</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">secure</span><span class="pi">:</span> <span class="s2">"</span><span class="s">encrypted</span><span class="nv"> </span><span class="s">string"</span>
</code></pre></div></div>

<p>becomes</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">env</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">decrypted</span><span class="nv"> </span><span class="s">string"</span>
</code></pre></div></div>

<h2 id="fetching-the-public-key-for-your-repository">Fetching the public key for your repository <a href="#fetching-the-public-key-for-your-repository" class="toc-anchor">#</a></h2>

<p>You can fetch the public key with Travis API, using <code class="highlighter-rouge">/repos/:owner/:name/key</code> or
<code class="highlighter-rouge">/repos/:id/key</code> endpoints, for example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://api.travis-ci.com/repos/travis-ci/travis-ci/key
</code></pre></div></div>

<p>You can also use the <code class="highlighter-rouge">travis</code> tool for retrieving said key:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>travis pubkey
</code></pre></div></div>

<p>Or, if you’re not in your project directory:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>travis pubkey <span class="nt">-r</span> owner/project
</code></pre></div></div>

<p>Note, travis uses <code class="highlighter-rouge">travis.slug</code> in your project to determine the endpoints if it exists (check by using <code class="highlighter-rouge">git config --local travis.slug</code>), if you rename your repo or move your repo to another user/organization, you might need to change it.</p>


        </main>
      </div><!-- /#content -->

      <footer class="footer">
  <div class="layout-inner">
    <div class="footer-elem">
      <svg width="142px" height="45.381px" viewBox="0 0 142 45.381" enable-background="new 0 0 142 45.381" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink= "http://www.w3.org/1999/xlink">
        <title>Travis CI Mascot</title>
        <image xlink:href="https://styleguide.travis-ci.com/images/logos/travis-footer-logo-new.svg" x="0" y="0" width="142px" height="45.381px" />
      </svg>
    </div>

    <div class="footer-elem"></div>

    <div class="footer-elem">
      <h3 class="footer-title">©Travis CI, GmbH</h3>
      <address>Rigaer Straße 8<br>10247 Berlin, Germany</address>
      <ul>
        <li><a href="https://travisci.workable.com/" title="Jobs at Travis CI">Work with Travis CI</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Help</h3>
      <ul>
        <li><a href="https://docs.travis-ci.com" title="Travis CI Docs">Documentation</a></li>
        <li><a href="https://changelog.travis-ci.com/">Changelog</a></li>
        <li><a href="https://blog.travis-ci.com/" title="Travis CI Blog">Blog</a></li>
        <li><a href="mailto:support@travis-ci.com" title="Email Travis CI support">Email</a></li>
        <li><a href="https://twitter.com/travisci" title="Travis CI on Twitter">Twitter</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Company</h3>
      <ul>
        <li><a href="/imprint.html" title="Imprint">Imprint</a></li>
        <li><a href="https://ideracorp.com/legal/TravisCI">Legal</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Travis CI Status</h3>
      <ul>
        <li><div class="status-circle none">Status:</div>
          <a href="http://www.traviscistatus.com/">Travis CI Status</a>
        </li>
      </ul>
    </div>
  </div>
</footer>

<script>
 fetch('https://pnpcptp8xh9k.statuspage.io/api/v2/status.json').then(function(response) {
   return response.json();
 }).then(function(data) {
   if (data.status && data.status.indicator) {
     document.querySelector('.status-circle').classList.add(data.status.indicator);
   }
 });
</script>

    </div><!-- /.wrapper -->
  </body>
</html>
 contentType 9 text/html url 52 https://docs.travis-ci.com:443/user/encryption-keys/ responseCode 3 200 