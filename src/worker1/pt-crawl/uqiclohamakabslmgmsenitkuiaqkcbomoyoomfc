uqiclohamakabslmgmsenitkuiaqkcbomoyoomfc length 5 11622 page 11622 
<!DOCTYPE html>
<html>
<head>
    <link rel="shortcut icon" href="/static/img/favicon.png" type="image/x-icon">
    <link rel="icon" href="/static/img/favicon.png" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>
nlwiki Articles without content category - Quarry
</title>
    
    <script>
        var vars = {"can_edit": false, "is_starred": false, "preferences": {}, "published": true, "qrun_id": 858518, "query_id": 44259};
    </script>
    
    <!-- Latest compiled and minified CSS with theme -->
    <link rel="stylesheet" href="//tools-static.wmflabs.org/fontcdn/css?family=Open+Sans:300italic,400italic,700italic,400,300,700">
    <link rel="stylesheet" href="/static/vendor/yeti.bootstrap.min.css">

    <link rel="stylesheet" href="/static/css/base.css">
    <script src="//tools-static.wmflabs.org/cdnjs/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="//tools-static.wmflabs.org/cdnjs/ajax/libs/twitter-bootstrap/3.2.0/js/bootstrap.min.js"></script>
    
<link rel="stylesheet" href="//tools-static.wmflabs.org/cdnjs/ajax/libs/codemirror/5.4.0/codemirror.min.css">
<link rel="stylesheet" href="//tools-static.wmflabs.org/cdnjs/ajax/libs/codemirror/5.4.0/theme/monokai.min.css">
<link rel="stylesheet" href="/static/css/query/view.css">
<script src="//tools-static.wmflabs.org/cdnjs/ajax/libs/nunjucks/3.0.1/nunjucks-slim.js"> </script>
<script src="/static/templates/compiled.js"> </script>
<script src="//tools-static.wmflabs.org/cdnjs/ajax/libs/codemirror/5.4.0/codemirror.min.js"> </script>
<script src="//tools-static.wmflabs.org/cdnjs/ajax/libs/codemirror/5.4.0/mode/sql/sql.min.js"> </script>
<script src="//tools-static.wmflabs.org/cdnjs/ajax/libs/codemirror/5.4.0/addon/edit/matchbrackets.min.js"> </script>
<script src="/static/vendor/datatables-1.10.2/js/jquery.dataTables.min.js"> </script>
<script src="/static/vendor/datatables-1.10.2/js/dataTables.bootstrap.js"> </script>
<script src="//tools-static.wmflabs.org/cdnjs/ajax/libs/autosize.js/1.18.18/jquery.autosize.min.js"> </script>
<link href="/static/vendor/datatables-1.10.2/css/dataTables.bootstrap.css" rel="stylesheet">
<script src="/static/js/query/view.js?v=2"> </script>

</head>

<body>

<div class="navbar navbar-inverse" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img height="48px" src="/static/img/quarry-logo-white.svg" /></a>
        </div>
        <div class="collapse navbar-collapse" id="navbar">
            <ul class="nav navbar-nav">
            
                <li>
                    <a href="/">Home</a>
                </li>
            
                <li class="active">
                    <a href="/query/new">New Query</a>
                </li>
            
                <li>
                    <a href="/query/runs/all">Recent Queries</a>
                </li>
            
                <li>
                    <a href="https://www.mediawiki.org/wiki/Talk:Quarry">Discuss</a>
                </li>
                <li class="dropdown">
                    <a href="#" data-toggle="dropdown" class="dropdown-toggle">Database tables <span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a target="_blank" rel="noopener" href="https://db-names.toolforge.org/">Database names</a></li>
                        <li><a target="_blank" rel="noopener" href="https://www.mediawiki.org/wiki/Category:MediaWiki_database_tables">MediaWiki</a></li>
                        <li><a target="_blank" rel="noopener" href="https://www.mediawiki.org/wiki/Wikibase/Schema">Wikibase</a></li>
                        <li><a target="_blank" rel="noopener" href="https://sql-optimizer.toolforge.org/">Replicas browser and optimizer</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            
                <li><a href="/login?next=/query/44259">Login</a></li>
            
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</div>






<div id="content" class="container no-edit  published ">
    <div class="row" id="title-container">


        <div class="col-md-10">
            <h2><input type="textbox" id="title" readonly value="nlwiki Articles without content category"> </input></h2>
        </div>

        <div class="col-md-2" id="title-actions-container">
            
            <a id="query-history" title="View history of runs for this query" href="/history/44259" class="btn btn-info btn-sm">
                History
            </a>
            <a id="fork-query" title="Create a copy of this query to modify and execute" href="/fork/44259" class="btn btn-info btn-sm">
                Fork
            </a>
        </div>
    </div>
    <div class="query-status">
        
        <span class="only-not-published">This query is marked as a draft</span>
        <span class="only-published">This query has been published</span>
        by <a href="/Bdijkstra">Bdijkstra</a>.
        
    </div>
    <div>
        
        <textarea id="query-description" readonly>Pages without any categories or with only maintenance categories.

Query breakdown:
1. outer query = a list of article pages that are not nominated for deletion and older than 24 hours
2. hc = a list of maintenance categories, meaning the titles of category pages with the __HIDDENCAT__ or __EXPECTUNUSEDCATEGORY__ property
    note: could filter out empty categories using the `category` table
3. nhcl = take `categorylinks`, filter out hc and collapse to a single row per page
4. final result = get the titles of article pages not present in nhcl, and the creation timestamp

Takes about 30s to execute on nlwiki.</textarea>
        
    </div>
    <div class="query-db-parent">
        
            <input id="query-db"
                
                    readonly
                
                
                    value="nlwiki"
                
            />
        
    </div>
    <div>
        <button id="togglehl" class="btn btn-primary btn-sm pull-right">Toggle Highlighting</button>
        <h3>SQL</h3>
        <textarea id="code"readonly>SELECT
	page_title,
    rev_timestamp,
    GROUP_CONCAT(REPLACE(cl_to,&#39;_&#39;,&#39; &#39;) SEPARATOR &#39; | &#39;) AS categories,
    (SELECT GROUP_CONCAT(pl_title SEPARATOR &#39; | &#39;) FROM pagelinks WHERE pl_from=page_id AND pl_namespace=14) AS catlinks,
    pp_value AS defaultsort,
    (SELECT pp_value FROM page_props WHERE pp_page=page_id AND pp_propname=&#39;wikibase_item&#39;) AS Wikidata
FROM page 
	INNER JOIN (SELECT DISTINCT rc_cur_id FROM recentchanges WHERE rc_type IN (0,1) AND rc_namespace=0) rc ON rc_cur_id=page_id
	INNER JOIN revision ON (
		rev_parent_id=0 AND page_id=rev_page AND UNIX_TIMESTAMP()-UNIX_TIMESTAMP(STR_TO_DATE(rev_timestamp,&#39;%Y%m%d%H%i%s&#39;))&gt;86400)
    LEFT JOIN categorylinks ON page_id=cl_from
    LEFT JOIN page_props ON page_id=pp_page AND pp_propname=&#39;defaultsort&#39;
WHERE 
  	page_namespace=0 AND 
  	page_is_redirect=0 AND
  	NOT EXISTS (SELECT * FROM page_props WHERE page_id=pp_page AND pp_propname=&#39;disambiguation&#39;) AND
  	NOT EXISTS (SELECT * FROM categorylinks 
      	WHERE page_id=cl_from AND cl_to REGEXP 
                		&#39;^Wikipedia:(Pagina_weg|Nog_niet_gereed$|Nog_te_categoriseren_sinds_|Nuweg$|Werk_in_uitvoering$)&#39;
    ) AND
  	NOT EXISTS (SELECT * FROM (
		# niet-beheer categorylinks
		SELECT cl_from, cl_to FROM categorylinks WHERE 
      		cl_to NOT REGEXP 
      			&#39;^Diersoort_beschreven_in_|&#39;
      			&#39;^Boom_\\(plant\\)|&#39;
      			&#39;^Actuele_(sport)?gebeurtenis$|&#39;
      			&#39;^Wikipedia:|&#39;
      			&#39;^IUCN-status_|&#39;
      			&#39;^Dier_uit_het_[ANOP][a-zë]+_gebied$|&#39;
      			&#39;^Uitgestorven_vissen$&#39; AND
            NOT EXISTS (SELECT * FROM (
                # beheercategorieën
                SELECT DISTINCT page_title
                FROM page, page_props
				WHERE page_namespace=14 AND page_id=pp_page AND (pp_propname=&#39;hiddencat&#39; OR pp_propname=&#39;expectunusedcategory&#39;)
            ) hc WHERE cl_to=hc.page_title)
		GROUP BY cl_from
		ORDER BY cl_from
	) nhcl WHERE nhcl.cl_from=page_id)
GROUP BY page_title
ORDER BY rev_timestamp</textarea>
    </div>
    <div id="sql-actions-container" class="row">
        <div class='col-md-8 only-edit'>
            By running queries you agree to the <a href="https://wikitech.wikimedia.org/wiki/Wikitech:Cloud_Services_Terms_of_use">Cloud Services Terms of Use</a> and you irrevocably agree to release your SQL under <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 License</a>.
        </div>
        <div class='col-md-4 last only-edit'>
            <a href="#" id="run-code" class="btn btn-primary pull-right">Submit Query</a>
            <a href="#" id="stop-code" class="btn btn-primary pull-right" style="visibility: hidden;">Stop Query</a>
        </div>
        <div class="col-md-8 only-no-edit">
            All SQL code is licensed under <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 License</a>.
        </div>
    </div>

    <div id="query-result-container">
        <h4 id="query-status">Checking query status...</h4>
        <div id="query-result"></div>
    </div>
</div>


<div id="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-7">
            <a href="https://wikimediafoundation.org/wiki/Privacy_policy">Privacy Policy</a> |
            <a href="https://wikitech.wikimedia.org/wiki/Wikitech:Cloud_Services_Terms_of_use">Terms of Use</a> |
            <a href="https://github.com/toolforge/quarry">Source Code</a> |
            <a href="https://meta.wikimedia.org/wiki/Research:Quarry">Documentation</a> |
            <a href="https://phabricator.wikimedia.org/maniphest/task/edit/form/102/?title=%5Bfeedback%5D%20%3Cyour%20request%20here%3E&description=%3D%3D%20Why%0D%0A%0D%0AA%20brief%20explanation%20of%20the%20problem%20you%20want%20sorted%20out%0D%0A%0D%0A%3D%3D%20How%0D%0A%0D%0AIf%20you%20have%20any%20ideas%2C%20an%20explanation%20on%20how%20it%20could%20be%20solved&projects=quarry&subscribers=dcaro%2Ckomla&priority=triage">Propose a Feature</a> |
            <a href="https://phabricator.wikimedia.org/maniphest/task/edit/form/43/?title=%5Bbug%5D%20%3Cyour%20request%20here%3E&description=%3D%3D%20What%20happened%3F%0D%0A%0D%0AA%20brief%20explanation%20of%20the%20problem%20you%20found%20(if%20you%20can%20give%20screenshots%20please%20do)%0D%0A%0D%0A%3D%3D%20What%20should%20have%20happened%3F%0D%0A%0D%0AWhat%20is%20it%20that%20you%20expected%20to%20happen%20instead&projects=quarry&subscribers=dcaro%2Ckomla&priority=triage">Report a bug</a>
            </div>
            <div class="pull-right">
                Hosted on <a href="https://wikitech.wikimedia.org/wiki/Portal:Cloud_VPS">Wikimedia Cloud VPS</a>, written in <a href="https://python.org">Python</a> by <a href="mailto:yuvipanda@gmail.com">YuviPanda</a>
            </div>
        </div>
    </div>
</div>
</body>
</html> contentType 9 text/html url 42 https://quarry.wmcloud.org:443/query/44259 responseCode 3 200 