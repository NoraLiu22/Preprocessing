zermbanexaasmmbcnmpsuovozioqooomqeuawqoq length 5 41229 page 41229 <!DOCTYPE HTML>
<html lang="en">
  <head>
<!-- PDTQ-131 -->
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N3RT7TD');</script>
<!-- End Google Tag Manager -->
    
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>GitHub Releases Uploading - Travis CI</title>
<link rel="stylesheet" href="/assets/stylesheets/main.css">
<link rel="alternate" type="application/rss+xml" title="Travis CI Build Environment Updates" href="https://docs.travis-ci.com/feed.build-env-updates.xml">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" defer></script>

<script src="/assets/javascripts/main.js" type="text/javascript" charset="utf-8" defer></script>
<script src="/assets/javascripts/prism.js" type="text/javascript" charset="utf-8" defer></script>
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@travisci" />
<meta name="twitter:creator" content="@travisci" />
<meta property="og:title" content="Travis CI Documentation" />
<meta property="og:type" content="website" />
<meta property="og:url" content=/user/deployment/releases/ />
<meta property="og:description" content="GitHub Releases Uploading" />
<meta property="og:image" content="/images/TravisCI-Full-Color.png" }} />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="642" />
<meta property="og:image:height" content="201" />
<meta property="og:image:alt" content="Travis CI logo" />


 

  </head>
  <body>
<!-- PDTQ-131 -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N3RT7TD"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <div class="wrapper">

      <header class="top">
  <div class="row topbar">
    <h1 id="logo" class="logo">
  <a href="https://travis-ci.com/" title="Travis CI">Travis</a>
</h1>

    <nav>
      <ul id="navigation" class="navigation">
        <li><a href="https://blog.travis-ci.com">Blog</a></li>
        <li><a href="/">Docs</a></li>
        <li class="toggle"><button type="button" id="toggle-menu" class="button--teal">Menu</button></li>
      </ul>
    </nav>
  </div>
</header>


      <div id="content" class="row">

        <div id="sidebar" class="sidebar">
  <div>
    <!-- <h2>Search</h2> -->
    <div class="searchbox">
      <form>
        <input type="text" id="st-search-input" class="searchbox-input" placeholder="Search the docs" />
      </form>
      <script type="text/javascript">
      var Swiftype = window.Swiftype || {};
        (function() {
          Swiftype.key = 'tXvDDzd4fNTBnLvxfEyx';

          Swiftype.searchSearchFields = {
            "page": ["title, body, tags"]
          };
          Swiftype.autocompleteSearchFields = {
            "page": ["title, body, tags"]
          };
          /** DO NOT EDIT BELOW THIS LINE **/
          var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
          script.src = "//swiftype.com/embed.js";
          var entry = document.getElementsByTagName('script')[0];
          document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
        }());
      </script>
    </div>
  </div>

  <section class="sidebar-navigation">
    <nav>
      <h3>Getting Started</h3>
      <ul>
        <li><a href="/user/for-beginners/">Core Concepts for Beginners</a></li>
        <li><a href="/user/tutorial/">Travis CI Tutorial</a></li>
        <li><a href="/user/customizing-the-build/">Customizing the Build</a></li>
        <li><a href="/user/speeding-up-the-build/">Speeding up the Build</a></li>
        <li><a href="/user/docker/">Using Docker in your Build</a></li>
        <li><a href="/user/gui-and-headless-browsers/">Headless Testing with Browsers</a></li>
        <li><a href="/user/pull-requests/">Building Pull Requests</a></li>
        <li><a href="/user/cron-jobs/">Cron Jobs</a></li>
        <li><a href="/user/common-build-problems/">Common Build Problems</a></li>
        <li><a href="https://github.com/travis-ci/travis#readme">Command Line Client</a></li>
        <li><a href="/user/build-config-imports/">Build Config Imports</a></li>
        <li><a href="/user/build-config-validation/">Build Config Validation</a></li>
      </ul>

      <h3>Jobs, Builds, Matrices and Stages</h3>
      <ul>
        <li><a href="/user/job-lifecycle/">Job Lifecycle</a></li>
        <li><a href="/user/build-matrix/">Build Matrix</a></li>
        <li><a href="/user/build-stages/">Build Stages</a></li>
        <li><a href="/user/conditional-builds-stages-jobs/">Conditional Builds, Stages, and Jobs</a></li>
      </ul>

      <h3>Installing Dependencies</h3>
      <ul>
        <li><a href="/user/installing-dependencies/">Installing Dependencies</a></li>
        <li><a href="/user/private-dependencies/">Private Dependencies GitHub</a></li>
        <li><a href="/user/private-dependencies-bb/">Private Dependencies Bitbucket</a></li>
        <li><a href="/user/database-setup/">Setting up Services and Databases</a></li>
        <li><a href="/user/caching/">Caching Dependencies</a></li>
        <li><a href="/user/using-workspaces/">Caching Dependencies within a Build (Workspaces)</a></li>
        <li><a href="/user/ssh-known-hosts/">Adding to SSH Known Hosts</a></li>
      </ul>

      <h3>Programming Languages</h3>
      <ul>
      
        <li><a href="/user/languages/android/">Android</a></li>
      
        <li><a href="/user/languages/c/">C</a></li>
      
        <li><a href="/user/languages/csharp/">C#</a></li>
      
        <li><a href="/user/languages/cpp/">C++</a></li>
      
        <li><a href="/user/languages/clojure/">Clojure</a></li>
      
        <li><a href="/user/languages/crystal/">Crystal</a></li>
      
        <li><a href="/user/languages/d/">D</a></li>
      
        <li><a href="/user/languages/dart/">Dart</a></li>
      
        <li><a href="/user/languages/elixir/">Elixir</a></li>
      
        <li><a href="/user/languages/elm/">Elm</a></li>
      
        <li><a href="/user/languages/erlang/">Erlang</a></li>
      
        <li><a href="/user/languages/csharp/">F#</a></li>
      
        <li><a href="/user/languages/minimal-and-generic/">Generic</a></li>
      
        <li><a href="/user/languages/go/">Go</a></li>
      
        <li><a href="/user/languages/groovy/">Groovy</a></li>
      
        <li><a href="/user/languages/haskell/">Haskell</a></li>
      
        <li><a href="/user/languages/haxe/">Haxe</a></li>
      
        <li><a href="/user/languages/java/">Java</a></li>
      
        <li><a href="/user/languages/javascript-with-nodejs/">JavaScript <small>(with Node.js)</small></a></li>
      
        <li><a href="/user/languages/julia/">Julia</a></li>
      
        <li><a href="/user/languages/matlab/">MATLAB</a></li>
      
        <li><a href="/user/languages/minimal-and-generic/">Minimal</a></li>
      
        <li><a href="/user/languages/nix/">Nix</a></li>
      
        <li><a href="/user/languages/objective-c/">Objective-C</a></li>
      
        <li><a href="/user/languages/perl/">Perl</a></li>
      
        <li><a href="/user/languages/perl6/">Perl6</a></li>
      
        <li><a href="/user/languages/php/">PHP</a></li>
      
        <li><a href="/user/languages/python/">Python</a></li>
      
        <li><a href="/user/languages/r/">R</a></li>
      
        <li><a href="/user/languages/ruby/">Ruby</a></li>
      
        <li><a href="/user/languages/rust/">Rust</a></li>
      
        <li><a href="/user/languages/scala/">Scala</a></li>
      
        <li><a href="/user/languages/smalltalk/">Smalltalk</a></li>
      
        <li><a href="/user/languages/objective-c/">Swift</a></li>
      
        <li><a href="/user/languages/csharp/">Visual Basic</a></li>
      
        <li><a href="/user/languages/community-supported-languages/">Adding a language</a></li>
      </ul>

      <h3>Deployments and Uploads</h3>
      <ul>
        
          <li class="is-overview"><a href="/user/deployment/">Overview</a></li>
          
        
        
          <li><a href="/user/deployment/anynines/">anynines</a></li>
        
          <li><a href="/user/deployment/atlas/">Atlas</a></li>
        
          <li><a href="/user/deployment/codedeploy/">AWS CodeDeploy</a></li>
        
          <li><a href="/user/deployment/elasticbeanstalk/">AWS Elastic Beanstalk</a></li>
        
          <li><a href="/user/deployment/lambda/">AWS Lambda</a></li>
        
          <li><a href="/user/deployment/opsworks/">AWS OpsWorks</a></li>
        
          <li><a href="/user/deployment/s3/">AWS S3</a></li>
        
          <li><a href="/user/deployment/azure-web-apps/">Azure Web Apps</a></li>
        
          <li><a href="/user/deployment/bintray/">bintray</a></li>
        
          <li><a href="/user/deployment/bitballoon/">BitBalloon</a></li>
        
          <li><a href="/user/deployment/bluemixcloudfoundry/">Bluemix CloudFoundry</a></li>
        
          <li><a href="/user/deployment/boxfuse/">Boxfuse</a></li>
        
          <li><a href="/user/deployment/catalyze/">Catalyze</a></li>
        
          <li><a href="/user/deployment/chefsupermarket/">Chef Supermarket</a></li>
        
          <li><a href="/user/deployment/cloud66/">Cloud 66</a></li>
        
          <li><a href="/user/deployment/cloudfoundry/">CloudFoundry</a></li>
        
          <li><a href="/user/deployment/cargo/">Cargo</a></li>
        
          <li><a href="/user/deployment/engineyard/">Engine Yard</a></li>
        
          <li><a href="/user/deployment/pages/">GitHub Pages</a></li>
        
          <li><a href="/user/deployment/releases/">GitHub Releases</a></li>
        
          <li><a href="/user/deployment/google-app-engine/">Google App Engine</a></li>
        
          <li><a href="/user/deployment/gcs/">Google Cloud Storage</a></li>
        
          <li><a href="/user/deployment/firebase/">Google Firebase</a></li>
        
          <li><a href="/user/deployment/hackage/">Hackage</a></li>
        
          <li><a href="/user/deployment/hephy/">Hephy</a></li>
        
          <li><a href="/user/deployment/heroku/">Heroku</a></li>
        
          <li><a href="/user/deployment/launchpad/">Launchpad</a></li>
        
          <li><a href="/user/deployment/npm/">npm</a></li>
        
          <li><a href="/user/deployment/openshift/">OpenShift</a></li>
        
          <li><a href="/user/deployment/packagecloud/">packagecloud.io</a></li>
        
          <li><a href="/user/deployment/puppetforge/">Puppet Forge</a></li>
        
          <li><a href="/user/deployment/pypi/">PyPI</a></li>
        
          <li><a href="/user/deployment/cloudfiles/">Rackspace Cloud Files</a></li>
        
          <li><a href="/user/deployment/rubygems/">RubyGems</a></li>
        
          <li><a href="/user/deployment/scalingo/">Scalingo</a></li>
        
          <li><a href="/user/deployment/script/">Script</a></li>
        
          <li><a href="/user/deployment/snaps/">Snap Store</a></li>
        
          <li><a href="/user/deployment/surge/">Surge.sh</a></li>
        
          <li><a href="/user/deployment/testfairy/">TestFairy</a></li>
        
          <li><a href="/user/deployment/transifex/">Transifex</a></li>
        
        <li><a href="/user/uploading-artifacts/">Uploading Build Artifacts</a></li>
      </ul>

      <h3>CI Environment Reference</h3>
      <ul>
        <li class="is-overview"><a href="/user/reference/overview/">Overview</a></li>
        <li><a href="/user/reference/linux/">Ubuntu Linux CI Environment References</a></li>
        <li><a href="/user/reference/osx/">macOS CI Environment Reference</a></li>
        <li><a href="/user/reference/windows/">Windows CI Environment Reference</a></li>
        <li><a href="/user/reference/freebsd/">FreeBSD CI Environment Reference</a></li>
        <li><a href="/user/multi-os/">Building on Multiple Operating Systems</a></li>
        <li><a href="/user/multi-cpu-architectures/">Building on Multiple CPU Architectures</a></li>
        <li><a href="/user/environment-variables/">Environment Variables</a></li>
        <li><a href="/user/build-environment-updates/">Build Environment Updates</a></li>
        <li><a href="/user/ip-addresses/">Build Machines IP Addresses</a></li>
      </ul>

      <h3>Security and Secure Software Supply Chain</h3>
      <ul>
        <li><a href="/user/encryption-keys/">Encrypting Sensitive Data</a></li>
        <li><a href="/user/encrypting-files/">Encrypting Files</a></li>
        <li><a href="/user/github-oauth-scopes/">GitHub Permissions used by Travis CI</a></li>
        <li><a href="/user/bb-oauth-scopes/">Bitbucket Permissions used by Travis CI</a></li>
        <li><a href="/user/assembla-oauth-scopes/">Assembla Permissions used by Travis CI</a></li>
        <li><a href="/user/gl-oauth-scopes/">GitLab Permissions used by Travis CI</a></li>
        <li><a href="/user/disable-job-logs/">Disable Job Logs Availability</a></li>
        <li><a href="/user/best-practices-security/">Best Practices in Securing Your Data</a></li>
        <li><a href="/user/securely-signing-software">Securely Signing Software</a></li>
        <li><a href="/user/sbom">Software Bill of Materials</a></li>
      </ul>

      <h3>Integrations and Notifications</h3>
      <ul>
        <li><a href="/user/notifications/">Configuring Notifications</a></li>
        <li><a href="/user/status-images/">Showing Build Status Images</a></li>
        <li><a href="/user/code-climate/">Code Climate</a></li>
        <li><a href="/user/deepsource/">DeepSource</a></li>
        <li><a href="/user/coveralls/">Coveralls</a></li>
        <li><a href="/user/coverity-scan/">Coverity Scan</a></li>
        <li><a href="/user/browserstack/">BrowserStack</a></li>
        <li><a href="/user/sauce-connect/">Sauce Labs</a></li>
        <li><a href="/user/sonarcloud/">SonarCloud</a></li>
        <li><a href="/user/sourceclear/">SourceClear</a></li>
        <li><a href="/user/build-feeds/">Atom Feeds</a></li>
        <li><a href="/user/cc-menu/">CCMenu / CCTray Feeds</a></li>
        <li><a href="/user/integration/platformio/">Embedded Builds with PlatformIO</a></li>
        <li><a href="/user/hashicorp-vault-integration">Hashicorp Vault</a></li>
        <li><a href="/user/apps/">3rd Party Apps, Clients and Tools</a></li>
      </ul>

      <h3>Developer Program</h3>
      <ul>
        <li class="is-overview"><a href="/user/developer/">Overview</a></li>
        <li><a href="https://developer.travis-ci.com/">API V3</a></li>
        <li><a href="/user/triggering-builds/">Triggering Builds with API V3</a></li>
        <li><a href="https://github.com/travis-ci/travis#ruby-library">The Ruby Library</a></li>
      </ul>
      
      <h3>Hosted Billing</h3>
      <ul>
        <li class="is-overview"><a href="/user/billing-overview/">Overview</a></li>
        <li><a href="/user/billing-autorefill/">Auto-refill</a></li>
        <li><a href="/user/billing-faq/">FAQ</a></li>
      </ul>

      <h3>Travis CI Enterprise</h3>
      <ul>
        <li><a href="/user/enterprise/">Enterprise Docs</a></li>
      </ul>

    </nav>
  </section>

  <section class="sidebar-notice">
    <p>This documentation site is Open Source.
      The <a href="https://github.com/travis-ci/docs-travis-ci-com">README in our Git repository</a> explains how to contribute.</p>
    <p>Travis CI relies on Open Source <a href="/user/open_source_license/">licensing information</a>.</p>
  </section>

</div><!-- /#sidebar -->


        <main id="main" class="main" data-swiftype-index='true'>
          
            <aside class="improve-page" data-swiftype-index='false'><a href="https://github.com/travis-ci/docs-travis-ci-com/edit/master/user/deployment/releases.md" target="_blank" title="Edit this page on GitHub" class="button-pen" data-proofer-ignore>Improve this page on GitHub</a></aside>
            <h1 class="title">GitHub Releases Uploading</h1>
          

          
            <blockquote>
              <p>
                This page documents deployments using dpl v1 which currently is the default
                version. The next major version dpl v2 will be released soon, and we recommend
                starting to use it. Please see <a href="https://blog.travis-ci.com/2019-08-27-deployment-tooling-dpl-v2-preview-release">our blog post</a>
                for details. <a href="/user/deployment-v2">dpl v2 documentation can be found here</a>.
              </p>
            </blockquote>
          


          
            <div id="toc" class="toc">
              <ul class="list-language">
  <li><a href="#deploying-only-on-tagged-builds">Deploying only on tagged builds</a></li>
  <li><a href="#regular-releases">Regular releases</a></li>
  <li><a href="#draft-releases-with-draft-true">Draft releases with <code class="highlighter-rouge">draft: true</code></a></li>
  <li><a href="#setting-the-tag-at-deployment-time">Setting the tag at deployment time</a></li>
  <li><a href="#overwrite-existing-files-on-the-release">Overwrite existing files on the release</a></li>
  <li><a href="#using-travis-ci-client-to-populate-initial-deployment-configuration">Using Travis CI client to populate initial deployment configuration</a></li>
  <li><a href="#authenticating-with-an-oauth-token">Authenticating with an OAuth token</a></li>
  <li><a href="#authentication-with-a-username-and-password">Authentication with a Username and Password</a></li>
  <li><a href="#deploying-to-github-enterprise">Deploying to GitHub Enterprise</a></li>
  <li><a href="#uploading-multiple-files">Uploading Multiple Files</a></li>
  <li><a href="#running-commands-before-or-after-release">Running commands before or after release</a></li>
  <li><a href="#advanced-options">Advanced options</a></li>
  <li><a href="#troubleshooting-git-submodules">Troubleshooting Git Submodules</a></li>
</ul>

            </div>
          

          <p>Travis CI can automatically upload assets to git tags on your GitHub repository.</p>

<p>For a minimal configuration, add the following to your <code class="highlighter-rouge">.travis.yml</code>:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">deploy</span><span class="pi">:</span>
  <span class="na">provider</span><span class="pi">:</span> <span class="s">releases</span>
  <span class="na">api_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">GITHUB</span><span class="nv"> </span><span class="s">OAUTH</span><span class="nv"> </span><span class="s">TOKEN"</span>
  <span class="na">file</span><span class="pi">:</span> <span class="s2">"</span><span class="s">FILE</span><span class="nv"> </span><span class="s">TO</span><span class="nv"> </span><span class="s">UPLOAD"</span>
  <span class="na">skip_cleanup</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">on</span><span class="pi">:</span>
    <span class="na">tags</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<p>This configuration will use the “GITHUB OAUTH TOKEN” to upload “FILE TO UPLOAD”
(relative to the working directory) on tagged builds.</p>

<blockquote>
  <p>Make sure you have <code class="highlighter-rouge">skip_cleanup</code> set to <code class="highlighter-rouge">true</code>, otherwise Travis CI will delete all the files created during the build, which will probably delete what you are trying to upload.</p>
</blockquote>

<p>GitHub Releases works with git tags, so it is important that
you understand how tags affect GitHub Releases.</p>

<h2 id="deploying-only-on-tagged-builds">Deploying only on tagged builds <a href="#deploying-only-on-tagged-builds" class="toc-anchor">#</a></h2>

<p>With <a href="/user/deployment/#conditional-releases-with-on"><code class="highlighter-rouge">on.tags: true</code></a>,
your Releases deployment will trigger if and only if the build is a tagged
build.</p>

<h2 id="regular-releases">Regular releases <a href="#regular-releases" class="toc-anchor">#</a></h2>

<p>When the <code class="highlighter-rouge">draft</code> option is not set to <code class="highlighter-rouge">true</code> (more on this below), a regular
release is created.
Regular releases require tags.
If you set <code class="highlighter-rouge">on.tags: true</code> (as the initial example in this document), this
requirement is met.</p>

<h2 id="draft-releases-with-draft-true">Draft releases with <code class="highlighter-rouge">draft: true</code> <a href="#draft-releases-with-draft-true" class="toc-anchor">#</a></h2>
<p>With</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">deploy</span><span class="pi">:</span>
  <span class="na">provider</span><span class="pi">:</span> <span class="s">releases</span>
  <span class="na">api_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">GITHUB</span><span class="nv"> </span><span class="s">OAUTH</span><span class="nv"> </span><span class="s">TOKEN"</span>
  <span class="na">file</span><span class="pi">:</span> <span class="s2">"</span><span class="s">FILE</span><span class="nv"> </span><span class="s">TO</span><span class="nv"> </span><span class="s">UPLOAD"</span>
  <span class="na">skip_cleanup</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">draft</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<p>the resultant deployment is a draft Release that only repository collaborators
can see.
This gives you an opportunity to examine and edit the draft release.</p>

<h2 id="setting-the-tag-at-deployment-time">Setting the tag at deployment time <a href="#setting-the-tag-at-deployment-time" class="toc-anchor">#</a></h2>

<p>GitHub Releases needs the present commit to be tagged at the deployment time.
If you set <code class="highlighter-rouge">on.tags: true</code>, the commit is guaranteed to have a tag.</p>

<p>Depending on the workflow, however, this is not desirable.</p>

<p>In such cases, it is possible to postpone setting the tag until
you have all the information you need.
A natural place to do this is <code class="highlighter-rouge">before_deploy</code>.
For example:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="na">before_deploy</span><span class="pi">:</span>
      <span class="c1"># Set up git user name and tag this commit</span>
      <span class="pi">-</span> <span class="s">git config --local user.name "YOUR GIT USER NAME"</span>
      <span class="pi">-</span> <span class="s">git config --local user.email "YOUR GIT USER EMAIL"</span>
      <span class="pi">-</span> <span class="s">export TRAVIS_TAG=${TRAVIS_TAG:-$(date +'%Y%m%d%H%M%S')-$(git log --format=%h -1)}</span>
      <span class="pi">-</span> <span class="s">git tag $TRAVIS_TAG</span>
    <span class="na">deploy</span><span class="pi">:</span>
      <span class="na">provider</span><span class="pi">:</span> <span class="s">releases</span>
      <span class="na">api_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">GITHUB</span><span class="nv"> </span><span class="s">OAUTH</span><span class="nv"> </span><span class="s">TOKEN"</span>
      <span class="na">file</span><span class="pi">:</span> <span class="s2">"</span><span class="s">FILE</span><span class="nv"> </span><span class="s">TO</span><span class="nv"> </span><span class="s">UPLOAD"</span>
      <span class="na">skip_cleanup</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<h3 id="when-tag-is-not-set-at-deployment-time">When tag is not set at deployment time <a href="#when-tag-is-not-set-at-deployment-time" class="toc-anchor">#</a></h3>

<p>If the tag is still not set at the time of deployment, the deployment
provider attempts to match the current commit with a tag from remote,
and if one is found, uses it.</p>

<p>This could be a problem if multiple tags are assigned to the current commit and
the one you want is not matched.
In such a case, assign the tag you need (the method will depend on your use
case) to <code class="highlighter-rouge">$TRAVIS_TAG</code> to get around the problem.</p>

<p>If the build commit does not match any tag at deployment time, GitHub creates one
when the release is created.
The GitHub-generated tags are of the form <code class="highlighter-rouge">untagged-*</code>, where <code class="highlighter-rouge">*</code> is a random
hex string.
Notice that this tag is immediately available on GitHub, and thus
will trigger a new Travis CI build, unless it is prevented by
other means; for instance, by
<a href="/user/customizing-the-build/#safelisting-or-blocklisting-branches">blocklisting <code class="highlighter-rouge">/^untagged/</code></a>.</p>

<h2 id="overwrite-existing-files-on-the-release">Overwrite existing files on the release <a href="#overwrite-existing-files-on-the-release" class="toc-anchor">#</a></h2>

<p>If you need to overwrite existing files, add <code class="highlighter-rouge">overwrite: true</code> to the <code class="highlighter-rouge">deploy</code> section of your <code class="highlighter-rouge">.travis.yml</code>.</p>

<h2 id="using-travis-ci-client-to-populate-initial-deployment-configuration">Using Travis CI client to populate initial deployment configuration <a href="#using-travis-ci-client-to-populate-initial-deployment-configuration" class="toc-anchor">#</a></h2>

<p>You can also use the <a href="https://github.com/travis-ci/travis.rb#installation">Travis CI command line client</a> to configure your <code class="highlighter-rouge">.travis.yml</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>travis setup releases
</code></pre></div></div>

<p>Or, if you’re using a private repository or the GitHub Apps integration:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>travis setup releases <span class="nt">--com</span>
</code></pre></div></div>

<h2 id="authenticating-with-an-oauth-token">Authenticating with an OAuth token <a href="#authenticating-with-an-oauth-token" class="toc-anchor">#</a></h2>

<p>The recommended way to authenticate is to use a GitHub OAuth token. Instead of setting it up manually, it is highly recommended to use <code class="highlighter-rouge">travis setup releases</code>, which automatically creates and encrypts a GitHub OAuth token with the correct scopes.</p>

<p>If you can’t use <code class="highlighter-rouge">travis setup releases</code>, you can set up the token manually with the following steps:</p>
<ol>
  <li>Create a personal access token on the Github account. It must have the <code class="highlighter-rouge">public_repo</code> or <code class="highlighter-rouge">repo</code> scope to upload assets.</li>
  <li>Encrypt the token using Travis CLI: <code class="highlighter-rouge">travis encrypt [super_secret_token]</code>. Note that you must <em>not</em> give the token a name in the encrypt command, as you might for an environment variable.</li>
  <li>Add the secure encrypted token to the deploy section of your <code class="highlighter-rouge">.travis.yml</code>, under the <code class="highlighter-rouge">api_key</code>.</li>
</ol>

<p>This results in something similar to:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">deploy</span><span class="pi">:</span>
  <span class="na">provider</span><span class="pi">:</span> <span class="s">releases</span>
  <span class="na">api_key</span><span class="pi">:</span>
    <span class="na">secure</span><span class="pi">:</span> <span class="s">YOUR_API_KEY_ENCRYPTED</span>
  <span class="na">file</span><span class="pi">:</span> <span class="s2">"</span><span class="s">FILE</span><span class="nv"> </span><span class="s">TO</span><span class="nv"> </span><span class="s">UPLOAD"</span>
  <span class="na">skip_cleanup</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">on</span><span class="pi">:</span>
    <span class="na">tags</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<p><strong>Warning:</strong> the <code class="highlighter-rouge">public_repo</code> and <code class="highlighter-rouge">repo</code> scopes for GitHub OAuth tokens grant write access to all of a user’s (public) repositories. For security, it’s ideal for <code class="highlighter-rouge">api_key</code> to have the write access limited to only repositories where Travis deploys to GitHub releases. The suggested workaround is to create a <a href="https://developer.github.com/v3/guides/managing-deploy-keys/#machine-users">machine user</a> — a dummy GitHub account that is granted write access on a per repository basis.</p>

<h2 id="authentication-with-a-username-and-password">Authentication with a Username and Password <a href="#authentication-with-a-username-and-password" class="toc-anchor">#</a></h2>

<p>You can also authenticate with your GitHub username and password using the <code class="highlighter-rouge">user</code> and <code class="highlighter-rouge">password</code> options. This is not recommended as it allows full access to your GitHub account but is simplest to setup. It is recommended to encrypt your password using <code class="highlighter-rouge">travis encrypt "GITHUB PASSWORD" --add deploy.password</code>. This example authenticates using  a username and password.</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">deploy</span><span class="pi">:</span>
  <span class="na">provider</span><span class="pi">:</span> <span class="s">releases</span>
  <span class="na">user</span><span class="pi">:</span> <span class="s2">"</span><span class="s">GITHUB</span><span class="nv"> </span><span class="s">USERNAME"</span>
  <span class="na">password</span><span class="pi">:</span> <span class="s2">"</span><span class="s">GITHUB</span><span class="nv"> </span><span class="s">PASSWORD"</span>
  <span class="na">file</span><span class="pi">:</span> <span class="s2">"</span><span class="s">FILE</span><span class="nv"> </span><span class="s">TO</span><span class="nv"> </span><span class="s">UPLOAD"</span>
  <span class="na">skip_cleanup</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">on</span><span class="pi">:</span>
    <span class="na">tags</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<h2 id="deploying-to-github-enterprise">Deploying to GitHub Enterprise <a href="#deploying-to-github-enterprise" class="toc-anchor">#</a></h2>

<p>If you wish to upload assets to a GitHub Enterprise repository, you must override the <code class="highlighter-rouge">$OCTOKIT_API_ENDPOINT</code> environment variable with your GitHub Enterprise API endpoint:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http(s)://"GITHUB ENTERPRISE HOSTNAME"/api/v3/
</code></pre></div></div>

<p>You can configure this in <a href="/user/environment-variables/#defining-variables-in-repository-settings">Repository Settings</a> or via your <code class="highlighter-rouge">.travis.yml</code>:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">env</span><span class="pi">:</span>
  <span class="na">global</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">OCTOKIT_API_ENDPOINT="GITHUB ENTERPRISE API ENDPOINT"</span>
</code></pre></div></div>

<h2 id="uploading-multiple-files">Uploading Multiple Files <a href="#uploading-multiple-files" class="toc-anchor">#</a></h2>

<p>You can upload multiple files using yml array notation. This example uploads two files.</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">deploy</span><span class="pi">:</span>
  <span class="na">provider</span><span class="pi">:</span> <span class="s">releases</span>
  <span class="na">api_key</span><span class="pi">:</span>
    <span class="na">secure</span><span class="pi">:</span> <span class="s">YOUR_API_KEY_ENCRYPTED</span>
  <span class="na">file</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s2">"</span><span class="s">FILE</span><span class="nv"> </span><span class="s">1"</span>
    <span class="pi">-</span> <span class="s2">"</span><span class="s">FILE</span><span class="nv"> </span><span class="s">2"</span>
  <span class="na">skip_cleanup</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">on</span><span class="pi">:</span>
    <span class="na">tags</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<p>You can also enable wildcards by setting <code class="highlighter-rouge">file_glob</code> to <code class="highlighter-rouge">true</code>. This example
includes all files in a given directory.</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">deploy</span><span class="pi">:</span>
  <span class="na">provider</span><span class="pi">:</span> <span class="s">releases</span>
  <span class="na">api_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">GITHUB</span><span class="nv"> </span><span class="s">OAUTH</span><span class="nv"> </span><span class="s">TOKEN"</span>
  <span class="na">file_glob</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">file</span><span class="pi">:</span> <span class="s">directory/*</span>
  <span class="na">skip_cleanup</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">on</span><span class="pi">:</span>
    <span class="na">tags</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<p>You can use the glob pattern to recursively find the files:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">deploy</span><span class="pi">:</span>
  <span class="na">provider</span><span class="pi">:</span> <span class="s">releases</span>
  <span class="na">api_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">GITHUB</span><span class="nv"> </span><span class="s">OAUTH</span><span class="nv"> </span><span class="s">TOKEN"</span>
  <span class="na">file_glob</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">file</span><span class="pi">:</span> <span class="s">directory/**/*</span>
  <span class="na">skip_cleanup</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">on</span><span class="pi">:</span>
    <span class="na">tags</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<p>Please note that all paths in <code class="highlighter-rouge">file</code> are relative to the current working directory, not to <a href="/user/environment-variables/#default-environment-variables"><code class="highlighter-rouge">$TRAVIS_BUILD_DIR</code></a>.</p>

<h3 id="conditional-releases">Conditional releases <a href="#conditional-releases" class="toc-anchor">#</a></h3>

<p>You can deploy only when certain conditions are met.
See <a href="/user/deployment#conditional-releases-with-on">Conditional Releases with <code class="highlighter-rouge">on:</code></a>.</p>

<h2 id="running-commands-before-or-after-release">Running commands before or after release <a href="#running-commands-before-or-after-release" class="toc-anchor">#</a></h2>

<p>Sometimes you want to run commands before or after releasing a gem. You can use the <code class="highlighter-rouge">before_deploy</code> and <code class="highlighter-rouge">after_deploy</code> stages for this. These will only be triggered if Travis CI is actually pushing a release.</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">before_deploy</span><span class="pi">:</span> <span class="s2">"</span><span class="s">echo</span><span class="nv"> </span><span class="s">'ready?'"</span>
<span class="na">deploy</span><span class="pi">:</span>
  <span class="s">..</span>
<span class="na">after_deploy</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">./after_deploy_1.sh</span>
  <span class="pi">-</span> <span class="s">./after_deploy_2.sh</span>
</code></pre></div></div>

<h2 id="advanced-options">Advanced options <a href="#advanced-options" class="toc-anchor">#</a></h2>

<p>The following options from <code class="highlighter-rouge">.travis.yml</code> are passed through to Octokit API’s
<a href="https://octokit.github.io/octokit.rb/Octokit/Client/Releases.html#create_release-instance_method">#create_release</a>
and <a href="https://octokit.github.io/octokit.rb/Octokit/Client/Releases.html#update_release-instance_method">#update_release</a> methods.</p>

<ul>
  <li><code class="highlighter-rouge">tag_name</code></li>
  <li><code class="highlighter-rouge">target_commitish</code></li>
  <li><code class="highlighter-rouge">name</code></li>
  <li><code class="highlighter-rouge">body</code></li>
  <li><code class="highlighter-rouge">draft</code> (boolean)</li>
  <li><code class="highlighter-rouge">prerelease</code> (boolean)</li>
</ul>

<p>Note that formatting in <code class="highlighter-rouge">body</code> is <a href="https://github.com/travis-ci/dpl/issues/155">not preserved</a>.</p>

<h2 id="troubleshooting-git-submodules">Troubleshooting Git Submodules <a href="#troubleshooting-git-submodules" class="toc-anchor">#</a></h2>

<p>GitHub Releases executes a number of git commands during deployment. For this reason, it is important that the working directory is set to the one for which the release will be created, which generally isn’t a problem, but if you clone another repository during the build or use submodules, it is worth double checking.</p>


        </main>
      </div><!-- /#content -->

      <footer class="footer">
  <div class="layout-inner">
    <div class="footer-elem">
      <svg width="142px" height="45.381px" viewBox="0 0 142 45.381" enable-background="new 0 0 142 45.381" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink= "http://www.w3.org/1999/xlink">
        <title>Travis CI Mascot</title>
        <image xlink:href="https://styleguide.travis-ci.com/images/logos/travis-footer-logo-new.svg" x="0" y="0" width="142px" height="45.381px" />
      </svg>
    </div>

    <div class="footer-elem"></div>

    <div class="footer-elem">
      <h3 class="footer-title">©Travis CI, GmbH</h3>
      <address>Rigaer Straße 8<br>10247 Berlin, Germany</address>
      <ul>
        <li><a href="https://travisci.workable.com/" title="Jobs at Travis CI">Work with Travis CI</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Help</h3>
      <ul>
        <li><a href="https://docs.travis-ci.com" title="Travis CI Docs">Documentation</a></li>
        <li><a href="https://changelog.travis-ci.com/">Changelog</a></li>
        <li><a href="https://blog.travis-ci.com/" title="Travis CI Blog">Blog</a></li>
        <li><a href="mailto:support@travis-ci.com" title="Email Travis CI support">Email</a></li>
        <li><a href="https://twitter.com/travisci" title="Travis CI on Twitter">Twitter</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Company</h3>
      <ul>
        <li><a href="/imprint.html" title="Imprint">Imprint</a></li>
        <li><a href="https://ideracorp.com/legal/TravisCI">Legal</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Travis CI Status</h3>
      <ul>
        <li><div class="status-circle none">Status:</div>
          <a href="http://www.traviscistatus.com/">Travis CI Status</a>
        </li>
      </ul>
    </div>
  </div>
</footer>

<script>
 fetch('https://pnpcptp8xh9k.statuspage.io/api/v2/status.json').then(function(response) {
   return response.json();
 }).then(function(data) {
   if (data.status && data.status.indicator) {
     document.querySelector('.status-circle').classList.add(data.status.indicator);
   }
 });
</script>

    </div><!-- /.wrapper -->
  </body>
</html>
 contentType 9 text/html url 56 https://docs.travis-ci.com:443/user/deployment/releases/ responseCode 3 200 