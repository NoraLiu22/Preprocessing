eepkpowqbguiimwclogijedcqqxgnstagquimoxo length 6 150889 page 150889 
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>SHINE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="description" itemprop="description" content="应用宝">
    <meta itemprop="name" content="SHINE">
    <meta itemprop="image" content="http://pp.myapp.com/ma_icon/0/icon_52507209_1706023129/96">
    <link rel="shortcut icon" type="image/ico" href="/o/res/favicon.ico" />
    <style>@charset "utf-8";

html {
    box-sizing: border-box;
}

*, *:before, *:after {
    box-sizing: inherit;
}

body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td,header,hgroup,
nav,section,article,aside,footer,figure,figcaption,menu {
    margin: 0;
    padding: 0;
}

h1,h2,h3,h4,h5,h6 {
    font-weight: normal;
}

body {
    font-family: Roboto, "Droid Sans", "Droid Sans Fallback", "Helvetica Neue", Helvetica, STHeiTi, sans-serif;
    line-height: 24px;
    font-size: 14px;
    color: #000;
    -webkit-user-select: none;
    -webkit-text-size-adjust: none;
    background-color: #f5f5f5;
}

table {
    border-collapse: collapse;
    border-spacing: 0;
}

fieldset,
img {
    display: block;
    border: 0;
}

li {
    list-style: none;
}

input,textarea,select {
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
}

a,input {
    text-decoration: none;
    color: #1D82FF;
    -webkit-tap-highlight-color: none;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

header,nav,section,article,footer,figure,figcaption {
    display: block;
}

.mod-dialog {
  display: -webkit-box;
  -webkit-box-align: stretch;
  -webkit-box-pack: center;
  -webkit-box-orient: vertical;
  background: #fff;
  position: absolute;
  top: 50%;
  left: 24px;
  right: 24px;
  -webkit-transform: translateY(-50%);
  transform: translateY(-50%);
  width: auto;
  margin: auto;
  z-index: 199;
}

.mod-dialog-header {
  padding: 12px 20px 0;
  height: 36px;
  line-height: 24px;
  color: #000000;
  font-size: 16px;
  position: relative;
}

.mod-dialog-header .mod-close-btn {
  position: absolute;
  top: 18px;
  right: 18px;
  height: 13px;
  width: 13px;
}

.mod-dialog-header .mod-close-btn:after {
  position: absolute;
  content: "";
  top: 0;
  left: 0;
  height: 13px;
  width: 13px;
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDNEIxQzA0RDcyNTYxMUU1QjIxMjgxRTMwQ0ExMTc0QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDNEIxQzA0RTcyNTYxMUU1QjIxMjgxRTMwQ0ExMTc0QSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkM0QjFDMDRCNzI1NjExRTVCMjEyODFFMzBDQTExNzRBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkM0QjFDMDRDNzI1NjExRTVCMjEyODFFMzBDQTExNzRBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+LbWYNwAAAPpJREFUeNqk1NERgjAMBuCQJXAFmAKdAldAtoHDDdQp4FwCZnCKmtwVDmsLScndzwOW72JaSJqmOQHAg3Kr63qCVbVtC8rKKB3linR5Us6UnqAM4oufHSgF5cVwRflQuPMhEp/R1FoV2r9/sTfSCNxF2RoTY8w8z5zHsVrA45liUP4B5xXU+eh2bh9Uoz+wEt9E/2Ahvot64R1chHItm+crz4aCBA12vCq3cxEqgbmM8J4KdmcqPYph2L597kaJzzkq0NEzc16Ti+ANNLShvQ9HJSrGMQIV4RhC7dsHynO+4HgA3cS54/sBNIR3DJeUN3/YI1EXZ6v8CjAA5saaf8iGh+UAAAAASUVORK5CYII=) no-repeat scroll 0 0;
  background-size: cover;
}

.mod-dialog-content {
  position: relative;
  margin: 8px 20px 20px;
  color: #282828;
  font-size: 14px;
  line-height: 21px;
}

.mod-dialog-content ul {
  padding: 10px;
}

.mod-dialog-content li + li {
  margin-top: 15px;
}

.mod-dialog-content h3 {
  font-weight: bold;
  font-size: 14px;
  color: #000;
}

.mod-dialog-content p {
  font-size: 12px;
  color: #999;
  margin-top: 5px;
}

.mod-dialog-content #normalDownDialogContent {
  color: #282828;
  font-size: 14px;
  line-height: 21px;
}

.mod-dialog-content .mod-dailog-tips {
  font-size: 14px;
  color: #fe5c46;
}

.mod-dialog-footer {
  margin: 0 20px 20px;
  text-align: center;
  display: -webkit-box;
  -webkit-box-pack: justify;
}

.mod-dialog-footer a {
  -webkit-box-flex: 1;
  width: 50%;
}

.mod-dialog-footer a:first-child {
  margin-right: 10px;
}

.mod-dialog-footer .w-btn.btn-medium {
  display: block;
  width: 138px;
  height: 40px;
  line-height: 40px;
  border-width: 1px;
  border-style: solid;
  box-sizing: border-box;
  text-align: center;
  font-size: 14px;
}

.mod-dialog-footer .is-gray {
  border-color: #b0ccd9;
  color: #7da2b3;
}

.mod-dialog-footer .is-blue {
  border-color: #84d6fd;
  color: #00a3ef;
}

.mod-mask {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, .5);
  z-index: 99;
}

.mod-mask.opacity-66 {
  background: rgba(0, 0, 0, .66);
}

.mod-card {
  background-color: #ffffff;
  position: absolute;
  bottom: 0;
  height: 311px;
  width: 100%;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
          flex-direction: column;
}

.mod-card.small-mod-card {
  height: 100px;
}

.autoscroll {
  overflow: auto;
}

html,
body {
  height: 100%;
  width: 100%;
  background-color: #fff;
}

.main-content {
  padding-bottom: 100px;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
          flex-direction: column;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
          justify-content: center;
  height: 100%;
}

.btn-layout {
  margin-top: 60px;
}

@media (min-aspect-ratio: 360/520) {
  .btn-layout {
    margin-top: 20px;
  }
}

.app-tag-panel {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
          justify-content: center;
  color: #969696;
  font-size: 12px;
}

.app-tag-panel.highlight {
  color: #0080ff;
}

.app-tag-panel .app-tag-item {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
          justify-content: center;
  -webkit-box-align: center;
  -webkit-align-items: center;
          align-items: center;
  height: 34px;
  line-height: 34px;
}

.app-tag-panel .app-tag-item p {
  margin: 0 21px 0 3px;
}

.app-tag-panel .app-tag-item:last-child p {
  margin-right: 0;
}

.app-tag-panel .app-tag-item icon {
  display: inline-block;
  width: 12px;
  height: 12px;
}

.app-tag-panel .app-tag-item .app-tag-virus {
  background: url("data:image/svg+xml;charset=utf8,%3Csvg%20width=%2736%27%20height=%2736%27%20xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cpath%20d=%27M14.998%2036C9.754%2036%200%2027.966%200%2020.369V5.235l1.491-.024c.032%200%203.361-.071%206.796-1.467C11.81%202.31%2014.083.665%2014.104.649l.89-.649.898.65c.022.015%202.294%201.66%205.817%203.094%203.435%201.396%206.764%201.467%206.8%201.467l1.484.024L30%2020.369C30%2027.966%2020.246%2036%2014.998%2036zM3.028%208.136V20.37c0%205.873%208.496%2012.598%2011.97%2012.598s11.97-6.725%2011.97-12.598V8.136c-1.485-.16-3.894-.565-6.397-1.583a35.298%2035.298%200%2001-5.573-2.855%2035.247%2035.247%200%2001-5.57%202.855c-2.505%201.018-4.915%201.422-6.4%201.583zm10.953%2017.628l-7.022-5.955%202.159-2.53%204.504%203.818%208.55-9.806%202.524%202.18-10.715%2012.293z%27%20fill=%27%231D82FF%27%20fill-rule=%27nonzero%27/%3E%3C/svg%3E") no-repeat;
  background-size: cover;
}

.app-tag-panel .app-tag-item .app-tag-free {
  background: url("data:image/svg+xml;charset=utf8,%3Csvg%20width=%2736%27%20height=%2736%27%20xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cg%20fill=%27none%27%20fill-rule=%27evenodd%27%3E%3Ccircle%20stroke=%27%231D82FF%27%20stroke-width=%273%27%20cx=%2718%27%20cy=%2718%27%20r=%2716.5%27/%3E%3Ctext%20font-family=%27NotoSansCJKsc-Bold,%20Noto%20Sans%20CJK%20SC%27%20font-size=%2720%27%20font-weight=%27bold%27%20fill=%27%231D82FF%27%3E%3Ctspan%20x=%278%27%20y=%2725%27%3E%E5%85%8D%3C/tspan%3E%3C/text%3E%3C/g%3E%3C/svg%3E") no-repeat;
  background-size: cover;
}

.app-tag-panel .app-tag-item .app-tag-user-safe {
  background: url("data:image/svg+xml;charset=utf8,%3Csvg%20width=%2736%27%20height=%2736%27%20xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cpath%20d=%27M32.945%205.079c4.035%204.034%204.09%2010.547.18%2014.69l-.218.224-2.866%202.865-2.149-2.152.699-.698-.022-.021%201.75-1.75-.012-.011c.125-.11.247-.224.366-.343%202.929-2.929%202.933-7.673.009-10.597-2.924-2.924-7.669-2.92-10.598.008l-.175.181-.167.185-.011-.012-1.75%201.75-.042-.042-4.81%204.819-2.117-2.122%204.806-4.815-.135-.13c-2.94-2.741-7.543-2.683-10.404.178-2.924%202.924-2.92%207.668.01%2010.597l.18.175.185.168-.012.01%201.75%201.75-.022.022%2010.59%2010.589.019-.022%202.171%202.174-2.141%202.143-.01-.01-.005.007L3.298%2020.193a10.827%2010.827%200%2001-.205-.2c-4.13-4.129-4.146-10.806-.038-14.914%203.967-3.967%2010.33-4.088%2014.48-.373l.229.21.188.184.119-.118.048.049.117-.114c4.142-3.929%2010.669-3.879%2014.71.162zM17.123%2021.582l7.059%207.071-2.118%202.122-7.059-7.071%202.118-2.122zm3.993-4l7.06%207.071-2.119%202.122-7.059-7.071%202.118-2.122z%27%20fill=%27%231D82FF%27%20fill-rule=%27evenodd%27/%3E%3C/svg%3E") no-repeat;
  background-size: cover;
}

.app-tag-panel .app-tag-item .app-tag-adver {
  background: url("data:image/svg+xml;charset=utf8,%3Csvg%20width=%2736%27%20height=%2736%27%20xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cg%20transform=%27translate%28-292%20-3%29%27%20fill=%27none%27%20fill-rule=%27evenodd%27%3E%3Ccircle%20stroke=%27%231D82FF%27%20stroke-width=%273%27%20cx=%27310%27%20cy=%2721%27%20r=%2716.5%27/%3E%3Cpath%20d=%27M300.563%2027.438H298L302.563%2014h3.25l4.437%2013.438h-2.75l-.938-2.875h-4.937l-1.063%202.875zm1.75-4.875h3.562l-1.75-5.875-1.813%205.875zm12-6.313v8.938h1.375c2.625.125%203.875-1.375%203.75-4.5.083-3-1.167-4.48-3.75-4.438h-1.375zm-2.75%2011.188V14h4.375c4.166.125%206.312%202.354%206.437%206.688.083%204.625-2.062%206.875-6.438%206.75h-4.375z%27%20fill=%27%231D82FF%27/%3E%3C/g%3E%3C/svg%3E") no-repeat;
  background-size: cover;
}

.download-btn-wrapper {
  position: relative;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
          justify-content: center;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
          flex-direction: column;
  -webkit-box-align: center;
  -webkit-align-items: center;
          align-items: center;
}

.download-btn-wrapper .sub-download-btn {
  width: 260px;
  height: 40px;
  line-height: 40px;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
          justify-content: center;
  background-color: #1d82ff;
  color: #fff;
  text-align: center;
  font-size: 16px;
  margin: 15px auto 0;
  border-radius: 10px;
}

.download-btn-wrapper .main-download-btn {
  margin: 0 auto;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-box-align: center;
  -webkit-align-items: center;
          align-items: center;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
          justify-content: center;
  background-color: #1d82ff;
  width: 260px;
  height: 44px;
  line-height: 44px;
  color: #fff;
  border-radius: 2.7px;
  text-align: center;
  font-size: 16px;
  border-radius: 10px;
}

.download-btn-wrapper .main-download-btn.is-medium {
  width: 260px;
  height: 40px;
  line-height: 40px;
}

.download-btn-wrapper .main-download-btn.is-blue {
  background: url("data:image/svg+xml;charset=utf8,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cdefs%3E%3CclipPath%20id='clip'%3E%3Crect%20rx='3'%20ry='3'%20width='100%'%20height='100%'/%3E%3C/clipPath%3E%3C/defs%3E%3Crect%20width='100%'%20height='100%'%20rx='3'%20ry='3'%20fill='none'%20stroke='%230080ff'%20stroke-width='2'%20clip-path='url(%23clip)'/%3E%3C/svg%3E") no-repeat #fff;
  color: #0080ff;
}

.download-btn-wrapper .is-disable {
  border-color: #e5e5e5 !important;
  background: #f4f4f4 !important;
  color: #cecece !important;
}

.download-btn-wrapper .desalt {
  background: transparent !important;
  color: #6d6d6d;
}

.app-vertical-panel {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
          flex-direction: column;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
          justify-content: center;
  -webkit-box-align: center;
  -webkit-align-items: center;
          align-items: center;
  height: 124px;
}

.app-vertical-panel .app-icon {
  width: 64px;
  height: 64px;
}

.app-vertical-panel .app-icon-wrapper {
  position: relative;
}

.app-vertical-panel .app-formal-tag {
  position: absolute;
  top: -4px;
  right: -4px;
  width: 28px;
  height: 16px;
  background: url("data:image/svg+xml;charset=utf8,%3Csvg%20width=%2784%27%20height=%2748%27%20xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cg%20fill=%27none%27%20fill-rule=%27evenodd%27%3E%3Crect%20fill=%27%231D82FF%27%20width=%2784%27%20height=%2748%27%20rx=%276%27/%3E%3Ctext%20font-family=%27NotoSansHans-Regular,%20Noto%20Sans%20S%20Chinese%27%20font-size=%2730%27%20fill=%27%23FFF%27%3E%3Ctspan%20x=%2712%27%20y=%2735%27%3E%E5%AE%98%E6%96%B9%3C/tspan%3E%3C/text%3E%3C/g%3E%3C/svg%3E") no-repeat;
  background-size: cover;
}

.app-vertical-panel .app-formal-tag.left {
  left: -4px;
}

.app-vertical-panel h3 {
  margin-top: 5px;
  height: 28px;
  line-height: 28px;
  font-size: 20px;
  width: 80%;
  margin: 0 auto;
  text-align: center;
  overflow: hidden;
  text-overflow: ellipsis;
  display: block;
  white-space: nowrap;
  -webkit-flex-shrink: 0;
          flex-shrink: 0;
}

.app-vertical-panel p {
  height: 20px;
  margin-top: 0px;
  line-height: 20px;
  font-size: 12px;
}

.show {
  display: block;
}

.hidden {
  display: none !important;
}

/*
  隐私权限声明
*/

.pp-comp {
  position: fixed;
  bottom: 70px;
  text-align: center;
  width: 100%;
  font-size: 12px;
  line-height: 18px;
}

.pp-comp-extra-p {
  color: #969696;
}

.pp-comp-extra-p + .pp-comp-extra-p {
  margin: 5px 0;
}

.permission-n-privacy {
  color: #cdd2d8;
}

.permission-n-privacy a {
  color: #4f7fba;
  margin: 0 10px;
}

.appbao-logo {
  display: block;
  width: 80px;
  height: 18px;
}

.appbao-logo-wrapper {
  position: fixed;
  width: 100%;
  bottom: 7px;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
          flex-direction: column;
  -webkit-box-align: center;
  -webkit-align-items: center;
          align-items: center;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
          justify-content: center;
}

.appbao-logo-wrapper span {
  font-size: 10px;
  color: #909090;
}

.yyb-safe-text {
  color: #0080ff;
  font-size: 11px;
  line-height: 11px;
  margin-top: 6px;
}

.normal-safe-text {
  color: #ff004f;
  font-size: 11px;
  line-height: 11px;
  margin-top: 6px;
}

.ios-open-tips {
  position: absolute;
  z-index: 10;
  top: 8px;
  right: 23px;
  width: 240px;
  height: 73px;
  background: url(https://staticjs-75825.gzc.vod.tencent-cloud.com/ios-open-tips.png) no-repeat;
  background-size: 240px auto;
}


/*# sourceMappingURL=index_33915f63672cbe02571a.css.map*/</style>
</head>

<body>
  <div class="ios-open-tips hidden"></div>
  <div class="main-content" aegis-first-screen-timing>
    <div class="app-vertical-panel" aria-hidden="true">
  <div class="app-icon-wrapper">
    <img class="app-icon" src="http://pp.myapp.com/ma_icon/0/icon_52507209_1706023129/96" alt="应用宝logo">
    <div class="app-formal-tag"></div>
  </div>
  <h3>SHINE</h3>
  <p>
    4.92分&nbsp;&nbsp;
    10万次下载&nbsp;&nbsp;
    37.13MB
  </p>
</div>
    <div class="btn-layout">
  <div class="download-btn-wrapper" AEGIS-IGNORE-FIRST-SCREEN-TIMING>
    <a class="main-download-btn" href="javascript:void(0);" id="btn-fast-download" style="">
      <?xml version="1.0" encoding="utf-8"?>
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
        style="margin: auto; background: none; display: block; shape-rendering: auto;" width="40px" height="40px"
        viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
        <circle cx="50" cy="50" fill="none" stroke="#ffffff" stroke-width="6" r="36"
          stroke-dasharray="169.64600329384882 58.548667764616276" transform="rotate(275.883 50 50)">
          <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="0.7142857142857142s"
            values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform>
        </circle>
      </svg>
    </a>
    <div class="yyb-safe-text hidden" id="yyb-safe-text">（腾讯应用宝下载，人工审核保证安全）</div>
    <div class="app-tag-panel" id="app-tag-panel" aria-hidden="true">
   
   
  <div class="app-tag-item">
    <icon class="app-tag-virus"></icon>
    <p>无病毒</p>
  </div>
  
   
  <div class="app-tag-item">
    <icon class="app-tag-adver"></icon>
    <p>免广告骚扰</p>
  </div>
  
  
  
</div>
    <a class="sub-download-btn hidden" href="javascript:void(0);" id="btn-normal-download">通过第三方浏览器下载</a>
    <div class="normal-safe-text hidden" id="normal-safe-text">(无法确认是否存在安全隐患)</div>
  </div>
</div>
  </div>
  <div class="appbao-logo-wrapper" id="appbao-logo-panel" aria-hidden="true">
    <img class="appbao-logo" src="https://cdn.yyb.gtimg.com/wupload/xy/yybtech/yyb-logo.png" alt="应用宝logo">
    <span>该服务由应用宝技术提供</span>
  </div>
  <div class="mod-mask hidden" id="autodownloaddialog">
    <section class="mod-dialog">
      <h2 class="mod-dialog-header">下载提示<i class="mod-close-btn btn-close"></i></h2>
      <div class="mod-dialog-content">
        <p style="overflow: hidden;text-overflow:ellipsis;white-space: nowrap;">推荐使用官方下载器"应用宝"下载<span style="color: #f3b200">微信</span></p>
        <p>下载更<span class="appname" style="color:red">安全</span>，提速<span class="appname" style="color:red">60%</span></p>
      </div>
      <div class="mod-dialog-footer">
        <a href="javascript:void(0);" class="btn-cancel w-btn btn-medium clickable is-gray">取消</a>
        <a href="javascript:void(0);" class="btn-ok w-btn btn-medium clickable is-blue">确认</a>
      </div>
    </section>
  </div>
  <div class="mod-mask hidden" id="normaldialog">
    <section class="mod-dialog">
      <h2 class="mod-dialog-header"><span id="normalDownDialogTitle">下载提示</span><i class="mod-close-btn btn-close"></i></h2>
      <div class="mod-dialog-content">
        <p style="white-space: nowrap;overflow: hidden;text-overflow: ellipsis;" id="normalDownDialogContent">您选择通过普通浏览器下载<span class="appname"></span></p>
        <p class="mod-dailog-tips" id="normalDownDialogTips">(此方式可能存在安全隐患，建议选择安全下载)</p>
      </div>
      <div class="mod-dialog-footer">
        <a href="javascript:void(0);" class="btn-ok w-btn btn-medium clickable is-gray" id="normalOpenDialogNormalDownBtn">确定</a>
        <a href="javascript:void(0);" class="btn-cancel w-btn btn-medium clickable is-blue"
          id="normalOpenDialogFastDownBtn">安全下载</a>
      </div>
    </section>
  </div>
  <div class="mod-mask hidden" id="normalopendialog">
    <section class="mod-dialog">
      <h2 class="mod-dialog-header">打开提示<i class="mod-close-btn btn-close"></i></h2>
      <div class="mod-dialog-content">
        <p>您选择普通打开<span class="appname"></span></p>
        <p class="mod-dailog-tips">（此方式可能存在安全隐患，建议选择安全打开）</p>
      </div>
      <div class="mod-dialog-footer">
        <a href="javascript:void(0);" class="btn-ok w-btn btn-medium clickable is-gray">继续</a>
        <a href="javascript:void(0);" class="btn-cancel w-btn btn-medium clickable is-blue">安全打开</a>
      </div>
    </section>
  </div>
  <div class="mod-mask hidden" id="downloadRetyrDialog">
    <section class="mod-dialog">
      <h2 class="mod-dialog-header">下载提示<i class="mod-close-btn btn-close"></i></h2>
      <div class="mod-dialog-content">
        <p class="tips"></p>
      </div>
      <div class="mod-dialog-footer">
        <a href="javascript:void(0);" class="btn-cancel w-btn btn-medium clickable is-gray">取消</a>
        <a href="javascript:void(0);" class="btn-ok w-btn btn-medium clickable is-blue">重新下载</a>
      </div>
    </section>
  </div>
  <div class="mod-mask hidden" id="reloadDialog">
    <section class="mod-dialog">
      <h2 class="mod-dialog-header">温馨提示<i class="mod-close-btn btn-close"></i></h2>
      <div class="mod-dialog-content">
        <p class="tips"></p>
      </div>
      <div class="mod-dialog-footer">
        <a href="javascript:void(0);" class="btn-ok w-btn btn-medium clickable is-blue">好滴</a>
      </div>
    </section>
  </div>
  <div class="mod-mask hidden" id="updateMyappDialog">
    <section class="mod-dialog">
      <h2 class="mod-dialog-header">下载提示<i class="mod-close-btn btn-close"></i></h2>
      <div class="mod-dialog-content">
        <p style="overflow: hidden;text-overflow:ellipsis;white-space: nowrap;">更新应用宝获取付费应用<span
            style="color: #f3b200">微信</span></p>
      </div>
      <div class="mod-dialog-footer">
        <a href="javascript:void(0);" class="btn-cancel w-btn btn-medium clickable is-gray">取消</a>
        <a href="javascript:void(0);" class="btn-ok w-btn btn-medium clickable is-blue">更新</a>
      </div>
    </section>
  </div>
  <section class="tips app horizontal hidden" id="appbao-download-banner">
    <div class="app-icon">
      <img src="//cdn.yyb.gtimg.com/wupload/xy/yybtech/icon_myapp.png" alt="应用宝">
    </div>
    <div class="app-info">
      <h2>应用宝</h2>
      <p>下软件找游戏，超快省流量！</p>
    </div>
    <a href="javascript:void(0);" class="btn-strong w-btn is-b-blue btn-appbao-download">下载</a>
  </section>
  <div class="pp-comp" id="permission-panel">
  <p class="pp-comp-extra-p" aria-hidden="true">运营者: 上海日报社</p>
  <p class="pp-comp-extra-p" aria-hidden="true">开发者: 上海日报社</p>
  <p class="pp-comp-extra-p" aria-hidden="true">版本：2.5.9</p>
  <div class="permission-n-privacy">
    <a href="javascript:void(0);" id="permission-button">权限</a>|
    <a href="https://cftweb.3g.qq.com/privacy/agreement?appid=52507209" id="privacy" target="_blank">隐私</a>|
    <a href="https://m.yyb.qq.com/agreement/app-desc/?appid=52507209" target="_blank">功能</a>|
    <a href="javascript:void(0);" id="icp-button">备案</a>
  </div>
</div>
<div class="mod-mask hidden" id="permission-dialog">
    <section class="mod-card">
        <h2 class="mod-dialog-header">权限详情<i class="mod-close-btn btn-close"></i></h2>
        <div class="mod-dialog-content autoscroll">
          <ul>
              
                  <li>
                      <h3>访问网络</h3>
                      <p>访问网络连接,可能产生GPRS流量</p>
                  </li>
              
                  <li>
                      <h3>写入外部存储</h3>
                      <p>允许程序写入外部存储,如SD卡上写文件</p>
                  </li>
              
                  <li>
                      <h3>拍照权限</h3>
                      <p>允许访问摄像头进行拍照</p>
                  </li>
              
                  <li>
                      <h3>获取网络状态</h3>
                      <p>获取网络信息状态,如当前的网络连接是否有效</p>
                  </li>
              
                  <li>
                      <h3>获取WiFi状态</h3>
                      <p>获取当前WiFi接入的状态以及WLAN热点的信息</p>
                  </li>
              
                  <li>
                      <h3>显示系统窗口</h3>
                      <p>显示系统窗口</p>
                  </li>
              
                  <li>
                      <h3>使用振动</h3>
                      <p>允许振动</p>
                  </li>
              
                  <li>
                      <h3>读取电话状态</h3>
                      <p>访问电话状态</p>
                  </li>
              
                  <li>
                      <h3>内部系统窗口</h3>
                      <p>允许程序打开内部窗口,不对第三方应用程序开放此权限</p>
                  </li>
              
                  <li>
                      <h3>获取任务信息</h3>
                      <p>允许程序获取当前或最近运行的应用</p>
                  </li>
              
                  <li>
                      <h3>排序系统任务</h3>
                      <p>重新排序系统Z轴运行中的任务</p>
                  </li>
              
                  <li>
                      <h3>唤醒锁定</h3>
                      <p>允许程序在手机屏幕关闭后后台进程仍然运行</p>
                  </li>
              
                  <li>
                      <h3>访问账户Gmail列表</h3>
                      <p>访问GMail账户列表</p>
                  </li>
              
          </ul>
        </div>
    </section>
</div>
<div class="mod-mask hidden" id="icp-dialog">
  <section class="mod-card small-mod-card">
      <h2 class="mod-dialog-header">软件备案<i class="mod-close-btn btn-close"></i></h2>
      <div class="mod-dialog-content autoscroll">
        <p>沪ICP备05050403号-14A</p>
      </div>
  </section>
</div>

  <script>
    window.systemData={"head":{"guid":"56071714797356578","clientIp":"98.114.21.97"},"appDetail":{"appId":"52507209","packageName":"com.shanghaidaily.shine","appName":"SHINE","author":"上海日报社","developer":"上海日报社","downCount":{"bytes":"95543","desc":"9 万次"},"rating":{"averageRating":4.9156626506024095,"ratingCount":"1162","ratingDistribution":{"1":"1","2":"0","3":"1","4":"92","5":"1068"}},"iconUrl":"http://pp.myapp.com/ma_icon/0/icon_52507209_1706023129/96","versionName":"2.5.9","apkUrl":"http://imtt.dd.qq.com/sjy.20002/sjy.00004/16891/apk/C565A8B0E171AEC7E543D99D2F6C271C.apk?fsname=com.shanghaidaily.shine_2.5.9.apk&hsr=52507209","fileSize":{"bytes":"38935609","desc":"37.1 MB"},"apkMd5":"C565A8B0E171AEC7E543D99D2F6C271C","flag":{"value":"89","adver":1,"free":1,"official":0,"userSafe":0,"virus":1},"permissions":"android.permission.INTERNET;android.permission.WRITE_EXTERNAL_STORAGE;android.permission.READ_EXTERNAL_STORAGE;android.permission.CAMERA;android.permission.ACCESS_NETWORK_STATE;android.permission.ACCESS_WIFI_STATE;com.android.launcher.permission.INSTALL_SHORTCUT;android.permission.SYSTEM_ALERT_WINDOW;android.permission.SYSTEM_OVERLAY_WINDOW;android.permission.VIBRATE;android.permission.READ_PHONE_STATE;android.permission.INTERNAL_SYSTEM_WINDOW;android.permission.GET_TASKS;android.permission.REORDER_TASKS;com.huawei.appmarket.service.commondata.permission.GET_COMMON_DATA;android.permission.WAKE_LOCK;com.shanghaidaily.shine.DYNAMIC_RECEIVER_NOT_EXPORTED_PERMISSION;android.permission.GET_ACCOUNTS;android.permission.READ_PROFILE;android.permission.READ_MEDIA_IMAGES;com.google.android.finsky.permission.BIND_GET_INSTALL_REFERRER_SERVICE","channel":"","signatureMd5":"1B07384D1AC96DC0C0A630DB5AE936B9","versionCode":"0","apkId":"0","editorIntro":"","icpNumber":"沪ICP备05050403号-14A"},"appExt":{"channel":1004112,"iosUrl":"https://itunes.apple.com/us/app/shine-news/id1259040600","appLinkInfo":"","iosAppLinkInfo":"","schema":"","flink":"","apkName":"SHINE下载器-应用宝","isInnerSoft":false,"isCompliance":true},"yybPkg":{"channel":1193266,"url":"https://microdown.myapp.com/ug/20240430_c3044dea9c9836ed3aa154562dda7b83_offset_26382336.apk","md5":"","size":0,"version":"8.6.4"},"expInfo":{"experimentId":"11679361","recommendId":"B3EAXAIAAV/SEmY1uywpAAECALI2gTkMSAACBghwa2dfbmFtZRYXY29tLnNoYW5naGFpZGFpbHkuc2hpbmUGCWNvb2tpZV9pZBYRNTYwNzE3MTQ3OTczNTY1NzhcbHkM","params":{"bigBackgroundImage":"","cryptTmast":"true","pcStyle":"3","smallBackgroundImage":"","templateId":"-1"}},"clientInfo":{"position":{"country":"未知","province":"未知","city":"未知","clientIp":"2409:895a:244e:c7cb:d4a4:265d:987c:d82c"},"channelKey":"b0c160555370c87094691a9eebfdcf4f"},"viewParams":{"mainBtnBackgroundColorStyle":""},"yybAppDetail":{"appId":"5848","isFromWechatSafeDownload":false,"author":"深圳市腾讯计算机系统有限公司","developer":"深圳市腾讯计算机系统有限公司","versionName":"8.6.4","permissions":"com.android.permission.GET_INSTALLED_APPS;com.tencent.android.qqdownloader.component_security;com.tencent.android.qqdownloader.permission.XGPUSH_RECEIVE;com.tencent.android.qqdownloader.theme.permission;oicq.wlogin_sdk.permission.WloginProvider.READ;oicq.wlogin_sdk.permission.WloginProvider.WRITE;com.qq.AppService.permission.out.IPC_SERVICE;com.qq.superuser.READ_PERMISSION;com.qq.AppService.permission.out.CACHE_READ_PERMISSION;com.qq.AppService.permission.out.CACHE_WRITE_PERMISSION;com.android.launcher.permission.READ_SETTINGS;com.android.launcher.permission.WRITE_SETTINGS;com.android.launcher2.permission.READ_SETTINGS;com.android.launcher2.permission.WRITE_SETTINGS;com.android.launcher3.permission.READ_SETTINGS;com.android.launcher3.permission.WRITE_SETTINGS;cn.nubia.launcher.permission.READ_SETTINGS;cn.nubia.launcher.permission.WRITE_SETTINGS;com.bbk.launcher2.permission.READ_SETTINGS;com.bbk.launcher2.permission.WRITE_SETTINGS;com.android.launcher.permission.INSTALL_SHORTCUT;com.android.launcher.permission.UNINSTALL_SHORTCUT;android.permission.BROADCAST_STICKY;android.permission.BATTERY_STATS;android.permission.INTERNET;android.permission.SET_WALLPAPER;android.permission.ACCESS_WIFI_STATE;android.permission.READ_LOGS;android.permission.CHANGE_WIFI_STATE;android.permission.ACCESS_NETWORK_STATE;android.permission.DISABLE_KEYGUARD;android.permission.VIBRATE;android.permission.WRITE_SETTINGS;android.permission.READ_CALENDAR;android.permission.WRITE_CALENDAR;com.android.browser.permission.READ_HISTORY_BOOKMARKS;com.android.browser.permission.WRITE_HISTORY_BOOKMARKS;android.permission.RESTART_PACKAGES;android.permission.FLASHLIGHT;android.permission.CAMERA;android.permission.GET_TASKS;android.permission.REAL_GET_TASKS;android.permission.READ_EXTERNAL_STORAGE;android.permission.GET_PACKAGE_SIZE;android.permission.EXPAND_STATUS_BAR;android.permission.ACCESS_COARSE_LOCATION;android.permission.CLEAR_APP_CACHE;android.permission.KILL_BACKGROUND_PROCESSES;android.permission.WRITE_EXTERNAL_STORAGE;com.tencent.permission.VIRUS_SCAN;android.permission.SYSTEM_ALERT_WINDOW;android.permission.FORCE_STOP_PACKAGES;android.permission.CHANGE_NETWORK_STATE;android.permission.CAMERA;android.permission.ACCESS_NETWORK_STATE;android.permission.ACCESS_WIFI_STATE;android.permission.CHANGE_WIFI_STATE;android.permission.CHANGE_WIFI_MULTICAST_STATE;android.permission.CHANGE_NETWORK_STATE;android.permission.INTERNET;android.permission.ACCESS_CACHE_FILESYSTEM;android.permission.DIAGNOSTIC;android.permission.ACCESS_MTK_MMHW;android.permission.WRITE_EXTERNAL_STORAGE;android.permission.ACCESS_MOCK_LOCATION;android.permission.UPDATE_APP_OPS_STATS;android.permission.WAKE_LOCK;android.permission.READ_SECURE_SETTINGS;android.permission.READ_SETTINGS;android.permission.BIND_ACCESSIBILITY_SERVICE;android.permission.SET_PREFERRED_APPLICATIONS;android.permission.SET_WALLPAPER_HINTS;android.permission.DEVICE_POWER;android.permission.ACCESS_FINE_LOCATION;android.permission.PACKAGE_USAGE_STATS;android.permission.MOUNT_UNMOUNT_FILESYSTEMS;android.permission.WRITE_APN_SETTINGS;com.tencent.assistant.permission.YYB_EVENT_PERMISSION;android.permission.RECORD_AUDIO;android.permission.INSTALL_PACKAGES;android.permission.DELETE_PACKAGES;android.permission.MANAGE_USERS;android.permission.REQUEST_INSTALL_PACKAGES;android.permission.INTERNET;android.permission.ACCESS_COARSE_LOCATION;android.permission.ACCESS_FINE_LOCATION;android.permission.ACCESS_NETWORK_STATE;android.permission.ACCESS_WIFI_STATE;android.permission.ACCESS_GPS;android.permission.CAMERA;android.permission.WRITE_EXTERNAL_STORAGE;android.permission.RECEIVE_USER_PRESENT;android.permission.ACCESS_LOCATION_EXTRA_COMMANDS;com.tencent.android.qqdownloader.permission.TMF_SHARK;android.permission.REORDER_TASKS;android.permission.GET_ACCOUNTS;android.permission.READ_SYNC_STATS;android.permission.READ_SYNC_SETTINGS;android.permission.WRITE_SYNC_SETTINGS;android.permission.AUTHENTICATE_ACCOUNTS;com.tencent.android.qqdownloader.permission.TDOS_DIAGNOSE_BROADCAST;com.sec.android.provider.badge.permission.READ;com.sec.android.provider.badge.permission.WRITE;com.htc.launcher.permission.READ_SETTINGS;com.htc.launcher.permission.UPDATE_SHORTCUT;com.sonyericsson.home.permission.BROADCAST_BADGE;com.sonymobile.home.permission.PROVIDER_INSERT_BADGE;com.anddoes.launcher.permission.UPDATE_COUNT;com.majeur.launcher.permission.UPDATE_BADGE;com.huawei.android.launcher.permission.CHANGE_BADGE;com.huawei.android.launcher.permission.READ_SETTINGS;com.huawei.android.launcher.permission.WRITE_SETTINGS;android.permission.READ_APP_BADGE;com.oppo.launcher.permission.READ_SETTINGS;com.oppo.launcher.permission.WRITE_SETTINGS;com.vivo.notification.permission.BADGE_ICON;android.permission.QUERY_ALL_PACKAGES;android.permission.ALARM_LOCK;android.permission.BLUETOOTH;android.permission.NFC;android.permission.BLUETOOTH_ADMIN;android.permission.MODIFY_AUDIO_SETTINGS;com.tencent.android.qqdownloader.vfs.broadcast;com.tencent.android.qqdownloader.permission.PROCESS_PUSH_MSG;com.tencent.android.qqdownloader.permission.PUSH_PROVIDER"}}
  </script>
  <script src="//cdn.yyb.qq.com/yyb-monitor-web-sdk/1.0.51/yyb-monitor-web-sdk.min.js"></script>
  <script>(()=>{"use strict";var e={20:e=>{var t="%[a-f0-9]{2}",n=new RegExp("("+t+")|([^%]+?)","gi"),o=new RegExp("("+t+")+","gi");function a(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),o=e.slice(t);return Array.prototype.concat.call([],a(n),a(o))}function r(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(n)||[],o=1;o<t.length;o++)t=(e=a(t,o).join("")).match(n)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=o.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var a=r(n[0]);a!==n[0]&&(t[n[0]]=a)}n=o.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),s=0;s<i.length;s++){var l=i[s];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},806:e=>{e.exports=function(e,t){for(var n={},o=Object.keys(e),a=Array.isArray(t),r=0;r<o.length;r++){var i=o[r],s=e[i];(a?-1!==t.indexOf(i):t(i,s,e))&&(n[i]=s)}return n}},563:(e,t,n)=>{const o=n(610),a=n(20),r=n(500),i=n(806),s=Symbol("encodeFragmentIdentifier");function l(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function c(e,t){return t.encode?t.strict?o(e):encodeURIComponent(e):e}function d(e,t){return t.decode?a(e):e}function p(e){return Array.isArray(e)?e.sort():"object"==typeof e?p(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function u(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function h(e){const t=(e=u(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function g(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function m(e,t){l((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,o)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===o[e]&&(o[e]={}),o[e][t[1]]=n):o[e]=n};case"bracket":return(e,n,o)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==o[e]?o[e]=[].concat(o[e],n):o[e]=[n]:o[e]=n};case"colon-list-separator":return(e,n,o)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==o[e]?o[e]=[].concat(o[e],n):o[e]=[n]:o[e]=n};case"comma":case"separator":return(t,n,o)=>{const a="string"==typeof n&&n.includes(e.arrayFormatSeparator),r="string"==typeof n&&!a&&d(n,e).includes(e.arrayFormatSeparator);n=r?d(n,e):n;const i=a||r?n.split(e.arrayFormatSeparator).map((t=>d(t,e))):null===n?n:d(n,e);o[t]=i};case"bracket-separator":return(t,n,o)=>{const a=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!a)return void(o[t]=n?d(n,e):n);const r=null===n?[]:n.split(e.arrayFormatSeparator).map((t=>d(t,e)));void 0!==o[t]?o[t]=[].concat(o[t],r):o[t]=r};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),o=Object.create(null);if("string"!=typeof e)return o;if(!(e=e.trim().replace(/^[?#&]/,"")))return o;for(const a of e.split("&")){if(""===a)continue;let[e,i]=r(t.decode?a.replace(/\+/g," "):a,"=");i=void 0===i?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?i:d(i,t),n(d(e,t),i,o)}for(const e of Object.keys(o)){const n=o[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=g(n[e],t);else o[e]=g(n,t)}return!1===t.sort?o:(!0===t.sort?Object.keys(o).sort():Object.keys(o).sort(t.sort)).reduce(((e,t)=>{const n=o[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=p(n):e[t]=n,e}),Object.create(null))}t.extract=h,t.parse=m,t.stringify=(e,t)=>{if(!e)return"";l((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],o=function(e){switch(e.arrayFormat){case"index":return t=>(n,o)=>{const a=n.length;return void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?n:null===o?[...n,[c(t,e),"[",a,"]"].join("")]:[...n,[c(t,e),"[",c(a,e),"]=",c(o,e)].join("")]};case"bracket":return t=>(n,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?n:null===o?[...n,[c(t,e),"[]"].join("")]:[...n,[c(t,e),"[]=",c(o,e)].join("")];case"colon-list-separator":return t=>(n,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?n:null===o?[...n,[c(t,e),":list="].join("")]:[...n,[c(t,e),":list=",c(o,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(o,a)=>void 0===a||e.skipNull&&null===a||e.skipEmptyString&&""===a?o:(a=null===a?"":a,0===o.length?[[c(n,e),t,c(a,e)].join("")]:[[o,c(a,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?n:null===o?[...n,c(t,e)]:[...n,[c(t,e),"=",c(o,e)].join("")]}}(t),a={};for(const t of Object.keys(e))n(t)||(a[t]=e[t]);const r=Object.keys(a);return!1!==t.sort&&r.sort(t.sort),r.map((n=>{const a=e[n];return void 0===a?"":null===a?c(n,t):Array.isArray(a)?0===a.length&&"bracket-separator"===t.arrayFormat?c(n,t)+"[]":a.reduce(o(n),[]).join("&"):c(n,t)+"="+c(a,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,o]=r(e,"#");return Object.assign({url:n.split("?")[0]||"",query:m(h(e),t)},t&&t.parseFragmentIdentifier&&o?{fragmentIdentifier:d(o,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0,[s]:!0},n);const o=u(e.url).split("?")[0]||"",a=t.extract(e.url),r=t.parse(a,{sort:!1}),i=Object.assign(r,e.query);let l=t.stringify(i,n);l&&(l=`?${l}`);let d=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(d=`#${n[s]?c(e.fragmentIdentifier,n):e.fragmentIdentifier}`),`${o}${l}${d}`},t.pick=(e,n,o)=>{o=Object.assign({parseFragmentIdentifier:!0,[s]:!1},o);const{url:a,query:r,fragmentIdentifier:l}=t.parseUrl(e,o);return t.stringifyUrl({url:a,query:i(r,n),fragmentIdentifier:l},o)},t.exclude=(e,n,o)=>{const a=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return t.pick(e,a,o)}},500:e=>{e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},610:e=>{e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{const e=/cs0309|local/.test(location.host);let t=function(e){return e.TEST="test",e.PROD="prod",e}({}),o=function(e){return e[e.YYB=0]="YYB",e[e.Inner=1]="Inner",e[e.Normal=2]="Normal",e}({}),a=function(e){return e.Wechat="wechat",e.MQQ="mqq",e.QQBrowser="qqbrowser",e.Other="other",e.YYB="yyb",e}({}),r=function(e){return e.VIVO="vivoBROWSER",e.OPPO="oppoBROWSER",e.HUAWEI="huaweiBROWSER",e.XIAOMI="xiaomiBROWSER",e.SANXING="sanxingBROWSER",e.BAIDU="baiduBROWSER",e.UC="ucBROWSER",e.SOUGOU="sougouBROWSER",e}({}),i=function(e){return e.YYB="com.tencent.android.qqdownloader",e.Wechat="com.tencent.mm",e.MQQ="com.tencent.mobileqq",e.QQBrowser="com.tencent.mtt",e.Unknown="unknown",e}({}),s=function(e){return e.PC="60001",e.Default="50001",e.Complicance="50005",e.ForKingCard="20001",e}({}),l=function(e){return e.Safe="SAFEDOWNLOAD",e.Normal="NORMALDOWNLOAD",e}({});const c={[s.PC]:"sjy.10001",[s.Default]:"sjy.30001"},d={[a.Wechat]:i.Wechat,[a.MQQ]:i.MQQ,[a.QQBrowser]:i.QQBrowser,[a.YYB]:i.YYB,[a.Other]:i.Unknown},p="0";let u=function(e){return e.PageFinishRender="pageFinishRender",e.MainBtnFinishLoading="mainBtnFinishLoading",e.CPDownloadInstanceCreated="cpAppDownloadInstanceCreated",e.YYBDownloadInstanceCreated="qqdownloaderDownloadInstanceCreated",e.AppDownloaded="appDownloaded",e.AppDownloading="appDownloading",e.AppDownloadFailed="appDownloadFailed",e.PvShowBlueLinkGuide="pvShowBlueLinkGuide",e.MainExecuteExistOtherMarketPkg="mainExecuteExistOtherMarketPkg",e.ShowNormalDownloadPage="showNormalDownloadPage",e.ShowFastDownloadPage="showFastDownloadPage",e.PvFastDownldPageSystmDownldPop="pvFastDownldPageSystmDownldPop",e.PvNormalDownloadBrowserIntroLayer="pvNormalDownloadBrowserIntroLayer",e.PvNoApp="pvNoApp",e.PvNoAppReady="pvNoAppReady",e.PageExposure="pageExposure",e}({}),h=function(e){return e.ClickMainBtn="clickFastDownloadBtn",e.ClickNormalBtn="clickNormalBtn",e.ClickNormalDownloadConfirmDialogCloseBtn="normalDownloadConfirmDialogCloseBtn",e.ClickNormalDownloadConfirmDialogCloseOutTouch="normalDownloadConfirmDialogCloseOutTouch",e.ClickNormalDownloadConfirmDialogOkBtn="clickNormalDownloadConfirmDialogOkBtn",e.ClickNormalDownloadConfirmDialogFastDownloadBtn="clickNormalDownloadConfirmDialogFastDownloadBtn",e.ClickNormalDownldPageNormalBtn="clickNormalDownldPageNormalBtn",e.ClickNormalDownldPageMainBtn="clickNormalDownldPageMainBtn",e.ClickFastDownldPageMainBtn="clickFastDownldPageMainBtn",e.ClickIOSMainBtn="clickIOSFastDownloadBtn",e.ClickNoAppMainBtn="clickNoAppDownloadBtn",e}({}),g=function(e){return e.AutoDownloadCPApp="autoDownloadCpApp",e.AutoOpenCPApp="autoOpenCpApp",e.AutoOpenCPAppByQQDownloaderMidPage="autoOpenCpAppByQQDownloaderMidPage",e.AutoOpenQQDownloaderForDownloadApp="autoOpenQQDownloaderForDownloadApp",e}({}),m=function(e){return e.ShowOpenGuide="showOpenGuide",e}({}),f=function(e){return e.Qqdownloader="qqdownloader",e.CpApp="cpApp",e}({}),w=function(e){return e.ClickMainBtnToDownload="clickMainBtnToDownload",e.SystmAutoDownload="systmAutoDownload",e.ClickMainBtn="clickMainBtn",e}({});var y=n(563);function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class D{static init(e){const{instance:t}=D;if(t)throw new Error("Query已经初始化");const n=new D(e);D.instance=n}static getInstance(){const{instance:e}=D;if(!e)throw new Error("Query未初始化");return e}constructor(e){S(this,"queryParam",void 0),S(this,"search",void 0),this.search=e;const t=(0,y.parse)(e);this.queryParam={forinnersoft:"1"===t.forinnersoft,hideNormalBtn:!!t.hideNormalBtn,fromcase:t.fromcase||"",androidScheme:t.android_scheme||"",androidSchema:t.android_schema||"",scheme:t.scheme||"",ntc:"1"===t.ntc,gF:t.g_f||"",iosScheme:t.ios_scheme||"",iosSchema:t.ios_schema||"",mockBrowser:Object.values(a).includes(t.mock_browser)?t.mock_browser:null,mockOs:Object.values(b).includes(t.mock_os)?t.mock_os:null,proxyVia:t.proxy_via||"",sdUserid:t.sd_userid||"",debug:"1"===t.debug,via:t.via||"",scenevia:t.scenevia||t.scene_via||"",fromWechat:Object.values(l).includes(t.from_wechat)?t.from_wechat:null,id:t.id||"",callback:t.callback||""}}}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}S(D,"instance",void 0);let b=function(e){return e.Android="android",e.IOS="ios",e.PC="pc",e}({});class I{static getInstance(){const{instance:e}=I;if(!e)throw new Error("ua未初始化");return e}static init(e){const{instance:t}=I;if(t)throw new Error("ua已经初始化");const n=new I(e);I.instance=n}constructor(e){v(this,"ua",void 0),v(this,"userOS",b.PC),v(this,"osVersion",void 0),v(this,"browser",a.Other),v(this,"browserVersion",""),v(this,"mediaType",a.Other),v(this,"netType",void 0),this.ua=e,this.detect(e),this.mockEnvironment()}detect(e){this.handleOs(e),this.handleBrowser(e),this.handleNet(e)}isAndroid(e){return/android/i.test(e)||/UCBrowser/i.test(e)&&/Adr[\s/]*([\d.]+)/.test(e)}isIos(e){return this.userOS!==b.Android&&/(iPhone|iPad|iPod|iOS)/g.test(e)}handleOs(e){const t=e.match(/([a|A]ndroid)[\s/]*([\d.]+)/),n=e.match(/(iPad).*OS\s([\d_]+)/),o=!n&&e.match(/(iPhone\sOS)\s([\d_]+)/);if(/Windows NT/.test(e)&&(this.userOS=b.PC),this.isAndroid(e)&&(this.userOS=b.Android,t)){const[,,e]=t;this.osVersion=e}if(this.isIos(e)){if(this.userOS=b.IOS,o){const[,,e]=o;this.osVersion=e.replace(/-/g,".")}if(n){const[,,e]=n;this.osVersion=e.replace(/_/g,".")}}}handleBrowser(e){const t=[{browser:a.Wechat,regExp:/MicroMessenger\/([\d.]+)/},{browser:a.MQQ,regExp:/(?:V1_AND_SQ_|QQ\/)([\d.]+)/},{browser:a.YYB,regExp:/qqdownloader\/([\d.]+)/},{browser:a.QQBrowser,regExp:/MQQBrowser\/([\d.]+)(?!.*SogouMSE)/}].find((t=>e.match(t.regExp)));if(t){this.browser=t.browser;const[,n]=e.match(t.regExp);this.browserVersion=n}this.handleMediaType(e)}handleMediaType(e){if(this.mediaType=this.browser,this.browser!==a.Other)return;const t={[r.VIVO]:/VivoBrowser\/([\d.]+)/,[r.OPPO]:/HeyTapBrowser\/([\d.]+)/,[r.HUAWEI]:/HuaweiBrowser\/([\d.]+)/,[r.XIAOMI]:/MiuiBrowser\/([\d.]+)/,[r.SANXING]:/SamsungBrowser\/([\d.]+)/,[r.BAIDU]:/baiduboxapp\/([\d.]+)/,[r.UC]:/UCBrowser\/([\d.]+)/,[r.SOUGOU]:/SogouMSE\/([\d.]+)/},n=Object.entries(t).find((([,t])=>t.test(e)));if(!n)return;const[o]=n;this.mediaType=o}handleNet(e){const t=e.match(/NetType\/([^\s]*)\s/);if(t){const[,e]=t;this.netType=e}}mockEnvironment(){const{mockBrowser:e,mockOs:t}=D.getInstance().queryParam;e&&(this.browser=e),t&&(this.userOS=t)}}function B(e){const t=document.cookie.match(RegExp(`(?:^|;)\\s*${e}=([^;]*)`));return t?t[1]:""}function k(e){let t="";try{t=decodeURIComponent(e)}catch(e){t=""}return t}function P(e){x.getInstance().isMock()?alert(`location.href:${e}`):location.href=e}function C(e){P(`https://appdown${-1===location.host.indexOf("cs0309")||D.getInstance().queryParam.debug?"":"-test"}.md.qq.com/getDownloadLink?appUrl=${encodeURIComponent(e)}&type=apk`)}async function N(e){const{url:t,query:n,fragmentIdentifier:o}=(0,y.parseUrl)(location.href),a=x.getInstance();return n.proxy_via=await a.getVia(),n.sd_userid=a.getUserId(),n.from_wechat=e,(0,y.stringifyUrl)({url:t,query:n,fragmentIdentifier:o})}function A(){return window.self!==window.top}function O(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}v(I,"instance",void 0);let E=function(e){return e[e.NoInstall=0]="NoInstall",e[e.LowVersion=1]="LowVersion",e[e.LatestVersion=2]="LatestVersion",e}({});class x{static init(e){const{instance:t}=x;if(t)throw new Error("GlobalData已经初始化");const n=new x(e);x.instance=n}static getInstance(){const{instance:e}=x;if(!e)throw new Error("OperateSystemManager未初始化");return e}constructor(e){O(this,"appInfoData",void 0),O(this,"sceneVia",void 0),O(this,"handledAndroidSchema",void 0),O(this,"actionTraceId",void 0),O(this,"qbExchangeToken",""),O(this,"iosScheme",void 0),O(this,"cpMeshSDK",void 0),O(this,"yybDownloadUrl",""),O(this,"yybVersion",null),O(this,"cpVersion",p),O(this,"pversioncode",""),O(this,"cpType",void 0),O(this,"setHandleAndroidSchema",(e=>{this.handledAndroidSchema=e})),O(this,"getHandleAndroidSchema",(()=>this.handledAndroidSchema)),O(this,"getYYBDownloadUrl",(()=>(this.yybDownloadUrl||(this.yybDownloadUrl=this.appInfoData.baoPkg.url),this.yybDownloadUrl))),O(this,"setPVersionCode",(e=>{this.pversioncode=e})),O(this,"getPVersionCode",(()=>this.pversioncode)),O(this,"setCPType",(e=>{this.cpType=e})),O(this,"getCPType",(()=>this.cpType)),O(this,"isMock",(()=>{const{mockBrowser:e,mockOs:t}=D.getInstance().queryParam;return Boolean(t||e)})),O(this,"setYYBVersion",(e=>{this.yybVersion=e})),O(this,"setCPVersion",(e=>{this.cpVersion=e})),O(this,"getYYBVersionWithCache",(()=>this.isPC()?"":this.yybVersion?this.yybVersion:this.cpMeshSDK.getYYBVersion())),O(this,"getCPVersionWitchCache",(()=>this.isPC()?"":this.cpVersion?this.cpVersion:this.cpMeshSDK.getCPVersion())),O(this,"hasInstalledYYB",(()=>this.yybVersion&&this.yybVersion!==p)),O(this,"hasInstalledCP",(()=>this.cpVersion&&this.cpVersion!==p)),O(this,"getCPInstallState",(()=>{if(this.cpVersion===p)return E.NoInstall;const{appDetail:e}=this.appInfoData;return function(e,t){const n=e.split("."),o=t.split(".");try{for(let e=0,t=Math.max(n.length,o.length);e<t;e++){const t=isFinite(Number(n[e]))&&Number(n[e])||0,a=isFinite(Number(o[e]))&&Number(o[e])||0;if(t<a)return!1;if(t>a)return!0}}catch(e){return console.error("isEqualOrGreater error",e),!1}return!0}(String(this.cpVersion),String(e.versionName))||D.getInstance().queryParam.fromcase===s.ForKingCard?E.LatestVersion:E.LowVersion})),O(this,"getAppDownloadUrl",(()=>{let e="";const{appDetail:t,baoPkg:n}=this.appInfoData,{apkUrl:o,channel:a}=t;if(o){const t=D.getInstance().queryParam.scenevia,n=t?`${o.indexOf("?")<0?"?":"&"}via=${t}`:"";e=o+n;const a=e.match(/^http(s)?/);a&&!a[1]&&(e=e.replace("http","https"))}else{const{channel:t}=n,o={r:Math.random(),channel:String(a),g_f:t,g_tk:""},r=Object.entries(o).reduce(((e,[t,n])=>n?{...e,[t]:n}:e),{});e=`https://${location.host}/o/md-down/${this.appInfoData.appDetail.packageName}?${function(e,t=!1){const n=[];return Object.keys(e).forEach((o=>{t?n.push(`${o}=${e[o]}`):n.push(`${encodeURIComponent(o)}=${encodeURIComponent(e[o])}`)})),n.join("&")}(r)}`}return function(e){if(!/imtt\.dd\.qq\.com\/16891/gi.test(e))return e;const{fromcase:t}=D.getInstance().queryParam,n=Object.keys(c).includes(t)?t:s.Default,o="imtt.dd.qq.com";return e.replace(`${o}/`,`${o}/${c[n]}/`)}(e)})),O(this,"setCPMeshSDK",(e=>{this.cpMeshSDK=e})),O(this,"getCPMeshSDK",(()=>this.cpMeshSDK)),O(this,"getUserId",(()=>B("sd_userid"))),O(this,"getUserIdCreateTime",(()=>B("sd_cookie_crttime"))),O(this,"isCompliance",(()=>this.appInfoData.appExt.isCompliance)),O(this,"getVia",(()=>this.isPC()||A()?"":this.cpMeshSDK.getVia())),O(this,"isWechatShareUrl",(()=>{const e=I.getInstance();return e.userOS===b.Android&&e.browser!==a.Wechat&&D.getInstance().queryParam.fromWechat})),O(this,"getIsSafeWechatShareUrl",(()=>this.isWechatShareUrl()&&[l.Safe].includes(D.getInstance().queryParam.fromWechat))),O(this,"isNormalWechatShareUrl",(()=>this.isWechatShareUrl()&&l.Normal===D.getInstance().queryParam.fromWechat)),O(this,"isPC",(()=>"pc"===I.getInstance().userOS)),O(this,"getActionTraceId",(()=>`${Date.now()}${Math.ceil(2147483647*Math.random())*(new Date).getUTCMilliseconds()%1e10}`)),O(this,"getAppIOSScheme",(e=>{const{queryParam:t}=D.getInstance(),n=k(t.iosScheme||t.iosSchema);return null!=n&&n.startsWith(`${e}://`)?n:""}));const{appInfoData:t}=e;this.appInfoData=t;const{appExt:n}=t;this.sceneVia="",this.iosScheme=this.getAppIOSScheme(n.iosAppLinkInfo),this.actionTraceId=this.getActionTraceId()}getFromCase(){const{fromcase:e}=D.getInstance().queryParam;return e||this.getDefaultFromCase()}getDefaultFromCase(){return this.isCompliance()?s.Complicance:s.Default}}function Y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}O(x,"instance",void 0);class T{static getInstance(){const{instance:e}=this;if(!e){const e=new this;return this.instance=e,this.instance}return e}constructor(){Y(this,"param",void 0),Y(this,"globalData",void 0),Y(this,"ua",void 0)}init(){this.globalData=x.getInstance(),this.ua=I.getInstance()}syncCPAppInfoParam(){}report(e){return this.commonReport("/o/report?",e)}processReport(e){return this.commonReport("/o/process-report?",e)}appendParam(e){this.param={...this.param,...e}}commonReport(e,t){return new Promise((n=>{const o={...this.param,...t},a=`${e}${(0,y.stringify)(o)}`;if("undefined"!=typeof navigator&&navigator.sendBeacon)return navigator.sendBeacon(a),void n();try{const e=new window.XMLHttpRequest;e.addEventListener("loadend",(()=>{n()})),e.open("GET",a,!1),e.send()}catch(e){(new window.Image).src=a,n()}}))}}Y(T,"instance",void 0);var U=function(e){return e.RectificationH5V0="RectificationH5V0",e}(U||{}),V=function(e){return e.Normal="0",e.Compliance="6",e}(V||{});class R extends T{init(){super.init(),this.setDefaultParam(),this.syncCPAppInfoParam(),this.setYYB()}syncCPAppInfoParam(){const{globalData:e}=this,{appDetail:t}=e.appInfoData,n={[o.Inner]:"innerApp",[o.YYB]:"qqdownloader",[o.Normal]:""},a={appId:`${t.appId}`,appName:t.appName,packageName:t.packageName,appVersion:t.versionName,appChannel:t.channel,downloadUrl:t.apkUrl,fileSize:`${t.fileSize.bytes}`,appExtInfo:n[e.getCPType()]};this.param={...this.param,flag13:e.getCPInstallState(),...a}}setDefaultParam(){var e,t;const{ua:n,globalData:o}=this,{position:a}=o.appInfoData,{queryParam:r}=D.getInstance(),i={attaid:"01d00060764",token:"6969426725",project:"micro-download",osType:n.userOS,globalUserId:o.getUserId(),envExtInfo:o.getUserIdCreateTime(),uuid:o.actionTraceId,dataSource:"",mobileMode:"",netType:n.netType,mediaName:n.mediaType,mediaAppVersion:n.browserVersion,mediaUseragent:navigator.userAgent,mediaOsType:`${n.userOS},${n.osVersion}`,mediaExtInfo:"",clientIp:a.clientIp,country:a.country,province:a.province,city:a.city,deviceExtInfo:"",experimentId:null===(e=o.appInfoData.expInfo)||void 0===e?void 0:e.experimentId,experimentContent:"",recommendId:null===(t=o.appInfoData.expInfo)||void 0===t?void 0:t.recommendId,materialId:o.isCompliance()?V.Compliance:V.Normal,locationUrl:location.href,callervia:"",flag1:o.getFromCase(),flag6:p,flag7:p,flag10:document.referrer,flag11:location.host,flag13:E.NoInstall,flag14:A()?"1":"",flag18:o.isWechatShareUrl()?U.RectificationH5V0:"",flag19:r.proxyVia,flag20:String((null===globalThis||void 0===globalThis?void 0:globalThis.pcStyleType)??0)};this.param={...this.param,...i}}setYYB(){const{baoPkg:e}=this.globalData.appInfoData;this.param={...this.param,flag2:String(e.channel),flag3:String(e.vercode)}}}let j=function(e){return e.LOADED="LOADED",e.DOWNLOAD_CLICK="DOWNLOAD_CLICK",e}({});function q(e,t){return R.getInstance().report({eventName:e,eventExtInfo:(null==t?void 0:t.eventExtInfo)||"",eventScene:(null==t?void 0:t.eventScene)||"",eventResult:(null==t?void 0:t.eventResult)||""})}function M(e){const t=x.getInstance(),{appDetail:n,baoPkg:o}=t.appInfoData;R.getInstance().processReport({process:e,pkgname:n.packageName,channel:o.channel})}async function L(e,t){const n=R.getInstance(),o=x.getInstance(),a=await o.getYYBVersionWithCache(),r=await o.getCPVersionWitchCache(),i=await o.getVia();return n.syncCPAppInfoParam(),n.appendParam({flag6:a,flag7:r,callervia:i}),q(e,t)}const _=(e,t)=>{if(!e)return;const{classList:n}=e;t?n.remove("hidden"):n.add("hidden")},F=e=>{var t,n;_(e,!0);const o=null===(t=e.getElementsByClassName("mod-close-btn"))||void 0===t?void 0:t[0],a=null===(n=e.getElementsByClassName("mod-card"))||void 0===n?void 0:n[0],r=()=>{_(e,!1),e.removeEventListener("click",i),null==o||o.removeEventListener("click",s),null==a||a.removeEventListener("click",l)},i=()=>{r()},s=()=>{r()},l=e=>{e.stopPropagation()};e.addEventListener("click",i),null==o||o.addEventListener("click",s),null==a||a.addEventListener("click",l)};function Q(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class W{static getInstance(){const{instance:e}=W;if(!e){const e=new W;return W.instance=e,e}return e}constructor(){Q(this,"permissionPanel",document.getElementById("permission-panel")),Q(this,"bottomLogoPanel",document.getElementById("appbao-logo-panel")),Q(this,"permissionDialog",document.getElementById("permission-dialog")),Q(this,"permissionButton",document.getElementById("permission-button")),Q(this,"icpDialog",document.getElementById("icp-dialog")),Q(this,"icpButton",document.getElementById("icp-button")),this.bindEvent()}setPermissionPanelVisible(e){_(this.permissionPanel,e)}setBottomLogoPanelVisible(e){_(this.bottomLogoPanel,e)}showPermissionDialog(){F(this.permissionDialog)}showIcpDialog(){F(this.icpDialog)}bindEvent(){this.permissionButton.addEventListener("click",(()=>{this.showPermissionDialog()})),this.icpButton.addEventListener("click",(()=>{this.showIcpDialog()}))}}function J(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Q(W,"instance",void 0);let $=function(e){return e[e.SafeOpen=0]="SafeOpen",e[e.SafeUpdate=1]="SafeUpdate",e[e.AutoDownloadFromYYB=2]="AutoDownloadFromYYB",e[e.SafeDownload=3]="SafeDownload",e[e.OpenYYBAutoDownload=4]="OpenYYBAutoDownload",e[e.YYBDownloading=5]="YYBDownloading",e[e.Downloading=6]="Downloading",e[e.DownloadNow=7]="DownloadNow",e[e.Open=8]="Open",e[e.OpenNow=9]="OpenNow",e[e.GoAppStoreDownload=10]="GoAppStoreDownload",e[e.DownOrOpen=11]="DownOrOpen",e}({}),K=function(e){return e.Disable="is-disable",e.Enable="enable",e}({}),G=function(e){return e.Disable="is-disable",e.Desalt="desalt",e}({}),H=function(e){return e[e.Open=0]="Open",e[e.Download=1]="Download",e[e.SafeOpen=2]="SafeOpen",e[e.Downloading=3]="Downloading",e[e.OtherMethodDownload=4]="OtherMethodDownload",e}({});class z{static init(e){const{instance:t}=z;if(t)throw new Error("UI已经初始化");const n=new z(e);z.instance=n}static getInstance(){const{instance:e}=z;if(!e)throw new Error("UI未初始化");return e}constructor(e){J(this,"showConfirmDialog",(()=>{const e=document.getElementById("normaldialog"),t=document.querySelector("#normaldialog .appname"),n=document.querySelector(".mod-dialog");let o=null;n.addEventListener("click",(e=>{e.stopPropagation()}));const a=()=>{e.classList.add("invisible","hidden")};return document.querySelector("#normaldialog .btn-ok").addEventListener("click",(()=>{a(),o(!0)})),document.querySelector("#normaldialog .btn-cancel").addEventListener("click",(()=>{a(),o(!1)})),document.querySelector("#normaldialog .btn-close").addEventListener("click",(()=>{a(),o(!1)})),n=>new Promise((a=>{t.textContent=n,o=a,e.classList.remove("invisible","hidden")}))})()),J(this,"safeBtnState",$.AutoDownloadFromYYB),J(this,"normalBtnState",H.Download),J(this,"permissionUi",void 0),J(this,"handleSafeDownloadBtnClick",void 0),J(this,"handleNormalDownloadClick",void 0),J(this,"normalDownloadBtnDom",document.getElementById("btn-normal-download")),J(this,"safeDownloadBtnDom",document.getElementById("btn-fast-download")),J(this,"yybSafeTextDom",document.getElementById("yyb-safe-text")),J(this,"appTagPanelDom",document.getElementById("app-tag-panel")),J(this,"normalSafeTextDom",document.getElementById("normal-safe-text")),this.permissionUi=W.getInstance(),this.handleNormalDownloadClick=e.handleNormalDownloadClick,this.handleSafeDownloadBtnClick=e.handleSafeDownloadBtnClick,this.initEvent()}setSafeBtnStateAndUpdateText(e){if(globalThis.pcStyleType)return;this.safeBtnState=e;const t=function(){const{userOS:e,browser:t}=I.getInstance(),{isCompliance:n}=x.getInstance().appInfoData.appExt;let o,a,r="通过应用宝下载",i=n;return"pc"===e&&"wechat"===t&&(i=!0,o="（搭载腾讯移动应用引擎，电脑上玩手机APP）",a=!1,r="电脑版下载"),{[$.SafeOpen]:{text:"安全打开",className:K.Enable},[$.SafeUpdate]:{text:"安全更新",className:K.Enable},[$.AutoDownloadFromYYB]:{text:r,isShowSafeText:i,className:K.Enable,safeText:o,isShowSafeTag:a},[$.SafeDownload]:{text:"安全下载",className:K.Enable},[$.OpenYYBAutoDownload]:{text:"打开应用宝自动下载",isShowSafeText:n,className:K.Enable},[$.YYBDownloading]:{text:"应用宝下载中",className:K.Disable},[$.Downloading]:{text:"正在下载",className:K.Disable},[$.DownloadNow]:{text:"立即下载",isShowSafeText:n,className:K.Enable},[$.Open]:{text:"打开",className:K.Enable},[$.GoAppStoreDownload]:{text:"去App Store下载",className:K.Enable},[$.OpenNow]:{text:"立即打开",className:K.Enable},[$.DownOrOpen]:{text:"下载/打开",className:K.Enable,isShowSafeTag:!1}}}()[e];this.updateSafeDownloadBtnText(t.text),this.setSafeDownloadBtnClassName(t.className),this.setYYBSafeTextVisible(!!t.isShowSafeText),this.updateYYBSafeText(t.safeText),this.setYYBSafeTagVisible(t.isShowSafeTag)}setNormalBtnStateAndUpdateText(e){if(globalThis.pcStyleType)return;this.normalBtnState=e;const t=function(){const{userOS:e,browser:t}=I.getInstance();return{[H.Open]:{text:"打开"},[H.Download]:{text:"通过第三方浏览器下载",isShowNormalSafeText:"pc"!==e||"wechat"!==t},[H.SafeOpen]:{text:"安全打开"},[H.Downloading]:{text:"正在下载",className:G.Disable},[H.OtherMethodDownload]:{text:"其他方式下载",className:G.Desalt}}}()[e];this.updateNormalDownloadBtnText(t.text),this.setNormalDownloadBtnClassName(t.className),this.setNormalSafeTextVisible(!!t.isShowNormalSafeText)}setAllSafeDownloadBtnVisible(e){_(this.appTagPanelDom,e),this.setYYBSafeTextVisible(e),_(this.safeDownloadBtnDom,e)}setAllNormalDownloadBtnVisible(e){this.setNormalSafeTextVisible(e),_(this.normalDownloadBtnDom,e)}setYYBSafeTextVisible(e){_(this.yybSafeTextDom,e)}setNormalSafeTextVisible(e){const{browser:t}=I.getInstance(),n={[a.Other]:()=>!1,[a.MQQ]:()=>x.getInstance().appInfoData.appExt.isCompliance,[a.QQBrowser]:()=>!1,[a.Wechat]:()=>x.getInstance().appInfoData.appExt.isCompliance,[a.YYB]:()=>!1};_(this.normalSafeTextDom,e&&n[t]())}setPermissionPanelVisible(e){this.permissionUi.setPermissionPanelVisible(e)}setBottomLogoPanelVisible(e){this.permissionUi.setBottomLogoPanelVisible(e)}showIosOpenTips(){document.body.classList.add("ios"),Array.from(document.getElementsByClassName("ios-open-tips")).forEach((e=>e.classList.remove("hidden")))}showWxGuide(){try{if(document.getElementsByClassName("j-guide").length>0)return;const e=document.createElement("div");e.className="j-guide",e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.style.right="0px",e.style.bottom="0px",e.style.backgroundColor="rgba(0, 0, 0, 0.8)",e.style.zIndex="99";const t=new Image;t.src="https://cdn.yyb.gtimg.com/wxz/openmasktip.png",t.style.position="absolute",t.style.width="220px",t.style.top="13px",t.style.right="24px",e.appendChild(t),e.addEventListener("touchmove",(e=>{e.stopPropagation(),e.preventDefault()})),e.addEventListener("click",(t=>{t.stopPropagation(),t.preventDefault(),e&&document.body.removeChild(e)})),document.body.appendChild(e)}catch(e){console.error(e)}}initEvent(){const e=x.getInstance();this.normalDownloadBtnDom.addEventListener("click",(()=>{L(h.ClickNormalBtn),e.isNormalWechatShareUrl()&&L(h.ClickNormalDownldPageNormalBtn),this.handleNormalDownloadClick()})),this.safeDownloadBtnDom.addEventListener("click",(()=>{L(h.ClickMainBtn),e.isNormalWechatShareUrl()&&L(h.ClickNormalDownldPageMainBtn),e.getIsSafeWechatShareUrl()&&L(h.ClickFastDownldPageMainBtn),this.handleSafeDownloadBtnClick()}))}updateSafeDownloadBtnText(e){this.safeDownloadBtnDom.innerText=e}updateNormalDownloadBtnText(e){this.normalDownloadBtnDom.innerText=e}setSafeDownloadBtnClassName(e){e&&(Object.values(K).forEach((e=>{this.safeDownloadBtnDom.classList.remove(e)})),this.safeDownloadBtnDom.classList.add(e))}setNormalDownloadBtnClassName(e){e&&(Object.values(G).forEach((e=>{this.normalDownloadBtnDom.classList.remove(e)})),this.normalDownloadBtnDom.classList.add(e))}updateYYBSafeText(e){e&&this.yybSafeTextDom&&(this.yybSafeTextDom.innerText=e)}setYYBSafeTagVisible(e){"boolean"==typeof e&&_(this.appTagPanelDom,e)}}J(z,"instance",void 0);var X=Object.defineProperty,Z=Object.defineProperties,ee=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,ae=(e,t,n)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,re=(e,t)=>{for(var n in t||(t={}))ne.call(t,n)&&ae(e,n,t[n]);if(te)for(var n of te(t))oe.call(t,n)&&ae(e,n,t[n]);return e},ie=(e,t)=>Z(e,ee(t)),se=(e,t,n)=>(ae(e,"symbol"!=typeof t?t+"":t,n),n),le=(e,t,n)=>new Promise(((o,a)=>{var r=e=>{try{s(n.next(e))}catch(e){a(e)}},i=e=>{try{s(n.throw(e))}catch(e){a(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(r,i);s((n=n.apply(e,t)).next())})),ce=(e=>(e.Wechat="wechat",e.MQQ="mqq",e.QQBrowser="qqbrowser",e.Other="other",e.YYB="yyb",e.MQQYYB="mqqyyb",e.YSDK="ysdk",e.Sogou="sogou",e.TencentVideo="tencentVideo",e.Huya="huya",e))(ce||{});const de="com.tencent.android.qqdownloader",pe="0",ue="1",he={recommendId:"",cpChannelId:"",hostPName:"",yybDownloadUrl:"",hostVersionCode:"",hostVersion:"",qbExchangeToken:"",isDev:!1,businessId:"",sceneVia:"",versionName:"",idleGetDynamicPkgUrl:!1,cryptTmast:!1},ge="timerout_id",me="OTHERBROWSER",fe={mqq:"QQ",other:me,qqbrowser:"QQBROWSER",wechat:"WX",yyb:"YYB",mqqyyb:"MQQYYB",ysdk:me,sogou:me,tencentVideo:me,huya:me};var we=(e=>(e.Load="load",e.GetYYBInfo="getYYBInfo",e.GetDefaultYYBCDN="getDefaultYYBCDN",e.TimeOut="timeOut",e.Invoke="invoke",e.NoPermission="noPermission",e.NoSupport="noSupport",e.Download="download",e.Open="open",e.Call="call",e.Install="install",e))(we||{}),ye=(e=>(e[e.Success=0]="Success",e))(ye||{});const Se={};function De(e=""){location.href=e}function ve(e){const t=Se[e];if(t)return t;const n=new Promise(((t,n)=>{const o=document.createElement("script");o.addEventListener("load",(()=>{t()})),o.addEventListener("error",(()=>{n(we.Load)})),o.src=e,document.body.appendChild(o)}));return n.finally((()=>{delete Se[e]})),Se[e]=n,n}var be=(e=>(e[e.Ready=0]="Ready",e[e.Downloading=1]="Downloading",e[e.Paused=2]="Paused",e[e.Downloaded=3]="Downloaded",e[e.Installing=4]="Installing",e[e.Installed=5]="Installed",e[e.Failed=6]="Failed",e[e.Removed=7]="Removed",e))(be||{});class Ie{constructor(){se(this,"onResumeCallbacks",[]),se(this,"onCPDownloadStateChangeCallbacks",[]),se(this,"onYYBDownloadStateChangeCallbacks",[]),this.initResume()}getAppInstalledVersion(e){throw new Error("未实现getAppInstalledVersion")}download(e){return le(this,null,(function*(){De(e.apkUrl)}))}queryDownload(e){return le(this,null,(function*(){return{}}))}getDownloadState(e){return le(this,null,(function*(){return 0}))}open(e){return le(this,null,(function*(){throw new Error("未实现open")}))}openWithScheme(e){return le(this,null,(function*(){De(e)}))}stop(e){console.warn("未实现stop")}cancel(e){console.warn("未实现cancel")}install(e){console.warn("未实现install")}registerResume(e){this.onResumeCallbacks.push(e)}registerCPDownloadStateChange(e){this.onCPDownloadStateChangeCallbacks.push(e)}registerYYBDownloadStateChange(e){this.onYYBDownloadStateChangeCallbacks.push(e)}triggerDownloadStateChange(e){e.packageName===de?this.triggerYYBDownloadStateChange(e):this.triggerCPDownloadStateChange(e)}triggerCPDownloadStateChange(e){this.onCPDownloadStateChangeCallbacks=this.excuteCallBackAndFilterActive(this.onCPDownloadStateChangeCallbacks,e)}triggerYYBDownloadStateChange(e){this.onYYBDownloadStateChangeCallbacks=this.excuteCallBackAndFilterActive(this.onYYBDownloadStateChangeCallbacks,e)}triggerResume(){this.onResumeCallbacks.forEach((e=>{e()}))}initResume(){console.warn("未实现initResume逻辑")}excuteCallBackAndFilterActive(e,t){const n=[];return e.forEach(((e,o)=>{e(t)&&n.push(o)})),e.filter(((e,t)=>!n.includes(t)))}}const Be="8642130";class ke extends Ie{getAppInstalledVersion(e){return le(this,null,(function*(){return(yield Promise.allSettled(e.map((e=>this.checkAppInstalled(e))))).map((e=>"fulfilled"===e.status?e.value:pe))}))}download(e){return le(this,null,(function*(){(yield this.getJSBridge()).startDownload(this.getDownloadAppParam(e))}))}stop(e){return le(this,null,(function*(){(yield this.getJSBridge()).pauseDownload(this.getDownloadAppParam(e))}))}cancel(e){return le(this,null,(function*(){(yield this.getJSBridge()).cancelDownload(this.getDownloadAppParam(e))}))}install(e){return le(this,null,(function*(){(yield this.getJSBridge()).installApk(this.getDownloadAppParam(e))}))}initResume(){return le(this,null,(function*(){const e=yield this.getJSBridge();e.on(e.INSTALL_APK_EVENT_CHANGED,(e=>{const{status:t,progress:n=0,result:o}=e,a=this.getDownloadStatus(t);this.triggerDownloadStateChange({downloadStatus:"success"===o?be.Installed:a,progress:n,packageName:e.packageName})})),document.addEventListener("visibilitychange",(()=>{document.hidden||this.triggerResume()}))}))}getJSBridge(){return le(this,null,(function*(){if(window.Hy2yybJsSdk)return window.Hy2yybJsSdk.HYDownload;if(yield ve("//hd2.huya.com/fedbasic/hy2yyb-js-sdk/hy2yyb-js-sdk.bundle.umd.js"),window.Hy2yybJsSdk)return window.Hy2yybJsSdk.HYDownload;throw new Error(we.Load)}))}checkAppInstalled(e){return le(this,null,(function*(){const t=yield this.getJSBridge(),n=yield t.getAppDownloadInfo({url:"",packageName:e,versionCode:Be}),{status:o,progress:a}=n,r=this.getDownloadStatus(o);return this.triggerDownloadStateChange({downloadStatus:r,progress:a,packageName:e}),n.installed?ue:pe}))}getDownloadStatus(e){return{0:be.Ready,[-2]:be.Downloading,[-1]:be.Downloading,1:be.Downloading,2:be.Downloading,23:be.Downloading,5:be.Downloaded,3:be.Paused,6:be.Installed,20:be.Installed,4:be.Failed}[e]}getDownloadAppParam(e){return{url:e.apkUrl,gameIcon:e.iconUrl,packageName:e.packageName,name:e.appName,versionCode:Be}}}function Pe(e){return new Promise((t=>{setTimeout((()=>{t()}),e)}))}function Ce(e){return le(this,arguments,(function*(e,t=5e3){const n=Pe(t).then((()=>ge)),o=yield Promise.race([e,n]);if(o===ge)throw new Error(we.TimeOut);return o}))}function Ne(e,t){const n=e.split("."),o=t.split(".");try{for(let e=0,t=Math.max(n.length,o.length);e<t;e++){const t=isFinite(Number(n[e]))&&Number(n[e])||0,a=isFinite(Number(o[e]))&&Number(o[e])||0;if(t<a)return!1;if(t>a)return!0}}catch(e){return console.error("isEqualOrGreater error",e),!1}return!0}function Ae(e){document.addEventListener("visibilitychange",(t=>{const n=t.target;(null==n?void 0:n.hidden)||e()}))}class Oe extends Ie{getAppInstalledVersion(e){return le(this,null,(function*(){return Promise.all(e.map((e=>this.checkAppInstalled(e))))}))}open(e){return le(this,null,(function*(){(yield this.getMqq()).app.launchApp(e.packageName)}))}download(e){return le(this,null,(function*(){const t=yield this.getMqq();return new Promise((n=>{t.app.downloadApp(this.getDownloadAppParam(ie(re({},e),{actionCode:"2"})),(t=>le(this,null,(function*(){const o=this.getDownloadStatus(t.state);this.triggerDownloadStateChange({downloadStatus:o,progress:t.pro,packageName:e.packageName}),o===be.Downloaded&&(yield this.install(e),n())}))))}))}))}install(e){return le(this,null,(function*(){const t=yield this.getMqq();return new Promise(((n,o)=>{t.app.downloadApp(this.getDownloadAppParam(ie(re({},e),{actionCode:"5"})),(e=>{const t=this.getDownloadStatus(e.state);t!==be.Installed?[be.Failed,be.Removed].includes(t)&&o():n()}))}))}))}initResume(){return le(this,null,(function*(){(yield this.getMqq()).addEventListener("qbrowserVisibilityChange",(e=>{e.hidden||this.triggerResume()}))}))}getMqq(){return le(this,null,(function*(){return window.mqq||(yield ve("https://open.mobile.qq.com/sdk/qqapi.js?_bid=152")),window.mqq}))}checkAppInstalled(e){return le(this,null,(function*(){const t=yield this.getMqq();return Ce(new Promise((n=>{t.app.checkAppInstalled(e,(e=>{n(e)}))})))}))}getDownloadStatus(e){return{2:be.Downloading,4:be.Downloaded,3:be.Paused,5:be.Installing,6:be.Installed,9:be.Removed,20:be.Ready}[e]}getDownloadAppParam(e){return{appid:String(e.appid),url:e.apkUrl,packageName:e.packageName,actionCode:e.actionCode,via:e.via,appName:e.appName,source:"biz_src_yyb",isUniteDownload:!0}}}class Ee extends Ie{getAppInstalledVersion(e){return le(this,null,(function*(){return Promise.all(e.map((e=>this.checkAppInstalled(e))))}))}open(e){return le(this,null,(function*(){(yield this.getJSBridge()).startApp(e.packageName)}))}download(e){return le(this,null,(function*(){let t=!1;const n=yield this.getJSBridge();return new Promise((o=>{const a=n.Download(this.getDownloadAppParam(e),((n,r)=>le(this,null,(function*(){const i=this.getDownloadStatus(n);this.triggerDownloadStateChange({downloadStatus:i,progress:r,packageName:e.packageName}),i===be.Downloaded&&o(),yield Pe(500),t||(a.doAction(),t=!0)}))))}))}))}initResume(){return le(this,null,(function*(){document.addEventListener("visibilitychange",(()=>{document.hidden||this.triggerResume()}))}))}getJSBridge(){return le(this,null,(function*(){if(window.JsBridge)return window.JsBridge;if(yield ve("//cdn.yyb.qq.com/components/mesh-sdk/jsbridge-mqappcenter.js"),window.JsBridge)return window.JsBridge;throw new Error(we.Load)}))}checkAppInstalled(e){return le(this,null,(function*(){const t=yield this.getJSBridge();return Ce(new Promise((n=>{t.call("qzone_app/getAppInfoBatch",e,",",!1,!1,!1,(e=>{if(e)try{const[[,,t]]=JSON.parse(e.data||e)||[];n(t)}catch(e){console.error(e),n(pe)}else n(pe)}))})))}))}getDownloadStatus(e){return{4:be.Downloading,6:be.Downloaded,5:be.Paused,7:be.Installing,8:be.Installed,1:be.Ready,2:be.Ready,3:be.Downloading}[e]}getDownloadAppParam(e){return{hnAppId:String(e.appid),url:e.apkUrl,packageName:e.packageName,via:e.via,appName:e.appName,apkId:String(e.appid),yybUrl:e.apkUrl,auto_start_yyb_download:e.packageName===de?"1":"0",source:"biz_src_yyb",pageId:6001,moduleId:"01",positionId:"0001",channelId:"",myAppConfig:"1",recommendId:"",versionCode:"",checkUpdate:0,toPageType:"-1",isAutoDownload:1,isAutoInstall:1}}}class xe extends Ie{getAppInstalledVersion(e){return Promise.resolve(e.map((()=>pe)))}download(e){return le(this,null,(function*(){!function(e){const t=document.createElement("iframe");t.style.cssText="position:absolute;left:0;top:0;width:0;height:0;visibility:hidden;",t.src=e,document.body.appendChild(t)}(e.apkUrl)}))}}class Ye extends Ie{constructor(){super(...arguments),se(this,"isStartPollYYBDownloadQuery",!1),se(this,"needStartPollingCPDownloadQueryByPackageName",{}),se(this,"isLoadedBrowser",!1)}getAppInstalledVersion(e){const t=e.map((e=>this.getApkInfo(e)));return Promise.all(t)}download(e){return le(this,null,(function*(){const t=yield this.getBroswer();if(this.getDownStatus(t,e.apkUrl)!==be.Downloaded)return this.pollGetDownStatus({apkUrl:e.apkUrl,packageName:e.packageName,browser:t}),this.startDownload(e),new Promise((t=>{const n=n=>n.downloadStatus===be.Downloaded&&(this.installByUrl(e.apkUrl),t(),!0);e.packageName===de?this.registerYYBDownloadStateChange(n):this.registerCPDownloadStateChange(n)}));this.installByUrl(e.apkUrl)}))}getDownloadState(e){return le(this,null,(function*(){const t=yield this.getBroswer();return this.getDownStatus(t,e.apkUrl)}))}open(e){return le(this,null,(function*(){(yield this.getBroswer()).app.runApk(e.packageName)}))}initResume(){Ae((()=>this.triggerResume()))}getDownStatus(e,t){const n={TASK_STATUS_CREATED:be.Ready,TASK_STATUS_STARTED:be.Downloading,TASK_STATUS_PROGRESS:be.Downloading,TASK_STATUS_COMPLETED:be.Downloaded,TASK_STATUS_TIMEOUT:be.Failed,TASK_STATUS_FAILED:be.Failed,TASK_STATUS_CANCELED:be.Paused,TASK_STATUS_NONE:be.Failed,TASK_STATUS_DELETED:be.Removed,TASK_STATUS_FILE_HAS_DELETED:be.Removed};return"function"==typeof e.download.getDownloadStatus?n[e.download.getDownloadStatus({url:t})]:be.Ready}installByUrl(e){return le(this,null,(function*(){(yield this.getBroswer()).download.installApp({url:e})}))}startDownload(e){return le(this,null,(function*(){const{apkUrl:t,iconUrl:n,appName:o}=e;(yield this.getBroswer()).download.startDownload({url:t,needautoinstall:String(!0),needdialog:String(!1),needtoast:String(!0),notifyType:"2",iconurl:n,filename:o?`${o}.apk`:void 0})}))}getBroswer(){return le(this,null,(function*(){if(this.isLoadedBrowser)return window.browser;yield ve("//jsapi.qq.com/get?api=app.getApkInfo,app.runApk,download.startDownload,download.getDownloadStatus,download.installApp");const{browser:e}=window;if(!(null==e?void 0:e.app)||!(null==e?void 0:e.download))throw new Error(we.Load);return this.isLoadedBrowser=!0,window.browser}))}getApkInfo(e){return le(this,null,(function*(){const t=yield this.getBroswer();return Ce(new Promise((n=>{t.app||n(pe),t.app.getApkInfo((e=>{var t;let o=null;try{o=JSON.parse(e||"{}"),"string"==typeof o&&(o=JSON.parse(o||"{}"))}catch(e){console.warn(`JSON parse error${e}`)}finally{n(null!=(t=null==o?void 0:o.versionname)?t:pe)}}),e)})))}))}pollGetDownStatus(e){const{browser:t}=e,n=e.packageName===de;if(n){if(this.isStartPollYYBDownloadQuery)return;this.isStartPollYYBDownloadQuery=!0}else{if(this.needStartPollingCPDownloadQueryByPackageName[e.packageName])return;this.needStartPollingCPDownloadQueryByPackageName[e.packageName]=!0}let o=be.Ready;const a=setInterval((()=>{const r=this.getDownStatus(t,e.apkUrl);o!==r&&(o=r,this.triggerDownloadStateChange({downloadStatus:r,progress:0,packageName:e.packageName})),[be.Downloaded,be.Failed].includes(r)&&(n?this.isStartPollYYBDownloadQuery=!1:this.needStartPollingCPDownloadQueryByPackageName[e.packageName]=!1,clearInterval(a))}),500)}}function Te(e){try{return JSON.parse(e)}catch(e){return null}}const Ue={0:be.Downloading,2:be.Downloading,1:be.Ready,5:be.Paused,3:be.Downloaded,4:be.Failed,6:be.Failed};class Ve extends Ie{download(e){return le(this,null,(function*(){const{callbackName:t="",gameInfo:n={},position:o=0}=e.exp;return window.SogouJsBridge.downloadApp(n,String(o),t)}))}queryDownloadStateList(){return le(this,null,(function*(){return Te(yield window.SogouJsBridge.queryDownloadStateList())||[]}))}open(e){return le(this,null,(function*(){yield window.SogouJsBridge.startGame(e.packageName)}))}stop(e){this.download(e)}getDownloadState(e){return le(this,null,(function*(){const t=yield this.queryDownload(e);return Ue[t.downloadState]||be.Ready}))}getAppInstalledVersion(e){return le(this,null,(function*(){return[(yield this.isAppInstalled(e[0]))?ue:pe]}))}queryDownload(e){return le(this,null,(function*(){const t=yield this.queryDownloadStateList();for(const n of t)if(Number(n.appId)===e.appId)return n;return{appId:e.appId,downloadState:1,percent:0}}))}isAppInstalled(e){return le(this,null,(function*(){return yield window.SogouJsBridge.isAppInstalled(e)}))}}class Re extends Ie{getAppInstalledVersion(e){return le(this,null,(function*(){return Promise.all(e.map((e=>this.checkAppInstalled(e))))}))}getDownloadState(e){return le(this,null,(function*(){const t=yield this.getJSBridge();return new Promise((n=>{t.invoke("checkDowload3rdAppState",{downloadUrl:e.apkUrl||"",packageName:e.packageName},(e=>{const t=Te(e),o=this.getDownloadStateMap((null==t?void 0:t.result.uiState)||0);n(o)}))}))}))}open(e){return le(this,null,(function*(){(yield this.getJSBridge()).invoke("launch3rdApp",{pkgName:e.packageName})}))}openWithScheme(e){return le(this,null,(function*(){location.href=e}))}download(e){return le(this,null,(function*(){const t=yield this.getJSBridge();return new Promise(((n,o)=>{t.invoke("download3rdApp",{downloadUrl:e.apkUrl||"",packageName:e.packageName,appName:e.appName||"",iconUrl:e.iconUrl||"https://cdn.yyb.gtimg.com/wupload/xy/yybtech/noX3c1de.png",reportKey:"",reportParams:"",topMargin:0},(a=>{const r=Te(a);if(0!==(null==r?void 0:r.errCode))return void o(null==r?void 0:r.errMsg);const i=e.packageName===de,s={downloadStatus:be.Ready,progress:0,packageName:e.packageName},l=()=>{s.downloadStatus===be.Downloaded&&n(),i?this.triggerYYBDownloadStateChange(s):this.triggerCPDownloadStateChange(s)};t.on("onDownloadTaskStateChanged",(t=>{(null==t?void 0:t.packageName)===e.packageName&&(s.downloadStatus=this.getDownloadStateMap(t.state),l())})),t.on("onDownloadTaskProgressChanged",(t=>{(null==t?void 0:t.packageName)===e.packageName&&(s.progress=(null==t?void 0:t.progress)||0,l())}))}))}))}))}initResume(){return le(this,null,(function*(){(yield this.getJSBridge()).on("onPageAppear",(()=>{this.triggerResume()}))}))}getJSBridge(){return new Promise((e=>{globalThis.TenvideoJSBridge?e(globalThis.TenvideoJSBridge):document.addEventListener("onTenvideoJSBridgeReady",(()=>{e(globalThis.TenvideoJSBridge)}),!1)}))}checkAppInstalled(e){return le(this,null,(function*(){const t=yield this.getJSBridge();return Ce(new Promise((n=>{t.invoke("isInstalled",{pkgName:e},(e=>{const t=Te(e);n((null==t?void 0:t.result.installed)?ue:pe)}))})))}))}getDownloadStateMap(e){return{0:be.Ready,10:be.Installed,11:be.Downloaded,12:be.Ready,13:be.Downloading,14:be.Paused,15:be.Downloading,16:be.Downloading,17:be.Ready,18:be.Ready,19:be.Failed}[e]}}class je extends Ie{getAppInstalledVersion(e){return le(this,null,(function*(){return Promise.all(e.map((e=>le(this,null,(function*(){const t=yield this.asyncInvoke("getInstallState",{packageName:e});return t.err_msg.indexOf(":yes")>=0&&t.versionName||pe})))))}))}open(e){return le(this,null,(function*(){const{packageName:t,signature:n}=e;try{yield this.asyncInvoke("launch3rdApp",{type:1,packageName:t,signature:n})}catch(e){throw e}}))}openWithScheme(e){return le(this,null,(function*(){try{yield this.asyncInvoke("launchApplication",{schemeUrl:e})}catch(e){throw e}}))}initResume(){this.getWeixinJSBridge().then((e=>{e.on("activity:state_change",(e=>{e.state.includes("onResume")&&this.triggerResume(),e.state.includes("onPause")&&this.onPause()}))}))}getWeixinJSBridge(){return Ce(new Promise((e=>{const{WeixinJSBridge:t}=window;if("object"==typeof t&&"function"==typeof t.invoke)e(t);else{const t=()=>{e(window.WeixinJSBridge)};document.addEventListener?document.addEventListener("WeixinJSBridgeReady",t,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",t),document.attachEvent("onWeixinJSBridgeReady",t))}})))}asyncInvoke(e,t){return le(this,null,(function*(){const n=yield this.getWeixinJSBridge();return Ce(new Promise(((o,a)=>{n.invoke(e,t,(e=>{const t=e.err_msg;t.includes(":ok")||"launch_3rdApp:fail"===t?o(e):t.includes(":fail")?a(we.Invoke):["system:access_denied","access_control:not_allow"].includes(t)?a(we.NoPermission):"system:function_not_exist"!==t?o(e):a(we.NoSupport)}))})))}))}onPause(){}}class qe extends Ie{getAppInstalledVersion(e){return le(this,null,(function*(){return e[0]===de?[String(yield this.getYYBInstallVersion())]:[]}))}getYYBInstallVersion(){return le(this,null,(function*(){const e=this.callJSBridge("isMyAPPInstalled",{});try{const t=yield Ce(e,1e3);return 1===(null==t?void 0:t.data)?ue:pe}catch(e){return console.error(e),pe}}))}callJSBridge(e,t){return le(this,null,(function*(){const n=yield this.getYSDKJSBridge();return new Promise(((o,a)=>{n.call(e,t,(e=>{0===e.result?o(ie(re({},e),{data:Te(e.data)})):a(we.Call)}))}))}))}getYSDKJSBridge(){return le(this,null,(function*(){if(!window.JsBridge&&(yield ve("//qzs.qq.com/open/yyb/common/js/jsbridge-ysdk.js"),!window.JsBridge))throw new Error(we.Load);return window.JsBridge}))}}const Me={UPDATE:be.Installed,QUEUING:be.Downloading,DOWNLOADING:be.Downloading,PAUSED:be.Paused,DOWNLOADED:be.Downloaded,INSTALLING:be.Installing,INSTALLED:be.Installed,FAIL:be.Failed};class Le extends Ie{constructor(){super(...arguments),se(this,"cpApkIdByAppId",{}),se(this,"yybApkId",null),se(this,"needStartPollingCPDownloadQueryByPackageName",{}),se(this,"isStartPollYYBDownloadQuery",!1)}getAppInstalledVersion(e){return le(this,null,(function*(){yield Pe(200);const t=this.callJSBridge("getAppInfo",{packagenames:e.join(","),noupdateinfo:1});let n=null;try{n=yield Ce(t,1e3)}catch(t){n={result:0,seqid:0,state:0,data:e.reduce(((e,t)=>ie(re({},e),t===de?{[de]:{install:1,verCode:1,verName:ue}}:{[t]:{install:0,verCode:0,verName:pe}})),{})}}const{data:o}=n;return e.map((e=>{var t;return 1===(null==(t=null==o?void 0:o[e])?void 0:t.install)?o[e].verName:pe}))}))}download(e){return le(this,null,(function*(){const t=yield this.ensureCreateDownload({appId:e.appid,packageName:e.packageName});yield this.callJSBridge("startDownload",{apkid:t||0,packagename:e.packageName}),this.pollQueryDownloadState({apkUrl:e.apkUrl,packageName:e.packageName,appId:e.appid})}))}getDownloadState(e){return le(this,null,(function*(){return(yield this.queryDownload(e)).downloadState}))}open(e){return le(this,null,(function*(){yield this.callJSBridge("startOpenApp",{packageName:e.packageName})}))}queryDownload(e){return le(this,null,(function*(){const t=yield this.ensureCreateDownload({appId:e.appId,packageName:e.packageName}),n=yield this.callJSBridge("queryDownload",{appid:e.appId,apkid:t,packagename:e.packageName}),{data:o}=n;return o?{downloadState:Me[o.appstate],downpercent:o.downpercent||0}:{downloadState:be.Ready,downpercent:0}}))}initResume(){return le(this,null,(function*(){Ae((()=>this.triggerResume()))}))}callJSBridge(e,t){return le(this,null,(function*(){const n=yield this.getYYBJSBridge();return new Promise(((o,a)=>{n.call(e,t,(e=>{0===e.result?o(ie(re({},e),{data:Te(e.data)})):a(we.Call)}))}))}))}getYYBJSBridge(){return le(this,null,(function*(){if(window.JsBridge)return window.JsBridge;if(yield ve("//cdn-go.cn/yybfrontend/yyb-common-offline/v1.0.13/jsbridge/jsbridge.min.js?_ck_bid=40&_ck_min_ver=4&max_age=2592000"),window.JsBridge)return window.JsBridge;throw new Error(we.Load)}))}ensureCreateDownload(e){return le(this,null,(function*(){var t,n;const o=()=>this.callJSBridge("createDownload",{appid:e.appId,oplist:"2"});if(e.packageName===de){if(null===this.yybApkId){const e=yield o();this.yybApkId=(null==(t=e.data)?void 0:t.apkid)||null}return this.yybApkId}if(!this.cpApkIdByAppId[e.appId]){const t=yield o();this.cpApkIdByAppId[e.appId]=(null==(n=t.data)?void 0:n.apkid)||null}return this.cpApkIdByAppId[e.appId]}))}pollQueryDownloadState(e){const t=e.packageName===de;if(t){if(this.isStartPollYYBDownloadQuery)return;this.isStartPollYYBDownloadQuery=!0}else{if(this.needStartPollingCPDownloadQueryByPackageName[e.appId])return;this.needStartPollingCPDownloadQueryByPackageName[e.appId]=!0}const n=setInterval((()=>{this.queryDownload({apkUrl:e.apkUrl,packageName:e.packageName,appId:e.appId}).then((o=>{const a={downloadStatus:o.downloadState,progress:o.downpercent,packageName:e.packageName};t?this.triggerYYBDownloadStateChange(a):this.triggerCPDownloadStateChange(a),[be.Installed,be.Failed,be.Downloaded].includes(o.downloadState)&&(t?this.isStartPollYYBDownloadQuery=!1:this.needStartPollingCPDownloadQueryByPackageName[e.appId]=!1,clearInterval(n))}))}),500)}}const _e=class{constructor(e){se(this,"jsbridge");const t={[ce.MQQ]:Oe,[ce.QQBrowser]:Ye,[ce.Wechat]:je,[ce.Other]:xe,[ce.YYB]:Le,[ce.MQQYYB]:Ee,[ce.YSDK]:qe,[ce.Sogou]:Ve,[ce.TencentVideo]:Re,[ce.Huya]:ke};this.jsbridge=new t[e]}static init(e){const{instance:t}=_e;if(t)throw new Error("JsBridgeManager 已经初始化");const n=new _e(e);return _e.instance=n,n}static getJsbridge(){const{instance:e}=_e;if(!e)throw new Error("JsBridgeManager未初始化");return e.jsbridge}};let Fe=_e;se(Fe,"instance");const Qe=class{constructor(e){se(this,"ua"),se(this,"os","pc"),se(this,"osVersion"),se(this,"browser",ce.Other),se(this,"browserVersion"),se(this,"mediaType",me),se(this,"netType"),this.ua=e,this.detect(e)}static getInstance(){const{instance:e}=Qe;if(!e)throw new Error("ua未初始化");return e}static init(e){const{instance:t}=Qe;if(t)throw new Error("ua已经初始化");const n=new Qe(e);Qe.instance=n}detect(e){this.handleOs(e),this.handleBrowser(e),this.handleNet(e)}isAndroid(e){return/android/i.test(e)||/UCBrowser/i.test(e)&&/Adr[\s/]*([\d.]+)/.test(e)}isIos(e){return"android"!==this.os&&/(iPhone|iPad|iPod|iOS)/g.test(e)}handleOs(e){const t=/([a|A]ndroid)[\s/]*([\d.]+)/.exec(e),n=/(iPad).*OS\s([\d_]+)/.exec(e),o=!n&&/(iPhone\sOS)\s([\d_]+)/.exec(e);if(/Windows NT/.test(e)&&(this.os="pc"),this.isAndroid(e)&&(this.os="android",t)){const[,,e]=t;this.osVersion=e}if(this.isIos(e)){if(this.os="ios",o){const[,,e]=o;this.osVersion=e.replace(/-/g,".")}if(n){const[,,e]=n;this.osVersion=e.replace(/_/g,".")}}}handleBrowser(e){const t=[{browser:ce.Wechat,regExp:/MicroMessenger\/([\d.]+)/},{browser:ce.MQQ,regExp:/(?:V1_AND_SQ_)([\d.]+)/},{browser:ce.MQQYYB,regExp:/(?:ApiLevel\/)([\d.]+).*(?:QQ\/)([\d.]+)/},{browser:ce.YYB,regExp:/qqdownloader\/([\d.]+)/},{browser:ce.YSDK,regExp:/YSDKVersion\/([\d.]+)/},{browser:ce.Sogou,regExp:/sogoudownloader\/([\d.]+)/},{browser:ce.TencentVideo,regExp:/QQLiveBrowser\/([\d.]+)/},{browser:ce.QQBrowser,regExp:/MQQBrowser\/([\d.]+)(?!.*SogouMSE)/},{browser:ce.Huya,regExp:/\shuya/}].find((t=>t.regExp.exec(e)));if(t){this.browser=t.browser;const[,n]=t.regExp.exec(e);this.browserVersion=n}this.handleMediaType(e)}handleMediaType(e){const t=fe[this.browser];if(this.mediaType=t,t!==me)return;const n=Object.entries({vivoBROWSER:/VivoBrowser\/([\d.]+)/,oppoBROWSER:/HeyTapBrowser\/([\d.]+)/,huaweiBROWSER:/HuaweiBrowser\/([\d.]+)/,xiaomiBROWSER:/MiuiBrowser\/([\d.]+)/,sanxingBROWSER:/SamsungBrowser\/([\d.]+)/,baiduBROWSER:/baiduboxapp\/([\d.]+)/,ucBROWSER:/UCBrowser\/([\d.]+)/,sougouBROWSER:/SogouMSE\/([\d.]+)/}).find((([,t])=>t.test(e)));if(!n)return;const[o]=n;this.mediaType=o}handleNet(e){const t=/NetType\/([^\s]*)\s/.exec(e);if(t){const[,e]=t;this.netType=e}}};let We=Qe;se(We,"instance");class Je{static getVia(e){const{scenevia:t}=e,n=this.getCPInstallState({cpVersion:e.cpVersion,versionName:e.versionName}),o=t?[t.toUpperCase()]:[];return[e.businessId,e.yybVersion===pe?"NEWYYB":"YYB",...o,this.getScene(n)].join(".")}static getScene(e){return`${We.getInstance().mediaType}.${{0:"SAFEDOWNLOAD",1:"SAFEUPGRATE",2:"OPEN"}[e]}`}}se(Je,"getCPInstallState",(e=>e.cpVersion||e.cpVersion===pe?0:Ne(String(e.cpVersion),String(e.versionName))?2:1));var $e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},Ke={exports:{}},Ge=function(e,t){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return e.apply(t,n)}},He=Ge,ze=Object.prototype.toString;function Xe(e){return Array.isArray(e)}function Ze(e){return void 0===e}function et(e){return"[object ArrayBuffer]"===ze.call(e)}function tt(e){return null!==e&&"object"==typeof e}function nt(e){if("[object Object]"!==ze.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function ot(e){return"[object Function]"===ze.call(e)}function at(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),Xe(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}var rt={isArray:Xe,isArrayBuffer:et,isBuffer:function(e){return null!==e&&!Ze(e)&&null!==e.constructor&&!Ze(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===ze.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&et(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:tt,isPlainObject:nt,isUndefined:Ze,isDate:function(e){return"[object Date]"===ze.call(e)},isFile:function(e){return"[object File]"===ze.call(e)},isBlob:function(e){return"[object Blob]"===ze.call(e)},isFunction:ot,isStream:function(e){return tt(e)&&ot(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===ze.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:at,merge:function e(){var t={};function n(n,o){nt(t[o])&&nt(n)?t[o]=e(t[o],n):nt(n)?t[o]=e({},n):Xe(n)?t[o]=n.slice():t[o]=n}for(var o=0,a=arguments.length;o<a;o++)at(arguments[o],n);return t},extend:function(e,t,n){return at(t,(function(t,o){e[o]=n&&"function"==typeof t?He(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}},it=rt;function st(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var lt=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(it.isURLSearchParams(t))o=t.toString();else{var a=[];it.forEach(t,(function(e,t){null!=e&&(it.isArray(e)?t+="[]":e=[e],it.forEach(e,(function(e){it.isDate(e)?e=e.toISOString():it.isObject(e)&&(e=JSON.stringify(e)),a.push(st(t)+"="+st(e))})))})),o=a.join("&")}if(o){var r=e.indexOf("#");-1!==r&&(e=e.slice(0,r)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e},ct=rt;function dt(){this.handlers=[]}dt.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},dt.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},dt.prototype.forEach=function(e){ct.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var pt=dt,ut=rt,ht=function(e,t,n,o,a){return e.config=t,n&&(e.code=n),e.request=o,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},gt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mt=ht,ft=function(e,t,n,o,a){var r=new Error(e);return mt(r,t,n,o,a)},wt=ft,yt=rt,St=yt.isStandardBrowserEnv()?{write:function(e,t,n,o,a,r){var i=[];i.push(e+"="+encodeURIComponent(t)),yt.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),yt.isString(o)&&i.push("path="+o),yt.isString(a)&&i.push("domain="+a),!0===r&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Dt=rt,vt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],bt=rt,It=bt.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var o=e;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=bt.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};function Bt(e){this.message=e}Bt.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Bt.prototype.__CANCEL__=!0;var kt=Bt,Pt=rt,Ct=St,Nt=lt,At=It,Ot=ft,Et=gt,xt=kt,Yt=rt,Tt=function(e,t){ut.forEach(e,(function(n,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[o])}))},Ut=ht,Vt={"Content-Type":"application/x-www-form-urlencoded"};function Rt(e,t){!Yt.isUndefined(e)&&Yt.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var jt,qt={transitional:gt,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(jt=function(e){return new Promise((function(t,n){var o,a=e.data,r=e.headers,i=e.responseType;function s(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}Pt.isFormData(a)&&delete r["Content-Type"];var l=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",d=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.Authorization="Basic "+btoa(c+":"+d)}var p,u,h=(p=e.baseURL,u=e.url,p&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(u)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(p,u):u);function g(){if(l){var o="getAllResponseHeaders"in l?(a=l.getAllResponseHeaders(),p={},a?(Dt.forEach(a.split("\n"),(function(e){if(d=e.indexOf(":"),r=Dt.trim(e.substr(0,d)).toLowerCase(),c=Dt.trim(e.substr(d+1)),r){if(p[r]&&vt.indexOf(r)>=0)return;p[r]="set-cookie"===r?(p[r]?p[r]:[]).concat([c]):p[r]?p[r]+", "+c:c}})),p):p):null;(function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(wt("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)})((function(e){t(e),s()}),(function(e){n(e),s()}),{data:i&&"text"!==i&&"json"!==i?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:o,config:e,request:l}),l=null}var a,r,c,d,p}if(l.open(e.method.toUpperCase(),Nt(h,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,"onloadend"in l?l.onloadend=g:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(g)},l.onabort=function(){l&&(n(Ot("Request aborted",e,"ECONNABORTED",l)),l=null)},l.onerror=function(){n(Ot("Network Error",e,null,l)),l=null},l.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",o=e.transitional||Et;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(Ot(t,e,o.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",l)),l=null},Pt.isStandardBrowserEnv()){var m=(e.withCredentials||At(h))&&e.xsrfCookieName?Ct.read(e.xsrfCookieName):void 0;m&&(r[e.xsrfHeaderName]=m)}"setRequestHeader"in l&&Pt.forEach(r,(function(e,t){void 0===a&&"content-type"===t.toLowerCase()?delete r[t]:l.setRequestHeader(t,e)})),Pt.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),i&&"json"!==i&&(l.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&l.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(o=function(e){l&&(n(!e||e&&e.type?new xt("canceled"):e),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o))),a||(a=null),l.send(a)}))}),jt),transformRequest:[function(e,t){return Tt(t,"Accept"),Tt(t,"Content-Type"),Yt.isFormData(e)||Yt.isArrayBuffer(e)||Yt.isBuffer(e)||Yt.isStream(e)||Yt.isFile(e)||Yt.isBlob(e)?e:Yt.isArrayBufferView(e)?e.buffer:Yt.isURLSearchParams(e)?(Rt(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Yt.isObject(e)||t&&"application/json"===t["Content-Type"]?(Rt(t,"application/json"),function(e,t,n){if(Yt.isString(e))try{return(0,JSON.parse)(e),Yt.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||qt.transitional,n=t&&t.silentJSONParsing,o=t&&t.forcedJSONParsing,a=!n&&"json"===this.responseType;if(a||o&&Yt.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(a){if("SyntaxError"===e.name)throw Ut(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Yt.forEach(["delete","get","head"],(function(e){qt.headers[e]={}})),Yt.forEach(["post","put","patch"],(function(e){qt.headers[e]=Yt.merge(Vt)}));var Mt=qt,Lt=rt,_t=Mt,Ft=function(e){return!(!e||!e.__CANCEL__)},Qt=rt,Wt=function(e,t,n){var o=this||_t;return Lt.forEach(n,(function(n){e=n.call(o,e,t)})),e},Jt=Ft,$t=Mt,Kt=kt;function Gt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Kt("canceled")}var Ht=rt,zt=function(e,t){t=t||{};var n={};function o(e,t){return Ht.isPlainObject(e)&&Ht.isPlainObject(t)?Ht.merge(e,t):Ht.isPlainObject(t)?Ht.merge({},t):Ht.isArray(t)?t.slice():t}function a(n){return Ht.isUndefined(t[n])?Ht.isUndefined(e[n])?void 0:o(void 0,e[n]):o(e[n],t[n])}function r(e){if(!Ht.isUndefined(t[e]))return o(void 0,t[e])}function i(n){return Ht.isUndefined(t[n])?Ht.isUndefined(e[n])?void 0:o(void 0,e[n]):o(void 0,t[n])}function s(n){return n in t?o(e[n],t[n]):n in e?o(void 0,e[n]):void 0}var l={url:r,method:r,data:r,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:s};return Ht.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||a,o=t(e);Ht.isUndefined(o)&&t!==s||(n[e]=o)})),n},Xt="0.26.1",Zt=Xt,en={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){en[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var tn={};en.transitional=function(e,t,n){function o(e,t){return"[Axios v"+Zt+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,a,r){if(!1===e)throw new Error(o(a," has been removed"+(t?" in "+t:"")));return t&&!tn[a]&&(tn[a]=!0,console.warn(o(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,a,r)}};var nn=rt,on=lt,an=pt,rn=function(e){return Gt(e),e.headers=e.headers||{},e.data=Wt.call(e,e.data,e.headers,e.transformRequest),e.headers=Qt.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Qt.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||$t.adapter)(e).then((function(t){return Gt(e),t.data=Wt.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return Jt(t)||(Gt(e),t&&t.response&&(t.response.data=Wt.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},sn=zt,ln={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var o=Object.keys(e),a=o.length;a-- >0;){var r=o[a],i=t[r];if(i){var s=e[r],l=void 0===s||i(s,r,e);if(!0!==l)throw new TypeError("option "+r+" must be "+l)}else if(!0!==n)throw Error("Unknown option "+r)}},validators:en},cn=ln.validators;function dn(e){this.defaults=e,this.interceptors={request:new an,response:new an}}dn.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=sn(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&ln.assertOptions(n,{silentJSONParsing:cn.transitional(cn.boolean),forcedJSONParsing:cn.transitional(cn.boolean),clarifyTimeoutError:cn.transitional(cn.boolean)},!1);var o=[],a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));var r,i=[];if(this.interceptors.response.forEach((function(e){i.push(e.fulfilled,e.rejected)})),!a){var s=[rn,void 0];for(Array.prototype.unshift.apply(s,o),s=s.concat(i),r=Promise.resolve(t);s.length;)r=r.then(s.shift(),s.shift());return r}for(var l=t;o.length;){var c=o.shift(),d=o.shift();try{l=c(l)}catch(e){d(e);break}}try{r=rn(l)}catch(e){return Promise.reject(e)}for(;i.length;)r=r.then(i.shift(),i.shift());return r},dn.prototype.getUri=function(e){return e=sn(this.defaults,e),on(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},nn.forEach(["delete","get","head","options"],(function(e){dn.prototype[e]=function(t,n){return this.request(sn(n||{},{method:e,url:t,data:(n||{}).data}))}})),nn.forEach(["post","put","patch"],(function(e){dn.prototype[e]=function(t,n,o){return this.request(sn(o||{},{method:e,url:t,data:n}))}}));var pn=dn,un=kt;function hn(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,o=n._listeners.length;for(t=0;t<o;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,o=new Promise((function(e){n.subscribe(e),t=e})).then(e);return o.cancel=function(){n.unsubscribe(t)},o},e((function(e){n.reason||(n.reason=new un(e),t(n.reason))}))}hn.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},hn.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},hn.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},hn.source=function(){var e;return{token:new hn((function(t){e=t})),cancel:e}};var gn=hn,mn=rt,fn=rt,wn=Ge,yn=pn,Sn=zt,Dn=function e(t){var n=new yn(t),o=wn(yn.prototype.request,n);return fn.extend(o,yn.prototype,n),fn.extend(o,n),o.create=function(n){return e(Sn(t,n))},o}(Mt);Dn.Axios=yn,Dn.Cancel=kt,Dn.CancelToken=gn,Dn.isCancel=Ft,Dn.VERSION=Xt,Dn.all=function(e){return Promise.all(e)},Dn.spread=function(e){return function(t){return e.apply(null,t)}},Dn.isAxiosError=function(e){return mn.isObject(e)&&!0===e.isAxiosError},Ke.exports=Dn,Ke.exports.default=Dn;var vn,bn=Ke.exports,In={exports:{}};vn=In,function(e){function t(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function n(e,n,o,a,r,i){return t((s=t(t(n,e),t(a,i)))<<(l=r)|s>>>32-l,o);var s,l}function o(e,t,o,a,r,i,s){return n(t&o|~t&a,e,t,r,i,s)}function a(e,t,o,a,r,i,s){return n(t&a|o&~a,e,t,r,i,s)}function r(e,t,o,a,r,i,s){return n(t^o^a,e,t,r,i,s)}function i(e,t,o,a,r,i,s){return n(o^(t|~a),e,t,r,i,s)}function s(e,n){var s,l,c,d,p;e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;var u=1732584193,h=-271733879,g=-1732584194,m=271733878;for(s=0;s<e.length;s+=16)l=u,c=h,d=g,p=m,u=o(u,h,g,m,e[s],7,-680876936),m=o(m,u,h,g,e[s+1],12,-389564586),g=o(g,m,u,h,e[s+2],17,606105819),h=o(h,g,m,u,e[s+3],22,-1044525330),u=o(u,h,g,m,e[s+4],7,-176418897),m=o(m,u,h,g,e[s+5],12,1200080426),g=o(g,m,u,h,e[s+6],17,-1473231341),h=o(h,g,m,u,e[s+7],22,-45705983),u=o(u,h,g,m,e[s+8],7,1770035416),m=o(m,u,h,g,e[s+9],12,-1958414417),g=o(g,m,u,h,e[s+10],17,-42063),h=o(h,g,m,u,e[s+11],22,-1990404162),u=o(u,h,g,m,e[s+12],7,1804603682),m=o(m,u,h,g,e[s+13],12,-40341101),g=o(g,m,u,h,e[s+14],17,-1502002290),u=a(u,h=o(h,g,m,u,e[s+15],22,1236535329),g,m,e[s+1],5,-165796510),m=a(m,u,h,g,e[s+6],9,-1069501632),g=a(g,m,u,h,e[s+11],14,643717713),h=a(h,g,m,u,e[s],20,-373897302),u=a(u,h,g,m,e[s+5],5,-701558691),m=a(m,u,h,g,e[s+10],9,38016083),g=a(g,m,u,h,e[s+15],14,-660478335),h=a(h,g,m,u,e[s+4],20,-405537848),u=a(u,h,g,m,e[s+9],5,568446438),m=a(m,u,h,g,e[s+14],9,-1019803690),g=a(g,m,u,h,e[s+3],14,-187363961),h=a(h,g,m,u,e[s+8],20,1163531501),u=a(u,h,g,m,e[s+13],5,-1444681467),m=a(m,u,h,g,e[s+2],9,-51403784),g=a(g,m,u,h,e[s+7],14,1735328473),u=r(u,h=a(h,g,m,u,e[s+12],20,-1926607734),g,m,e[s+5],4,-378558),m=r(m,u,h,g,e[s+8],11,-2022574463),g=r(g,m,u,h,e[s+11],16,1839030562),h=r(h,g,m,u,e[s+14],23,-35309556),u=r(u,h,g,m,e[s+1],4,-1530992060),m=r(m,u,h,g,e[s+4],11,1272893353),g=r(g,m,u,h,e[s+7],16,-155497632),h=r(h,g,m,u,e[s+10],23,-1094730640),u=r(u,h,g,m,e[s+13],4,681279174),m=r(m,u,h,g,e[s],11,-358537222),g=r(g,m,u,h,e[s+3],16,-722521979),h=r(h,g,m,u,e[s+6],23,76029189),u=r(u,h,g,m,e[s+9],4,-640364487),m=r(m,u,h,g,e[s+12],11,-421815835),g=r(g,m,u,h,e[s+15],16,530742520),u=i(u,h=r(h,g,m,u,e[s+2],23,-995338651),g,m,e[s],6,-198630844),m=i(m,u,h,g,e[s+7],10,1126891415),g=i(g,m,u,h,e[s+14],15,-1416354905),h=i(h,g,m,u,e[s+5],21,-57434055),u=i(u,h,g,m,e[s+12],6,1700485571),m=i(m,u,h,g,e[s+3],10,-1894986606),g=i(g,m,u,h,e[s+10],15,-1051523),h=i(h,g,m,u,e[s+1],21,-2054922799),u=i(u,h,g,m,e[s+8],6,1873313359),m=i(m,u,h,g,e[s+15],10,-30611744),g=i(g,m,u,h,e[s+6],15,-1560198380),h=i(h,g,m,u,e[s+13],21,1309151649),u=i(u,h,g,m,e[s+4],6,-145523070),m=i(m,u,h,g,e[s+11],10,-1120210379),g=i(g,m,u,h,e[s+2],15,718787259),h=i(h,g,m,u,e[s+9],21,-343485551),u=t(u,l),h=t(h,c),g=t(g,d),m=t(m,p);return[u,h,g,m]}function l(e){var t,n="",o=32*e.length;for(t=0;t<o;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function c(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var o=8*e.length;for(t=0;t<o;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function d(e){var t,n,o="0123456789abcdef",a="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),a+=o.charAt(t>>>4&15)+o.charAt(15&t);return a}function p(e){return unescape(encodeURIComponent(e))}function u(e){return function(e){return l(s(c(e),8*e.length))}(p(e))}function h(e,t){return function(e,t){var n,o,a=c(e),r=[],i=[];for(r[15]=i[15]=void 0,a.length>16&&(a=s(a,8*e.length)),n=0;n<16;n+=1)r[n]=909522486^a[n],i[n]=1549556828^a[n];return o=s(r.concat(c(t)),512+8*t.length),l(s(i.concat(o),640))}(p(e),p(t))}function g(e,t,n){return t?n?h(t,e):d(h(t,e)):n?u(e):d(u(e))}vn.exports?vn.exports=g:e.md5=g}($e);var Bn=In.exports;const kn={Test:"webapp_cafeteria",Prod:["XTjiF","BQ1NcUw","OoL9b56z"].join("")};const Pn=e=>btoa(unescape(encodeURIComponent(e)));We.init(navigator.userAgent),Fe.init(We.getInstance().browser);class Cn{constructor(e){se(this,"initParam"),se(this,"yybVersion",null),se(this,"cpVersion",null),se(this,"jsBridge"),se(this,"dynamicPkgUrl",null),se(this,"onVersionChangeCallbacks",[]),se(this,"getCPVersion",(()=>le(this,null,(function*(){const[e]=yield this.jsBridge.getAppInstalledVersion([this.initParam.packageName]);return e})))),se(this,"getYYBVersion",(()=>le(this,null,(function*(){const[e]=yield this.jsBridge.getAppInstalledVersion([de]);return e})))),se(this,"onVersionChange",(e=>le(this,null,(function*(){this.onVersionChangeCallbacks.push(e)})))),se(this,"onCPDownloadStateChange",(e=>le(this,null,(function*(){this.jsBridge.registerCPDownloadStateChange((t=>t.packageName===this.initParam.packageName&&e(t)))})))),se(this,"onYYBDownloadStateChange",(e=>le(this,null,(function*(){this.jsBridge.registerYYBDownloadStateChange(e)})))),se(this,"stop",(()=>le(this,null,(function*(){const{appDownloadUrl:e,appid:t,packageName:n,appName:o,exp:a}=this.initParam;this.jsBridge.stop({apkUrl:e,appid:t,packageName:n,appName:o,exp:a})})))),se(this,"cancel",(()=>le(this,null,(function*(){const{appDownloadUrl:e,appid:t,packageName:n,appName:o,exp:a}=this.initParam;this.jsBridge.cancel({apkUrl:e,appid:t,packageName:n,appName:o,exp:a})})))),se(this,"install",(()=>le(this,null,(function*(){const{appDownloadUrl:e,appid:t,packageName:n,appName:o,exp:a}=this.initParam;this.jsBridge.install({apkUrl:e,appid:t,packageName:n,appName:o,exp:a})})))),se(this,"onResume",(()=>le(this,null,(function*(){const[e,t]=yield this.jsBridge.getAppInstalledVersion([de,this.initParam.packageName]);if(e!==this.yybVersion||t!==this.cpVersion){const n=this.cpVersion||pe,o=this.yybVersion||pe;this.yybVersion=e,this.cpVersion=t,this.triggerVersionChange({preCPVersion:n,preYYBVersion:o,curCPVersion:t,curYYBVersion:e})}})))),se(this,"triggerVersionChange",(e=>{this.onVersionChangeCallbacks.forEach((t=>t(e)))})),this.initParam=re(re({},he),e),this.jsBridge=Fe.getJsbridge(),this.jsBridge.registerResume((()=>this.onResume())),this.initParam.idleGetDynamicPkgUrl&&this.idleGetDynamicPkgUrl()}static openWithScheme(e){return le(this,null,(function*(){yield Fe.getJsbridge().openWithScheme(e)}))}static getAppInstalledVersions(e){return Fe.getJsbridge().getAppInstalledVersion(e)}setParams(e){this.initParam=re(re({},this.initParam),e)}preload(){return le(this,null,(function*(){this.dynamicPkgUrl||(this.dynamicPkgUrl=yield this.getDynamicPkgUrl())}))}open(){return le(this,null,(function*(){const{androidSchema:e,packageName:t,signatureMd5:n}=this.initParam;e?yield this.jsBridge.openWithScheme(e):(yield this.hasInstalledCP())?yield this.jsBridge.open({packageName:t,signature:n}):yield this.download()}))}openCPFromYYB(){return le(this,null,(function*(){const{androidSchema:e,packageName:t,iconUrl:n,appName:o,scene:a}=this.initParam;if(yield this.getIsSupportYYBMidPage()){const r=function(e){const{schema:t,packageName:n,appName:o,iconUrl:a,via:r,scene:i}=e,s=[];return s.push(`scene:${i}`),s.push(`via:${r}`),s.push(`pkgName:${n}`),s.push(`appName:${o}`),s.push(`iconUrl:${null==a?void 0:a.replace(/http:|https:/,"")}`),t&&s.push(`applink:${Pn(t)}`),s.push("autoOpen:true"),`tmast://appdemo?photonid=301539742450752&params=${encodeURIComponent(s.join(","))}&via=${r}`}({packageName:t,appName:o,iconUrl:n,schema:e,via:yield this.getVia(),scene:a});yield this.jsBridge.openWithScheme(r)}else yield this.pureDownloadYYB()}))}download(){return le(this,null,(function*(){const{appDownloadUrl:e,appid:t,packageName:n,appName:o,iconUrl:a,exp:r}=this.initParam,i=yield this.getVia();(yield this.jsBridge.getDownloadState({apkUrl:e,packageName:n,appId:t,exp:r}))!==be.Downloading&&(yield this.jsBridge.download({apkUrl:e,appid:t,via:i,packageName:n,appName:o,iconUrl:a,exp:r}))}))}downloadYYB(){return le(this,null,(function*(){const e=yield this.getTmast();(yield this.hasInstalledYYB())?yield this.jsBridge.openWithScheme(e):(We.getInstance().browser===ce.Other&&(yield this.jsBridge.openWithScheme(e)),yield this.pureDownloadYYB())}))}directDownloadYYB(){return le(this,null,(function*(){yield this.pureDownloadYYB()}))}getAppDownloadState(){return le(this,null,(function*(){const{appDownloadUrl:e,appid:t,packageName:n}=this.initParam;return yield this.jsBridge.getDownloadState({apkUrl:e,packageName:n,appId:t})}))}getAppDownloadCallback(){return le(this,null,(function*(){const{appDownloadUrl:e,appid:t,packageName:n}=this.initParam;return yield this.jsBridge.queryDownload({apkUrl:e,packageName:n,appId:t})}))}getVia(){return le(this,null,(function*(){const{businessId:e,versionName:t,sceneVia:n,supportViaConcat:o}=this.initParam;if(e){if(e.includes(".")&&!o)return e;const a=yield this.getYYBVersionAndRefreshCache(),r=yield this.getCPVersionAndRefreshCache();return Je.getVia({yybVersion:a,businessId:e,cpVersion:r,versionName:t||pe,scenevia:n})}return""}))}getDynamicPkgUrl(){return le(this,null,(function*(){const e=yield this.getTmast(),{yybChannelId:t,yybChannelKey:n,yybDownloadUrl:o,isDev:a,customApkName:r}=this.initParam,{cdn_url:i}=yield function(e){return le(this,null,(function*(){var t;const{customApkName:n,channelId:o,channelKey:a,schema:r,cdnUrl:i}=e,s=yield function(e,t,n=!1){const o=n?kn.Test:kn.Prod,a=Date.now(),r=Math.round(1e8*Math.random()),i=Bn(`${JSON.stringify(t)}${a}${o}${r}`);return bn({url:(n?"https://m-test.yyb.qq.com/access/v3/":"https://m.yyb.qq.com/access/v3/")+e,method:"POST",withCredentials:!0,headers:{"Content-Type":"application/json; charset=UTF-8","Ual-Access-Businessid":"webapp_cafeteria","Ual-Access-Timestamp":String(a),"Ual-Access-Nonce":String(r),"Ual-Access-Signature":String(i)},data:JSON.stringify(t)})}("get_md_dynamic_pkg",{channel_id:o,channel_key:a,schema:r,context:"",cdn_url:i},e.isDev);if((null==(t=s.data)?void 0:t.ret)===ye.Success){if(n){const{cdn_url:e}=s.data.data;s.data.data.cdn_url=e.replace(/^(.*\/)([^\\/]*)\.apk(.*)$/,((e,t,o,a)=>`${t}${n}.apk${a}&realname=${o}`))}return s.data.data}throw new Error(we.GetYYBInfo)}))}({channelId:t,channelKey:n,schema:e,cdnUrl:o,isDev:a,customApkName:r});return i}))}getYYBVersionAndRefreshCache(){return le(this,null,(function*(){return this.yybVersion||(this.yybVersion=yield this.getYYBVersion()),this.yybVersion}))}getCPVersionAndRefreshCache(){return le(this,null,(function*(){return this.cpVersion||(this.cpVersion=yield this.getCPVersion()),this.cpVersion}))}getIsSupportYYBMidPage(){return le(this,null,(function*(){return Ne(yield this.getYYBVersionAndRefreshCache(),"7.1.5")}))}getTmast(){return le(this,null,(function*(){const{initParam:e}=this,t=yield this.getVia(),n={tmast:e.tmast,pname:e.packageName,via:t,applink_url:e.androidSchema,recommendId:e.recommendId,qbExchangeToken:e.qbExchangeToken,cpChannelId:e.cpChannelId,hostPName:e.hostPName,hostVersionCode:e.hostVersionCode,hostVersion:e.hostVersion};return e.globalUserId&&(n.globalUserId=e.globalUserId),function(e){const{pname:t,via:n,recommendId:o,qbExchangeToken:a,cpChannelId:r,hostPName:i,hostVersionCode:s,hostVersion:l,tmast:c,globalUserId:d}=e,p=re({pname:t,via:n,skipAuthorize:JSON.stringify({explain:0,storage:1,location:1,phonestate:1}),r:Math.random(),applink_url:e.applink_url,recommendId:o,qbExchangeToken:a,channelid:r,hostpname:i,hostversioncode:s,hostversion:l},{start_time:Date.now(),expiry_time:Date.now()+36e5});return d&&(p.global_user_id=d),`${c||"tmast://appdetails?"}${function(e,t=!1){return Object.keys(e).map((n=>t?`${n}=${e[n]}`:`${encodeURIComponent(n)}=${encodeURIComponent(e[n])}`)).join("&")}(p)}&oplist=1;2`}(n)}))}pureDownloadYYB(){return le(this,null,(function*(){let{dynamicPkgUrl:e}=this;e||(e=yield this.getDynamicPkgUrl(),this.dynamicPkgUrl=e);const t=yield this.getVia();yield this.jsBridge.download({apkUrl:e,appid:1101070898,packageName:de,appName:"应用宝",iconUrl:"https://pp.myapp.com/ma_icon/0/icon_5848_1689142043/256",via:t})}))}hasInstalledCP(){return le(this,null,(function*(){return(yield this.getCPVersionAndRefreshCache())!==pe}))}hasInstalledYYB(){return le(this,null,(function*(){return(yield this.getYYBVersionAndRefreshCache())!==pe}))}idleGetDynamicPkgUrl(){return le(this,null,(function*(){if("function"==typeof window.requestIdleCallback){const e=window.requestIdleCallback((()=>{window.cancelIdleCallback(e),this.preload()}),{timeout:2e3})}else setTimeout((()=>{this.preload()}),2e3)}))}}function Nn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class An{constructor(){Nn(this,"appInfoData",void 0),Nn(this,"cpMeshSDK",void 0)}baseInit(){const{appInfoData:e,getCPMeshSDK:t}=x.getInstance();this.appInfoData=e,this.cpMeshSDK=t();const n=z.getInstance();A()&&(n.setSafeBtnStateAndUpdateText($.DownOrOpen),n.setAllNormalDownloadBtnVisible(!1),n.setPermissionPanelVisible(!1),n.setBottomLogoPanelVisible(!1))}init(){this.baseInit()}open(e=!1){this.cpMeshSDK.open()}async download(e=!1,t=!1){throw new Error("未实现download逻辑")}async downloadInner(e=!1,t=!1){throw new Error("未实现downloadInner逻辑")}safeOpen(){this.cpMeshSDK.openCPFromYYB()}safeUpdate(e=!1){this.safeDownloadAndUpdateSafeBtn(e)}safeDownload(e=!1){throw new Error("未实现safeDownload逻辑")}async onResume(e){throw new Error("未实现onResume逻辑")}downloadAndUpdateNormalBtn(e,t){this.cpMeshSDK.download();let n=$.AutoDownloadFromYYB,o=H.Download;e||L(u.AppDownloading,{eventScene:f.CpApp});const a=z.getInstance();this.cpMeshSDK.onCPDownloadStateChange((r=>{const i={[be.Downloading]:()=>(t?(a.safeBtnState!==$.Downloading&&(n=a.safeBtnState),a.setSafeBtnStateAndUpdateText($.Downloading)):(a.normalBtnState!==H.Downloading&&(o=a.normalBtnState),a.setNormalBtnStateAndUpdateText(H.Downloading)),!1),[be.Downloaded]:()=>(t?a.setSafeBtnStateAndUpdateText(n):a.setNormalBtnStateAndUpdateText(o),e||L(u.AppDownloaded,{eventScene:f.CpApp}),!0),[be.Failed]:()=>(e||L(u.AppDownloadFailed,{eventScene:f.CpApp}),!0)}[r.downloadStatus];return!!i&&i()})),A()&&a.setSafeBtnStateAndUpdateText($.AutoDownloadFromYYB)}safeDownloadAndUpdateSafeBtn(e=!1){const t=z.getInstance();this.cpMeshSDK.downloadYYB();let n=$.DownloadNow;e||L(u.AppDownloading,{eventScene:f.Qqdownloader,eventExtInfo:w.ClickMainBtnToDownload}),this.cpMeshSDK.onYYBDownloadStateChange((o=>{const a={[be.Downloading](){if(!x.getInstance().hasInstalledYYB()){if(t.safeBtnState!==$.YYBDownloading){const o=x.getInstance().getIsSafeWechatShareUrl();e?o&&L(u.PvFastDownldPageSystmDownldPop,{eventExtInfo:w.SystmAutoDownload}):o&&L(u.PvFastDownldPageSystmDownldPop,{eventExtInfo:w.ClickMainBtn}),n=t.safeBtnState}t.setSafeBtnStateAndUpdateText($.YYBDownloading),t.setAllNormalDownloadBtnVisible(!1),t.setYYBSafeTextVisible(!1)}return t.setSafeBtnStateAndUpdateText($.YYBDownloading),!1},[be.Downloaded]:()=>(e||L(u.AppDownloaded,{eventScene:f.Qqdownloader,eventExtInfo:w.ClickMainBtnToDownload}),t.setSafeBtnStateAndUpdateText(n),!0),[be.Failed]:()=>(e||L(u.AppDownloadFailed,{eventScene:f.Qqdownloader,eventExtInfo:w.ClickMainBtnToDownload}),!0)}[o.downloadStatus];return!!a&&a()}))}downloadYYBAutoOpen(e){const t=x.getInstance().getCPInstallState();e.preYYBVersion===p&&e.curYYBVersion!==p&&(t===E.NoInstall?this.safeDownload(!0):t===E.LowVersion&&this.safeUpdate())}async confirmAndDownload(e,t){const{appName:n}=this.appInfoData.appDetail;if(!e&&x.getInstance().getCPType()!==o.YYB&&!x.getInstance().appInfoData.appExt.isCompliance){if(!await z.getInstance().showConfirmDialog(n))return L(h.ClickNormalDownloadConfirmDialogFastDownloadBtn),void this.safeDownload();L(h.ClickNormalDownloadConfirmDialogOkBtn)}this.downloadAndUpdateNormalBtn(e,t)}}class On extends An{safeDownload(e=!1){this.safeDownloadAndUpdateSafeBtn(e)}async download(e=!1,t=!1){this.confirmAndDownload(e,t)}async downloadInner(e=!1,t=!1){this.download(e,t)}async onResume(e){this.downloadYYBAutoOpen(e)}}class En extends An{async download(e=!1){e||(L(u.AppDownloading,{eventScene:f.CpApp}),L(u.AppDownloaded,{eventScene:f.CpApp})),this.cpMeshSDK.download()}async downloadInner(e=!1){this.download(e)}async safeDownload(e=!1){const t=x.getInstance(),{appInfoData:n}=t,o=I.getInstance(),a=t.getIsSafeWechatShareUrl();if(e){var i;a&&L(u.PvFastDownldPageSystmDownldPop,{eventExtInfo:w.SystmAutoDownload});const{autoDownloadDelay:e}=null===(i=n.expInfo)||void 0===i?void 0:i.params;o.mediaType===r.HUAWEI&&e&&await async function(e){return new Promise((t=>{setTimeout(t,e)}))}(e)}else L(u.AppDownloading,{eventScene:f.Qqdownloader,eventExtInfo:w.ClickMainBtnToDownload}),L(u.AppDownloaded,{eventScene:f.Qqdownloader,eventExtInfo:w.ClickMainBtnToDownload}),a&&L(u.PvFastDownldPageSystmDownldPop,{eventExtInfo:w.ClickMainBtn});this.cpMeshSDK.downloadYYB()}}class xn extends An{async download(e=!1,t=!1){this.confirmAndDownload(e,t)}async downloadInner(e=!1,t=!1){this.download(e,t)}safeDownload(e=!1){this.safeDownloadAndUpdateSafeBtn(e)}async onResume(e){this.downloadYYBAutoOpen(e)}}class Yn extends An{async download(){L(u.PvNormalDownloadBrowserIntroLayer,{eventResult:m.ShowOpenGuide});try{await async function(e){const t=await N(e);history.replaceState(null,document.title,t)}(l.Normal)}catch(e){!function(...e){const{queryParam:t}=D.getInstance();t.debug&&console.log(...e)}(e)}z.getInstance().showWxGuide()}async downloadInner(){C(await N(l.Normal))}safeDownload(){this.handleSafeClick()}safeUpdate(){this.handleSafeClick()}async safeOpen(){try{await this.cpMeshSDK.openCPFromYYB()}catch(e){L(u.PvShowBlueLinkGuide,{eventResult:m.ShowOpenGuide}),z.getInstance().showWxGuide()}}async open(){try{await this.cpMeshSDK.open()}catch(e){L(u.PvShowBlueLinkGuide,{eventResult:m.ShowOpenGuide}),z.getInstance().showWxGuide()}}async onResume(e){this.downloadYYBAutoOpen(e)}async handleSafeClick(){if(x.getInstance().hasInstalledYYB())try{await this.cpMeshSDK.downloadYYB()}catch(e){L(u.PvShowBlueLinkGuide,{eventResult:m.ShowOpenGuide}),z.getInstance().showWxGuide()}else C(await N(l.Safe))}}class Tn extends An{constructor(){super(),z.getInstance().setAllNormalDownloadBtnVisible(!1),x.getInstance().getCPMeshSDK().downloadYYB()}open(){this.cpMeshSDK.open()}async download(){this.cpMeshSDK.download()}async downloadInner(){this.cpMeshSDK.download()}safeDownload(){this.cpMeshSDK.download()}safeOpen(){this.cpMeshSDK.open()}safeUpdate(){this.cpMeshSDK.download()}}function Un(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Vn{static init(e){const{instance:t}=Vn;if(t)throw new Error("BrowserStrategyManager 已经初始化");const n=new Vn(e);return Vn.instance=n,n}static getBrowserStrategy(){const{instance:e}=Vn;if(!e)throw new Error("BrowserStrategyManager未初始化");return e.browserStrategy}constructor(e){Un(this,"browserStrategy",void 0);const t={[a.MQQ]:On,[a.QQBrowser]:xn,[a.Wechat]:Yn,[a.Other]:En,[a.YYB]:Tn};this.browserStrategy=new t[e]}}function Rn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Un(Vn,"instance",void 0);class jn{constructor(){Rn(this,"appInfoData",void 0),Rn(this,"browserStrategy",void 0),Rn(this,"cpMeshSDK",void 0),Rn(this,"ui",void 0)}async init(){throw new Error("未实现init逻辑")}handleSafeDownloadBtnClick(){({[$.AutoDownloadFromYYB]:()=>{this.browserStrategy.safeDownload()},[$.OpenYYBAutoDownload]:()=>{this.browserStrategy.safeDownload()},[$.SafeDownload]:()=>{this.browserStrategy.safeDownload()},[$.SafeOpen]:()=>{this.browserStrategy.safeOpen()},[$.SafeUpdate]:()=>{this.browserStrategy.safeUpdate()},[$.DownloadNow]:()=>{x.getInstance().getCPType()===o.Inner?this.browserStrategy.downloadInner(!1,!0):this.browserStrategy.download(!1,!0)},[$.Open]:()=>{this.browserStrategy.open()},[$.OpenNow]:()=>{this.browserStrategy.open()},[$.YYBDownloading]:()=>{console.log("应用宝下载中")},[$.Downloading]:()=>{console.log("正在下载")},[$.GoAppStoreDownload]:()=>{console.log("去appStore下载")},[$.DownOrOpen]:()=>{this.browserStrategy.safeDownload()}})[this.ui.safeBtnState]()}handleNormalDownloadClick(){({[H.Download]:()=>{x.getInstance().getCPType()===o.Inner?this.browserStrategy.downloadInner():this.browserStrategy.download()},[H.Open]:()=>{this.browserStrategy.open()},[H.SafeOpen]:()=>{this.browserStrategy.safeOpen()},[H.Downloading]:()=>{console.log("正在下载")},[H.OtherMethodDownload]:()=>{this.browserStrategy.download()}})[this.ui.normalBtnState]()}getDownloaderInitParam(){return{}}async baseInit(){const{appInfoData:e,getCPMeshSDK:t}=x.getInstance();this.appInfoData=e,Vn.init(I.getInstance().browser),this.cpMeshSDK=t(),this.ui=z.getInstance(),this.browserStrategy=Vn.getBrowserStrategy(),this.browserStrategy.init();const n=await this.cpMeshSDK.getYYBVersion(),o=await this.cpMeshSDK.getCPVersion();this.updateVersionAndBtn(n,o),this.cpMeshSDK.onVersionChange((e=>{this.onResume(e)})),await L(u.MainBtnFinishLoading)}async updateVersionAndBtn(e,t){const{setYYBVersion:n,setCPVersion:o}=x.getInstance();n(e),o(t),this.updateBtnState()}updateBtnState(){throw new Error("未实现updateBtnState逻辑")}async autoDownloadOrOpen(){throw new Error("未实现自动打开的逻辑")}async onResume(e){this.updateVersionAndBtn(e.curYYBVersion,e.curCPVersion),this.browserStrategy.onResume(e)}}class qn extends jn{async init(){await this.baseInit(),await this.autoDownloadOrOpen()}updateBtnState(){const{hasInstalledYYB:e,hasInstalledCP:t}=x.getInstance();e()&&!t()?this.ui.setAllNormalDownloadBtnVisible(!0):this.ui.setAllNormalDownloadBtnVisible(!1),this.ui.setAllSafeDownloadBtnVisible(!0),this.ui.setSafeBtnStateAndUpdateText(this.getSafeBtnState()),this.ui.setNormalBtnStateAndUpdateText(this.getNormalBtnState())}async autoDownloadOrOpen(){const{getIsSafeWechatShareUrl:e,hasInstalledCP:t,hasInstalledYYB:n,isCompliance:o}=x.getInstance();if(t())await this.handlerInstalledCP();else{if(n()&&!o()||e())return L(g.AutoOpenQQDownloaderForDownloadApp),void this.browserStrategy.safeDownload(!0);L(g.AutoDownloadCPApp),this.browserStrategy.downloadInner(!0,!0)}}async handlerInstalledCP(){const{hasInstalledYYB:e}=x.getInstance();if(e())return await L(g.AutoOpenCPAppByQQDownloaderMidPage),void this.browserStrategy.safeOpen();await L(g.AutoOpenCPApp),this.browserStrategy.open()}getSafeBtnState(){const{getCPInstallState:e,hasInstalledYYB:t,appInfoData:n}=x.getInstance(),o=e();return{[E.NoInstall]:n.appExt.isCompliance?t()?$.OpenYYBAutoDownload:$.DownloadNow:$.SafeDownload,[E.LowVersion]:t()?$.SafeOpen:$.Open,[E.LatestVersion]:t()?$.SafeOpen:$.Open}[o]}getNormalBtnState(){const{getCPInstallState:e,appInfoData:t}=x.getInstance(),n=e();return{[E.NoInstall]:t.appExt.isCompliance?H.Download:H.OtherMethodDownload,[E.LowVersion]:H.Open,[E.LatestVersion]:H.Open}[n]}}class Mn extends jn{constructor(...e){var t,n,o;super(...e),t=this,o="",(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="relatedPkgName"))in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o}async init(){await this.baseInit();const{appDetail:e,relatedPkgList:t}=this.appInfoData,n=t.filter((t=>t!==e.packageName));(await Cn.getAppInstalledVersions(n)).find(((e,t)=>(this.relatedPkgName=n[t],e))),this.relatedPkgName&&(L(u.MainExecuteExistOtherMarketPkg),this.ui.setSafeBtnStateAndUpdateText($.SafeOpen),this.ui.setNormalBtnStateAndUpdateText(H.Open)),await this.autoDownloadOrOpen()}updateBtnState(){const{getCPInstallState:e,hasInstalledCP:t,hasInstalledYYB:n,appInfoData:o}=x.getInstance();(e()===E.LatestVersion||n()&&!t()&&!o.appExt.isCompliance)&&this.ui.setAllNormalDownloadBtnVisible(!1),this.ui.setSafeBtnStateAndUpdateText(this.getSafeBtnState()),this.ui.setNormalBtnStateAndUpdateText(this.getNormalBtnState())}async autoDownloadOrOpen(){const{getCPInstallState:e,handledAndroidSchema:t,getIsSafeWechatShareUrl:n,hasInstalledYYB:o,isCompliance:r}=x.getInstance(),i=e();if(i!==E.LatestVersion)return o()&&i===E.NoInstall&&!r()?(L(g.AutoOpenQQDownloaderForDownloadApp),void this.browserStrategy.safeDownload()):this.relatedPkgName?(await L(g.AutoOpenCPApp),void this.browserStrategy.open(!0)):n()?(L(g.AutoOpenQQDownloaderForDownloadApp),void this.browserStrategy.safeDownload(!0)):void(I.getInstance().browser===a.Other&&t&&function(e){const t=document.createElement("iframe");t.style.cssText="position:absolute;left:0;top:0;width:0;height:0;visibility:hidden;",t.src=e,document.body.appendChild(t)}(t));this.autoOpenWhenInstallLastVersion()}async autoOpenWhenInstallLastVersion(){const{hasInstalledYYB:e}=x.getInstance();if(!e())return await L(g.AutoOpenCPApp),void this.browserStrategy.open(!0);await L(g.AutoOpenCPAppByQQDownloaderMidPage),this.browserStrategy.safeOpen()}getSafeBtnState(){const{getCPInstallState:e,hasInstalledYYB:t,appInfoData:n}=x.getInstance(),o=e();return{[E.NoInstall]:n.appExt.isCompliance?t()?$.OpenYYBAutoDownload:$.AutoDownloadFromYYB:$.SafeDownload,[E.LowVersion]:$.SafeUpdate,[E.LatestVersion]:t()?$.SafeOpen:$.Open}[o]}getNormalBtnState(){const{getCPInstallState:e,hasInstalledYYB:t,appInfoData:n}=x.getInstance(),o=e();return{[E.NoInstall]:n.appExt.isCompliance?H.Download:H.OtherMethodDownload,[E.LowVersion]:t()?H.SafeOpen:H.Open,[E.LatestVersion]:H.Open}[o]}}class Ln extends jn{async init(){await this.baseInit(),await this.autoDownloadOrOpen()}getDownloaderInitParam(){const{getHandleAndroidSchema:e}=x.getInstance();return{tmast:e()||"tmast://found?"}}updateBtnState(){this.ui.setAllNormalDownloadBtnVisible(!1);const e=x.getInstance().hasInstalledYYB()?$.OpenNow:$.DownloadNow;this.ui.setSafeBtnStateAndUpdateText(e)}async autoDownloadOrOpen(){x.getInstance().hasInstalledYYB()?this.browserStrategy.open():I.getInstance().browser===a.Wechat?C(await N(l.Safe)):this.browserStrategy.safeDownload(!0)}async onResume(e){this.updateVersionAndBtn(e.curYYBVersion,e.curCPVersion),e.preYYBVersion===p&&e.curYYBVersion!==p&&this.browserStrategy.open()}}function _n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Fn{static init(e){const{instance:t}=Fn;if(t)throw new Error("AppStrategyManager已经初始化");const n=new Fn(e);return Fn.instance=n,n}static getAppStrategy(){const{instance:e}=Fn;if(!e)throw new Error("AppStrategyManager未初始化");return e.appStrategy}constructor(e){_n(this,"appStrategy",void 0);const t={[o.YYB]:Ln,[o.Inner]:qn,[o.Normal]:Mn};this.appStrategy=new t[e]}}function Qn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}_n(Fn,"instance",void 0);class Wn{constructor(){Qn(this,"appInfoData",void 0),Qn(this,"cpType",o.Normal),Qn(this,"ui",void 0)}baseInit(){const{appInfoData:e}=x.getInstance();this.appInfoData=e,this.cpType=this.getAppStrategyType(),z.init({handleSafeDownloadBtnClick:()=>this.handleSafeDownloadBtnClick(),handleNormalDownloadClick:()=>this.handleNormalDownloadClick()}),this.ui=z.getInstance(),this.initBtnShow(),this.setAppStrategy();const{setCPMeshSDK:t,setCPType:n}=x.getInstance();n(this.cpType),t(new Cn(this.getDownloaderInitParam()))}async init(){throw new Error("未实现init逻辑")}setAppStrategy(){}handleSafeDownloadBtnClick(){throw new Error("未实现handleSafeDownloadBtnClick逻辑")}handleNormalDownloadClick(){throw new Error("未实现handleNormalDownloadClick逻辑")}initBtnShow(){throw new Error("未实现initBtnShow逻辑")}getIsHiddenNormalBtn(){const{hideNormalBtn:e}=D.getInstance().queryParam;return this.cpType===o.YYB||e}getCustomDownloaderInitParam(){return{}}initHandleAndroidSchema(){const e=x.getInstance(),{appInfoData:t}=e,{appLinkInfo:n,schema:o}=t.appExt,r=function({appLinkInfo:e,schema:t}){var n;const{androidSchema:o,androidScheme:r}=D.getInstance().queryParam;let i=r||o;return null!==(n=i)&&void 0!==n&&n.startsWith(`${e}://`)?i:I.getInstance().browser===a.Wechat?"":(t&&(i=t,i&&!i.includes("://")&&(i=k(i)),i&&/^[^:]+:\/\//.test(i)?/^https?:/.test(i)&&(i=""):i=""),i)}({appLinkInfo:n,schema:o}),i=this.filterOtherSchemaExt(r);e.setHandleAndroidSchema(i)}filterOtherSchemaExt(e){if(!e)return e;if(e.startsWith("tmast"))return e;if(!e.includes("?"))return e;const[t,n]=e.split("?"),o=(0,y.parse)(n);return delete o.ext,`${t}?${(0,y.stringify)(o)}`}getAppStrategyType(){if(this.appInfoData.appDetail.packageName===i.YYB)return o.YYB;const{queryParam:e}=D.getInstance();return e.forinnersoft&&(this.appInfoData.isInnerSoft||e.debug)?o.Inner:o.Normal}getCpChannelParam(){const{appInfoData:e}=x.getInstance(),{appDetail:t}=e;return t.channel?{cpChannelId:String(t.channel)}:{}}getDownloaderInitParam(){var e,t,n,o,r;const{appInfoData:i,getHandleAndroidSchema:s}=x.getInstance(),{appDetail:l,baoPkg:c}=i,{packageName:d,appName:p,iconUrl:u,signatureMd5:h}=l,{queryParam:g}=D.getInstance(),{getAppDownloadUrl:m,getUserId:f}=x.getInstance();return{packageName:d,appName:p,iconUrl:u,signatureMd5:h,recommendId:null===(e=i.expInfo)||void 0===e?void 0:e.recommendId,androidSchema:s(),yybDownloadUrl:c.url,appDownloadUrl:m(),scene:40027,appid:i.identityInfo.openAppId,yybChannelId:c.channel,yybChannelKey:c.channelKey,businessId:g.proxyVia||"ANDROIDWXZ",supportViaConcat:!0,versionName:l.versionName,sceneVia:g.scenevia,isDev:!location.host.endsWith("app.qq.com"),idleGetDynamicPkgUrl:I.getInstance().browser!==a.Wechat,customApkName:(null===(t=i.expInfo)||void 0===t?void 0:t.params.apkName)||(null===(n=i.appExt)||void 0===n?void 0:n.apkName),cryptTmast:null===(o=i.expInfo)||void 0===o||null===(r=o.params)||void 0===r?void 0:r.cryptTmast,...this.getCpChannelParam(),...this.getCustomDownloaderInitParam(),globalUserId:f()}}}class Jn extends Wn{constructor(...e){var t,n,o;super(...e),t=this,o=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="cpStrategy"))in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o}async init(){this.initHandleAndroidSchema(),this.baseInit(),this.cpStrategy.init();const e=I.getInstance(),{setPVersionCode:t}=x.getInstance(),[n]=await Cn.getAppInstalledVersions([d[e.browser]]);t(String(n))}setAppStrategy(){Fn.init(this.cpType),this.cpStrategy=Fn.getAppStrategy()}handleSafeDownloadBtnClick(){M(j.DOWNLOAD_CLICK),this.cpStrategy.handleSafeDownloadBtnClick()}handleNormalDownloadClick(){this.cpStrategy.handleNormalDownloadClick(),function(e=""){if(e)try{if(document.execCommand&&"function"==typeof document.execCommand){let t=document.querySelector("#copyhackinput");t||(t=document.createElement("input"),t.id="copyhackinput",t.readOnly=!0,t.type="text",t.setAttribute("style","position:absolute;top:0;left:0;height:1px;width:10px;opacity:0;"),document.body.appendChild(t)),t.value=e,t.select(),document.execCommand("copy",!1,null)?console.log("copy success"):console.log("copy fail")}}catch(e){console.log(`copy fail${e}`)}}(x.getInstance().handledAndroidSchema)}initBtnShow(){this.getIsHiddenNormalBtn()||x.getInstance().getIsSafeWechatShareUrl()?this.ui.setAllNormalDownloadBtnVisible(!1):this.ui.setAllNormalDownloadBtnVisible(!0)}getCustomDownloaderInitParam(){return this.cpStrategy.getDownloaderInitParam()}}class $n extends Wn{async init(){this.baseInit(),this.initBtnShow(),await L(u.MainBtnFinishLoading),this.openCp(!0)}handleSafeDownloadBtnClick(){M(j.DOWNLOAD_CLICK),this.openCp()}handleNormalDownloadClick(){console.log("handleNormalDownloadClick")}initBtnShow(){this.ui.setAllNormalDownloadBtnVisible(!1),this.ui.setSafeBtnStateAndUpdateText($.GoAppStoreDownload)}openCp(e=!1){const{iosScheme:t}=x.getInstance(),{browser:n}=I.getInstance();if(t)return void this.openCpWithScheme(e);e||L(h.ClickIOSMainBtn);const{iosUrl:o}=this.appInfoData.appExt;o?(n===a.Wechat&&this.ui.showWxGuide(),P(o)):this.handleNoFound(e)}openCpWithScheme(e=!1){const{iosScheme:t}=x.getInstance(),{browser:n}=I.getInstance();n===a.Wechat?e?this.ui.showIosOpenTips():(L(h.ClickIOSMainBtn,{eventResult:m.ShowOpenGuide}),this.ui.showWxGuide(),P(t)):P(t)}handleNoFound(e=!1){e||alert("\n抱歉，当前没有检测到iOS版本\n您可以尝试前往AppStore搜索查看")}}function Kn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Gn{static init(e){const{instance:t}=Gn;if(t)throw new Error("Query已经初始化");const n=new Gn(e);Gn.instance=n}static getInstance(){const{instance:e}=Gn;if(!e)throw new Error("Query未初始化");return e}constructor(e){Kn(this,"fromopen",void 0);const t=(0,y.parse)(e);this.fromopen=Object.keys(t).includes("fromopen")}}Kn(Gn,"instance",void 0);class Hn{async handleSafeDownloadBtnClick(){throw new Error("未实现handleSafeDownloadBtnClick逻辑")}}class zn extends Hn{async handleSafeDownloadBtnClick(){const e=x.getInstance(),{packageName:t}=e.appInfoData.appDetail,{channelKey:n}=e.appInfoData.baoPkg,o=e.getHandleAndroidSchema(),a=e.getUserId(),r=this.getPCYYBCallURL(t,n,o),i=await this.getPCYYBDownloadURL(t,n,o),s=`https://cdn.yyb.qq.com/microdown/pc-yyb-mid-page.html?callURL=${encodeURIComponent(r)}&downloadURL=${encodeURIComponent(i)}&userId=${a}`,l=`https://appdown.md.qq.com/getDownloadLink?appUrl=${encodeURIComponent(s)}&type=apk`;L(u.AppDownloading,{eventScene:f.Qqdownloader,eventExtInfo:w.ClickMainBtnToDownload}),L(u.AppDownloaded,{eventScene:f.Qqdownloader,eventExtInfo:w.ClickMainBtnToDownload}),P(l)}async getPCYYBDownloadURL(e,t,n){let o="https://down.pc.yyb.qq.com/channel/55/115/10000/pcyyb__installer.exe";const a={"Content-Type":"application/json","ual-access-businessid":"pc_yyb"},r=JSON.stringify({pkg_name:e,supply_id:2100200031,extra_info:{apk_channel:t,apk_deep_link:n},report_info:{h5_url:this.getReportInfoH5URL()}});try{const e=await fetch("https://yybadaccess.3g.qq.com/pc_yyb/deliver",{method:"POST",headers:a,body:r}),t=await e.json();0===t.code&&(o=t.data.download_url)}catch(e){}return o}getReportInfoH5URL(){const{url:e,query:t,fragmentIdentifier:n}=(0,y.parseUrl)(location.href);return t.guid=x.getInstance().getUserId(),(0,y.stringifyUrl)({url:e,query:t,fragmentIdentifier:n})}getPCYYBCallURL(e,t,n){const o={apk_channel:t,apk_deep_link:n};return`androws://app/callAppAutoAdaptiveEnv?pkg_name=${e}&game_type=1&extra_info=${encodeURIComponent(JSON.stringify(o))}`}}class Xn extends Hn{async handleSafeDownloadBtnClick(){L(u.AppDownloading,{eventScene:f.Qqdownloader,eventExtInfo:w.ClickMainBtnToDownload}),L(u.AppDownloaded,{eventScene:f.Qqdownloader,eventExtInfo:w.ClickMainBtnToDownload}),await x.getInstance().getCPMeshSDK().downloadYYB()}}function Zn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class eo{static init(e){const{instance:t}=eo;if(t)return t;const n=new eo(e);return eo.instance=n,n}static getPCBrowserStrategy(){const{instance:e}=eo;if(!e)throw new Error("BrowserStrategyManager未初始化");return e.pcBrowserStrategy}constructor(e){Zn(this,"pcBrowserStrategy",void 0);const t={[a.MQQ]:Xn,[a.QQBrowser]:Xn,[a.Wechat]:zn,[a.Other]:Xn,[a.YYB]:Xn};this.pcBrowserStrategy=new t[e]}}Zn(eo,"instance",void 0);class to extends Wn{constructor(...e){var t,n,o;super(...e),t=this,o=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="pcBrowserStrategy"))in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o}async init(){this.initHandleAndroidSchema(),this.baseInit(),this.initBtnShow();const e=z.getInstance();e.setNormalBtnStateAndUpdateText(H.Download),e.setSafeBtnStateAndUpdateText($.AutoDownloadFromYYB),L(u.MainBtnFinishLoading);const{fromopen:t}=Gn.getInstance();t&&(location.hash=""),this.setPCBrowserStrategy()}async handleSafeDownloadBtnClick(){M(j.DOWNLOAD_CLICK),await this.pcBrowserStrategy.handleSafeDownloadBtnClick()}handleNormalDownloadClick(){P(x.getInstance().getAppDownloadUrl())}initBtnShow(){let e=!1;this.getIsHiddenNormalBtn()&&(e=!0),z.getInstance().setAllNormalDownloadBtnVisible(!e)}setPCBrowserStrategy(){eo.init(I.getInstance().browser),this.pcBrowserStrategy=eo.getPCBrowserStrategy()}}function no(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class oo{static init(e){const{instance:t}=oo;if(t)throw new Error("OperateSystemManager已经初始化");const n=new oo(e);oo.instance=n}static getOperateSystemStrategy(){return oo.getInstance().operateSystem}static getInstance(){const{instance:e}=oo;if(!e)throw new Error("OperateSystemManager未初始化");return e}constructor(e){no(this,"operateSystem",void 0);const t={[b.Android]:Jn,[b.IOS]:$n,[b.PC]:to};this.operateSystem=new t[e]}}function ao(){const{appDetail:e,appExt:t,yybPkg:n,clientInfo:o,expInfo:a}=window.systemData;return{appDetail:{...e,appId:Number(e.appId),fileSize:{...e.fileSize,bytes:Number(e.fileSize.bytes)}},appExt:t,identityInfo:{openAppId:Number(e.appId)},isInnerSoft:t.isInnerSoft,baoPkg:{...n,vercode:n.version,channelKey:o.channelKey},position:o.position,yybVersion:n.version,relatedPkgList:[],g_tk:"",expInfo:a}}function ro(){var e;return null===(e=window)||void 0===e?void 0:e.YYBMonitorWebSDK.Monitor}function io(){var e;return null===(e=ro())||void 0===e?void 0:e.getInstance().getAegisInstance()}no(oo,"instance",void 0);var so=function(e){return e.Script="4",e.Promise="8",e}(so||{});(async()=>{(function(){D.init(location.search),Gn.init(location.hash),I.init(navigator.userAgent),x.init({appInfoData:ao()});const n=new RegExp(["runCustomize","window.bannerNight","hasInject","app_back_to_webview_page_callback","volume","\\$\\sis\\snot\\sdefined","TypeError:\\sInvalid\\sURL","contentWindow","processRandomSelector","9:39638","1:56621"].join("|")),o=new RegExp(["access\\/v3\\/get_md_dynamic_pkg","wujiang-api.3g.qq.com\\/public\\/object"].join("|"));var a,r;a={appName:"microdown",env:e?t.TEST:t.PROD,aegisId:"vSofPiubKgjbWmaFOD",uin:x.getInstance().getUserId(),aegisConfig:{api:{apiDetail:!0,retCodeHandler(e,t){const n={isErr:!1,code:"no-report"};if(!o.test(t))return n;try{const t=JSON.parse(e);if(n.code=t.ret||t.code,0===t.ret||200===t.code)return n;n.isErr=!0}catch(e){}return n}},beforeReport(e){if(e.level===so.Script&&e.msg&&n.test(e.msg))return!1;const t=new RegExp(`PROMISE_ERROR: (${Object.values(we).join("|")})`);return(e.level!==so.Promise||!e.msg||!t.test(e.msg))&&void 0}}},null===(r=ro())||void 0===r||r.init(a),function(){const e=io();null==e||e.reportFirstScreenVisible()}(),R.getInstance().init()})(),q(u.PageFinishRender),M(j.LOADED);const n=x.getInstance();n.isNormalWechatShareUrl()&&q(u.ShowNormalDownloadPage),n.getIsSafeWechatShareUrl()&&q(u.ShowFastDownloadPage);const o=I.getInstance();oo.init(o.userOS);const a=oo.getOperateSystemStrategy();await a.init(),function(){const e=io();null==e||e.reportFirstScreenOperable()}()})()})()})();
//# sourceMappingURL=index_33915f63672cbe02571a.js.map</script>
</body>

</html>
 contentType 9 text/html url 276 https://a.app.qq.com:443/o/simple.jsp?pkgname=com.shanghaidaily.shine&utm_campaign=APP%E4%B8%8B%E8%BD%BD&utm_medium=%E7%BA%BF%E4%B8%8A&utm_source=SHINE_cn&utm_content=SHINE%2FNEWS%2FAPP%2F%E4%B8%8B%E8%BD%BD&utm_term=SHINE%2FNEWS%2FAPP%2F%E4%B8%8B%E8%BD%BD&gio_link_id=Y9JeZYoz responseCode 3 200 