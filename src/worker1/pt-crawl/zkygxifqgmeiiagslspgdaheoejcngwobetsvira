zkygxifqgmeiiagslspgdaheoejcngwobetsvira length 5 27278 page 27278 
<html>
<head>
<title>r25826 MediaWiki - Code Review archive</title>
<meta charset="utf-8">
<link rel="stylesheet" href="../ext.codereview.styles.css"/>
</head>
<body>
<h1>r25826 MediaWiki - Code Review archive</h1>
<div id="mw-content-text" class="mw-body-content"><form action="/wiki/Special:Code/MediaWiki/25826" method="post"><table class="mw-codereview-meta"><tr><td>Repository:</td><td><a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki" title="Special:Code/MediaWiki">MediaWiki</a></td></tr>
<tr><td>Revision:</td><td>&lt;&#160;<a href="./25825.html" title="Special:Code/MediaWiki/25825">r25825</a>‎ | <b>r25826</b> | <a href="./25827.html" title="Special:Code/MediaWiki/25827">r25827</a>&#160;&gt;</td></tr>
<tr><td>Date:</td><td>13:17, 13 September 2007</td></tr>
<tr><td>Author:</td><td><a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/author/aaron" title="Special:Code/MediaWiki/author/aaron">aaron</a></td></tr>
<tr><td>Status:</td><td>old</td></tr>
<tr><td>Tags:</td><td></td></tr>
<tr><td>Comment:</td><td><div class="mw-codereview-message">*Clean E_STRICT errors</div></td></tr>
<tr><td>Modified paths:</td><td><div class='mw-codereview-paths mw-content-ltr'><ul>
<li><b>/trunk/extensions/Review/Review.php</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fextensions%2FReview%2FReview.php" title="Special:Code/MediaWiki">history</a>)</li>
</ul></div>
</td></tr>
</table>
<h2>Diff <small>[<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki/25826&amp;action=purge" title="Special:Code/MediaWiki/25826">purge</a>]</small></h2><div class='mw-codereview-diff' id='mw-codereview-diff'><table class="mw-codereview-diff"><tr id="1" class="patchedfile"><td colspan="3">Index: trunk/extensions/Review/Review.php</td></tr>



<tr id="5"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -92,16 +92,16 @@</span></td></tr>
<tr id="6"><td class="linenumbers">93</td><td class="linenumbers">93</td><td class="unchanged"><span> 	foreach ( $s AS $v ) {</span></td></tr>
<tr id="7"><td class="linenumbers">94</td><td class="linenumbers">94</td><td class="unchanged"><span> 		$v = explode ( ':' , trim ( $v ) ) ;</span></td></tr>
<tr id="8"><td class="linenumbers">95</td><td class="linenumbers">95</td><td class="unchanged"><span> 		if ( count ( $v ) != 5 ) continue ; # Some other line, ignore it</span></td></tr>
<tr id="9"><td class="linenumbers">96</td><td class="linenumbers"> </td><td class="del"><del>-		$x = "" ;</del></td></tr>
<tr id="10"><td class="linenumbers">97</td><td class="linenumbers"> </td><td class="del"><del>-		$x->key = (int) trim ( array_shift ( $v ) ) ;</del></td></tr>
<tr id="11"><td class="linenumbers">98</td><td class="linenumbers"> </td><td class="del"><del>-		$x->name = trim ( array_shift ( $v ) ) ;</del></td></tr>
<tr id="12"><td class="linenumbers">99</td><td class="linenumbers"> </td><td class="del"><del>-		$x->range = (int) trim ( array_shift ( $v ) ) ;</del></td></tr>
<tr id="13"><td class="linenumbers">100</td><td class="linenumbers"> </td><td class="del"><del>-		$x->left = trim ( array_shift ( $v ) ) ;</del></td></tr>
<tr id="14"><td class="linenumbers">101</td><td class="linenumbers"> </td><td class="del"><del>-		$x->right = trim ( array_shift ( $v ) ) ;</del></td></tr>
<tr id="15"><td class="linenumbers">102</td><td class="linenumbers"> </td><td class="del"><del>-		if ( $x->key == 0 ) continue ; # Paranoia</del></td></tr>
<tr id="16"><td class="linenumbers">103</td><td class="linenumbers"> </td><td class="del"><del>-		if ( $x->range &lt; 2 ) continue ; # Paranoia</del></td></tr>
<tr id="17"><td class="linenumbers">104</td><td class="linenumbers"> </td><td class="del"><del>-		if ( $x->name == "" ) continue ; # Paranoia</del></td></tr>
<tr id="18"><td class="linenumbers">105</td><td class="linenumbers"> </td><td class="del"><del>-		$wgReviewExtensionTopics[$x->key] = $x ;</del></td></tr>
<tr id="19"><td class="linenumbers"> </td><td class="linenumbers">96</td><td class="ins"><ins>+		$x = array();</ins></td></tr>
<tr id="20"><td class="linenumbers"> </td><td class="linenumbers">97</td><td class="ins"><ins>+		$x['key'] = (int) trim ( array_shift ( $v ) ) ;</ins></td></tr>
<tr id="21"><td class="linenumbers"> </td><td class="linenumbers">98</td><td class="ins"><ins>+		$x['name'] = trim ( array_shift ( $v ) ) ;</ins></td></tr>
<tr id="22"><td class="linenumbers"> </td><td class="linenumbers">99</td><td class="ins"><ins>+		$x['range'] = (int) trim ( array_shift ( $v ) ) ;</ins></td></tr>
<tr id="23"><td class="linenumbers"> </td><td class="linenumbers">100</td><td class="ins"><ins>+		$x['left'] = trim ( array_shift ( $v ) ) ;</ins></td></tr>
<tr id="24"><td class="linenumbers"> </td><td class="linenumbers">101</td><td class="ins"><ins>+		$x['right'] = trim ( array_shift ( $v ) ) ;</ins></td></tr>
<tr id="25"><td class="linenumbers"> </td><td class="linenumbers">102</td><td class="ins"><ins>+		if ( $x['key'] == 0 ) continue ; # Paranoia</ins></td></tr>
<tr id="26"><td class="linenumbers"> </td><td class="linenumbers">103</td><td class="ins"><ins>+		if ( $x['range'] &lt; 2 ) continue ; # Paranoia</ins></td></tr>
<tr id="27"><td class="linenumbers"> </td><td class="linenumbers">104</td><td class="ins"><ins>+		if ( $x['name'] == "" ) continue ; # Paranoia</ins></td></tr>
<tr id="28"><td class="linenumbers"> </td><td class="linenumbers">105</td><td class="ins"><ins>+		$wgReviewExtensionTopics[$x['key']] = $x ;</ins></td></tr>
<tr id="29"><td class="linenumbers">106</td><td class="linenumbers">106</td><td class="unchanged"><span> 	}</span></td></tr>
<tr id="30"><td class="linenumbers">107</td><td class="linenumbers">107</td><td class="unchanged"><span> }</span></td></tr>
<tr id="31"><td class="linenumbers">108</td><td class="linenumbers">108</td><td class="unchanged"><span> </span></td></tr>
<tr id="32"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -115,7 +115,7 @@</span></td></tr>
<tr id="33"><td class="linenumbers">116</td><td class="linenumbers">116</td><td class="unchanged"><span> 	if ( !isset ( $topic->value ) )</span></td></tr>
<tr id="34"><td class="linenumbers">117</td><td class="linenumbers">117</td><td class="unchanged"><span> 		$topic->value = 0 ;</span></td></tr>
<tr id="35"><td class="linenumbers">118</td><td class="linenumbers">118</td><td class="unchanged"><span> 	</span></td></tr>
<tr id="36"><td class="linenumbers">119</td><td class="linenumbers"> </td><td class="del"><del>-	$tkey = "review_topic[" . $topic->key . "]" ;</del></td></tr>
<tr id="37"><td class="linenumbers"> </td><td class="linenumbers">119</td><td class="ins"><ins>+	$tkey = "review_topic[" . $topic['key'] . "]" ;</ins></td></tr>
<tr id="38"><td class="linenumbers">120</td><td class="linenumbers">120</td><td class="unchanged"><span> 	$ret = "" ;</span></td></tr>
<tr id="39"><td class="linenumbers">121</td><td class="linenumbers">121</td><td class="unchanged"><span> 	if ( $fullpage )</span></td></tr>
<tr id="40"><td class="linenumbers">122</td><td class="linenumbers">122</td><td class="unchanged"><span> 		$ret .= "&lt;td align='center'>" ;</span></td></tr>
<tr id="41"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -125,31 +125,31 @@</span></td></tr>
<tr id="42"><td class="linenumbers">126</td><td class="linenumbers">126</td><td class="unchanged"><span> 		$ret .= "/>&lt;/td>" ;</span></td></tr>
<tr id="43"><td class="linenumbers">127</td><td class="linenumbers">127</td><td class="unchanged"><span> 	else</span></td></tr>
<tr id="44"><td class="linenumbers">128</td><td class="linenumbers">128</td><td class="unchanged"><span> 		$ret .= '/>&amp;nbsp;' ;</span></td></tr>
<tr id="45"><td class="linenumbers">129</td><td class="linenumbers"> </td><td class="del"><del>-	if ( $topic->range == 2 ) { # Yes/No</del></td></tr>
<tr id="46"><td class="linenumbers"> </td><td class="linenumbers">129</td><td class="ins"><ins>+	if ( $topic['range'] == 2 ) { # Yes/No</ins></td></tr>
<tr id="47"><td class="linenumbers">130</td><td class="linenumbers">130</td><td class="unchanged"><span> 		if ( $fullpage )</span></td></tr>
<tr id="48"><td class="linenumbers">131</td><td class="linenumbers">131</td><td class="unchanged"><span> 			$ret .= "&lt;td/>&lt;td nowrap>" ;</span></td></tr>
<tr id="49"><td class="linenumbers">132</td><td class="linenumbers">132</td><td class="unchanged"><span> 		$ret .= '&lt;input type="radio" name="' . $tkey . '" value="1" id="review_radio_1_of_2"' ;</span></td></tr>
<tr id="50"><td class="linenumbers">133</td><td class="linenumbers">133</td><td class="unchanged"><span> 		$ret .= $topic->value == 1 ? " checked" : "" ;</span></td></tr>
<tr id="51"><td class="linenumbers">134</td><td class="linenumbers"> </td><td class="del"><del>-		$ret .= '>&lt;/input>' . $topic->left . ' ' ;</del></td></tr>
<tr id="52"><td class="linenumbers"> </td><td class="linenumbers">134</td><td class="ins"><ins>+		$ret .= '>&lt;/input>' . $topic['left'] . ' ' ;</ins></td></tr>
<tr id="53"><td class="linenumbers">135</td><td class="linenumbers">135</td><td class="unchanged"><span> 		$ret .= '&lt;input type="radio" name="' . $tkey . '" value="2" id="review_radio_2_of_2"' ;</span></td></tr>
<tr id="54"><td class="linenumbers">136</td><td class="linenumbers">136</td><td class="unchanged"><span> 		$ret .= $topic->value == 2 ? " checked" : "" ;</span></td></tr>
<tr id="55"><td class="linenumbers">137</td><td class="linenumbers"> </td><td class="del"><del>-		$ret .= '/>' . $topic->right ;</del></td></tr>
<tr id="56"><td class="linenumbers"> </td><td class="linenumbers">137</td><td class="ins"><ins>+		$ret .= '/>' . $topic['right'] ;</ins></td></tr>
<tr id="57"><td class="linenumbers">138</td><td class="linenumbers">138</td><td class="unchanged"><span> 		if ( $fullpage )</span></td></tr>
<tr id="58"><td class="linenumbers">139</td><td class="linenumbers">139</td><td class="unchanged"><span> 			$ret .= "&lt;/td>&lt;td/>&lt;td>" ;</span></td></tr>
<tr id="59"><td class="linenumbers">140</td><td class="linenumbers">140</td><td class="unchanged"><span> 	} else { # Range</span></td></tr>
<tr id="60"><td class="linenumbers">141</td><td class="linenumbers">141</td><td class="unchanged"><span> 		if ( $fullpage )</span></td></tr>
<tr id="61"><td class="linenumbers">142</td><td class="linenumbers"> </td><td class="del"><del>-			$ret .= "&lt;td align='right' nowrap>" . $topic->left . "&lt;/td>&lt;td nowrap>" ;</del></td></tr>
<tr id="62"><td class="linenumbers">143</td><td class="linenumbers"> </td><td class="del"><del>-		for ( $a = 1 ; $a &lt;= $topic->range ; $a++ ) {</del></td></tr>
<tr id="63"><td class="linenumbers"> </td><td class="linenumbers">142</td><td class="ins"><ins>+			$ret .= "&lt;td align='right' nowrap>" . $topic['left'] . "&lt;/td>&lt;td nowrap>" ;</ins></td></tr>
<tr id="64"><td class="linenumbers"> </td><td class="linenumbers">143</td><td class="ins"><ins>+		for ( $a = 1 ; $a &lt;= $topic['range'] ; $a++ ) {</ins></td></tr>
<tr id="65"><td class="linenumbers">144</td><td class="linenumbers">144</td><td class="unchanged"><span> 			$ret .= '&lt;input type="radio" name="' . $tkey . '" value="' . $a . '"' ;</span></td></tr>
<tr id="66"><td class="linenumbers">145</td><td class="linenumbers"> </td><td class="del"><del>-			$ret .= " id='review_radio_" . $a . "_of_" . $topic->range . "'" ; # This doesn't show for some weird reason...</del></td></tr>
<tr id="67"><td class="linenumbers"> </td><td class="linenumbers">145</td><td class="ins"><ins>+			$ret .= " id='review_radio_" . $a . "_of_" . $topic['range'] . "'" ; # This doesn't show for some weird reason...</ins></td></tr>
<tr id="68"><td class="linenumbers">146</td><td class="linenumbers">146</td><td class="unchanged"><span> 			$ret .= $topic->value == $a ? " checked" : "" ;</span></td></tr>
<tr id="69"><td class="linenumbers">147</td><td class="linenumbers">147</td><td class="unchanged"><span> 			$ret .= '/>' ;</span></td></tr>
<tr id="70"><td class="linenumbers">148</td><td class="linenumbers">148</td><td class="unchanged"><span> 		}</span></td></tr>
<tr id="71"><td class="linenumbers">149</td><td class="linenumbers">149</td><td class="unchanged"><span> 		if ( $fullpage )</span></td></tr>
<tr id="72"><td class="linenumbers">150</td><td class="linenumbers"> </td><td class="del"><del>-			$ret .= "&lt;/td>&lt;td nowrap>" . $topic->right . "&lt;/td>&lt;td width='100%'>" ;</del></td></tr>
<tr id="73"><td class="linenumbers"> </td><td class="linenumbers">150</td><td class="ins"><ins>+			$ret .= "&lt;/td>&lt;td nowrap>" . $topic['right'] . "&lt;/td>&lt;td width='100%'>" ;</ins></td></tr>
<tr id="74"><td class="linenumbers">151</td><td class="linenumbers">151</td><td class="unchanged"><span> 	}</span></td></tr>
<tr id="75"><td class="linenumbers">152</td><td class="linenumbers">152</td><td class="unchanged"><span> 	if ( $fullpage ) {</span></td></tr>
<tr id="76"><td class="linenumbers">153</td><td class="linenumbers"> </td><td class="del"><del>-		$ret .= "&lt;input type='text' style='width:100%' name='review_comment[" . $topic->key . "]' value='" . htmlentities ( $topic->comment ) . "'/>" ;</del></td></tr>
<tr id="77"><td class="linenumbers"> </td><td class="linenumbers">153</td><td class="ins"><ins>+		$ret .= "&lt;input type='text' style='width:100%' name='review_comment[" . $topic['key'] . "]' value='" . htmlentities ( $topic->comment ) . "'/>" ;</ins></td></tr>
<tr id="78"><td class="linenumbers">154</td><td class="linenumbers">154</td><td class="unchanged"><span> 		$ret .= "&lt;/td>\n" ;</span></td></tr>
<tr id="79"><td class="linenumbers">155</td><td class="linenumbers">155</td><td class="unchanged"><span> 	}</span></td></tr>
<tr id="80"><td class="linenumbers">156</td><td class="linenumbers">156</td><td class="unchanged"><span> 	return $ret ;</span></td></tr>
<tr id="81"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -378,17 +378,17 @@</span></td></tr>
<tr id="82"><td class="linenumbers">379</td><td class="linenumbers">379</td><td class="unchanged"><span> ?></span></td></tr>
<tr id="83"><td class="linenumbers">380</td><td class="linenumbers">380</td><td class="unchanged"><span> 			&lt;a id="review_sidebar_link" href="</span></td></tr>
<tr id="84"><td class="linenumbers">381</td><td class="linenumbers">381</td><td class="unchanged"><span> &lt;?php</span></td></tr>
<tr id="85"><td class="linenumbers">382</td><td class="linenumbers"> </td><td class="del"><del>-	$topic_title = Title::makeTitleSafe( NS_MEDIAWIKI, wfMsgForContent('review_topic_page').'#'.$topic->name );</del></td></tr>
<tr id="86"><td class="linenumbers"> </td><td class="linenumbers">382</td><td class="ins"><ins>+	$topic_title = Title::makeTitleSafe( NS_MEDIAWIKI, wfMsgForContent('review_topic_page').'#'.$topic['name'] );</ins></td></tr>
<tr id="87"><td class="linenumbers">383</td><td class="linenumbers">383</td><td class="unchanged"><span> 	print $topic_title->escapeLocalURL();</span></td></tr>
<tr id="88"><td class="linenumbers">384</td><td class="linenumbers">384</td><td class="unchanged"><span> ?></span></td></tr>
<tr id="89"><td class="linenumbers">385</td><td class="linenumbers">385</td><td class="unchanged"><span> 				"></span></td></tr>
<tr id="90"><td class="linenumbers">386</td><td class="linenumbers">386</td><td class="unchanged"><span> &lt;?php</span></td></tr>
<tr id="91"><td class="linenumbers">387</td><td class="linenumbers"> </td><td class="del"><del>-	echo $topic->name ;</del></td></tr>
<tr id="92"><td class="linenumbers"> </td><td class="linenumbers">387</td><td class="ins"><ins>+	echo $topic['name'] ;</ins></td></tr>
<tr id="93"><td class="linenumbers">388</td><td class="linenumbers">388</td><td class="unchanged"><span> ?></span></td></tr>
<tr id="94"><td class="linenumbers">389</td><td class="linenumbers">389</td><td class="unchanged"><span> 				&lt;/a></span></td></tr>
<tr id="95"><td class="linenumbers">390</td><td class="linenumbers">390</td><td class="unchanged"><span> &lt;?php</span></td></tr>
<tr id="96"><td class="linenumbers">391</td><td class="linenumbers"> </td><td class="del"><del>-	if ( $topic->range > 2 )</del></td></tr>
<tr id="97"><td class="linenumbers">392</td><td class="linenumbers"> </td><td class="del"><del>-		print "&lt;small> (" . $topic->left . "&amp;rarr;" . $topic->right . ")&lt;/small>&lt;br />" ;</del></td></tr>
<tr id="98"><td class="linenumbers"> </td><td class="linenumbers">391</td><td class="ins"><ins>+	if ( $topic['range'] > 2 )</ins></td></tr>
<tr id="99"><td class="linenumbers"> </td><td class="linenumbers">392</td><td class="ins"><ins>+		print "&lt;small> (" . $topic['left'] . "&amp;rarr;" . $topic['right'] . ")&lt;/small>&lt;br />" ;</ins></td></tr>
<tr id="100"><td class="linenumbers">393</td><td class="linenumbers">393</td><td class="unchanged"><span> 	echo "&lt;div id='review_sidebar_range'>" . wfReviewExtensionGetTopicForm ( $topic ) . "&lt;/div>" ;</span></td></tr>
<tr id="101"><td class="linenumbers">394</td><td class="linenumbers">394</td><td class="unchanged"><span> ?></span></td></tr>
<tr id="102"><td class="linenumbers">395</td><td class="linenumbers">395</td><td class="unchanged"><span> &lt;?php</span></td></tr>
<tr id="103"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -517,7 +517,7 @@</span></td></tr>
<tr id="104"><td class="linenumbers">518</td><td class="linenumbers">518</td><td class="unchanged"><span> 					$data[$type]->total_count = 0 ;</span></td></tr>
<tr id="105"><td class="linenumbers">519</td><td class="linenumbers">519</td><td class="unchanged"><span> 					$data[$type]->anon_count = 0 ;</span></td></tr>
<tr id="106"><td class="linenumbers">520</td><td class="linenumbers">520</td><td class="unchanged"><span> 					$data[$type]->sum = 0 ;</span></td></tr>
<tr id="107"><td class="linenumbers">521</td><td class="linenumbers"> </td><td class="del"><del>-					$data[$type]->max = $wgReviewExtensionTopics[$type]->range ;</del></td></tr>
<tr id="108"><td class="linenumbers"> </td><td class="linenumbers">521</td><td class="ins"><ins>+					$data[$type]->max = $wgReviewExtensionTopics[$type]['range'] ;</ins></td></tr>
<tr id="109"><td class="linenumbers">522</td><td class="linenumbers">522</td><td class="unchanged"><span> 				}</span></td></tr>
<tr id="110"><td class="linenumbers">523</td><td class="linenumbers">523</td><td class="unchanged"><span> 				$data[$type]->total_count++ ;</span></td></tr>
<tr id="111"><td class="linenumbers">524</td><td class="linenumbers">524</td><td class="unchanged"><span> 				if ( $review->val_user == 0 )</span></td></tr>
<tr id="112"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -598,14 +598,14 @@</span></td></tr>
<tr id="113"><td class="linenumbers">599</td><td class="linenumbers">599</td><td class="unchanged"><span> 			foreach ( $wgReviewExtensionTopics AS $type => $topic ) {</span></td></tr>
<tr id="114"><td class="linenumbers">600</td><td class="linenumbers">600</td><td class="unchanged"><span> 				if ( $revision &lt; 0 ) {</span></td></tr>
<tr id="115"><td class="linenumbers">601</td><td class="linenumbers">601</td><td class="unchanged"><span> 					# Table header row</span></td></tr>
<tr id="116"><td class="linenumbers">602</td><td class="linenumbers"> </td><td class="del"><del>-					$ret .= "&lt;th id='review_statistics_table_header'>{$topic->name}&lt;/th>" ;</del></td></tr>
<tr id="117"><td class="linenumbers"> </td><td class="linenumbers">602</td><td class="ins"><ins>+					$ret .= "&lt;th id='review_statistics_table_header'>{$topic['name']}&lt;/th>" ;</ins></td></tr>
<tr id="118"><td class="linenumbers">603</td><td class="linenumbers">603</td><td class="unchanged"><span> 				} else if ( $revision_mode ) {</span></td></tr>
<tr id="119"><td class="linenumbers">604</td><td class="linenumbers">604</td><td class="unchanged"><span> 					$ret .= "&lt;td id='review_statistics_table_cell'>" ;</span></td></tr>
<tr id="120"><td class="linenumbers">605</td><td class="linenumbers">605</td><td class="unchanged"><span> 					if ( isset ( $data[$type] ) ) {</span></td></tr>
<tr id="121"><td class="linenumbers">606</td><td class="linenumbers">606</td><td class="unchanged"><span> 						$ret .= "&lt;div id='" ;</span></td></tr>
<tr id="122"><td class="linenumbers">607</td><td class="linenumbers"> </td><td class="del"><del>-						$ret .= "review_radio_" . $data[$type]->val_value . "_of_" . $topic->range ;</del></td></tr>
<tr id="123"><td class="linenumbers"> </td><td class="linenumbers">607</td><td class="ins"><ins>+						$ret .= "review_radio_" . $data[$type]->val_value . "_of_" . $topic['range'] ;</ins></td></tr>
<tr id="124"><td class="linenumbers">608</td><td class="linenumbers">608</td><td class="unchanged"><span> 						$ret .= "'>" ;</span></td></tr>
<tr id="125"><td class="linenumbers">609</td><td class="linenumbers"> </td><td class="del"><del>-						$ret .= wfMsgForContent ( 'review_version_statistic_cell' , $data[$type]->val_value , $topic->range ) ;</del></td></tr>
<tr id="126"><td class="linenumbers"> </td><td class="linenumbers">609</td><td class="ins"><ins>+						$ret .= wfMsgForContent ( 'review_version_statistic_cell' , $data[$type]->val_value , $topic['range'] ) ;</ins></td></tr>
<tr id="127"><td class="linenumbers">610</td><td class="linenumbers">610</td><td class="unchanged"><span> 						$ret .= "&lt;/div>" ;</span></td></tr>
<tr id="128"><td class="linenumbers">611</td><td class="linenumbers">611</td><td class="unchanged"><span> 					} else {</span></td></tr>
<tr id="129"><td class="linenumbers">612</td><td class="linenumbers">612</td><td class="unchanged"><span> 						$ret .= "&amp;mdash;" ;</span></td></tr>
<tr id="130"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -723,8 +723,8 @@</span></td></tr>
<tr id="131"><td class="linenumbers">724</td><td class="linenumbers">724</td><td class="unchanged"><span> 			$out .= "&lt;/th>&lt;th colspan='3'>" . wfMsg('review_rating') . "&lt;/th>&lt;th>" ;</span></td></tr>
<tr id="132"><td class="linenumbers">725</td><td class="linenumbers">725</td><td class="unchanged"><span> 			$out .= wfMsg('review_comment') . "&lt;/th>&lt;/tr>" ;</span></td></tr>
<tr id="133"><td class="linenumbers">726</td><td class="linenumbers">726</td><td class="unchanged"><span> 			foreach( $wgReviewExtensionTopics as $topic ) {</span></td></tr>
<tr id="134"><td class="linenumbers">727</td><td class="linenumbers"> </td><td class="del"><del>-				$topic_title = Title::makeTitleSafe( NS_MEDIAWIKI, wfMsgForContent('review_topic_page').'#'.$topic->name );</del></td></tr>
<tr id="135"><td class="linenumbers">728</td><td class="linenumbers"> </td><td class="del"><del>-				$link = $skin->makeLinkObj( $topic_title,$topic->name );</del></td></tr>
<tr id="136"><td class="linenumbers"> </td><td class="linenumbers">727</td><td class="ins"><ins>+				$topic_title = Title::makeTitleSafe( NS_MEDIAWIKI, wfMsgForContent('review_topic_page').'#'.$topic['name'] );</ins></td></tr>
<tr id="137"><td class="linenumbers"> </td><td class="linenumbers">728</td><td class="ins"><ins>+				$link = $skin->makeLinkObj( $topic_title,$topic['name'] );</ins></td></tr>
<tr id="138"><td class="linenumbers">729</td><td class="linenumbers">729</td><td class="unchanged"><span> 				$out .= "&lt;tr>&lt;th align='left' nowrap>{$link}&lt;/th>" ;</span></td></tr>
<tr id="139"><td class="linenumbers">730</td><td class="linenumbers">730</td><td class="unchanged"><span> 				$out .= wfReviewExtensionGetTopicForm ( $topic , true ) . "&lt;/tr>" ;</span></td></tr>
<tr id="140"><td class="linenumbers">731</td><td class="linenumbers">731</td><td class="unchanged"><span> 				</span></td></tr>
<tr id="141"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -748,7 +748,7 @@</span></td></tr>
<tr id="142"><td class="linenumbers">749</td><td class="linenumbers">749</td><td class="unchanged"><span> 		/**</span></td></tr>
<tr id="143"><td class="linenumbers">750</td><td class="linenumbers">750</td><td class="unchanged"><span> 		* Special page main function</span></td></tr>
<tr id="144"><td class="linenumbers">751</td><td class="linenumbers">751</td><td class="unchanged"><span> 		*/</span></td></tr>
<tr id="145"><td class="linenumbers">752</td><td class="linenumbers"> </td><td class="del"><del>-		function execute( $par = null ) {</del></td></tr>
<tr id="146"><td class="linenumbers"> </td><td class="linenumbers">752</td><td class="ins"><ins>+		function execute( $par ) {</ins></td></tr>
<tr id="147"><td class="linenumbers">753</td><td class="linenumbers">753</td><td class="unchanged"><span> 			global $wgRequest , $wgOut , $wgUser , $wgTitle ;</span></td></tr>
<tr id="148"><td class="linenumbers">754</td><td class="linenumbers">754</td><td class="unchanged"><span> 			wfReviewExtensionInitMessages () ;</span></td></tr>
<tr id="149"><td class="linenumbers">755</td><td class="linenumbers">755</td><td class="unchanged"><span> </span></td></tr>
<tr id="150"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -772,7 +772,7 @@</span></td></tr>
<tr id="151"><td class="linenumbers">773</td><td class="linenumbers">773</td><td class="unchanged"><span> 			}</span></td></tr>
<tr id="152"><td class="linenumbers">774</td><td class="linenumbers">774</td><td class="unchanged"><span> 			</span></td></tr>
<tr id="153"><td class="linenumbers">775</td><td class="linenumbers">775</td><td class="unchanged"><span> 			if ( $page_id == 0 ) {</span></td></tr>
<tr id="154"><td class="linenumbers">776</td><td class="linenumbers"> </td><td class="del"><del>-				if( $par != null){</del></td></tr>
<tr id="155"><td class="linenumbers"> </td><td class="linenumbers">776</td><td class="ins"><ins>+				if( $par != ''){</ins></td></tr>
<tr id="156"><td class="linenumbers">777</td><td class="linenumbers">777</td><td class="unchanged"><span> 					$title = Title::newFromUrl($par);</span></td></tr>
<tr id="157"><td class="linenumbers">778</td><td class="linenumbers">778</td><td class="unchanged"><span> 					$page_id = $title->getArticleID();</span></td></tr>
<tr id="158"><td class="linenumbers">779</td><td class="linenumbers">779</td><td class="unchanged"><span> 				}</span></td></tr>
</table>
</div>
<h2 id='code-changes'>Status &amp; tagging log</h2>
<ul class='mw-codereview-changes'><li>15:20, 12 September 2011&#160;<a href="https://www.mediawiki.org/wiki/User:Meno25" class="mw-userlink" title="User:Meno25"><bdi>Meno25</bdi></a> <span class="mw-usertoollinks">(<a href="https://www.mediawiki.org/wiki/User_talk:Meno25" class="mw-usertoollinks-talk" title="User talk:Meno25">talk</a> | <a href="https://www.mediawiki.org/wiki/Special:Contributions/Meno25" class="mw-usertoollinks-contribs" title="Special:Contributions/Meno25">contribs</a>)</span>&#160;changed the <b>status</b> of r25826 <i>[<b>removed:</b> ok&#160;<b>added:</b> old]</i></li></ul></form></div>
</body>
</html>
 contentType 9 text/html url 64 https://static-codereview.wikimedia.org:443/MediaWiki/25826.html responseCode 3 200 