tsyeweoejayamkqajebgjommlgcaxqbseseagacc length 5 33904 page 33904 <!DOCTYPE HTML>
<html lang="en">
  <head>
<!-- PDTQ-131 -->
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N3RT7TD');</script>
<!-- End Google Tag Manager -->
    
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Building a Clojure project - Travis CI</title>
<link rel="stylesheet" href="/assets/stylesheets/main.css">
<link rel="alternate" type="application/rss+xml" title="Travis CI Build Environment Updates" href="https://docs.travis-ci.com/feed.build-env-updates.xml">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" defer></script>

<script src="/assets/javascripts/main.js" type="text/javascript" charset="utf-8" defer></script>
<script src="/assets/javascripts/prism.js" type="text/javascript" charset="utf-8" defer></script>
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@travisci" />
<meta name="twitter:creator" content="@travisci" />
<meta property="og:title" content="Travis CI Documentation" />
<meta property="og:type" content="website" />
<meta property="og:url" content=/user/languages/clojure/ />
<meta property="og:description" content="Building a Clojure project" />
<meta property="og:image" content="/images/TravisCI-Full-Color.png" }} />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="642" />
<meta property="og:image:height" content="201" />
<meta property="og:image:alt" content="Travis CI logo" />


 

  </head>
  <body>
<!-- PDTQ-131 -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N3RT7TD"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <div class="wrapper">

      <header class="top">
  <div class="row topbar">
    <h1 id="logo" class="logo">
  <a href="https://travis-ci.com/" title="Travis CI">Travis</a>
</h1>

    <nav>
      <ul id="navigation" class="navigation">
        <li><a href="https://blog.travis-ci.com">Blog</a></li>
        <li><a href="/">Docs</a></li>
        <li class="toggle"><button type="button" id="toggle-menu" class="button--teal">Menu</button></li>
      </ul>
    </nav>
  </div>
</header>


      <div id="content" class="row">

        <div id="sidebar" class="sidebar">
  <div>
    <!-- <h2>Search</h2> -->
    <div class="searchbox">
      <form>
        <input type="text" id="st-search-input" class="searchbox-input" placeholder="Search the docs" />
      </form>
      <script type="text/javascript">
      var Swiftype = window.Swiftype || {};
        (function() {
          Swiftype.key = 'tXvDDzd4fNTBnLvxfEyx';

          Swiftype.searchSearchFields = {
            "page": ["title, body, tags"]
          };
          Swiftype.autocompleteSearchFields = {
            "page": ["title, body, tags"]
          };
          /** DO NOT EDIT BELOW THIS LINE **/
          var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
          script.src = "//swiftype.com/embed.js";
          var entry = document.getElementsByTagName('script')[0];
          document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
        }());
      </script>
    </div>
  </div>

  <section class="sidebar-navigation">
    <nav>
      <h3>Getting Started</h3>
      <ul>
        <li><a href="/user/for-beginners/">Core Concepts for Beginners</a></li>
        <li><a href="/user/tutorial/">Travis CI Tutorial</a></li>
        <li><a href="/user/customizing-the-build/">Customizing the Build</a></li>
        <li><a href="/user/speeding-up-the-build/">Speeding up the Build</a></li>
        <li><a href="/user/docker/">Using Docker in your Build</a></li>
        <li><a href="/user/gui-and-headless-browsers/">Headless Testing with Browsers</a></li>
        <li><a href="/user/pull-requests/">Building Pull Requests</a></li>
        <li><a href="/user/cron-jobs/">Cron Jobs</a></li>
        <li><a href="/user/common-build-problems/">Common Build Problems</a></li>
        <li><a href="https://github.com/travis-ci/travis#readme">Command Line Client</a></li>
        <li><a href="/user/build-config-imports/">Build Config Imports</a></li>
        <li><a href="/user/build-config-validation/">Build Config Validation</a></li>
      </ul>

      <h3>Jobs, Builds, Matrices and Stages</h3>
      <ul>
        <li><a href="/user/job-lifecycle/">Job Lifecycle</a></li>
        <li><a href="/user/build-matrix/">Build Matrix</a></li>
        <li><a href="/user/build-stages/">Build Stages</a></li>
        <li><a href="/user/conditional-builds-stages-jobs/">Conditional Builds, Stages, and Jobs</a></li>
      </ul>

      <h3>Installing Dependencies</h3>
      <ul>
        <li><a href="/user/installing-dependencies/">Installing Dependencies</a></li>
        <li><a href="/user/private-dependencies/">Private Dependencies GitHub</a></li>
        <li><a href="/user/private-dependencies-bb/">Private Dependencies Bitbucket</a></li>
        <li><a href="/user/database-setup/">Setting up Services and Databases</a></li>
        <li><a href="/user/caching/">Caching Dependencies</a></li>
        <li><a href="/user/using-workspaces/">Caching Dependencies within a Build (Workspaces)</a></li>
        <li><a href="/user/ssh-known-hosts/">Adding to SSH Known Hosts</a></li>
      </ul>

      <h3>Programming Languages</h3>
      <ul>
      
        <li><a href="/user/languages/android/">Android</a></li>
      
        <li><a href="/user/languages/c/">C</a></li>
      
        <li><a href="/user/languages/csharp/">C#</a></li>
      
        <li><a href="/user/languages/cpp/">C++</a></li>
      
        <li><a href="/user/languages/clojure/">Clojure</a></li>
      
        <li><a href="/user/languages/crystal/">Crystal</a></li>
      
        <li><a href="/user/languages/d/">D</a></li>
      
        <li><a href="/user/languages/dart/">Dart</a></li>
      
        <li><a href="/user/languages/elixir/">Elixir</a></li>
      
        <li><a href="/user/languages/elm/">Elm</a></li>
      
        <li><a href="/user/languages/erlang/">Erlang</a></li>
      
        <li><a href="/user/languages/csharp/">F#</a></li>
      
        <li><a href="/user/languages/minimal-and-generic/">Generic</a></li>
      
        <li><a href="/user/languages/go/">Go</a></li>
      
        <li><a href="/user/languages/groovy/">Groovy</a></li>
      
        <li><a href="/user/languages/haskell/">Haskell</a></li>
      
        <li><a href="/user/languages/haxe/">Haxe</a></li>
      
        <li><a href="/user/languages/java/">Java</a></li>
      
        <li><a href="/user/languages/javascript-with-nodejs/">JavaScript <small>(with Node.js)</small></a></li>
      
        <li><a href="/user/languages/julia/">Julia</a></li>
      
        <li><a href="/user/languages/matlab/">MATLAB</a></li>
      
        <li><a href="/user/languages/minimal-and-generic/">Minimal</a></li>
      
        <li><a href="/user/languages/nix/">Nix</a></li>
      
        <li><a href="/user/languages/objective-c/">Objective-C</a></li>
      
        <li><a href="/user/languages/perl/">Perl</a></li>
      
        <li><a href="/user/languages/perl6/">Perl6</a></li>
      
        <li><a href="/user/languages/php/">PHP</a></li>
      
        <li><a href="/user/languages/python/">Python</a></li>
      
        <li><a href="/user/languages/r/">R</a></li>
      
        <li><a href="/user/languages/ruby/">Ruby</a></li>
      
        <li><a href="/user/languages/rust/">Rust</a></li>
      
        <li><a href="/user/languages/scala/">Scala</a></li>
      
        <li><a href="/user/languages/smalltalk/">Smalltalk</a></li>
      
        <li><a href="/user/languages/objective-c/">Swift</a></li>
      
        <li><a href="/user/languages/csharp/">Visual Basic</a></li>
      
        <li><a href="/user/languages/community-supported-languages/">Adding a language</a></li>
      </ul>

      <h3>Deployments and Uploads</h3>
      <ul>
        
          <li class="is-overview"><a href="/user/deployment/">Overview</a></li>
          
        
        
          <li><a href="/user/deployment/anynines/">anynines</a></li>
        
          <li><a href="/user/deployment/atlas/">Atlas</a></li>
        
          <li><a href="/user/deployment/codedeploy/">AWS CodeDeploy</a></li>
        
          <li><a href="/user/deployment/elasticbeanstalk/">AWS Elastic Beanstalk</a></li>
        
          <li><a href="/user/deployment/lambda/">AWS Lambda</a></li>
        
          <li><a href="/user/deployment/opsworks/">AWS OpsWorks</a></li>
        
          <li><a href="/user/deployment/s3/">AWS S3</a></li>
        
          <li><a href="/user/deployment/azure-web-apps/">Azure Web Apps</a></li>
        
          <li><a href="/user/deployment/bintray/">bintray</a></li>
        
          <li><a href="/user/deployment/bitballoon/">BitBalloon</a></li>
        
          <li><a href="/user/deployment/bluemixcloudfoundry/">Bluemix CloudFoundry</a></li>
        
          <li><a href="/user/deployment/boxfuse/">Boxfuse</a></li>
        
          <li><a href="/user/deployment/catalyze/">Catalyze</a></li>
        
          <li><a href="/user/deployment/chefsupermarket/">Chef Supermarket</a></li>
        
          <li><a href="/user/deployment/cloud66/">Cloud 66</a></li>
        
          <li><a href="/user/deployment/cloudfoundry/">CloudFoundry</a></li>
        
          <li><a href="/user/deployment/cargo/">Cargo</a></li>
        
          <li><a href="/user/deployment/engineyard/">Engine Yard</a></li>
        
          <li><a href="/user/deployment/pages/">GitHub Pages</a></li>
        
          <li><a href="/user/deployment/releases/">GitHub Releases</a></li>
        
          <li><a href="/user/deployment/google-app-engine/">Google App Engine</a></li>
        
          <li><a href="/user/deployment/gcs/">Google Cloud Storage</a></li>
        
          <li><a href="/user/deployment/firebase/">Google Firebase</a></li>
        
          <li><a href="/user/deployment/hackage/">Hackage</a></li>
        
          <li><a href="/user/deployment/hephy/">Hephy</a></li>
        
          <li><a href="/user/deployment/heroku/">Heroku</a></li>
        
          <li><a href="/user/deployment/launchpad/">Launchpad</a></li>
        
          <li><a href="/user/deployment/npm/">npm</a></li>
        
          <li><a href="/user/deployment/openshift/">OpenShift</a></li>
        
          <li><a href="/user/deployment/packagecloud/">packagecloud.io</a></li>
        
          <li><a href="/user/deployment/puppetforge/">Puppet Forge</a></li>
        
          <li><a href="/user/deployment/pypi/">PyPI</a></li>
        
          <li><a href="/user/deployment/cloudfiles/">Rackspace Cloud Files</a></li>
        
          <li><a href="/user/deployment/rubygems/">RubyGems</a></li>
        
          <li><a href="/user/deployment/scalingo/">Scalingo</a></li>
        
          <li><a href="/user/deployment/script/">Script</a></li>
        
          <li><a href="/user/deployment/snaps/">Snap Store</a></li>
        
          <li><a href="/user/deployment/surge/">Surge.sh</a></li>
        
          <li><a href="/user/deployment/testfairy/">TestFairy</a></li>
        
          <li><a href="/user/deployment/transifex/">Transifex</a></li>
        
        <li><a href="/user/uploading-artifacts/">Uploading Build Artifacts</a></li>
      </ul>

      <h3>CI Environment Reference</h3>
      <ul>
        <li class="is-overview"><a href="/user/reference/overview/">Overview</a></li>
        <li><a href="/user/reference/linux/">Ubuntu Linux CI Environment References</a></li>
        <li><a href="/user/reference/osx/">macOS CI Environment Reference</a></li>
        <li><a href="/user/reference/windows/">Windows CI Environment Reference</a></li>
        <li><a href="/user/reference/freebsd/">FreeBSD CI Environment Reference</a></li>
        <li><a href="/user/multi-os/">Building on Multiple Operating Systems</a></li>
        <li><a href="/user/multi-cpu-architectures/">Building on Multiple CPU Architectures</a></li>
        <li><a href="/user/environment-variables/">Environment Variables</a></li>
        <li><a href="/user/build-environment-updates/">Build Environment Updates</a></li>
        <li><a href="/user/ip-addresses/">Build Machines IP Addresses</a></li>
      </ul>

      <h3>Security and Secure Software Supply Chain</h3>
      <ul>
        <li><a href="/user/encryption-keys/">Encrypting Sensitive Data</a></li>
        <li><a href="/user/encrypting-files/">Encrypting Files</a></li>
        <li><a href="/user/github-oauth-scopes/">GitHub Permissions used by Travis CI</a></li>
        <li><a href="/user/bb-oauth-scopes/">Bitbucket Permissions used by Travis CI</a></li>
        <li><a href="/user/assembla-oauth-scopes/">Assembla Permissions used by Travis CI</a></li>
        <li><a href="/user/gl-oauth-scopes/">GitLab Permissions used by Travis CI</a></li>
        <li><a href="/user/disable-job-logs/">Disable Job Logs Availability</a></li>
        <li><a href="/user/best-practices-security/">Best Practices in Securing Your Data</a></li>
        <li><a href="/user/securely-signing-software">Securely Signing Software</a></li>
        <li><a href="/user/sbom">Software Bill of Materials</a></li>
      </ul>

      <h3>Integrations and Notifications</h3>
      <ul>
        <li><a href="/user/notifications/">Configuring Notifications</a></li>
        <li><a href="/user/status-images/">Showing Build Status Images</a></li>
        <li><a href="/user/code-climate/">Code Climate</a></li>
        <li><a href="/user/deepsource/">DeepSource</a></li>
        <li><a href="/user/coveralls/">Coveralls</a></li>
        <li><a href="/user/coverity-scan/">Coverity Scan</a></li>
        <li><a href="/user/browserstack/">BrowserStack</a></li>
        <li><a href="/user/sauce-connect/">Sauce Labs</a></li>
        <li><a href="/user/sonarcloud/">SonarCloud</a></li>
        <li><a href="/user/sourceclear/">SourceClear</a></li>
        <li><a href="/user/build-feeds/">Atom Feeds</a></li>
        <li><a href="/user/cc-menu/">CCMenu / CCTray Feeds</a></li>
        <li><a href="/user/integration/platformio/">Embedded Builds with PlatformIO</a></li>
        <li><a href="/user/hashicorp-vault-integration">Hashicorp Vault</a></li>
        <li><a href="/user/apps/">3rd Party Apps, Clients and Tools</a></li>
      </ul>

      <h3>Developer Program</h3>
      <ul>
        <li class="is-overview"><a href="/user/developer/">Overview</a></li>
        <li><a href="https://developer.travis-ci.com/">API V3</a></li>
        <li><a href="/user/triggering-builds/">Triggering Builds with API V3</a></li>
        <li><a href="https://github.com/travis-ci/travis#ruby-library">The Ruby Library</a></li>
      </ul>
      
      <h3>Hosted Billing</h3>
      <ul>
        <li class="is-overview"><a href="/user/billing-overview/">Overview</a></li>
        <li><a href="/user/billing-autorefill/">Auto-refill</a></li>
        <li><a href="/user/billing-faq/">FAQ</a></li>
      </ul>

      <h3>Travis CI Enterprise</h3>
      <ul>
        <li><a href="/user/enterprise/">Enterprise Docs</a></li>
      </ul>

    </nav>
  </section>

  <section class="sidebar-notice">
    <p>This documentation site is Open Source.
      The <a href="https://github.com/travis-ci/docs-travis-ci-com">README in our Git repository</a> explains how to contribute.</p>
    <p>Travis CI relies on Open Source <a href="/user/open_source_license/">licensing information</a>.</p>
  </section>

</div><!-- /#sidebar -->


        <main id="main" class="main" data-swiftype-index='true'>
          
            <aside class="improve-page" data-swiftype-index='false'><a href="https://github.com/travis-ci/docs-travis-ci-com/edit/master/user/languages/clojure.md" target="_blank" title="Edit this page on GitHub" class="button-pen" data-proofer-ignore>Improve this page on GitHub</a></aside>
            <h1 class="title">Building a Clojure project</h1>
          

          


          
            <div id="toc" class="toc">
              <ul class="list-language">
  <li><a href="#what-this-guide-covers">What This Guide Covers</a></li>
  <li><a href="#ci-environment-for-clojure-projects">CI Environment for Clojure Projects</a></li>
  <li><a href="#dependency-management">Dependency Management</a></li>
  <li><a href="#build-script">Build Script</a></li>
  <li><a href="#using-leiningen-1">Using Leiningen 1</a></li>
  <li><a href="#build-config-reference">Build Config Reference</a></li>
  <li><a href="#testing-against-multiple-jdks">Testing Against Multiple JDKs</a></li>
  <li><a href="#testing-against-multiple-versions-of-clojure">Testing Against Multiple Versions of Clojure</a></li>
  <li><a href="#examples-1">Examples</a></li>
</ul>

            </div>
          

          <h2 id="what-this-guide-covers">What This Guide Covers <a href="#what-this-guide-covers" class="toc-anchor">#</a></h2>

<aside class="ataglance">

  <table>
    <thead>
      <tr>
        <th style="text-align: left">Clojure</th>
        <th style="text-align: left">Default</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style="text-align: left"><a href="#dependency-management">Default <code class="highlighter-rouge">install</code></a></td>
        <td style="text-align: left"><code class="highlighter-rouge">lein deps</code></td>
      </tr>
      <tr>
        <td style="text-align: left"><a href="#default-build-script">Default <code class="highlighter-rouge">script</code></a></td>
        <td style="text-align: left"><code class="highlighter-rouge">lein test</code></td>
      </tr>
      <tr>
        <td style="text-align: left"><a href="#build-matrix">Matrix keys</a></td>
        <td style="text-align: left"><code class="highlighter-rouge">env</code>, <code class="highlighter-rouge">lein</code>, <code class="highlighter-rouge">jdk</code></td>
      </tr>
      <tr>
        <td style="text-align: left">Support</td>
        <td style="text-align: left"><a href="mailto:support@travis-ci.com">Travis CI</a></td>
      </tr>
    </tbody>
  </table>

  <p>Minimal example:</p>

  <div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">clojure</span>
</code></pre></div>  </div>

</aside>

<blockquote>
  <p>For Language versions and other build-environment specific
information visit our reference pages:</p>
  <ul>
    <li><a href="/user/reference/precise/">Precise</a></li>
    <li><a href="/user/reference/trusty/">Trusty</a></li>
    <li><a href="/user/reference/xenial/">Xenial</a></li>
    <li><a href="/user/reference/bionic/">Bionic</a></li>
    <li><a href="/user/reference/focal/">Focal</a></li>
    <li><a href="/user/reference/jammy/">Jammy</a></li>
  </ul>
</blockquote>

<p>This guide covers build environment and configuration topics specific to Clojure
projects. Please make sure to read our <a href="/user/tutorial/">Tutorial</a>
and <a href="/user/customizing-the-build/">general build configuration</a> guides first.</p>

<p>Clojure builds are not available on the macOS environment.</p>

<h2 id="ci-environment-for-clojure-projects">CI Environment for Clojure Projects <a href="#ci-environment-for-clojure-projects" class="toc-anchor">#</a></h2>

<p>Travis CI environment provides a large set of build tools for JVM languages with
<a href="/user/languages/java/#overview">multiple JDKs, Ant, Gradle, Maven</a> and both
<a href="http://leiningen.org">Leiningen</a> 1.7.x and 2.4.x (default).</p>

<h2 id="dependency-management">Dependency Management <a href="#dependency-management" class="toc-anchor">#</a></h2>

<p>If you use Leiningen, it will automatically install any dependencies that are
listed in the <code class="highlighter-rouge">project.clj</code> file.</p>

<h3 id="alternate-install-step">Alternate Install Step <a href="#alternate-install-step" class="toc-anchor">#</a></h3>

<p>If you need to install other dependencies before your tests can run, you should
set up the proper <code class="highlighter-rouge">:hooks</code> in <code class="highlighter-rouge">project.clj</code>.</p>

<p>If for some reason you can’t use hooks,you can override the install step in your
<code class="highlighter-rouge">.travis.yml</code>:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">install</span><span class="pi">:</span> <span class="s">lein protobuf install</span>
</code></pre></div></div>

<p>See the <a href="/user/customizing-the-build/">build configuration guide</a> to learn more.</p>

<h2 id="build-script">Build Script <a href="#build-script" class="toc-anchor">#</a></h2>

<h3 id="using-midje">Using Midje <a href="#using-midje" class="toc-anchor">#</a></h3>

<p>If your project uses <a href="https://github.com/marick/Midje">Midje</a>, make sure
<a href="https://github.com/marick/Midje/wiki/Lein-midje">lein-midje</a> is on your
<code class="highlighter-rouge">project.clj</code> development dependencies list and override <code class="highlighter-rouge">script:</code> in
<code class="highlighter-rouge">.travis.yml</code> to run the Midje task:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">script</span><span class="pi">:</span> <span class="s">lein midje</span>
</code></pre></div></div>

<p>For Leiningen 1 add <code class="highlighter-rouge">:dev-dependencies</code> to <code class="highlighter-rouge">project.clj</code>:</p>

<div data-file=".project.clj" class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:dev-dependencies [[midje "1.4.0"]
                   [lein-midje "1.0.10"]])
</code></pre></div></div>

<p>Leiningen 2 replaces <code class="highlighter-rouge">:dev-dependencies</code> with profiles:</p>

<div data-file=".project.clj" class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:profiles {:dev {:dependencies [[midje "1.6.3"]]
                 :plugins [[lein-midje "3.0.0"]]}}
</code></pre></div></div>

<p>Please note that for projects that only support Clojure 1.3.0 and later
versions, you may need to exclude transient <code class="highlighter-rouge">org.clojure/clojure</code> for Midje in
project.clj:</p>

<div data-file=".project.clj" class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:dev-dependencies [[midje "1.4.0" :exclusions [org.clojure/clojure]]
                   [lein-midje "1.0.10"]])
</code></pre></div></div>

<p>For real world example, see <a href="https://github.com/reiddraper/knockbox">Knockbox</a>.</p>

<h3 id="using-speclj-on-travis-ci">Using Speclj on Travis CI <a href="#using-speclj-on-travis-ci" class="toc-anchor">#</a></h3>

<p>If your project uses <a href="https://github.com/slagyr/speclj">Speclj</a>, make sure it is
listed in your development dependencies in <code class="highlighter-rouge">project.clj</code>, and include this
<code class="highlighter-rouge">script:</code> line in <code class="highlighter-rouge">.travis.yml</code>:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">script</span><span class="pi">:</span> <span class="s">lein spec</span>
</code></pre></div></div>

<p>For Leiningen 1, Speclj should be listed under <code class="highlighter-rouge">:dev-dependencies</code> in <code class="highlighter-rouge">project.clj</code>:</p>

<div data-file=".project.clj" class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:dev-dependencies [[speclj "3.3.1"]]
</code></pre></div></div>

<p>Leiningen 2 replaces <code class="highlighter-rouge">:dev-dependencies</code> with profiles:</p>

<div data-file=".project.clj" class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:profiles {:dev {:dependencies [[speclj "3.3.1"]]}}
</code></pre></div></div>

<h2 id="using-leiningen-1">Using Leiningen 1 <a href="#using-leiningen-1" class="toc-anchor">#</a></h2>

<p>Leiningen 1 is provided side by side with 2.4.x. To use it, specify <code class="highlighter-rouge">lein</code> key in <code class="highlighter-rouge">.travis.yml</code>:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">lein</span><span class="pi">:</span> <span class="s">lein1</span>
</code></pre></div></div>

<p>In case you need to use <code class="highlighter-rouge">lein</code> binary in <code class="highlighter-rouge">before_script</code>, <code class="highlighter-rouge">install:</code>, <code class="highlighter-rouge">script:</code> commands and so on, use <code class="highlighter-rouge">lein1</code>:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">before_install</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">lein1 bootstrap</span>
</code></pre></div></div>

<h2 id="build-config-reference">Build Config Reference <a href="#build-config-reference" class="toc-anchor">#</a></h2>

<p>You can find more information on the build config format for <a href="https://config.travis-ci.com/ref/language/clojure">Clojure</a> in our <a href="https://config.travis-ci.com/">Travis CI Build Config Reference</a>.</p>

<p>Task chaining requires using the <code class="highlighter-rouge">do</code> task:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">script</span><span class="pi">:</span> <span class="s">lein1 do javac, test</span>
</code></pre></div></div>

<h2 id="testing-against-multiple-jdks">Testing Against Multiple JDKs <a href="#testing-against-multiple-jdks" class="toc-anchor">#</a></h2>

<p>As for any JVM language, it is also possible to <a href="/user/languages/java/#testing-against-multiple-jdks">test against multiple JDKs</a>.</p>

<h3 id="examples">Examples <a href="#examples" class="toc-anchor">#</a></h3>

<ul>
  <li><a href="https://github.com/michaelklishin/monger/blob/master/.travis.yml">Monger</a></li>
  <li><a href="https://github.com/michaelklishin/welle/blob/master/.travis.yml">Welle</a></li>
  <li><a href="https://github.com/michaelklishin/langohr/blob/master/.travis.yml">Langohr</a></li>
  <li><a href="https://github.com/michaelklishin/neocons/blob/master/.travis.yml">Neocons</a></li>
</ul>

<h2 id="testing-against-multiple-versions-of-clojure">Testing Against Multiple Versions of Clojure <a href="#testing-against-multiple-versions-of-clojure" class="toc-anchor">#</a></h2>

<h3 id="with-leiningen-1">With Leiningen 1 <a href="#with-leiningen-1" class="toc-anchor">#</a></h3>

<p>Leiningen has an excellent plugin called <a href="https://github.com/maravillas/lein-multi">lein-multi</a> that lets you effortlessly test against multiple versions of
Clojure (for example, 1.3, 1.4 and alphas/betas/snapshots of the most recent development version). Because leiningen can run tests against any version of Clojure (not necessary the same version as Leiningen itself uses),
there is no need for runtime switchers (like RVM) for Clojure.</p>

<p>To use lein-multi on Travis CI, add it to <code class="highlighter-rouge">:plugins</code> in project.clj (note, this feature is only available starting with Leiningen 1.7.0) and
override <code class="highlighter-rouge">script:</code> to run <code class="highlighter-rouge">lein multi test</code> instead of default <code class="highlighter-rouge">lein test</code>:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">clojure</span>
<span class="na">script</span><span class="pi">:</span> <span class="s">lein1 multi test</span>
</code></pre></div></div>

<p>For a real world example, see <a href="https://github.com/michaelklishin/monger">Monger</a>.</p>

<h3 id="with-leiningen-2">With Leiningen 2 <a href="#with-leiningen-2" class="toc-anchor">#</a></h3>

<p>Leiningen 2 has a core feature that replaces <code class="highlighter-rouge">lein-multi</code>: <a href="https://github.com/technomancy/leiningen/blob/master/doc/TUTORIAL.md">Profiles</a>. To run your tests against
multiple profiles (and thus, multiple dependency sets or Clojure versions), use <code class="highlighter-rouge">lein with-profile</code> command like so:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">lein</span><span class="pi">:</span> <span class="s">lein</span>
<span class="na">script</span><span class="pi">:</span> <span class="s">lein with-profile dev:1.4 test</span>
</code></pre></div></div>

<p>where <code class="highlighter-rouge">dev:1.4</code> is a colon-separated list of profiles to run <code class="highlighter-rouge">test</code> task against. Use <code class="highlighter-rouge">lein profiles</code> to list your project’s profiles
and <code class="highlighter-rouge">lein help with-profile</code> to learn more about the <code class="highlighter-rouge">with-profiles</code> task.</p>

<h4 id="using-a-more-recent-versions-of-leiningen">Using a more recent versions of Leiningen <a href="#using-a-more-recent-versions-of-leiningen" class="toc-anchor">#</a></h4>

<p>If your Clojure project requires a more recent version of Leiningen, you can specify it with:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">clojure</span>

<span class="na">lein</span><span class="pi">:</span> <span class="s">2.6.1</span> <span class="c1"># version 2 and up</span>
</code></pre></div></div>

<p>The job will install the specified version of Leiningen if it is not pre-installed,
and move on to install your project’s dependencies.</p>

<h3 id="example">Example <a href="#example" class="toc-anchor">#</a></h3>

<p>For a real world example, see <a href="https://github.com/michaelklishin/neocons">Neocons</a>.</p>

<h2 id="examples-1">Examples <a href="#examples-1" class="toc-anchor">#</a></h2>

<ul>
  <li><a href="https://github.com/michaelklishin/monger/blob/master/.travis.yml">monger’s .travis.yml</a></li>
  <li><a href="https://github.com/michaelklishin/welle/blob/master/.travis.yml">welle’s .travis.yml</a></li>
  <li><a href="https://github.com/michaelklishin/langohr/blob/master/.travis.yml">langohr’s .travis.yml</a></li>
  <li><a href="https://github.com/michaelklishin/neocons/blob/master/.travis.yml">neocons’ .travis.yml</a></li>
  <li><a href="https://github.com/reiddraper/knockbox/blob/master/.travis.yml">Knockbox’s .travis.yml</a></li>
  <li><a href="https://github.com/reiddraper/sumo/blob/master/.travis.yml">Sumo’s .travis.yml</a></li>
</ul>


        </main>
      </div><!-- /#content -->

      <footer class="footer">
  <div class="layout-inner">
    <div class="footer-elem">
      <svg width="142px" height="45.381px" viewBox="0 0 142 45.381" enable-background="new 0 0 142 45.381" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink= "http://www.w3.org/1999/xlink">
        <title>Travis CI Mascot</title>
        <image xlink:href="https://styleguide.travis-ci.com/images/logos/travis-footer-logo-new.svg" x="0" y="0" width="142px" height="45.381px" />
      </svg>
    </div>

    <div class="footer-elem"></div>

    <div class="footer-elem">
      <h3 class="footer-title">©Travis CI, GmbH</h3>
      <address>Rigaer Straße 8<br>10247 Berlin, Germany</address>
      <ul>
        <li><a href="https://travisci.workable.com/" title="Jobs at Travis CI">Work with Travis CI</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Help</h3>
      <ul>
        <li><a href="https://docs.travis-ci.com" title="Travis CI Docs">Documentation</a></li>
        <li><a href="https://changelog.travis-ci.com/">Changelog</a></li>
        <li><a href="https://blog.travis-ci.com/" title="Travis CI Blog">Blog</a></li>
        <li><a href="mailto:support@travis-ci.com" title="Email Travis CI support">Email</a></li>
        <li><a href="https://twitter.com/travisci" title="Travis CI on Twitter">Twitter</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Company</h3>
      <ul>
        <li><a href="/imprint.html" title="Imprint">Imprint</a></li>
        <li><a href="https://ideracorp.com/legal/TravisCI">Legal</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Travis CI Status</h3>
      <ul>
        <li><div class="status-circle none">Status:</div>
          <a href="http://www.traviscistatus.com/">Travis CI Status</a>
        </li>
      </ul>
    </div>
  </div>
</footer>

<script>
 fetch('https://pnpcptp8xh9k.statuspage.io/api/v2/status.json').then(function(response) {
   return response.json();
 }).then(function(data) {
   if (data.status && data.status.indicator) {
     document.querySelector('.status-circle').classList.add(data.status.indicator);
   }
 });
</script>

    </div><!-- /.wrapper -->
  </body>
</html>
 contentType 9 text/html url 54 https://docs.travis-ci.com:443/user/languages/clojure/ responseCode 3 200 