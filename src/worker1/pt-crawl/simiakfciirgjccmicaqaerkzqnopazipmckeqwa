simiakfciirgjccmicaqaerkzqnopazipmckeqwa length 5 38377 page 38377 <!DOCTYPE HTML>
<html lang="en">
  <head>
<!-- PDTQ-131 -->
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N3RT7TD');</script>
<!-- End Google Tag Manager -->
    
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Building an Android Project - Travis CI</title>
<link rel="stylesheet" href="/assets/stylesheets/main.css">
<link rel="alternate" type="application/rss+xml" title="Travis CI Build Environment Updates" href="https://docs.travis-ci.com/feed.build-env-updates.xml">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" defer></script>

<script src="/assets/javascripts/main.js" type="text/javascript" charset="utf-8" defer></script>
<script src="/assets/javascripts/prism.js" type="text/javascript" charset="utf-8" defer></script>
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@travisci" />
<meta name="twitter:creator" content="@travisci" />
<meta property="og:title" content="Travis CI Documentation" />
<meta property="og:type" content="website" />
<meta property="og:url" content=/user/languages/android/ />
<meta property="og:description" content="Building an Android Project" />
<meta property="og:image" content="/images/TravisCI-Full-Color.png" }} />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="642" />
<meta property="og:image:height" content="201" />
<meta property="og:image:alt" content="Travis CI logo" />


 

  </head>
  <body>
<!-- PDTQ-131 -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N3RT7TD"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <div class="wrapper">

      <header class="top">
  <div class="row topbar">
    <h1 id="logo" class="logo">
  <a href="https://travis-ci.com/" title="Travis CI">Travis</a>
</h1>

    <nav>
      <ul id="navigation" class="navigation">
        <li><a href="https://blog.travis-ci.com">Blog</a></li>
        <li><a href="/">Docs</a></li>
        <li class="toggle"><button type="button" id="toggle-menu" class="button--teal">Menu</button></li>
      </ul>
    </nav>
  </div>
</header>


      <div id="content" class="row">

        <div id="sidebar" class="sidebar">
  <div>
    <!-- <h2>Search</h2> -->
    <div class="searchbox">
      <form>
        <input type="text" id="st-search-input" class="searchbox-input" placeholder="Search the docs" />
      </form>
      <script type="text/javascript">
      var Swiftype = window.Swiftype || {};
        (function() {
          Swiftype.key = 'tXvDDzd4fNTBnLvxfEyx';

          Swiftype.searchSearchFields = {
            "page": ["title, body, tags"]
          };
          Swiftype.autocompleteSearchFields = {
            "page": ["title, body, tags"]
          };
          /** DO NOT EDIT BELOW THIS LINE **/
          var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
          script.src = "//swiftype.com/embed.js";
          var entry = document.getElementsByTagName('script')[0];
          document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
        }());
      </script>
    </div>
  </div>

  <section class="sidebar-navigation">
    <nav>
      <h3>Getting Started</h3>
      <ul>
        <li><a href="/user/for-beginners/">Core Concepts for Beginners</a></li>
        <li><a href="/user/tutorial/">Travis CI Tutorial</a></li>
        <li><a href="/user/customizing-the-build/">Customizing the Build</a></li>
        <li><a href="/user/speeding-up-the-build/">Speeding up the Build</a></li>
        <li><a href="/user/docker/">Using Docker in your Build</a></li>
        <li><a href="/user/gui-and-headless-browsers/">Headless Testing with Browsers</a></li>
        <li><a href="/user/pull-requests/">Building Pull Requests</a></li>
        <li><a href="/user/cron-jobs/">Cron Jobs</a></li>
        <li><a href="/user/common-build-problems/">Common Build Problems</a></li>
        <li><a href="https://github.com/travis-ci/travis#readme">Command Line Client</a></li>
        <li><a href="/user/build-config-imports/">Build Config Imports</a></li>
        <li><a href="/user/build-config-validation/">Build Config Validation</a></li>
      </ul>

      <h3>Jobs, Builds, Matrices and Stages</h3>
      <ul>
        <li><a href="/user/job-lifecycle/">Job Lifecycle</a></li>
        <li><a href="/user/build-matrix/">Build Matrix</a></li>
        <li><a href="/user/build-stages/">Build Stages</a></li>
        <li><a href="/user/conditional-builds-stages-jobs/">Conditional Builds, Stages, and Jobs</a></li>
      </ul>

      <h3>Installing Dependencies</h3>
      <ul>
        <li><a href="/user/installing-dependencies/">Installing Dependencies</a></li>
        <li><a href="/user/private-dependencies/">Private Dependencies GitHub</a></li>
        <li><a href="/user/private-dependencies-bb/">Private Dependencies Bitbucket</a></li>
        <li><a href="/user/database-setup/">Setting up Services and Databases</a></li>
        <li><a href="/user/caching/">Caching Dependencies</a></li>
        <li><a href="/user/using-workspaces/">Caching Dependencies within a Build (Workspaces)</a></li>
        <li><a href="/user/ssh-known-hosts/">Adding to SSH Known Hosts</a></li>
      </ul>

      <h3>Programming Languages</h3>
      <ul>
      
        <li><a href="/user/languages/android/">Android</a></li>
      
        <li><a href="/user/languages/c/">C</a></li>
      
        <li><a href="/user/languages/csharp/">C#</a></li>
      
        <li><a href="/user/languages/cpp/">C++</a></li>
      
        <li><a href="/user/languages/clojure/">Clojure</a></li>
      
        <li><a href="/user/languages/crystal/">Crystal</a></li>
      
        <li><a href="/user/languages/d/">D</a></li>
      
        <li><a href="/user/languages/dart/">Dart</a></li>
      
        <li><a href="/user/languages/elixir/">Elixir</a></li>
      
        <li><a href="/user/languages/elm/">Elm</a></li>
      
        <li><a href="/user/languages/erlang/">Erlang</a></li>
      
        <li><a href="/user/languages/csharp/">F#</a></li>
      
        <li><a href="/user/languages/minimal-and-generic/">Generic</a></li>
      
        <li><a href="/user/languages/go/">Go</a></li>
      
        <li><a href="/user/languages/groovy/">Groovy</a></li>
      
        <li><a href="/user/languages/haskell/">Haskell</a></li>
      
        <li><a href="/user/languages/haxe/">Haxe</a></li>
      
        <li><a href="/user/languages/java/">Java</a></li>
      
        <li><a href="/user/languages/javascript-with-nodejs/">JavaScript <small>(with Node.js)</small></a></li>
      
        <li><a href="/user/languages/julia/">Julia</a></li>
      
        <li><a href="/user/languages/matlab/">MATLAB</a></li>
      
        <li><a href="/user/languages/minimal-and-generic/">Minimal</a></li>
      
        <li><a href="/user/languages/nix/">Nix</a></li>
      
        <li><a href="/user/languages/objective-c/">Objective-C</a></li>
      
        <li><a href="/user/languages/perl/">Perl</a></li>
      
        <li><a href="/user/languages/perl6/">Perl6</a></li>
      
        <li><a href="/user/languages/php/">PHP</a></li>
      
        <li><a href="/user/languages/python/">Python</a></li>
      
        <li><a href="/user/languages/r/">R</a></li>
      
        <li><a href="/user/languages/ruby/">Ruby</a></li>
      
        <li><a href="/user/languages/rust/">Rust</a></li>
      
        <li><a href="/user/languages/scala/">Scala</a></li>
      
        <li><a href="/user/languages/smalltalk/">Smalltalk</a></li>
      
        <li><a href="/user/languages/objective-c/">Swift</a></li>
      
        <li><a href="/user/languages/csharp/">Visual Basic</a></li>
      
        <li><a href="/user/languages/community-supported-languages/">Adding a language</a></li>
      </ul>

      <h3>Deployments and Uploads</h3>
      <ul>
        
          <li class="is-overview"><a href="/user/deployment/">Overview</a></li>
          
        
        
          <li><a href="/user/deployment/anynines/">anynines</a></li>
        
          <li><a href="/user/deployment/atlas/">Atlas</a></li>
        
          <li><a href="/user/deployment/codedeploy/">AWS CodeDeploy</a></li>
        
          <li><a href="/user/deployment/elasticbeanstalk/">AWS Elastic Beanstalk</a></li>
        
          <li><a href="/user/deployment/lambda/">AWS Lambda</a></li>
        
          <li><a href="/user/deployment/opsworks/">AWS OpsWorks</a></li>
        
          <li><a href="/user/deployment/s3/">AWS S3</a></li>
        
          <li><a href="/user/deployment/azure-web-apps/">Azure Web Apps</a></li>
        
          <li><a href="/user/deployment/bintray/">bintray</a></li>
        
          <li><a href="/user/deployment/bitballoon/">BitBalloon</a></li>
        
          <li><a href="/user/deployment/bluemixcloudfoundry/">Bluemix CloudFoundry</a></li>
        
          <li><a href="/user/deployment/boxfuse/">Boxfuse</a></li>
        
          <li><a href="/user/deployment/catalyze/">Catalyze</a></li>
        
          <li><a href="/user/deployment/chefsupermarket/">Chef Supermarket</a></li>
        
          <li><a href="/user/deployment/cloud66/">Cloud 66</a></li>
        
          <li><a href="/user/deployment/cloudfoundry/">CloudFoundry</a></li>
        
          <li><a href="/user/deployment/cargo/">Cargo</a></li>
        
          <li><a href="/user/deployment/engineyard/">Engine Yard</a></li>
        
          <li><a href="/user/deployment/pages/">GitHub Pages</a></li>
        
          <li><a href="/user/deployment/releases/">GitHub Releases</a></li>
        
          <li><a href="/user/deployment/google-app-engine/">Google App Engine</a></li>
        
          <li><a href="/user/deployment/gcs/">Google Cloud Storage</a></li>
        
          <li><a href="/user/deployment/firebase/">Google Firebase</a></li>
        
          <li><a href="/user/deployment/hackage/">Hackage</a></li>
        
          <li><a href="/user/deployment/hephy/">Hephy</a></li>
        
          <li><a href="/user/deployment/heroku/">Heroku</a></li>
        
          <li><a href="/user/deployment/launchpad/">Launchpad</a></li>
        
          <li><a href="/user/deployment/npm/">npm</a></li>
        
          <li><a href="/user/deployment/openshift/">OpenShift</a></li>
        
          <li><a href="/user/deployment/packagecloud/">packagecloud.io</a></li>
        
          <li><a href="/user/deployment/puppetforge/">Puppet Forge</a></li>
        
          <li><a href="/user/deployment/pypi/">PyPI</a></li>
        
          <li><a href="/user/deployment/cloudfiles/">Rackspace Cloud Files</a></li>
        
          <li><a href="/user/deployment/rubygems/">RubyGems</a></li>
        
          <li><a href="/user/deployment/scalingo/">Scalingo</a></li>
        
          <li><a href="/user/deployment/script/">Script</a></li>
        
          <li><a href="/user/deployment/snaps/">Snap Store</a></li>
        
          <li><a href="/user/deployment/surge/">Surge.sh</a></li>
        
          <li><a href="/user/deployment/testfairy/">TestFairy</a></li>
        
          <li><a href="/user/deployment/transifex/">Transifex</a></li>
        
        <li><a href="/user/uploading-artifacts/">Uploading Build Artifacts</a></li>
      </ul>

      <h3>CI Environment Reference</h3>
      <ul>
        <li class="is-overview"><a href="/user/reference/overview/">Overview</a></li>
        <li><a href="/user/reference/linux/">Ubuntu Linux CI Environment References</a></li>
        <li><a href="/user/reference/osx/">macOS CI Environment Reference</a></li>
        <li><a href="/user/reference/windows/">Windows CI Environment Reference</a></li>
        <li><a href="/user/reference/freebsd/">FreeBSD CI Environment Reference</a></li>
        <li><a href="/user/multi-os/">Building on Multiple Operating Systems</a></li>
        <li><a href="/user/multi-cpu-architectures/">Building on Multiple CPU Architectures</a></li>
        <li><a href="/user/environment-variables/">Environment Variables</a></li>
        <li><a href="/user/build-environment-updates/">Build Environment Updates</a></li>
        <li><a href="/user/ip-addresses/">Build Machines IP Addresses</a></li>
      </ul>

      <h3>Security and Secure Software Supply Chain</h3>
      <ul>
        <li><a href="/user/encryption-keys/">Encrypting Sensitive Data</a></li>
        <li><a href="/user/encrypting-files/">Encrypting Files</a></li>
        <li><a href="/user/github-oauth-scopes/">GitHub Permissions used by Travis CI</a></li>
        <li><a href="/user/bb-oauth-scopes/">Bitbucket Permissions used by Travis CI</a></li>
        <li><a href="/user/assembla-oauth-scopes/">Assembla Permissions used by Travis CI</a></li>
        <li><a href="/user/gl-oauth-scopes/">GitLab Permissions used by Travis CI</a></li>
        <li><a href="/user/disable-job-logs/">Disable Job Logs Availability</a></li>
        <li><a href="/user/best-practices-security/">Best Practices in Securing Your Data</a></li>
        <li><a href="/user/securely-signing-software">Securely Signing Software</a></li>
        <li><a href="/user/sbom">Software Bill of Materials</a></li>
      </ul>

      <h3>Integrations and Notifications</h3>
      <ul>
        <li><a href="/user/notifications/">Configuring Notifications</a></li>
        <li><a href="/user/status-images/">Showing Build Status Images</a></li>
        <li><a href="/user/code-climate/">Code Climate</a></li>
        <li><a href="/user/deepsource/">DeepSource</a></li>
        <li><a href="/user/coveralls/">Coveralls</a></li>
        <li><a href="/user/coverity-scan/">Coverity Scan</a></li>
        <li><a href="/user/browserstack/">BrowserStack</a></li>
        <li><a href="/user/sauce-connect/">Sauce Labs</a></li>
        <li><a href="/user/sonarcloud/">SonarCloud</a></li>
        <li><a href="/user/sourceclear/">SourceClear</a></li>
        <li><a href="/user/build-feeds/">Atom Feeds</a></li>
        <li><a href="/user/cc-menu/">CCMenu / CCTray Feeds</a></li>
        <li><a href="/user/integration/platformio/">Embedded Builds with PlatformIO</a></li>
        <li><a href="/user/hashicorp-vault-integration">Hashicorp Vault</a></li>
        <li><a href="/user/apps/">3rd Party Apps, Clients and Tools</a></li>
      </ul>

      <h3>Developer Program</h3>
      <ul>
        <li class="is-overview"><a href="/user/developer/">Overview</a></li>
        <li><a href="https://developer.travis-ci.com/">API V3</a></li>
        <li><a href="/user/triggering-builds/">Triggering Builds with API V3</a></li>
        <li><a href="https://github.com/travis-ci/travis#ruby-library">The Ruby Library</a></li>
      </ul>
      
      <h3>Hosted Billing</h3>
      <ul>
        <li class="is-overview"><a href="/user/billing-overview/">Overview</a></li>
        <li><a href="/user/billing-autorefill/">Auto-refill</a></li>
        <li><a href="/user/billing-faq/">FAQ</a></li>
      </ul>

      <h3>Travis CI Enterprise</h3>
      <ul>
        <li><a href="/user/enterprise/">Enterprise Docs</a></li>
      </ul>

    </nav>
  </section>

  <section class="sidebar-notice">
    <p>This documentation site is Open Source.
      The <a href="https://github.com/travis-ci/docs-travis-ci-com">README in our Git repository</a> explains how to contribute.</p>
    <p>Travis CI relies on Open Source <a href="/user/open_source_license/">licensing information</a>.</p>
  </section>

</div><!-- /#sidebar -->


        <main id="main" class="main" data-swiftype-index='true'>
          
            <aside class="improve-page" data-swiftype-index='false'><a href="https://github.com/travis-ci/docs-travis-ci-com/edit/master/user/languages/android.md" target="_blank" title="Edit this page on GitHub" class="button-pen" data-proofer-ignore>Improve this page on GitHub</a></aside>
            <h1 class="title">Building an Android Project</h1>
          

          


          
            <div id="toc" class="toc">
              <ul class="list-language">
  <li><a href="#ci-environment-for-android-projects">CI Environment for Android Projects</a></li>
  <li><a href="#dependency-management">Dependency Management</a></li>
  <li><a href="#default-test-command-for-maven">Default Test Command for Maven</a></li>
  <li><a href="#default-test-command-for-gradle">Default Test Command for Gradle</a></li>
  <li><a href="#default-test-command">Default Test Command</a></li>
  <li><a href="#testing-against-multiple-jdks">Testing Against Multiple JDKs</a></li>
  <li><a href="#build-matrix">Build Matrix</a></li>
  <li><a href="#building-android-projects-on-new-build-environments">Building Android projects on new build environments</a></li>
  <li><a href="#examples">Examples</a></li>
  <li><a href="#build-config-reference">Build Config Reference</a></li>
</ul>

            </div>
          

          <h3 id="what-this-guide-covers">What This Guide Covers <a href="#what-this-guide-covers" class="toc-anchor">#</a></h3>

<p>This guide covers build environment and configuration topics specific to Android projects. Please make sure to read our <a href="/user/tutorial/">Tutorial</a> and <a href="/user/customizing-the-build/">general build configuration</a> guides first.</p>

<p>Android builds are not available on the macOS environment.</p>

<h2 id="ci-environment-for-android-projects">CI Environment for Android Projects <a href="#ci-environment-for-android-projects" class="toc-anchor">#</a></h2>

<h3 id="overview">Overview <a href="#overview" class="toc-anchor">#</a></h3>

<blockquote>
  <p>Android builds are officially supported only on our Trusty Build environment at this time hence you’ll need to explicitly specify <code class="highlighter-rouge">dist: trusty</code> in your .travis.yml file.</p>
</blockquote>

<p>Travis CI environment provides a large set of build tools for JVM languages with <a href="/user/languages/java/#overview">multiple JDKs, Ant, Gradle, Maven</a>, <a href="/user/languages/scala#projects-using-sbt">sbt</a> and <a href="/user/languages/clojure">Leiningen</a>.</p>

<p>By setting</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">android</span>
<span class="na">dist</span><span class="pi">:</span> <span class="s">trusty</span>
</code></pre></div></div>

<p>in your <code class="highlighter-rouge">.travis.yml</code> file, your project will be built in the Android environment which provides <a href="http://developer.android.com/tools/sdk/tools-notes.html">Android SDK Tools</a> 25.2.3.</p>

<p>Here is an example <code class="highlighter-rouge">.travis.yml</code> for an Android project:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">android</span>
<span class="na">dist</span><span class="pi">:</span> <span class="s">trusty</span>
<span class="na">android</span><span class="pi">:</span>
  <span class="na">components</span><span class="pi">:</span>
    <span class="c1"># Uncomment the lines below if you want to</span>
    <span class="c1"># use the latest revision of Android SDK Tools</span>
    <span class="c1"># - tools</span>
    <span class="c1"># - platform-tools</span>

    <span class="c1"># The BuildTools version used by your project</span>
    <span class="pi">-</span> <span class="s">build-tools-26.0.2</span>

    <span class="c1"># The SDK version used to compile your project</span>
    <span class="pi">-</span> <span class="s">android-26</span>

    <span class="c1"># Additional components</span>
    <span class="pi">-</span> <span class="s">extra-google-google_play_services</span>
    <span class="pi">-</span> <span class="s">extra-google-m2repository</span>
    <span class="pi">-</span> <span class="s">extra-android-m2repository</span>

    <span class="c1"># Specify at least one system image,</span>
    <span class="c1"># if you need to run emulator(s) during your tests</span>
    <span class="pi">-</span> <span class="s">sys-img-x86-android-26</span>
    <span class="pi">-</span> <span class="s">sys-img-armeabi-v7a-android-17</span>
</code></pre></div></div>

<h3 id="how-to-install-android-sdk-components">How to install Android SDK components <a href="#how-to-install-android-sdk-components" class="toc-anchor">#</a></h3>

<p>In your <code class="highlighter-rouge">.travis.yml</code> you can define the list of SDK components to be installed, as illustrated in the following example:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">android</span>
<span class="na">dist</span><span class="pi">:</span> <span class="s">trusty</span>
<span class="na">android</span><span class="pi">:</span>
  <span class="na">components</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">build-tools-26.0.2</span>
    <span class="pi">-</span> <span class="s">android-26</span>
    <span class="pi">-</span> <span class="s">extra</span>
</code></pre></div></div>

<p>The exact component names must be specified (filter aliases like <code class="highlighter-rouge">add-on</code> or <code class="highlighter-rouge">extra</code> are also accepted). To get a list of available exact component names and descriptions run the command <code class="highlighter-rouge">sdkmanager --list</code> (preferably in your local development machine).</p>

<h4 id="dealing-with-licenses">Dealing with Licenses <a href="#dealing-with-licenses" class="toc-anchor">#</a></h4>

<p>By default, Travis CI will accept all the requested licenses, but it is also possible to define a white list of licenses to be accepted, as shown in the following example:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">android</span>
<span class="na">dist</span><span class="pi">:</span> <span class="s">trusty</span>
<span class="na">android</span><span class="pi">:</span>
  <span class="na">components</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">build-tools-26.0.2</span>
    <span class="pi">-</span> <span class="s">android-26</span>
    <span class="pi">-</span> <span class="s">add-on</span>
    <span class="pi">-</span> <span class="s">extra</span>
  <span class="na">licenses</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s1">'</span><span class="s">android-sdk-preview-license-52d11cd2'</span>
    <span class="pi">-</span> <span class="s1">'</span><span class="s">android-sdk-license-.+'</span>
    <span class="pi">-</span> <span class="s1">'</span><span class="s">google-gdk-license-.+'</span>
</code></pre></div></div>

<p>For more flexibility, the licenses can also be referenced with regular expressions (using Tcl syntax as <code class="highlighter-rouge">expect</code> command is used to automatically respond to the interactive prompts).</p>

<h3 id="pre-installed-components">Pre-installed components <a href="#pre-installed-components" class="toc-anchor">#</a></h3>

<p>While the following components are preinstalled, the exact list may change without prior notice. To ensure the stability of your build environment, we recommend that you explicitly specify the required components for your project.</p>

<ul>
  <li>tools</li>
  <li>platform-tools</li>
  <li>build-tools-25.0.2</li>
  <li>android-25</li>
  <li>extra-google-google_play_services</li>
  <li>extra-google-m2repository</li>
  <li>extra-android-m2repository</li>
</ul>

<h3 id="how-to-create-and-start-an-emulator">How to Create and Start an Emulator <a href="#how-to-create-and-start-an-emulator" class="toc-anchor">#</a></h3>

<p><strong>Warning:</strong> At the moment, these steps are not fully supported by Travis CI Android builder.</p>

<p>If you feel adventurous, you may use the script <a href="https://github.com/travis-ci/travis-cookbooks/blob/precise-stable/ci_environment/android-sdk/files/default/android-wait-for-emulator"><code class="highlighter-rouge">/usr/local/bin/android-wait-for-emulator</code></a> and adapt your <code class="highlighter-rouge">.travis.yml</code> to make this emulator available for your tests. For example:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Emulator Management: Create, Start and Wait</span>
<span class="na">before_script</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">echo no | android create avd --force -n test -t android-22 --abi armeabi-v7a -c 100M</span>
  <span class="pi">-</span> <span class="s">emulator -avd test -no-audio -no-window &amp;</span>
  <span class="pi">-</span> <span class="s">android-wait-for-emulator</span>
  <span class="pi">-</span> <span class="s">adb shell input keyevent 82 &amp;</span>
</code></pre></div></div>

<h2 id="dependency-management">Dependency Management <a href="#dependency-management" class="toc-anchor">#</a></h2>

<p>Travis CI Android builder assumes that your project is built with a JVM build tool like Maven or Gradle that will automatically pull down project dependencies before running tests without any effort on your side.</p>

<p>If your project is built with Ant or any other build tool that does not automatically handle dependencies, you need to specify the exact command to run using <code class="highlighter-rouge">install:</code> key in your <code class="highlighter-rouge">.travis.yml</code>, for example:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">android</span>
<span class="na">dist</span><span class="pi">:</span> <span class="s">trusty</span>
<span class="na">install</span><span class="pi">:</span> <span class="s">ant deps</span>
</code></pre></div></div>

<h2 id="default-test-command-for-maven">Default Test Command for Maven <a href="#default-test-command-for-maven" class="toc-anchor">#</a></h2>

<p>If your project has <code class="highlighter-rouge">pom.xml</code> file in the repository root but no <code class="highlighter-rouge">build.gradle</code>, Maven 3 will be used to build it. By default it will use</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn <span class="nb">install</span> <span class="nt">-B</span>
</code></pre></div></div>

<p>to run your test suite. This can be overridden as described in the <a href="/user/customizing-the-build/">general build configuration</a> guide.</p>

<h2 id="default-test-command-for-gradle">Default Test Command for Gradle <a href="#default-test-command-for-gradle" class="toc-anchor">#</a></h2>

<p>If your project has <code class="highlighter-rouge">build.gradle</code> file in the repository root, Gradle will be used to build it. By default it will use</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gradle build connectedCheck
</code></pre></div></div>

<p>to run your test suite. If your project also includes the <code class="highlighter-rouge">gradlew</code> wrapper script in the repository root, Travis Android builder will try to use it instead. The default command will become:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./gradlew build connectedCheck
</code></pre></div></div>

<p>This can be overridden as described in the <a href="/user/customizing-the-build/">general build configuration</a> guide.</p>

<h3 id="caching">Caching <a href="#caching" class="toc-anchor">#</a></h3>

<p>A peculiarity of dependency caching in Gradle means that to avoid uploading the cache after every build you need to add the following lines to your <code class="highlighter-rouge">.travis.yml</code>:</p>

<div data-file=".travis.yml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">before_cache</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock</span>
  <span class="pi">-</span> <span class="s">rm -fr $HOME/.gradle/caches/*/plugin-resolution/</span>
<span class="na">cache</span><span class="pi">:</span>
  <span class="na">directories</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">$HOME/.gradle/caches/</span>
    <span class="pi">-</span> <span class="s">$HOME/.gradle/wrapper/</span>
    <span class="pi">-</span> <span class="s">$HOME/.android/build-cache</span>
</code></pre></div></div>

<h2 id="default-test-command">Default Test Command <a href="#default-test-command" class="toc-anchor">#</a></h2>

<p>If Travis CI could not detect Maven or Gradle files, Travis CI Android builder will try to use Ant to build your project. By default it will use</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ant debug <span class="nb">install test</span>
</code></pre></div></div>

<p>to run your test suite. This can be overridden as described in the <a href="/user/customizing-the-build/">general build configuration</a> guide.</p>

<h2 id="testing-against-multiple-jdks">Testing Against Multiple JDKs <a href="#testing-against-multiple-jdks" class="toc-anchor">#</a></h2>

<p>As for any JVM language, it is also possible to <a href="/user/languages/java/#testing-against-multiple-jdks">test against multiple JDKs</a>.</p>

<h2 id="build-matrix">Build Matrix <a href="#build-matrix" class="toc-anchor">#</a></h2>

<p>For Android projects, <code class="highlighter-rouge">env</code> and <code class="highlighter-rouge">jdk</code> can be given as arrays to construct a build matrix.</p>

<h2 id="building-android-projects-on-new-build-environments">Building Android projects on new build environments <a href="#building-android-projects-on-new-build-environments" class="toc-anchor">#</a></h2>

<p>The <code class="highlighter-rouge">dist: trusty</code> build environment is the only supported build environment for Android but if you would like to build on newer build environments e.g. <code class="highlighter-rouge">dist: jammy</code>, you can exercise your access to the Travis CI build environments and install required packages and tools. An example .travis.yml config can be reviewed below:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">os</span><span class="pi">:</span> <span class="s">linux</span>
<span class="na">language</span><span class="pi">:</span> <span class="s">java</span>
<span class="na">jdk</span><span class="pi">:</span> <span class="s">openjdk17</span>

<span class="na">env</span><span class="pi">:</span>
 <span class="na">global</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">ANDROID_HOME=$HOME/travis-tools/android</span>
  <span class="pi">-</span> <span class="s">ANDROID_SDK_ROOT=$HOME/travis-tools/android</span>

<span class="na">before_install</span><span class="pi">:</span>
 <span class="c1"># PREPARE FOR ANDROID SDK SETUP</span>
 <span class="pi">-</span> <span class="s">mkdir -p $HOME/travis-tools/android &amp;&amp; mkdir $HOME/.android &amp;&amp; touch $HOME/.android/repositories.cfg</span>
 <span class="pi">-</span> <span class="s">cd $ANDROID_HOME &amp;&amp; wget -q "https://dl.google.com/android/repository/commandlinetools-linux-10406996_latest.zip" -O commandlinetools.zip</span>
 <span class="pi">-</span> <span class="s">unzip -q commandlinetools.zip &amp;&amp; cd cmdline-tools</span>
 <span class="pi">-</span> <span class="s">mv * tools | mkdir tools &amp;&amp; cd $TRAVIS_BUILD_DIR</span>
 
 <span class="c1"># SETUP PATH(s)</span>
 <span class="pi">-</span> <span class="s">export PATH=$ANDROID_HOME/cmdline-tools/tools/bin/:$PATH</span>
 <span class="pi">-</span> <span class="s">export PATH=$ANDROID_HOME/emulator/:$PATH</span>
 <span class="pi">-</span> <span class="s">export PATH=$ANDROID_HOME/platform-tools/:$PATH</span>

<span class="na">install</span><span class="pi">:</span>
 <span class="c1"># INSTALL REQUIRED ANDROID SDK TOOLS</span>
 <span class="pi">-</span> <span class="s">sdkmanager --sdk_root=$ANDROID_HOME --list | awk '/Installed/{flag=1; next} /Available/{flag=0} flag'</span>
 <span class="pi">-</span> <span class="s">yes | sdkmanager --sdk_root=$ANDROID_HOME --install "platform-tools" "platforms;android-33" "build-tools;33.0.2" "emulator" "system-images;android-33;google_apis;x86_64"</span>
 <span class="pi">-</span> <span class="s">sdkmanager --list --sdk_root=$ANDROID_HOME | awk '/Installed/{flag=1; next} /Available/{flag=0} flag'</span>
 <span class="c1"># CREATE AVD</span>
 <span class="pi">-</span> <span class="s">echo "no" | avdmanager --verbose create avd --force --name "my_android_33" --package "system-images;android-33;google_apis;x86_64" --tag "google_apis" --abi "x86_64"</span>
 <span class="pi">-</span> <span class="s">sudo chmod -R 777 /dev/kvm</span>
 <span class="c1"># Start emulator in background and wait for it to start</span>
 <span class="pi">-</span> <span class="s">adb kill-server &amp;&amp; adb start-server &amp;</span>
 <span class="pi">-</span> <span class="s">sleep </span><span class="m">15</span> <span class="c1"># sleep values may require adjusting depending on the specific build environment</span>
 <span class="pi">-</span> <span class="s">emulator @my_android_33 -no-audio -no-window &amp;</span>
 <span class="pi">-</span> <span class="s">sleep </span><span class="m">60</span>

<span class="na">script</span><span class="pi">:</span>
 <span class="pi">-</span> <span class="s">sdkmanager --list --sdk_root=$ANDROID_HOME | awk '/Installed/{flag=1; next} /Available/{flag=0} flag'</span>
 <span class="pi">-</span> <span class="s">adb devices</span>
 <span class="pi">-</span> <span class="s">.....</span>
</code></pre></div></div>

<h2 id="examples">Examples <a href="#examples" class="toc-anchor">#</a></h2>

<ul>
  <li><a href="https://github.com/roboguice/roboguice/blob/master/.travis.yml">roboguice/roboguice</a> (Google Guide on Android)</li>
  <li><a href="https://github.com/ruboto/ruboto/blob/master/.travis.yml">ruboto/ruboto</a> (A platform for developing apps using JRuby on Android)</li>
  <li><a href="https://github.com/andrewhr/rxjava-android-example/blob/master/.travis.yml">RxJava in Android Example Project</a></li>
  <li><a href="https://github.com/pestrada/android-tdd-playground/blob/master/.travis.yml">Gradle Example Project</a></li>
  <li><a href="https://github.com/embarkmobile/android-maven-example/blob/master/.travis.yml">Maven Example Project</a></li>
  <li><a href="https://github.com/samlsso/Calc/blob/master/.travis.yml">Ionic Cordova Example Project</a></li>
</ul>

<h2 id="build-config-reference">Build Config Reference <a href="#build-config-reference" class="toc-anchor">#</a></h2>

<p>You can find more information on the build config format for <a href="https://config.travis-ci.com/ref/language/android">Android</a> in our <a href="https://config.travis-ci.com/">Travis CI Build Config Reference</a>.</p>


        </main>
      </div><!-- /#content -->

      <footer class="footer">
  <div class="layout-inner">
    <div class="footer-elem">
      <svg width="142px" height="45.381px" viewBox="0 0 142 45.381" enable-background="new 0 0 142 45.381" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink= "http://www.w3.org/1999/xlink">
        <title>Travis CI Mascot</title>
        <image xlink:href="https://styleguide.travis-ci.com/images/logos/travis-footer-logo-new.svg" x="0" y="0" width="142px" height="45.381px" />
      </svg>
    </div>

    <div class="footer-elem"></div>

    <div class="footer-elem">
      <h3 class="footer-title">©Travis CI, GmbH</h3>
      <address>Rigaer Straße 8<br>10247 Berlin, Germany</address>
      <ul>
        <li><a href="https://travisci.workable.com/" title="Jobs at Travis CI">Work with Travis CI</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Help</h3>
      <ul>
        <li><a href="https://docs.travis-ci.com" title="Travis CI Docs">Documentation</a></li>
        <li><a href="https://changelog.travis-ci.com/">Changelog</a></li>
        <li><a href="https://blog.travis-ci.com/" title="Travis CI Blog">Blog</a></li>
        <li><a href="mailto:support@travis-ci.com" title="Email Travis CI support">Email</a></li>
        <li><a href="https://twitter.com/travisci" title="Travis CI on Twitter">Twitter</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Company</h3>
      <ul>
        <li><a href="/imprint.html" title="Imprint">Imprint</a></li>
        <li><a href="https://ideracorp.com/legal/TravisCI">Legal</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Travis CI Status</h3>
      <ul>
        <li><div class="status-circle none">Status:</div>
          <a href="http://www.traviscistatus.com/">Travis CI Status</a>
        </li>
      </ul>
    </div>
  </div>
</footer>

<script>
 fetch('https://pnpcptp8xh9k.statuspage.io/api/v2/status.json').then(function(response) {
   return response.json();
 }).then(function(data) {
   if (data.status && data.status.indicator) {
     document.querySelector('.status-circle').classList.add(data.status.indicator);
   }
 });
</script>

    </div><!-- /.wrapper -->
  </body>
</html>
 contentType 9 text/html url 54 https://docs.travis-ci.com:443/user/languages/android/ responseCode 3 200 