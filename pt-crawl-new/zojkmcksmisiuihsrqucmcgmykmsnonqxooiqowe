zojkmcksmisiuihsrqucmcgmykmsnonqxooiqowe length 5 12068 page 12068 
<html>
<head>
<title>r91875 MediaWiki - Code Review archive</title>
<meta charset="utf-8">
<link rel="stylesheet" href="../ext.codereview.styles.css"/>
</head>
<body>
<h1>r91875 MediaWiki - Code Review archive</h1>
<div id="mw-content-text" class="mw-body-content"><form action="/wiki/Special:Code/MediaWiki/91875" method="post"><table class="mw-codereview-meta"><tr><td>Repository:</td><td><a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki" title="Special:Code/MediaWiki">MediaWiki</a></td></tr>
<tr><td>Revision:</td><td>&lt;&#160;<a href="./91874.html" title="Special:Code/MediaWiki/91874">r91874</a>‎ | <b>r91875</b> | <a href="./91876.html" title="Special:Code/MediaWiki/91876">r91876</a>&#160;&gt;</td></tr>
<tr><td>Date:</td><td>12:23, 11 July 2011</td></tr>
<tr><td>Author:</td><td><a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/author/nikerabbit" title="Special:Code/MediaWiki/author/nikerabbit">nikerabbit</a></td></tr>
<tr><td>Status:</td><td>resolved (<a href="#code-comments">Comments</a>)
</td></tr>
<tr><td>Tags:</td><td></td></tr>
<tr><td>Comment:</td><td><div class="mw-codereview-message">* (<a class="external" href="https://bugzilla.wikimedia.org/show_bug.cgi?id=16699">bug 16699</a>) {{#language:}} accepts second parameter to specify the language in<br />
  which the language name is wanted. Coverage depends on the cldr extension.</div></td></tr>
<tr><td>Modified paths:</td><td><div class='mw-codereview-paths mw-content-ltr'><ul>
<li><b>/trunk/phase3/RELEASE-NOTES-1.19</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fphase3%2FRELEASE-NOTES-1.19" title="Special:Code/MediaWiki">history</a>)</li>
<li><b>/trunk/phase3/includes/parser/CoreParserFunctions.php</b> (modified) (<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki&amp;path=%2Ftrunk%2Fphase3%2Fincludes%2Fparser%2FCoreParserFunctions.php" title="Special:Code/MediaWiki">history</a>)</li>
</ul></div>
</td></tr>
</table>
<h2>Diff <small>[<a href="https://www.mediawiki.org/w/index.php?title=Special:Code/MediaWiki/91875&amp;action=purge" title="Special:Code/MediaWiki/91875">purge</a>]</small></h2><div class='mw-codereview-diff' id='mw-codereview-diff'><table class="mw-codereview-diff"><tr id="1" class="patchedfile"><td colspan="3">Index: trunk/phase3/RELEASE-NOTES-1.19</td></tr>



<tr id="5"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -68,6 +68,8 @@</span></td></tr>
<tr id="6"><td class="linenumbers">69</td><td class="linenumbers">69</td><td class="unchanged"><span>   EditPage::showEditForm:initial</span></td></tr>
<tr id="7"><td class="linenumbers">70</td><td class="linenumbers">70</td><td class="unchanged"><span> * (bug 29723) mw.util.wikiGetlink() now defaults to wgPageName.</span></td></tr>
<tr id="8"><td class="linenumbers">71</td><td class="linenumbers">71</td><td class="unchanged"><span> * (bug 29680) Add GetDefaultSortkey hook to override the default sortkey.</span></td></tr>
<tr id="9"><td class="linenumbers"> </td><td class="linenumbers">72</td><td class="ins"><ins>+* (bug 16699) {{#language:}} accepts second parameter to specify the language in</ins></td></tr>
<tr id="10"><td class="linenumbers"> </td><td class="linenumbers">73</td><td class="ins"><ins>+  which the language name is wanted. Coverage depends on the cldr extension.</ins></td></tr>
<tr id="11"><td class="linenumbers">72</td><td class="linenumbers">74</td><td class="unchanged"><span> </span></td></tr>
<tr id="12"><td class="linenumbers">73</td><td class="linenumbers">75</td><td class="unchanged"><span> === Bug fixes in 1.19 ===</span></td></tr>
<tr id="13"><td class="linenumbers">74</td><td class="linenumbers">76</td><td class="unchanged"><span> * (bug 28868) Show total pages in the subtitle of an image on the</span></td></tr>
<tr id="14" class="patchedfile"><td colspan="3">Index: trunk/phase3/includes/parser/CoreParserFunctions.php</td></tr>



<tr id="18"><td class="linenumbers">—</td><td class="linenumbers">—</td><td class="chunkdelimiter"><span>@@ -597,10 +597,18 @@</span></td></tr>
<tr id="19"><td class="linenumbers">598</td><td class="linenumbers">598</td><td class="unchanged"><span> 		return implode( $restrictions, ',' );</span></td></tr>
<tr id="20"><td class="linenumbers">599</td><td class="linenumbers">599</td><td class="unchanged"><span> 	}</span></td></tr>
<tr id="21"><td class="linenumbers">600</td><td class="linenumbers">600</td><td class="unchanged"><span> </span></td></tr>
<tr id="22"><td class="linenumbers">601</td><td class="linenumbers"> </td><td class="del"><del>-	static function language( $parser, $arg = '' ) {</del></td></tr>
<tr id="23"><td class="linenumbers"> </td><td class="linenumbers">601</td><td class="ins"><ins>+	static function language( $parser, $code = '', $language = '' ) {</ins></td></tr>
<tr id="24"><td class="linenumbers">602</td><td class="linenumbers">602</td><td class="unchanged"><span> 		global $wgContLang;</span></td></tr>
<tr id="25"><td class="linenumbers">603</td><td class="linenumbers"> </td><td class="del"><del>-		$lang = $wgContLang->getLanguageName( strtolower( $arg ) );</del></td></tr>
<tr id="26"><td class="linenumbers">604</td><td class="linenumbers"> </td><td class="del"><del>-		return $lang != '' ? $lang : $arg;</del></td></tr>
<tr id="27"><td class="linenumbers"> </td><td class="linenumbers">603</td><td class="ins"><ins>+		$code = strtolower( $code );</ins></td></tr>
<tr id="28"><td class="linenumbers"> </td><td class="linenumbers">604</td><td class="ins"><ins>+		$language = strtolower( $language );</ins></td></tr>
<tr id="29"><td class="linenumbers"> </td><td class="linenumbers">605</td><td class="ins"><ins>+</ins></td></tr>
<tr id="30"><td class="linenumbers"> </td><td class="linenumbers">606</td><td class="ins"><ins>+		if ( $language !== '' ) {</ins></td></tr>
<tr id="31"><td class="linenumbers"> </td><td class="linenumbers">607</td><td class="ins"><ins>+			$names = Language::getTranslatedLanguageNames( $language );</ins></td></tr>
<tr id="32"><td class="linenumbers"> </td><td class="linenumbers">608</td><td class="ins"><ins>+			return isset( $names[$code] ) ? $names[$code] : wfBCP47( $code );</ins></td></tr>
<tr id="33"><td class="linenumbers"> </td><td class="linenumbers">609</td><td class="ins"><ins>+		}</ins></td></tr>
<tr id="34"><td class="linenumbers"> </td><td class="linenumbers">610</td><td class="ins"><ins>+</ins></td></tr>
<tr id="35"><td class="linenumbers"> </td><td class="linenumbers">611</td><td class="ins"><ins>+		$lang = $wgContLang->getLanguageName( $code );</ins></td></tr>
<tr id="36"><td class="linenumbers"> </td><td class="linenumbers">612</td><td class="ins"><ins>+		return $lang !== '' ? $lang : wfBCP47( $code );</ins></td></tr>
<tr id="37"><td class="linenumbers">605</td><td class="linenumbers">613</td><td class="unchanged"><span> 	}</span></td></tr>
<tr id="38"><td class="linenumbers">606</td><td class="linenumbers">614</td><td class="unchanged"><span> </span></td></tr>
<tr id="39"><td class="linenumbers">607</td><td class="linenumbers">615</td><td class="unchanged"><span> 	/**</span></td></tr>
</table>
</div>
<h2 id='code-references'>Follow-up revisions</h2>
<table border='1' class='wikitable'><tr><th>Revision</th><th>Commit summary</th><th>Author</th><th>Date</th></tr><tr class='mw-codereview-status-ok'><td><a href="./91892.html" title="Special:Code/MediaWiki/91892">r91892</a></td><td>ping <a href="./91875.html" title="Special:Code/MediaWiki/91875">r91875</a></td><td><a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/author/nikerabbit" title="Special:Code/MediaWiki/author/nikerabbit">nikerabbit</a></td><td>18:05, 11 July 2011</td></tr></table><h2 id='code-comments'>Comments</h2>
<div class='mw-codereview-comments'><div class="mw-codereview-comment" id="c19436" style="margin-left: 0px"><div class="mw-codereview-comment-meta"><a href="./91875.html#c19436" title="Special:Code/MediaWiki/91875">#</a>Comment by <a href="https://www.mediawiki.org/wiki/User:Siebrand" class="mw-userlink" title="User:Siebrand"><bdi>Siebrand</bdi></a> <span class="mw-usertoollinks">(<a href="https://www.mediawiki.org/wiki/User_talk:Siebrand" class="mw-usertoollinks-talk" title="User talk:Siebrand">talk</a> | <a href="https://www.mediawiki.org/wiki/Special:Contributions/Siebrand" class="mw-usertoollinks-contribs" title="Special:Contributions/Siebrand">contribs</a>)</span> &#160; 17:25, 11 July 2011 </div><div class="mw-codereview-comment-text mw-content-ltr"><p>Please add parameter documentation for "language()".
</p></div></div>
<div class="mw-codereview-comment" id="c19438" style="margin-left: 48px"><div class="mw-codereview-comment-meta"><a href="./91875.html#c19438" title="Special:Code/MediaWiki/91875">#</a>Comment by <a href="https://www.mediawiki.org/wiki/User:Nikerabbit" class="mw-userlink" title="User:Nikerabbit"><bdi>Nikerabbit</bdi></a> <span class="mw-usertoollinks">(<a href="https://www.mediawiki.org/wiki/User_talk:Nikerabbit" class="mw-usertoollinks-talk" title="User talk:Nikerabbit">talk</a> | <a href="https://www.mediawiki.org/wiki/Special:Contributions/Nikerabbit" class="mw-usertoollinks-contribs" title="Special:Contributions/Nikerabbit">contribs</a>)</span> &#160; 17:52, 11 July 2011 </div><div class="mw-codereview-comment-text mw-content-ltr"><p><a class="external text" href="https://www.mediawiki.org/w/index.php?title=Help:Magic_words&amp;diff=416834&amp;oldid=413662">http://www.mediawiki.org/w/index.php?title=Help:Magic_words&amp;diff=416834&amp;oldid=413662</a>&#160;?
</p></div></div>
<div class="mw-codereview-comment" id="c19440" style="margin-left: 96px"><div class="mw-codereview-comment-meta"><a href="./91875.html#c19440" title="Special:Code/MediaWiki/91875">#</a>Comment by <a href="https://www.mediawiki.org/wiki/User:Siebrand" class="mw-userlink" title="User:Siebrand"><bdi>Siebrand</bdi></a> <span class="mw-usertoollinks">(<a href="https://www.mediawiki.org/wiki/User_talk:Siebrand" class="mw-usertoollinks-talk" title="User talk:Siebrand">talk</a> | <a href="https://www.mediawiki.org/wiki/Special:Contributions/Siebrand" class="mw-usertoollinks-contribs" title="Special:Contributions/Siebrand">contribs</a>)</span> &#160; 17:58, 11 July 2011 </div><div class="mw-codereview-comment-text mw-content-ltr"><p>Then either add that URL/rev to the source code, or document it in the source code, too?
</p></div></div>
<div class="mw-codereview-comment" id="c19441" style="margin-left: 144px"><div class="mw-codereview-comment-meta"><a href="./91875.html#c19441" title="Special:Code/MediaWiki/91875">#</a>Comment by <a href="https://www.mediawiki.org/wiki/User:Nikerabbit" class="mw-userlink" title="User:Nikerabbit"><bdi>Nikerabbit</bdi></a> <span class="mw-usertoollinks">(<a href="https://www.mediawiki.org/wiki/User_talk:Nikerabbit" class="mw-usertoollinks-talk" title="User talk:Nikerabbit">talk</a> | <a href="https://www.mediawiki.org/wiki/Special:Contributions/Nikerabbit" class="mw-usertoollinks-contribs" title="Special:Contributions/Nikerabbit">contribs</a>)</span> &#160; 18:04, 11 July 2011 </div><div class="mw-codereview-comment-text mw-content-ltr"><p>I fail to see the point of documenting that function. It's only called by the parser.
</p></div></div></div><h2 id='code-changes'>Status &amp; tagging log</h2>
<ul class='mw-codereview-changes'><li>23:17, 12 July 2011&#160;<a href="https://www.mediawiki.org/wiki/User:Siebrand" class="mw-userlink" title="User:Siebrand"><bdi>Siebrand</bdi></a> <span class="mw-usertoollinks">(<a href="https://www.mediawiki.org/wiki/User_talk:Siebrand" class="mw-usertoollinks-talk" title="User talk:Siebrand">talk</a> | <a href="https://www.mediawiki.org/wiki/Special:Contributions/Siebrand" class="mw-usertoollinks-contribs" title="Special:Contributions/Siebrand">contribs</a>)</span>&#160;changed the <b>status</b> of r91875 <i>[<b>removed:</b> new&#160;<b>added:</b> resolved]</i></li></ul></form></div>
</body>
</html>
 contentType 9 text/html url 64 https://static-codereview.wikimedia.org:443/MediaWiki/91875.html responseCode 3 200 